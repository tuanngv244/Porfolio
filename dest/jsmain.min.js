!function(e,i){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("jquery")):e.jQueryBridget=i(e,e.jQuery)}(window,function(t,e){"use strict";var i=Array.prototype.slice,n=t.console,u=void 0===n?function(){}:function(t){n.error(t)};function r(l,h,c){(c=c||e||t.jQuery)&&(h.prototype.option||(h.prototype.option=function(t){c.isPlainObject(t)&&(this.options=c.extend(!0,this.options,t))}),c.fn[l]=function(t){return"string"==typeof t?(e=this,r=t,s=i.call(arguments,1),o="$()."+l+'("'+r+'")',e.each(function(t,e){var i,e=c.data(e,l);e?(i=e[r])&&"_"!=r.charAt(0)?(i=i.apply(e,s),a=void 0===a?i:a):u(o+" is not a valid method"):u(l+" not initialized. Cannot call methods, i.e. "+o)}),void 0!==a?a:e):(n=t,this.each(function(t,e){var i=c.data(e,l);i?(i.option(n),i._init()):(i=new h(e,n),c.data(e,l,i))}),this);var n,e,r,s,a,o},s(c))}function s(t){t&&!t.bridget&&(t.bridget=r)}return s(e||t.jQuery),r}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){var i;if(t&&e)return-1==(i=(i=this._events=this._events||{})[t]=i[t]||[]).indexOf(e)&&i.push(e),this},e.once=function(t,e){var i;if(t&&e)return this.on(t,e),((i=this._onceEvents=this._onceEvents||{})[t]=i[t]||{})[e]=!0,this},e.off=function(t,e){t=this._events&&this._events[t];if(t&&t.length)return-1!=(e=t.indexOf(e))&&t.splice(e,1),this},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],r=0;r<i.length;r++){var s=i[r];n&&n[s]&&(this.off(t,s),delete n[s]),s.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}),function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",e):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){"use strict";function g(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}var e="undefined"==typeof console?function(){}:function(t){console.error(t)},A=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],v=A.length;function y(t){t=getComputedStyle(t);return t||e("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),t}var _,b=!1;function x(t){if(b||(b=!0,(c=document.createElement("div")).style.width="200px",c.style.padding="1px 2px 3px 4px",c.style.borderStyle="solid",c.style.borderWidth="1px 2px 3px 4px",c.style.boxSizing="border-box",(h=document.body||document.documentElement).appendChild(c),s=y(c),_=200==Math.round(g(s.width)),x.isBoxSizeOuter=_,h.removeChild(c)),(t="string"==typeof t?document.querySelector(t):t)&&"object"==typeof t&&t.nodeType){var e=y(t);if("none"==e.display){for(var i={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},n=0;n<v;n++)i[A[n]]=0;return i}var r={};r.width=t.offsetWidth,r.height=t.offsetHeight;for(var s=r.isBorderBox="border-box"==e.boxSizing,a=0;a<v;a++){var o=A[a],l=e[o],l=parseFloat(l);r[o]=isNaN(l)?0:l}var h=r.paddingLeft+r.paddingRight,c=r.paddingTop+r.paddingBottom,t=r.marginLeft+r.marginRight,u=r.marginTop+r.marginBottom,d=r.borderLeftWidth+r.borderRightWidth,p=r.borderTopWidth+r.borderBottomWidth,f=s&&_,m=g(e.width),m=(!1!==m&&(r.width=m+(f?0:h+d)),g(e.height));return!1!==m&&(r.height=m+(f?0:c+p)),r.innerWidth=r.width-(h+d),r.innerHeight=r.height-(c+p),r.outerWidth=r.width+t,r.outerHeight=r.height+u,r}var c,h,s}return x}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var i=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i]+"MatchesSelector";if(t[n])return n}}();return function(t,e){return t[i](e)}}),function(e,i){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("desandro-matches-selector")):e.fizzyUIUtils=i(e,e.matchesSelector)}(window,function(i,s){var l={extend:function(t,e){for(var i in e)t[i]=e[i];return t},modulo:function(t,e){return(t%e+e)%e}},e=Array.prototype.slice,h=(l.makeArray=function(t){return Array.isArray(t)?t:null==t?[]:"object"==typeof t&&"number"==typeof t.length?e.call(t):[t]},l.removeFrom=function(t,e){e=t.indexOf(e);-1!=e&&t.splice(e,1)},l.getParent=function(t,e){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,s(t,e))return t},l.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},l.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},l.filterFindElements=function(t,n){t=l.makeArray(t);var r=[];return t.forEach(function(t){if(t instanceof HTMLElement)if(n){s(t,n)&&r.push(t);for(var e=t.querySelectorAll(n),i=0;i<e.length;i++)r.push(e[i])}else r.push(t)}),r},l.debounceMethod=function(t,e,n){n=n||100;var r=t.prototype[e],s=e+"Timeout";t.prototype[e]=function(){var t=this[s],e=(clearTimeout(t),arguments),i=this;this[s]=setTimeout(function(){r.apply(i,e),delete i[s]},n)}},l.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},l.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()},i.console);return l.htmlInit=function(a,o){l.docReady(function(){var t=l.toDashed(o),n="data-"+t,e=document.querySelectorAll("["+n+"]"),t=document.querySelectorAll(".js-"+t),e=l.makeArray(e).concat(l.makeArray(t)),r=n+"-options",s=i.jQuery;e.forEach(function(t){var e,i=t.getAttribute(n)||t.getAttribute(r);try{e=i&&JSON.parse(i)}catch(e){return void(h&&h.error("Error parsing "+n+" on "+t.className+": "+e))}i=new a(t,e);s&&s.data(t,o,i)})})},l}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/cell",["get-size/get-size"],function(t){return e(0,t)}):"object"==typeof module&&module.exports?module.exports=e(0,require("get-size")):(t.Flickity=t.Flickity||{},t.Flickity.Cell=e(0,t.getSize))}(window,function(t,e){function i(t,e){this.element=t,this.parent=e,this.create()}var n=i.prototype;return n.create=function(){this.element.style.position="absolute",this.element.setAttribute("aria-hidden","true"),this.x=0,this.shift=0},n.destroy=function(){this.unselect(),this.element.style.position="";var t=this.parent.originSide;this.element.style[t]=""},n.getSize=function(){this.size=e(this.element)},n.setPosition=function(t){this.x=t,this.updateTarget(),this.renderPosition(t)},n.updateTarget=n.setDefaultTarget=function(){var t="left"==this.parent.originSide?"marginLeft":"marginRight";this.target=this.x+this.size[t]+this.size.width*this.parent.cellAlign},n.renderPosition=function(t){var e=this.parent.originSide;this.element.style[e]=this.parent.getPositionValue(t)},n.select=function(){this.element.classList.add("is-selected"),this.element.removeAttribute("aria-hidden")},n.unselect=function(){this.element.classList.remove("is-selected"),this.element.setAttribute("aria-hidden","true")},n.wrapShift=function(t){this.shift=t,this.renderPosition(this.x+this.parent.slideableWidth*t)},n.remove=function(){this.element.parentNode.removeChild(this.element)},i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/slide",e):"object"==typeof module&&module.exports?module.exports=e():(t.Flickity=t.Flickity||{},t.Flickity.Slide=e())}(window,function(){"use strict";function t(t){this.parent=t,this.isOriginLeft="left"==t.originSide,this.cells=[],this.outerWidth=0,this.height=0}var e=t.prototype;return e.addCell=function(t){var e;this.cells.push(t),this.outerWidth+=t.size.outerWidth,this.height=Math.max(t.size.outerHeight,this.height),1==this.cells.length&&(this.x=t.x,e=this.isOriginLeft?"marginLeft":"marginRight",this.firstMargin=t.size[e])},e.updateTarget=function(){var t=this.isOriginLeft?"marginRight":"marginLeft",e=this.getLastCell(),e=e?e.size[t]:0,t=this.outerWidth-(this.firstMargin+e);this.target=this.x+this.firstMargin+t*this.parent.cellAlign},e.getLastCell=function(){return this.cells[this.cells.length-1]},e.select=function(){this.cells.forEach(function(t){t.select()})},e.unselect=function(){this.cells.forEach(function(t){t.unselect()})},e.getCellElements=function(){return this.cells.map(function(t){return t.element})},t}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/animate",["fizzy-ui-utils/utils"],function(t){return e(0,t)}):"object"==typeof module&&module.exports?module.exports=e(0,require("fizzy-ui-utils")):(t.Flickity=t.Flickity||{},t.Flickity.animatePrototype=e(0,t.fizzyUIUtils))}(window,function(t,e){return{startAnimation:function(){this.isAnimating||(this.isAnimating=!0,this.restingFrames=0,this.animate())},animate:function(){this.applyDragForce(),this.applySelectedAttraction();var t,e=this.x;this.integratePhysics(),this.positionSlider(),this.settle(e),this.isAnimating&&(t=this,requestAnimationFrame(function(){t.animate()}))},positionSlider:function(){var t=this.x;this.options.wrapAround&&1<this.cells.length&&(t=e.modulo(t,this.slideableWidth),t-=this.slideableWidth,this.shiftWrapCells(t)),this.setTranslateX(t,this.isAnimating),this.dispatchScrollEvent()},setTranslateX:function(t,e){t+=this.cursorPosition,t=this.options.rightToLeft?-t:t;t=this.getPositionValue(t);this.slider.style.transform=e?"translate3d("+t+",0,0)":"translateX("+t+")"},dispatchScrollEvent:function(){var t,e=this.slides[0];e&&(t=(e=-this.x-e.target)/this.slidesWidth,this.dispatchEvent("scroll",null,[t,e]))},positionSliderAtSelected:function(){this.cells.length&&(this.x=-this.selectedSlide.target,this.velocity=0,this.positionSlider())},getPositionValue:function(t){return this.options.percentPosition?.01*Math.round(t/this.size.innerWidth*1e4)+"%":Math.round(t)+"px"},settle:function(t){this.isPointerDown||Math.round(100*this.x)!=Math.round(100*t)||this.restingFrames++,2<this.restingFrames&&(this.isAnimating=!1,delete this.isFreeScrolling,this.positionSlider(),this.dispatchEvent("settle",null,[this.selectedIndex]))},shiftWrapCells:function(t){var e=this.cursorPosition+t,e=(this._shiftCells(this.beforeShiftCells,e,-1),this.size.innerWidth-(t+this.slideableWidth+this.cursorPosition));this._shiftCells(this.afterShiftCells,e,1)},_shiftCells:function(t,e,i){for(var n=0;n<t.length;n++){var r=t[n];r.wrapShift(0<e?i:0),e-=r.size.outerWidth}},_unshiftCells:function(t){if(t&&t.length)for(var e=0;e<t.length;e++)t[e].wrapShift(0)},integratePhysics:function(){this.x+=this.velocity,this.velocity*=this.getFrictionFactor()},applyForce:function(t){this.velocity+=t},getFrictionFactor:function(){return 1-this.options[this.isFreeScrolling?"freeScrollFriction":"friction"]},getRestingPosition:function(){return this.x+this.velocity/(1-this.getFrictionFactor())},applyDragForce:function(){var t;this.isDraggable&&this.isPointerDown&&(t=this.dragX-this.x-this.velocity,this.applyForce(t))},applySelectedAttraction:function(){var t;this.isDraggable&&this.isPointerDown||this.isFreeScrolling||!this.slides.length||(t=(-1*this.selectedSlide.target-this.x)*this.options.selectedAttraction,this.applyForce(t))}}}),function(a,o){var t;"function"==typeof define&&define.amd?define("flickity/js/flickity",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./cell","./slide","./animate"],function(t,e,i,n,r,s){return o(a,t,e,i,n,r,s)}):"object"==typeof module&&module.exports?module.exports=o(a,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./cell"),require("./slide"),require("./animate")):(t=a.Flickity,a.Flickity=o(a,a.EvEmitter,a.getSize,a.fizzyUIUtils,t.Cell,t.Slide,t.animatePrototype))}(window,function(n,t,e,a,i,o,r){var s=n.jQuery,l=n.getComputedStyle,h=n.console;function c(t,e){for(t=a.makeArray(t);t.length;)e.appendChild(t.shift())}var u=0,d={};function p(t,e){var i,n=a.getQueryElement(t);if(n){if(this.element=n,this.element.flickityGUID)return(i=d[this.element.flickityGUID]).option(e),i;s&&(this.$element=s(this.element)),this.options=a.extend({},this.constructor.defaults),this.option(e),this._create()}else h&&h.error("Bad element for Flickity: "+(n||t))}p.defaults={accessibility:!0,cellAlign:"center",freeScrollFriction:.075,friction:.28,namespaceJQueryEvents:!0,percentPosition:!0,resize:!0,selectedAttraction:.025,setGallerySize:!0},p.createMethods=[];var f=p.prototype,m=(a.extend(f,t.prototype),f._create=function(){var t,e=this.guid=++u;for(t in this.element.flickityGUID=e,(d[e]=this).selectedIndex=0,this.restingFrames=0,this.x=0,this.velocity=0,this.originSide=this.options.rightToLeft?"right":"left",this.viewport=document.createElement("div"),this.viewport.className="flickity-viewport",this._createSlider(),(this.options.resize||this.options.watchCSS)&&n.addEventListener("resize",this),this.options.on){var i=this.options.on[t];this.on(t,i)}p.createMethods.forEach(function(t){this[t]()},this),this.options.watchCSS?this.watchCSS():this.activate()},f.option=function(t){a.extend(this.options,t)},f.activate=function(){this.isActive||(this.isActive=!0,this.element.classList.add("flickity-enabled"),this.options.rightToLeft&&this.element.classList.add("flickity-rtl"),this.getSize(),c(this._filterFindCellElements(this.element.children),this.slider),this.viewport.appendChild(this.slider),this.element.appendChild(this.viewport),this.reloadCells(),this.options.accessibility&&(this.element.tabIndex=0,this.element.addEventListener("keydown",this)),this.emitEvent("activate"),this.selectInitialIndex(),this.isInitActivated=!0,this.dispatchEvent("ready"))},f._createSlider=function(){var t=document.createElement("div");t.className="flickity-slider",t.style[this.originSide]=0,this.slider=t},f._filterFindCellElements=function(t){return a.filterFindElements(t,this.options.cellSelector)},f.reloadCells=function(){this.cells=this._makeCells(this.slider.children),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize()},f._makeCells=function(t){return this._filterFindCellElements(t).map(function(t){return new i(t,this)},this)},f.getLastCell=function(){return this.cells[this.cells.length-1]},f.getLastSlide=function(){return this.slides[this.slides.length-1]},f.positionCells=function(){this._sizeCells(this.cells),this._positionCells(0)},f._positionCells=function(t){this.maxCellHeight=(t=t||0)&&this.maxCellHeight||0;var e,i=0;0<t&&(i=(e=this.cells[t-1]).x+e.size.outerWidth);for(var n=this.cells.length,r=t;r<n;r++){var s=this.cells[r];s.setPosition(i),i+=s.size.outerWidth,this.maxCellHeight=Math.max(s.size.outerHeight,this.maxCellHeight)}this.slideableWidth=i,this.updateSlides(),this._containSlides(),this.slidesWidth=n?this.getLastSlide().target-this.slides[0].target:0},f._sizeCells=function(t){t.forEach(function(t){t.getSize()})},f.updateSlides=function(){var n,r,s;this.slides=[],this.cells.length&&(n=new o(this),this.slides.push(n),r="left"==this.originSide?"marginRight":"marginLeft",s=this._getCanCellFit(),this.cells.forEach(function(t,e){var i;n.cells.length&&(i=n.outerWidth-n.firstMargin+(t.size.outerWidth-t.size[r]),s.call(this,e,i)||(n.updateTarget(),n=new o(this),this.slides.push(n))),n.addCell(t)},this),n.updateTarget(),this.updateSelectedSlide())},f._getCanCellFit=function(){var e,t=this.options.groupCells;if(!t)return function(){return!1};if("number"==typeof t)return e=parseInt(t,10),function(t){return t%e!=0};var t="string"==typeof t&&t.match(/^(\d+)%$/),i=t?parseInt(t[1],10)/100:1;return function(t,e){return e<=(this.size.innerWidth+1)*i}},f._init=f.reposition=function(){this.positionCells(),this.positionSliderAtSelected()},f.getSize=function(){this.size=e(this.element),this.setCellAlign(),this.cursorPosition=this.size.innerWidth*this.cellAlign},{center:{left:.5,right:.5},left:{left:0,right:1},right:{right:0,left:1}});return f.setCellAlign=function(){var t=m[this.options.cellAlign];this.cellAlign=t?t[this.originSide]:this.options.cellAlign},f.setGallerySize=function(){var t;this.options.setGallerySize&&(t=this.options.adaptiveHeight&&this.selectedSlide?this.selectedSlide.height:this.maxCellHeight,this.viewport.style.height=t+"px")},f._getWrapShiftCells=function(){var t,e;this.options.wrapAround&&(this._unshiftCells(this.beforeShiftCells),this._unshiftCells(this.afterShiftCells),t=this.cursorPosition,e=this.cells.length-1,this.beforeShiftCells=this._getGapCells(t,e,-1),t=this.size.innerWidth-this.cursorPosition,this.afterShiftCells=this._getGapCells(t,0,1))},f._getGapCells=function(t,e,i){for(var n=[];0<t;){var r=this.cells[e];if(!r)break;n.push(r),e+=i,t-=r.size.outerWidth}return n},f._containSlides=function(){var t,e,i,n,r,s;this.options.contain&&!this.options.wrapAround&&this.cells.length&&(t=(e=this.options.rightToLeft)?"marginRight":"marginLeft",e=e?"marginLeft":"marginRight",i=this.slideableWidth-this.getLastCell().size[e],n=i<this.size.innerWidth,r=this.cursorPosition+this.cells[0].size[t],s=i-this.size.innerWidth*(1-this.cellAlign),this.slides.forEach(function(t){n?t.target=i*this.cellAlign:(t.target=Math.max(t.target,r),t.target=Math.min(t.target,s))},this))},f.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;this.emitEvent(t,n),s&&this.$element&&(n=t+=this.options.namespaceJQueryEvents?".flickity":"",e&&((e=s.Event(e)).type=t,n=e),this.$element.trigger(n,i))},f.select=function(t,e,i){this.isActive&&(t=parseInt(t,10),this._wrapSelect(t),(this.options.wrapAround||e)&&(t=a.modulo(t,this.slides.length)),this.slides[t])&&(e=this.selectedIndex,this.selectedIndex=t,this.updateSelectedSlide(),i?this.positionSliderAtSelected():this.startAnimation(),this.options.adaptiveHeight&&this.setGallerySize(),this.dispatchEvent("select",null,[t]),t!=e&&this.dispatchEvent("change",null,[t]),this.dispatchEvent("cellSelect"))},f._wrapSelect=function(t){var e=this.slides.length;if(!(this.options.wrapAround&&1<e))return t;var i=a.modulo(t,e),n=Math.abs(i-this.selectedIndex),r=Math.abs(i+e-this.selectedIndex),i=Math.abs(i-e-this.selectedIndex);!this.isDragSelect&&r<n?t+=e:!this.isDragSelect&&i<n&&(t-=e),t<0?this.x-=this.slideableWidth:e<=t&&(this.x+=this.slideableWidth)},f.previous=function(t,e){this.select(this.selectedIndex-1,t,e)},f.next=function(t,e){this.select(this.selectedIndex+1,t,e)},f.updateSelectedSlide=function(){var t=this.slides[this.selectedIndex];t&&(this.unselectSelectedSlide(),(this.selectedSlide=t).select(),this.selectedCells=t.cells,this.selectedElements=t.getCellElements(),this.selectedCell=t.cells[0],this.selectedElement=this.selectedElements[0])},f.unselectSelectedSlide=function(){this.selectedSlide&&this.selectedSlide.unselect()},f.selectInitialIndex=function(){var t,e=this.options.initialIndex;this.isInitActivated?this.select(this.selectedIndex,!1,!0):e&&"string"==typeof e&&this.queryCell(e)?this.selectCell(e,!1,!0):(t=0,e&&this.slides[e]&&(t=e),this.select(t,!1,!0))},f.selectCell=function(t,e,i){var t=this.queryCell(t);t&&(t=this.getCellSlideIndex(t),this.select(t,e,i))},f.getCellSlideIndex=function(t){for(var e=0;e<this.slides.length;e++)if(-1!=this.slides[e].cells.indexOf(t))return e},f.getCell=function(t){for(var e=0;e<this.cells.length;e++){var i=this.cells[e];if(i.element==t)return i}},f.getCells=function(t){t=a.makeArray(t);var e=[];return t.forEach(function(t){t=this.getCell(t);t&&e.push(t)},this),e},f.getCellElements=function(){return this.cells.map(function(t){return t.element})},f.getParentCell=function(t){return this.getCell(t)||(t=a.getParent(t,".flickity-slider > *"),this.getCell(t))},f.getAdjacentCellElements=function(t,e){if(!t)return this.selectedSlide.getCellElements();e=void 0===e?this.selectedIndex:e;var i=this.slides.length;if(i<=1+2*t)return this.getCellElements();for(var n=[],r=e-t;r<=e+t;r++){var s=this.options.wrapAround?a.modulo(r,i):r,s=this.slides[s];s&&(n=n.concat(s.getCellElements()))}return n},f.queryCell=function(t){if("number"==typeof t)return this.cells[t];if("string"==typeof t){if(t.match(/^[#\.]?[\d\/]/))return;t=this.element.querySelector(t)}return this.getCell(t)},f.uiChange=function(){this.emitEvent("uiChange")},f.childUIPointerDown=function(t){"touchstart"!=t.type&&t.preventDefault(),this.focus()},f.onresize=function(){this.watchCSS(),this.resize()},a.debounceMethod(p,"onresize",150),f.resize=function(){var t;this.isActive&&(this.getSize(),this.options.wrapAround&&(this.x=a.modulo(this.x,this.slideableWidth)),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize(),this.emitEvent("resize"),t=this.selectedElements&&this.selectedElements[0],this.selectCell(t,!1,!0))},f.watchCSS=function(){this.options.watchCSS&&(-1!=l(this.element,":after").content.indexOf("flickity")?this.activate():this.deactivate())},f.onkeydown=function(t){var e=document.activeElement&&document.activeElement!=this.element;this.options.accessibility&&!e&&(e=p.keyboardHandlers[t.keyCode])&&e.call(this)},p.keyboardHandlers={37:function(){var t=this.options.rightToLeft?"next":"previous";this.uiChange(),this[t]()},39:function(){var t=this.options.rightToLeft?"previous":"next";this.uiChange(),this[t]()}},f.focus=function(){var t=n.pageYOffset;this.element.focus({preventScroll:!0}),n.pageYOffset!=t&&n.scrollTo(n.pageXOffset,t)},f.deactivate=function(){this.isActive&&(this.element.classList.remove("flickity-enabled"),this.element.classList.remove("flickity-rtl"),this.unselectSelectedSlide(),this.cells.forEach(function(t){t.destroy()}),this.element.removeChild(this.viewport),c(this.slider.children,this.element),this.options.accessibility&&(this.element.removeAttribute("tabIndex"),this.element.removeEventListener("keydown",this)),this.isActive=!1,this.emitEvent("deactivate"))},f.destroy=function(){this.deactivate(),n.removeEventListener("resize",this),this.allOff(),this.emitEvent("destroy"),s&&this.$element&&s.removeData(this.element,"flickity"),delete this.element.flickityGUID,delete d[this.guid]},a.extend(f,r),p.data=function(t){t=(t=a.getQueryElement(t))&&t.flickityGUID;return t&&d[t]},a.htmlInit(p,"flickity"),s&&s.bridget&&s.bridget("flickity",p),p.setJQuery=function(t){s=t},p.Cell=i,p.Slide=o,p}),function(e,i){"function"==typeof define&&define.amd?define("unipointer/unipointer",["ev-emitter/ev-emitter"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("ev-emitter")):e.Unipointer=i(e,e.EvEmitter)}(window,function(n,t){function e(){}var t=e.prototype=Object.create(t.prototype),i=(t.bindStartEvent=function(t){this._bindStartEvent(t,!0)},t.unbindStartEvent=function(t){this._bindStartEvent(t,!1)},t._bindStartEvent=function(t,e){var e=(e=void 0===e||e)?"addEventListener":"removeEventListener",i="mousedown";n.PointerEvent?i="pointerdown":"ontouchstart"in n&&(i="touchstart"),t[e](i,this)},t.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},t.getTouch=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.identifier==this.pointerIdentifier)return i}},t.onmousedown=function(t){var e=t.button;e&&0!==e&&1!==e||this._pointerDown(t,t)},t.ontouchstart=function(t){this._pointerDown(t,t.changedTouches[0])},t.onpointerdown=function(t){this._pointerDown(t,t)},t._pointerDown=function(t,e){t.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==e.pointerId?e.pointerId:e.identifier,this.pointerDown(t,e))},t.pointerDown=function(t,e){this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e])},{mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]});return t._bindPostStartEvents=function(t){t&&((t=i[t.type]).forEach(function(t){n.addEventListener(t,this)},this),this._boundPointerEvents=t)},t._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(t){n.removeEventListener(t,this)},this),delete this._boundPointerEvents)},t.onmousemove=function(t){this._pointerMove(t,t)},t.onpointermove=function(t){t.pointerId==this.pointerIdentifier&&this._pointerMove(t,t)},t.ontouchmove=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerMove(t,e)},t._pointerMove=function(t,e){this.pointerMove(t,e)},t.pointerMove=function(t,e){this.emitEvent("pointerMove",[t,e])},t.onmouseup=function(t){this._pointerUp(t,t)},t.onpointerup=function(t){t.pointerId==this.pointerIdentifier&&this._pointerUp(t,t)},t.ontouchend=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerUp(t,e)},t._pointerUp=function(t,e){this._pointerDone(),this.pointerUp(t,e)},t.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e])},t._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},t._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},t.pointerDone=function(){},t.onpointercancel=function(t){t.pointerId==this.pointerIdentifier&&this._pointerCancel(t,t)},t.ontouchcancel=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerCancel(t,e)},t._pointerCancel=function(t,e){this._pointerDone(),this.pointerCancel(t,e)},t.pointerCancel=function(t,e){this.emitEvent("pointerCancel",[t,e])},e.getPointerPoint=function(t){return{x:t.pageX,y:t.pageY}},e}),function(e,i){"function"==typeof define&&define.amd?define("unidragger/unidragger",["unipointer/unipointer"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("unipointer")):e.Unidragger=i(e,e.Unipointer)}(window,function(s,t){function e(){}var i=e.prototype=Object.create(t.prototype),n=(i.bindHandles=function(){this._bindHandles(!0)},i.unbindHandles=function(){this._bindHandles(!1)},i._bindHandles=function(t){for(var e=(t=void 0===t||t)?"addEventListener":"removeEventListener",i=t?this._touchActionValue:"",n=0;n<this.handles.length;n++){var r=this.handles[n];this._bindStartEvent(r,t),r[e]("click",this),s.PointerEvent&&(r.style.touchAction=i)}},i._touchActionValue="none",i.pointerDown=function(t,e){this.okayPointerDown(t)&&(this.pointerDownPointer=e,t.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e]))},{TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0}),r={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return i.okayPointerDown=function(t){var e=n[t.target.nodeName],t=r[t.target.type],e=!e||t;return e||this._pointerReset(),e},i.pointerDownBlur=function(){var t=document.activeElement;t&&t.blur&&t!=document.body&&t.blur()},i.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.emitEvent("pointerMove",[t,e,i]),this._dragMove(t,e,i)},i._dragPointerMove=function(t,e){var i={x:e.pageX-this.pointerDownPointer.pageX,y:e.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(i)&&this._dragStart(t,e),i},i.hasDragStarted=function(t){return 3<Math.abs(t.x)||3<Math.abs(t.y)},i.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e]),this._dragPointerUp(t,e)},i._dragPointerUp=function(t,e){this.isDragging?this._dragEnd(t,e):this._staticClick(t,e)},i._dragStart=function(t,e){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(t,e)},i.dragStart=function(t,e){this.emitEvent("dragStart",[t,e])},i._dragMove=function(t,e,i){this.isDragging&&this.dragMove(t,e,i)},i.dragMove=function(t,e,i){t.preventDefault(),this.emitEvent("dragMove",[t,e,i])},i._dragEnd=function(t,e){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(t,e)},i.dragEnd=function(t,e){this.emitEvent("dragEnd",[t,e])},i.onclick=function(t){this.isPreventingClicks&&t.preventDefault()},i._staticClick=function(t,e){this.isIgnoringMouseUp&&"mouseup"==t.type||(this.staticClick(t,e),"mouseup"!=t.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},i.staticClick=function(t,e){this.emitEvent("staticClick",[t,e])},e.getPointerPoint=t.getPointerPoint,e}),function(n,r){"function"==typeof define&&define.amd?define("flickity/js/drag",["./flickity","unidragger/unidragger","fizzy-ui-utils/utils"],function(t,e,i){return r(n,t,e,i)}):"object"==typeof module&&module.exports?module.exports=r(n,require("./flickity"),require("unidragger"),require("fizzy-ui-utils")):n.Flickity=r(n,n.Flickity,n.Unidragger,n.fizzyUIUtils)}(window,function(i,t,e,s){s.extend(t.defaults,{draggable:">1",dragThreshold:3}),t.createMethods.push("_createDrag");var n=t.prototype,r=(s.extend(n,e.prototype),n._touchActionValue="pan-y","createTouch"in document),a=!1,o=(n._createDrag=function(){this.on("activate",this.onActivateDrag),this.on("uiChange",this._uiChangeDrag),this.on("deactivate",this.onDeactivateDrag),this.on("cellChange",this.updateDraggable),r&&!a&&(i.addEventListener("touchmove",function(){}),a=!0)},n.onActivateDrag=function(){this.handles=[this.viewport],this.bindHandles(),this.updateDraggable()},n.onDeactivateDrag=function(){this.unbindHandles(),this.element.classList.remove("is-draggable")},n.updateDraggable=function(){">1"==this.options.draggable?this.isDraggable=1<this.slides.length:this.isDraggable=this.options.draggable,this.isDraggable?this.element.classList.add("is-draggable"):this.element.classList.remove("is-draggable")},n.bindDrag=function(){this.options.draggable=!0,this.updateDraggable()},n.unbindDrag=function(){this.options.draggable=!1,this.updateDraggable()},n._uiChangeDrag=function(){delete this.isFreeScrolling},n.pointerDown=function(t,e){this.isDraggable?this.okayPointerDown(t)&&(this._pointerDownPreventDefault(t),this.pointerDownFocus(t),document.activeElement!=this.element&&this.pointerDownBlur(),this.dragX=this.x,this.viewport.classList.add("is-pointer-down"),this.pointerDownScroll=l(),i.addEventListener("scroll",this),this._pointerDownDefault(t,e)):this._pointerDownDefault(t,e)},n._pointerDownDefault=function(t,e){this.pointerDownPointer={pageX:e.pageX,pageY:e.pageY},this._bindPostStartEvents(t),this.dispatchEvent("pointerDown",t,[e])},{INPUT:!0,TEXTAREA:!0,SELECT:!0});function l(){return{x:i.pageXOffset,y:i.pageYOffset}}return n.pointerDownFocus=function(t){o[t.target.nodeName]||this.focus()},n._pointerDownPreventDefault=function(t){var e="touchstart"==t.type,i="touch"==t.pointerType,n=o[t.target.nodeName];e||i||n||t.preventDefault()},n.hasDragStarted=function(t){return Math.abs(t.x)>this.options.dragThreshold},n.pointerUp=function(t,e){delete this.isTouchScrolling,this.viewport.classList.remove("is-pointer-down"),this.dispatchEvent("pointerUp",t,[e]),this._dragPointerUp(t,e)},n.pointerDone=function(){i.removeEventListener("scroll",this),delete this.pointerDownScroll},n.dragStart=function(t,e){this.isDraggable&&(this.dragStartPosition=this.x,this.startAnimation(),i.removeEventListener("scroll",this),this.dispatchEvent("dragStart",t,[e]))},n.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.dispatchEvent("pointerMove",t,[e,i]),this._dragMove(t,e,i)},n.dragMove=function(t,e,i){var n,r;this.isDraggable&&(t.preventDefault(),this.previousDragX=this.dragX,n=this.options.rightToLeft?-1:1,this.options.wrapAround&&(i.x=i.x%this.slideableWidth),n=this.dragStartPosition+i.x*n,!this.options.wrapAround&&this.slides.length&&(n=(n=(r=Math.max(-this.slides[0].target,this.dragStartPosition))<n?.5*(n+r):n)<(r=Math.min(-this.getLastSlide().target,this.dragStartPosition))?.5*(n+r):n),this.dragX=n,this.dragMoveTime=new Date,this.dispatchEvent("dragMove",t,[e,i]))},n.dragEnd=function(t,e){var i,n;this.isDraggable&&(this.options.freeScroll&&(this.isFreeScrolling=!0),i=this.dragEndRestingSelect(),this.options.freeScroll&&!this.options.wrapAround?(n=this.getRestingPosition(),this.isFreeScrolling=-n>this.slides[0].target&&-n<this.getLastSlide().target):this.options.freeScroll||i!=this.selectedIndex||(i+=this.dragEndBoostSelect()),delete this.previousDragX,this.isDragSelect=this.options.wrapAround,this.select(i),delete this.isDragSelect,this.dispatchEvent("dragEnd",t,[e]))},n.dragEndRestingSelect=function(){var t=this.getRestingPosition(),e=Math.abs(this.getSlideDistance(-t,this.selectedIndex)),i=this._getClosestResting(t,e,1),t=this._getClosestResting(t,e,-1);return(i.distance<t.distance?i:t).index},n._getClosestResting=function(t,e,i){for(var n=this.selectedIndex,r=1/0,s=this.options.contain&&!this.options.wrapAround?function(t,e){return t<=e}:function(t,e){return t<e};s(e,r)&&(r=e,null!==(e=this.getSlideDistance(-t,n+=i)));)e=Math.abs(e);return{distance:r,index:n-i}},n.getSlideDistance=function(t,e){var i=this.slides.length,n=this.options.wrapAround&&1<i,r=n?s.modulo(e,i):e,r=this.slides[r];if(!r)return null;n=n?this.slideableWidth*Math.floor(e/i):0;return t-(r.target+n)},n.dragEndBoostSelect=function(){if(void 0===this.previousDragX||!this.dragMoveTime||100<new Date-this.dragMoveTime)return 0;var t=this.getSlideDistance(-this.dragX,this.selectedIndex),e=this.previousDragX-this.dragX;return 0<t&&0<e?1:t<0&&e<0?-1:0},n.staticClick=function(t,e){var i=this.getParentCell(t.target),n=i&&i.element,i=i&&this.cells.indexOf(i);this.dispatchEvent("staticClick",t,[e,n,i])},n.onscroll=function(){var t=l(),e=this.pointerDownScroll.x-t.x,t=this.pointerDownScroll.y-t.y;(3<Math.abs(e)||3<Math.abs(t))&&this._pointerDone()},t}),function(t,n){"function"==typeof define&&define.amd?define("flickity/js/prev-next-button",["./flickity","unipointer/unipointer","fizzy-ui-utils/utils"],function(t,e,i){return n(0,t,e,i)}):"object"==typeof module&&module.exports?module.exports=n(0,require("./flickity"),require("unipointer"),require("fizzy-ui-utils")):n(0,t.Flickity,t.Unipointer,t.fizzyUIUtils)}(window,function(t,e,i,n){"use strict";var r="http://www.w3.org/2000/svg";function s(t,e){this.direction=t,this.parent=e,this._create()}(s.prototype=Object.create(i.prototype))._create=function(){this.isEnabled=!0,this.isPrevious=-1==this.direction;var t=this.parent.options.rightToLeft?1:-1,t=(this.isLeft=this.direction==t,this.element=document.createElement("button")),e=(t.className="flickity-button flickity-prev-next-button",t.className+=this.isPrevious?" previous":" next",t.setAttribute("type","button"),this.disable(),t.setAttribute("aria-label",this.isPrevious?"Previous":"Next"),this.createSVG());t.appendChild(e),this.parent.on("select",this.update.bind(this)),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},s.prototype.activate=function(){this.bindStartEvent(this.element),this.element.addEventListener("click",this),this.parent.element.appendChild(this.element)},s.prototype.deactivate=function(){this.parent.element.removeChild(this.element),this.unbindStartEvent(this.element),this.element.removeEventListener("click",this)},s.prototype.createSVG=function(){var t=document.createElementNS(r,"svg"),e=(t.setAttribute("class","flickity-button-icon"),t.setAttribute("viewBox","0 0 100 100"),document.createElementNS(r,"path")),i="string"!=typeof(i=this.parent.options.arrowShape)?"M "+i.x0+",50 L "+i.x1+","+(i.y1+50)+" L "+i.x2+","+(i.y2+50)+" L "+i.x3+",50  L "+i.x2+","+(50-i.y2)+" L "+i.x1+","+(50-i.y1)+" Z":i;return e.setAttribute("d",i),e.setAttribute("class","arrow"),this.isLeft||e.setAttribute("transform","translate(100, 100) rotate(180) "),t.appendChild(e),t},s.prototype.handleEvent=n.handleEvent,s.prototype.onclick=function(){var t;this.isEnabled&&(this.parent.uiChange(),t=this.isPrevious?"previous":"next",this.parent[t]())},s.prototype.enable=function(){this.isEnabled||(this.element.disabled=!1,this.isEnabled=!0)},s.prototype.disable=function(){this.isEnabled&&(this.element.disabled=!0,this.isEnabled=!1)},s.prototype.update=function(){var t=this.parent.slides;this.parent.options.wrapAround&&1<t.length?this.enable():(t=t.length?t.length-1:0,t=this.isPrevious?0:t,this[this.parent.selectedIndex==t?"disable":"enable"]())},s.prototype.destroy=function(){this.deactivate(),this.allOff()},n.extend(e.defaults,{prevNextButtons:!0,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}}),e.createMethods.push("_createPrevNextButtons");i=e.prototype;return i._createPrevNextButtons=function(){this.options.prevNextButtons&&(this.prevButton=new s(-1,this),this.nextButton=new s(1,this),this.on("activate",this.activatePrevNextButtons))},i.activatePrevNextButtons=function(){this.prevButton.activate(),this.nextButton.activate(),this.on("deactivate",this.deactivatePrevNextButtons)},i.deactivatePrevNextButtons=function(){this.prevButton.deactivate(),this.nextButton.deactivate(),this.off("deactivate",this.deactivatePrevNextButtons)},e.PrevNextButton=s,e}),function(t,n){"function"==typeof define&&define.amd?define("flickity/js/page-dots",["./flickity","unipointer/unipointer","fizzy-ui-utils/utils"],function(t,e,i){return n(0,t,e,i)}):"object"==typeof module&&module.exports?module.exports=n(0,require("./flickity"),require("unipointer"),require("fizzy-ui-utils")):n(0,t.Flickity,t.Unipointer,t.fizzyUIUtils)}(window,function(t,e,i,n){function r(t){this.parent=t,this._create()}(r.prototype=Object.create(i.prototype))._create=function(){this.holder=document.createElement("ol"),this.holder.className="flickity-page-dots",this.dots=[],this.handleClick=this.onClick.bind(this),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},r.prototype.activate=function(){this.setDots(),this.holder.addEventListener("click",this.handleClick),this.bindStartEvent(this.holder),this.parent.element.appendChild(this.holder)},r.prototype.deactivate=function(){this.holder.removeEventListener("click",this.handleClick),this.unbindStartEvent(this.holder),this.parent.element.removeChild(this.holder)},r.prototype.setDots=function(){var t=this.parent.slides.length-this.dots.length;0<t?this.addDots(t):t<0&&this.removeDots(-t)},r.prototype.addDots=function(t){for(var e=document.createDocumentFragment(),i=[],n=this.dots.length,r=n+t,s=n;s<r;s++){var a=document.createElement("li");a.className="dot",a.setAttribute("aria-label","Page dot "+(s+1)),e.appendChild(a),i.push(a)}this.holder.appendChild(e),this.dots=this.dots.concat(i)},r.prototype.removeDots=function(t){this.dots.splice(this.dots.length-t,t).forEach(function(t){this.holder.removeChild(t)},this)},r.prototype.updateSelected=function(){this.selectedDot&&(this.selectedDot.className="dot",this.selectedDot.removeAttribute("aria-current")),this.dots.length&&(this.selectedDot=this.dots[this.parent.selectedIndex],this.selectedDot.className="dot is-selected",this.selectedDot.setAttribute("aria-current","step"))},r.prototype.onTap=r.prototype.onClick=function(t){var t=t.target;"LI"==t.nodeName&&(this.parent.uiChange(),t=this.dots.indexOf(t),this.parent.select(t))},r.prototype.destroy=function(){this.deactivate(),this.allOff()},e.PageDots=r,n.extend(e.defaults,{pageDots:!0}),e.createMethods.push("_createPageDots");i=e.prototype;return i._createPageDots=function(){this.options.pageDots&&(this.pageDots=new r(this),this.on("activate",this.activatePageDots),this.on("select",this.updateSelectedPageDots),this.on("cellChange",this.updatePageDots),this.on("resize",this.updatePageDots),this.on("deactivate",this.deactivatePageDots))},i.activatePageDots=function(){this.pageDots.activate()},i.updateSelectedPageDots=function(){this.pageDots.updateSelected()},i.updatePageDots=function(){this.pageDots.setDots()},i.deactivatePageDots=function(){this.pageDots.deactivate()},e.PageDots=r,e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/player",["ev-emitter/ev-emitter","fizzy-ui-utils/utils","./flickity"],e):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("fizzy-ui-utils"),require("./flickity")):e(t.EvEmitter,t.fizzyUIUtils,t.Flickity)}(window,function(t,e,i){function n(t){this.parent=t,this.state="stopped",this.onVisibilityChange=this.visibilityChange.bind(this),this.onVisibilityPlay=this.visibilityPlay.bind(this)}(n.prototype=Object.create(t.prototype)).play=function(){"playing"!=this.state&&(document.hidden?document.addEventListener("visibilitychange",this.onVisibilityPlay):(this.state="playing",document.addEventListener("visibilitychange",this.onVisibilityChange),this.tick()))},n.prototype.tick=function(){var t,e;"playing"==this.state&&(t="number"==typeof(t=this.parent.options.autoPlay)?t:3e3,(e=this).clear(),this.timeout=setTimeout(function(){e.parent.next(!0),e.tick()},t))},n.prototype.stop=function(){this.state="stopped",this.clear(),document.removeEventListener("visibilitychange",this.onVisibilityChange)},n.prototype.clear=function(){clearTimeout(this.timeout)},n.prototype.pause=function(){"playing"==this.state&&(this.state="paused",this.clear())},n.prototype.unpause=function(){"paused"==this.state&&this.play()},n.prototype.visibilityChange=function(){this[document.hidden?"pause":"unpause"]()},n.prototype.visibilityPlay=function(){this.play(),document.removeEventListener("visibilitychange",this.onVisibilityPlay)},e.extend(i.defaults,{pauseAutoPlayOnHover:!0}),i.createMethods.push("_createPlayer");t=i.prototype;return t._createPlayer=function(){this.player=new n(this),this.on("activate",this.activatePlayer),this.on("uiChange",this.stopPlayer),this.on("pointerDown",this.stopPlayer),this.on("deactivate",this.deactivatePlayer)},t.activatePlayer=function(){this.options.autoPlay&&(this.player.play(),this.element.addEventListener("mouseenter",this))},t.playPlayer=function(){this.player.play()},t.stopPlayer=function(){this.player.stop()},t.pausePlayer=function(){this.player.pause()},t.unpausePlayer=function(){this.player.unpause()},t.deactivatePlayer=function(){this.player.stop(),this.element.removeEventListener("mouseenter",this)},t.onmouseenter=function(){this.options.pauseAutoPlayOnHover&&(this.player.pause(),this.element.addEventListener("mouseleave",this))},t.onmouseleave=function(){this.player.unpause(),this.element.removeEventListener("mouseleave",this)},i.Player=n,i}),function(t,i){"function"==typeof define&&define.amd?define("flickity/js/add-remove-cell",["./flickity","fizzy-ui-utils/utils"],function(t,e){return i(0,t,e)}):"object"==typeof module&&module.exports?module.exports=i(0,require("./flickity"),require("fizzy-ui-utils")):i(0,t.Flickity,t.fizzyUIUtils)}(window,function(t,e,n){var i=e.prototype;return i.insert=function(t,e){var i,n,r,s,a,t=this._makeCells(t);t&&t.length&&(i=this.cells.length,e=void 0===e?i:e,s=t,a=document.createDocumentFragment(),s.forEach(function(t){a.appendChild(t.element)}),s=a,(n=e==i)?this.slider.appendChild(s):(r=this.cells[e].element,this.slider.insertBefore(s,r)),0===e?this.cells=t.concat(this.cells):n?this.cells=this.cells.concat(t):(s=this.cells.splice(e,i-e),this.cells=this.cells.concat(t).concat(s)),this._sizeCells(t),this.cellChange(e,!0))},i.append=function(t){this.insert(t,this.cells.length)},i.prepend=function(t){this.insert(t,0)},i.remove=function(t){var i,t=this.getCells(t);t&&t.length&&(i=this.cells.length-1,t.forEach(function(t){t.remove();var e=this.cells.indexOf(t);i=Math.min(e,i),n.removeFrom(this.cells,t)},this),this.cellChange(i,!0))},i.cellSizeChange=function(t){var t=this.getCell(t);t&&(t.getSize(),t=this.cells.indexOf(t),this.cellChange(t))},i.cellChange=function(t,e){var i=this.selectedElement,i=(this._positionCells(t),this._getWrapShiftCells(),this.setGallerySize(),this.getCell(i));i&&(this.selectedIndex=this.getCellSlideIndex(i)),this.selectedIndex=Math.min(this.slides.length-1,this.selectedIndex),this.emitEvent("cellChange",[t]),this.select(this.selectedIndex),e&&this.positionSliderAtSelected()},e}),function(t,i){"function"==typeof define&&define.amd?define("flickity/js/lazyload",["./flickity","fizzy-ui-utils/utils"],function(t,e){return i(0,t,e)}):"object"==typeof module&&module.exports?module.exports=i(0,require("./flickity"),require("fizzy-ui-utils")):i(0,t.Flickity,t.fizzyUIUtils)}(window,function(t,e,r){"use strict";e.createMethods.push("_createLazyload");var i=e.prototype;function n(t,e){this.img=t,this.flickity=e,this.load()}return i._createLazyload=function(){this.on("select",this.lazyLoad)},i.lazyLoad=function(){var e,t=this.options.lazyLoad;t&&(t=this.getAdjacentCellElements("number"==typeof t?t:0),e=[],t.forEach(function(t){t=function(t){if("IMG"==t.nodeName){var e=t.getAttribute("data-flickity-lazyload"),i=t.getAttribute("data-flickity-lazyload-src"),n=t.getAttribute("data-flickity-lazyload-srcset");if(e||i||n)return[t]}e=t.querySelectorAll("img[data-flickity-lazyload], img[data-flickity-lazyload-src], img[data-flickity-lazyload-srcset]");return r.makeArray(e)}(t);e=e.concat(t)}),e.forEach(function(t){new n(t,this)},this))},n.prototype.handleEvent=r.handleEvent,n.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this);var t=this.img.getAttribute("data-flickity-lazyload")||this.img.getAttribute("data-flickity-lazyload-src"),e=this.img.getAttribute("data-flickity-lazyload-srcset");this.img.src=t,e&&this.img.setAttribute("srcset",e),this.img.removeAttribute("data-flickity-lazyload"),this.img.removeAttribute("data-flickity-lazyload-src"),this.img.removeAttribute("data-flickity-lazyload-srcset")},n.prototype.onload=function(t){this.complete(t,"flickity-lazyloaded")},n.prototype.onerror=function(t){this.complete(t,"flickity-lazyerror")},n.prototype.complete=function(t,e){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this);var i=this.flickity.getParentCell(this.img),i=i&&i.element;this.flickity.cellSizeChange(i),this.img.classList.add(e),this.flickity.dispatchEvent("lazyLoad",t,i)},e.LazyLoader=n,e}),function(t){"function"==typeof define&&define.amd?define("flickity/js/index",["./flickity","./drag","./prev-next-button","./page-dots","./player","./add-remove-cell","./lazyload"],t):"object"==typeof module&&module.exports&&(module.exports=t(require("./flickity"),require("./drag"),require("./prev-next-button"),require("./page-dots"),require("./player"),require("./add-remove-cell"),require("./lazyload")))}((window,function(t){return t})),function(t,e){"function"==typeof define&&define.amd?define("flickity-as-nav-for/as-nav-for",["flickity/js/index","fizzy-ui-utils/utils"],e):"object"==typeof module&&module.exports?module.exports=e(require("flickity"),require("fizzy-ui-utils")):t.Flickity=e(t.Flickity,t.fizzyUIUtils)}(window,function(i,n){i.createMethods.push("_createAsNavFor");var t=i.prototype;return t._createAsNavFor=function(){this.on("activate",this.activateAsNavFor),this.on("deactivate",this.deactivateAsNavFor),this.on("destroy",this.destroyAsNavFor);var t,e=this.options.asNavFor;e&&(t=this,setTimeout(function(){t.setNavCompanion(e)}))},t.setNavCompanion=function(t){t=n.getQueryElement(t);var e,t=i.data(t);t&&t!=this&&(this.navCompanion=t,(e=this).onNavCompanionSelect=function(){e.navCompanionSelect()},t.on("select",this.onNavCompanionSelect),this.on("staticClick",this.onNavStaticClick),this.navCompanionSelect(!0))},t.navCompanionSelect=function(t){var e,i,n=this.navCompanion&&this.navCompanion.selectedCells;n&&(e=n[0],e=this.navCompanion.cells.indexOf(e),n=e+n.length-1,i=Math.floor((i=this.navCompanion.cellAlign,(n-e)*i+e)),this.selectCell(i,!1,t),this.removeNavSelectedElements(),i>=this.cells.length||(t=this.cells.slice(e,1+n),this.navSelectedElements=t.map(function(t){return t.element}),this.changeNavSelectedClass("add")))},t.changeNavSelectedClass=function(e){this.navSelectedElements.forEach(function(t){t.classList[e]("is-nav-selected")})},t.activateAsNavFor=function(){this.navCompanionSelect(!0)},t.removeNavSelectedElements=function(){this.navSelectedElements&&(this.changeNavSelectedClass("remove"),delete this.navSelectedElements)},t.onNavStaticClick=function(t,e,i,n){"number"==typeof n&&this.navCompanion.selectCell(n)},t.deactivateAsNavFor=function(){this.removeNavSelectedElements()},t.destroyAsNavFor=function(){this.navCompanion&&(this.navCompanion.off("select",this.onNavCompanionSelect),this.off("staticClick",this.onNavStaticClick),delete this.navCompanion)},i}),function(e,i){"use strict";"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("ev-emitter")):e.imagesLoaded=i(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){var s=e.jQuery,a=e.console;function o(t,e){for(var i in e)t[i]=e[i];return t}var l=Array.prototype.slice;function h(t,e,i){if(!(this instanceof h))return new h(t,e,i);var n,r=t;(r="string"==typeof t?document.querySelectorAll(t):r)?(this.elements=(n=r,Array.isArray(n)?n:"object"==typeof n&&"number"==typeof n.length?l.call(n):[n]),this.options=o({},this.options),"function"==typeof e?i=e:o(this.options,e),i&&this.on("always",i),this.getImages(),s&&(this.jqDeferred=new s.Deferred),setTimeout(this.check.bind(this))):a.error("Bad element for imagesLoaded "+(r||t))}(h.prototype=Object.create(t.prototype)).options={},h.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},h.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&c[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var r=i[n];this.addImage(r)}if("string"==typeof this.options.background)for(var s=t.querySelectorAll(this.options.background),n=0;n<s.length;n++){var a=s[n];this.addElementBackgroundImages(a)}}};var c={1:!0,9:!0,11:!0};function i(t){this.img=t}function n(t,e){this.url=t,this.element=e,this.img=new Image}return h.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var r=n&&n[2];r&&this.addBackground(r,t),n=i.exec(e.backgroundImage)}},h.prototype.addImage=function(t){t=new i(t);this.images.push(t)},h.prototype.addBackground=function(t,e){t=new n(t,e);this.images.push(t)},h.prototype.check=function(){var n=this;function e(t,e,i){setTimeout(function(){n.progress(t,e,i)})}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach(function(t){t.once("progress",e),t.check()}):this.complete()},h.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,t,e)},h.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred&&(t=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[t](this))},(i.prototype=Object.create(t.prototype)).check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},i.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},i.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},i.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},i.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},i.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(n.prototype=Object.create(i.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},n.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},n.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},(h.makeJQueryPlugin=function(t){(t=t||e.jQuery)&&((s=t).fn.imagesLoaded=function(t,e){return new h(this,t,e).jqDeferred.promise(s(this))})})(),h}),function(t,i){"function"==typeof define&&define.amd?define(["flickity/js/index","imagesloaded/imagesloaded"],function(t,e){return i(0,t,e)}):"object"==typeof module&&module.exports?module.exports=i(0,require("flickity"),require("imagesloaded")):t.Flickity=i(0,t.Flickity,t.imagesLoaded)}(window,function(t,e,n){"use strict";e.createMethods.push("_createImagesLoaded");var i=e.prototype;return i._createImagesLoaded=function(){this.on("activate",this.imagesLoaded)},i.imagesLoaded=function(){var i;this.options.imagesLoaded&&n((i=this).slider).on("progress",function(t,e){e=i.getParentCell(e.img);i.cellSizeChange(e&&e.element),i.options.freeScroll||i.positionSliderAtSelected()})},e}),function(t,e){"function"==typeof define&&define.amd?define(["flickity/js/index","fizzy-ui-utils/utils"],e):"object"==typeof module&&module.exports?module.exports=e(require("flickity"),require("fizzy-ui-utils")):e(t.Flickity,t.fizzyUIUtils)}(this,function(t,n){var e=t.Slide,r=e.prototype.updateTarget,e=(e.prototype.updateTarget=function(){var i,n;r.apply(this,arguments),this.parent.options.fade&&(i=this.target-this.x,n=this.cells[0].x,this.cells.forEach(function(t){var e=t.x-n-i;t.renderPosition(e)}))},e.prototype.setOpacity=function(e){this.cells.forEach(function(t){t.element.style.opacity=e})},t.prototype),i=(t.createMethods.push("_createFade"),e._createFade=function(){this.fadeIndex=this.selectedIndex,this.prevSelectedIndex=this.selectedIndex,this.on("select",this.onSelectFade),this.on("dragEnd",this.onDragEndFade),this.on("settle",this.onSettleFade),this.on("activate",this.onActivateFade),this.on("deactivate",this.onDeactivateFade)},e.updateSlides),s=(e.updateSlides=function(){i.apply(this,arguments),this.options.fade&&this.slides.forEach(function(t,e){e=e==this.selectedIndex?1:0;t.setOpacity(e)},this)},e.onSelectFade=function(){this.fadeIndex=Math.min(this.prevSelectedIndex,this.slides.length-1),this.prevSelectedIndex=this.selectedIndex},e.onSettleFade=function(){delete this.didDragEnd,this.options.fade&&(this.selectedSlide.setOpacity(1),this.slides[this.fadeIndex]&&this.fadeIndex!=this.selectedIndex&&this.slides[this.fadeIndex].setOpacity(0))},e.onDragEndFade=function(){this.didDragEnd=!0},e.onActivateFade=function(){this.options.fade&&this.element.classList.add("is-fade")},e.onDeactivateFade=function(){this.options.fade&&(this.element.classList.remove("is-fade"),this.slides.forEach(function(t){t.setOpacity("")}))},e.positionSlider),a=(e.positionSlider=function(){this.options.fade?(this.fadeSlides(),this.dispatchScrollEvent()):s.apply(this,arguments)},e.positionSliderAtSelected),o=(e.positionSliderAtSelected=function(){this.options.fade&&this.setTranslateX(0),a.apply(this,arguments)},e.fadeSlides=function(){var t,e,i,n,r;this.slides.length<2||(t=this.getFadeIndexes(),r=this.slides[t.a],e=this.slides[t.b],i=this.wrapDifference(r.target,e.target),n=this.wrapDifference(r.target,-this.x),r.setOpacity(1-(n/=i)),e.setOpacity(n),r=t.a,this.isDragging&&(r=.5<n?t.a:t.b),null!=this.fadeHideIndex&&this.fadeHideIndex!=r&&this.fadeHideIndex!=t.a&&this.fadeHideIndex!=t.b&&this.slides[this.fadeHideIndex].setOpacity(0),this.fadeHideIndex=r)},e.getFadeIndexes=function(){return this.isDragging||this.didDragEnd?this.options.wrapAround?this.getFadeDragWrapIndexes():this.getFadeDragLimitIndexes():{a:this.fadeIndex,b:this.selectedIndex}},e.getFadeDragWrapIndexes=function(){var t=this.slides.map(function(t,e){return this.getSlideDistance(-this.x,e)},this),e=t.map(function(t){return Math.abs(t)}),i=Math.min.apply(Math,e),e=e.indexOf(i),i=t[e],t=this.slides.length;return{a:e,b:n.modulo(e+(0<=i?1:-1),t)}},e.getFadeDragLimitIndexes=function(){for(var t=0,e=0;e<this.slides.length-1;e++){var i=this.slides[e];if(-this.x<i.target)break;t=e}return{a:t,b:t+1}},e.wrapDifference=function(t,e){e-=t;if(!this.options.wrapAround)return e;var t=e+this.slideableWidth,i=e-this.slideableWidth;return Math.abs(t)<Math.abs(e)&&(e=t),e=Math.abs(i)<Math.abs(e)?i:e},e._getWrapShiftCells),l=(e._getWrapShiftCells=function(){this.options.fade||o.apply(this,arguments)},e.shiftWrapCells);return e.shiftWrapCells=function(){this.options.fade||l.apply(this,arguments)},t}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).window=t.window||{})}(this,function(t){"use strict";function i(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}function K(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(t){return"string"==typeof t}function u(t){return"function"==typeof t}function J(t){return"number"==typeof t}function s(t){return void 0===t}function T(t){return"object"==typeof t}function R(t){return!1!==t}function n(){return"undefined"!=typeof window}function $(t){return u(t)||O(t)}function m(t){return(Yt=Ut(t,a))&&c}function Z(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")}function tt(t,e){return!e&&console.warn(t)}function g(t,e){return t&&(a[t]=e)&&Yt&&(Yt[t]=e)||a}function A(){return 0}function et(t){var e,i,n=t[0];if(T(n)||u(n)||(t=[t]),!(e=(n._gsap||{}).harness)){for(i=Ne.length;i--&&!Ne[i].targetTest(n););e=Ne[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new Ke(t[i],e)))||t.splice(i,1);return t}function it(t){return t._gsap||et(D(t))[0]._gsap}function v(t,e,i){return(i=t[e])&&u(i)?t[e]():s(i)&&t.getAttribute&&t.getAttribute(e)||i}function p(t,e){return(t=t.split(",")).forEach(e)||t}function k(t){return Math.round(1e5*t)/1e5||0}function M(t){return Math.round(1e7*t)/1e7||0}function nt(t,e){var i=e.charAt(0),e=parseFloat(e.substr(2));return t=parseFloat(t),"+"===i?t+e:"-"===i?t-e:"*"===i?t*e:t/e}function rt(){var t,e,i=Pe.length,n=Pe.slice(0);for(Le={},t=Pe.length=0;t<i;t++)(e=n[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)}function y(t,e,i,n){Pe.length&&rt(),t.render(e,i,n||Q),Pe.length&&rt()}function _(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(Te).length<2?e:O(t)?t.trim():t}function x(t){return t}function N(t,e){for(var i in e)i in t||(t[i]=e[i]);return t}function S(t,e){for(var i in e)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(t[i]=T(e[i])?S(t[i]||(t[i]={}),e[i]):e[i]);return t}function st(t,e){var i,n={};for(i in t)i in e||(n[i]=t[i]);return n}function at(t){var n,e=t.parent||F,i=t.keyframes?(n=B(t.keyframes),function(t,e){for(var i in e)i in t||"duration"===i&&n||"ease"===i||(t[i]=e[i])}):N;if(R(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t}function w(t,e,i,n,r){void 0===i&&(i="_first");var s,a=t[n=void 0===n?"_last":n];if(r)for(s=e[r];a&&a[r]>s;)a=a._prev;a?(e._next=a._next,a._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[n]=e,e._prev=a,e.parent=e._dp=t}function E(t,e,i,n){void 0===i&&(i="_first"),void 0===n&&(n="_last");var r=e._prev,s=e._next;r?r._next=s:t[i]===e&&(t[i]=s),s?s._prev=r:t[n]===e&&(t[n]=r),e._next=e._prev=e.parent=null}function ot(t,e){!t.parent||e&&!t.parent.autoRemoveChildren||t.parent.remove(t),t._act=0}function C(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t}function lt(t,e,i,n){t._startAt&&(Q?t._startAt.revert(Be):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,n))}function ht(t){return t._repeat?Ht(t._tTime,t=t.duration()+t._rDelay)*t:0}function ct(t,e){return(t-e._start)*e._ts+(0<=e._ts?0:e._dirty?e.totalDuration():e._tDur)}function ut(t){t._end=M(t._start+(t._tDur/Math.abs(t._ts||t._rts||V)||0))}function dt(t,e){var i=t._dp;i&&i.smoothChildTiming&&t._ts&&(t._start=M(i._time-(0<t._ts?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),ut(t),i._dirty||C(i,t))}function pt(t,e){var i;if((e._time||e._initted&&!e._dur)&&(i=ct(t.rawTime(),e),(!e._dur||zt(0,e.totalDuration(),i)-e._tTime>V)&&e.render(i,!0)),C(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)0<=i.rawTime()&&i.totalTime(i._tTime),i=i._dp;t._zTime=-V}}function I(t,e,i,n){return e.parent&&ot(e),e._start=M((J(i)?i:i||t!==F?h(t,i,e):t._time)+e._delay),e._end=M(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),w(t,e,"_first","_last",t._sort?"_start":0),Vt(e)||(t._recent=e),n||pt(t,e),t._ts<0&&dt(t,t._tTime),t}function ft(t,e){(a.ScrollTrigger||Z("scrollTrigger",e))&&a.ScrollTrigger.create(e,t)}function mt(t,e,i,n){return ii(t,e),!t._initted||!i&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&Jt!==f.frame&&(Pe.push(t),t._lazy=[e,n])}function gt(t,e,i,n){var r=t._repeat,e=M(e)||0,s=t._tTime/t._tDur;return s&&!n&&(t._time*=e/t._dur),t._dur=e,t._tDur=r?r<0?1e10:M(e*(r+1)+t._rDelay*r):e,0<s&&!n?dt(t,t._tTime=t._tDur*s):t.parent&&ut(t),i||C(t.parent,t),t}function At(t){return t instanceof L?C(t):gt(t,t._dur)}function vt(t,e,i){var n,r,s=J(e[1]),a=(s?2:1)+(t<2?0:1),o=e[a];if(s&&(o.duration=e[1]),o.parent=i,t){for(n=o,r=i;r&&!("immediateRender"in n);)n=r.vars.defaults||{},r=R(r.vars.inherit)&&r.parent;o.immediateRender=R(n.immediateRender),t<2?o.runBackwards=1:o.startAt=e[a-1]}return new W(e[0],o,e[1+a])}function yt(t,e){return t||0===t?e(t):e}function G(t,e){return O(t)&&(e=Me.exec(t))?e[1]:""}function _t(t,e){return t&&T(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&T(t[0]))&&!t.nodeType&&t!==l}function bt(i){return i=D(i)[0]||tt("Invalid scope")||{},function(t){var e=i.current||i.nativeElement||i;return D(t,e.querySelectorAll?e:e===i?tt("Invalid scope")||Xt.createElement("div"):i)}}function xt(t){return t.sort(function(){return.5-Math.random()})}function St(t){if(u(t))return t;var p=T(t)?t:{each:t},f=je(p.ease),m=p.from||0,g=parseFloat(p.base)||0,A={},t=0<m&&m<1,v=isNaN(m)||t,y=p.axis,_=m,b=m;return O(m)?_=b={center:.5,edges:.5,end:1}[m]||0:!t&&v&&(_=m[0],b=m[1]),function(t,e,i){var n,r,s,a,o,l,h,c,u=(i||p).length,d=A[u];if(!d){if(!(c="auto"===p.grid?0:(p.grid||[1,H])[1])){for(l=-H;l<(l=i[c++].getBoundingClientRect().left)&&c<u;);c--}for(d=A[u]=[],n=v?Math.min(c,u)*_-.5:m%c,r=c===H?0:v?u*b/c-.5:m/c|0,h=H,o=l=0;o<u;o++)a=o%c-n,s=r-(o/c|0),d[o]=a=y?Math.abs("y"===y?s:a):ve(a*a+s*s),l<a&&(l=a),a<h&&(h=a);"random"===m&&xt(d),d.max=l-h,d.min=h,d.v=u=(parseFloat(p.amount)||parseFloat(p.each)*(u<c?u-1:y?"y"===y?u/c:c:Math.max(c,u/c))||0)*("edges"===m?-1:1),d.b=u<0?g-u:g,d.u=G(p.amount||p.each)||0,f=f&&u<0?qe(f):f}return u=(d[t]-d.min)/d.max||0,M(d.b+(f?f(u):u)*d.v)+d.u}}function wt(i){var n=Math.pow(10,((i+"").split(".")[1]||"").length);return function(t){var e=M(Math.round(parseFloat(t)/i)*i*n);return(e-e%1)/n+(J(t)?0:G(t))}}function Et(l,t){var h,c,e=B(l);return!e&&T(l)&&(h=e=l.radius||H,l.values?(l=D(l.values),(c=!J(l[0]))&&(h*=h)):l=wt(l.increment)),yt(t,e?u(l)?function(t){return c=l(t),Math.abs(c-t)<=h?c:t}:function(t){for(var e,i,n=parseFloat(c?t.x:t),r=parseFloat(c?t.y:0),s=H,a=0,o=l.length;o--;)(e=c?(e=l[o].x-n)*e+(i=l[o].y-r)*i:Math.abs(l[o]-n))<s&&(s=e,a=o);return a=!h||s<=h?l[a]:t,c||a===t||J(t)?a:a+G(t)}:wt(l))}function Ct(t,e,i,n){return yt(B(t)?!e:!0===i?!!(i=0):!n,function(){return B(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+.99*i))/i)*i*n)/n})}function Tt(e,i,t){return yt(t,function(t){return e[~~i(t)]})}function Mt(t){for(var e,i,n,r,s=0,a="";~(e=t.indexOf("random(",s));)n=t.indexOf(")",e),r="["===t.charAt(e+7),i=t.substr(e+7,n-e-7).match(r?Te:xe),a+=t.substr(s,e-s)+Ct(r?i:+i[0],r?0:+i[1],+i[2]||1e-5),s=n+1;return a+t.substr(s,t.length-s)}function It(t,e,i){var n,r,s,a=t.labels,o=H;for(n in a)(r=a[n]-e)<0==!!i&&r&&o>(r=Math.abs(r))&&(s=n,o=r);return s}function Bt(t){return ot(t),t.scrollTrigger&&t.scrollTrigger.kill(!1),t.progress()<1&&b(t,"onInterrupt"),t}function Dt(t,e,i){return(6*(t+=t<0?1:1<t?-1:0)<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)*d+.5|0}function Pt(t,e,i){var n,r,s,a,o,l,h,c=t?J(t)?[t>>16,t>>8&d,t&d]:0:Ge.black;if(!c){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),Ge[t])c=Ge[t];else if("#"===t.charAt(0)){if(9===(t=t.length<6?"#"+(n=t.charAt(1))+n+(r=t.charAt(2))+r+(s=t.charAt(3))+s+(5===t.length?t.charAt(4)+t.charAt(4):""):t).length)return[(c=parseInt(t.substr(1,6),16))>>16,c>>8&d,c&d,parseInt(t.substr(7),16)/255];c=[(t=parseInt(t.substr(1),16))>>16,t>>8&d,t&d]}else if("hsl"===t.substr(0,3))if(c=h=t.match(xe),e){if(~t.indexOf("="))return c=t.match(Se),i&&c.length<4&&(c[3]=1),c}else a=+c[0]%360/360,o=c[1]/100,n=2*(l=c[2]/100)-(r=l<=.5?l*(o+1):l+o-l*o),3<c.length&&(c[3]*=1),c[0]=Dt(a+1/3,n,r),c[1]=Dt(a,n,r),c[2]=Dt(a-1/3,n,r);else c=t.match(xe)||Ge.transparent;c=c.map(Number)}return e&&!h&&(n=c[0]/d,r=c[1]/d,s=c[2]/d,l=((t=Math.max(n,r,s))+(e=Math.min(n,r,s)))/2,t===e?a=o=0:(h=t-e,o=.5<l?h/(2-t-e):h/(t+e),a=t===n?(r-s)/h+(r<s?6:0):t===r?(s-n)/h+2:(n-r)/h+4,a*=60),c[0]=~~(a+.5),c[1]=~~(100*o+.5),c[2]=~~(100*l+.5)),i&&c.length<4&&(c[3]=1),c}function Lt(t){var e=[],i=[],n=-1;return t.split(Ue).forEach(function(t){t=t.match(we)||[];e.push.apply(e,t),i.push(n+=t.length+1)}),e.c=i,e}function Rt(t,e,i){var n,r,s,a,o="",l=(t+o).match(Ue),h=e?"hsla(":"rgba(",c=0;if(!l)return t;if(l=l.map(function(t){return(t=Pt(t,e,1))&&h+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"}),i&&(s=Lt(t),(n=i.c).join(o)!==s.c.join(o)))for(a=(r=t.replace(Ue,"1").split(we)).length-1;c<a;c++)o+=r[c]+(~n.indexOf(c)?l.shift()||h+"0,0,0,0)":(s.length?s:l.length?l:i).shift());if(!r)for(a=(r=t.split(Ue)).length-1;c<a;c++)o+=r[c]+l[c];return o+r[a]}function kt(t){var e=t.join(" ");if(Ue.lastIndex=0,Ue.test(e))return e=He.test(e),t[1]=Rt(t[1],e),t[0]=Rt(t[0],e,Lt(t[1])),!0}function Nt(t,e){for(var i,n=t._first;n;)n instanceof L?Nt(n,e):!n.vars.yoyoEase||n._yoyo&&n._repeat||n._yoyo===e||(n.timeline?Nt(n.timeline,e):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=e)),n=n._next}function Qt(t,e,i,n){var r,s={easeIn:e,easeOut:i=void 0===i?function(t){return 1-e(1-t)}:i,easeInOut:n=void 0===n?function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2}:n};p(t,function(t){for(var e in P[t]=a[t]=s,P[r=t.toLowerCase()]=i,s)P[r+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=P[t+"."+e]=s[e]})}function Ft(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}}function Ot(i,t,e){function n(t){return 1===t?1:r*Math.pow(2,-10*t)*_e((t-s)*a)+1}var r=1<=t?t:1,s=(a=(e||(i?.3:.45))/(t<1?t:1))/me*(Math.asin(1/r)||0),e="out"===i?n:"in"===i?function(t){return 1-n(1-t)}:Ft(n),a=me/a;return e.config=function(t,e){return Ot(i,t,e)},e}function Gt(e,i){function n(t){return t?--t*t*((i+1)*t+i)+1:0}void 0===i&&(i=1.70158);var t="out"===e?n:"in"===e?function(t){return 1-n(1-t)}:Ft(n);return t.config=function(t){return Gt(e,t)},t}function Ut(t,e){for(var i in e)t[i]=e[i];return t}function Ht(t,e){return e=Math.floor(t/=e),t&&e===t?e-1:e}function Vt(t){return"isFromStart"===(t=t.data)||"isStart"===t}function h(t,e,i){var n,r,s,a=t.labels,o=t._recent||Fe,l=t.duration()>=H?o.endTime(!1):t._dur;return O(e)&&(isNaN(e)||e in a)?(r=e.charAt(0),s="%"===e.substr(-1),n=e.indexOf("="),"<"===r||">"===r?(0<=n&&(e=e.replace(/=/,"")),("<"===r?o._start:o.endTime(0<=o._repeat))+(parseFloat(e.substr(1))||0)*(s?(n<0?o:i).totalDuration()/100:1)):n<0?(e in a||(a[e]=l),a[e]):(r=parseFloat(e.charAt(n-1)+e.substr(n+1)),s&&i&&(r=r/100*(B(i)?i[0]:i).totalDuration()),1<n?h(t,e.substr(0,n-1),i)+r:l+r)):null==e?l:+e}function zt(t,e,i){return i<t?t:e<i?e:i}function Wt(e,t,i,n,r){var s=t-e,a=n-i;return yt(r,function(t){return i+((t-e)/s*a||0)})}function b(t,e,i){var n=t.vars,r=n[e],s=o,a=t._ctx;if(r)e=n[e+"Params"],n=n.callbackScope||t,i&&Pe.length&&rt(),a&&(o=a),t=e?r.apply(n,e):r.call(n),o=s}var qt,Q,o,F,l,jt,Xt,Yt,Kt,Jt,$t,Zt,te,ee,ie,ne,re,se,ae,oe,le,he,ce,ue,de,pe,U={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},fe={duration:.5,overwrite:!1,delay:0},H=1e8,V=1/H,me=2*Math.PI,ge=me/4,Ae=0,ve=Math.sqrt,ye=Math.cos,_e=Math.sin,be="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},B=Array.isArray,xe=/(?:-?\.?\d|\.)+/gi,Se=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,we=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Ee=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Ce=/[+-]=-?[.\d]+/,Te=/[^,'"\[\]\s]+/gi,Me=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,a={},Ie={suppressEvents:!0,isStart:!0},Be={suppressEvents:!0},De={},Pe=[],Le={},z={},Re={},ke=30,Ne=[],Qe="",Fe={_start:0,endTime:A,totalDuration:A},Oe=[].slice,D=function(t,e,i){return o&&!e&&o.selector?o.selector(t):!O(t)||i||!jt&&Ve()?B(t)?(n=i,void 0===r&&(r=[]),t.forEach(function(t){return O(t)&&!n||_t(t,1)?r.push.apply(r,D(t)):r.push(t)})||r):_t(t)?Oe.call(t,0):t?[t]:[]:Oe.call((e||Xt).querySelectorAll(t),0);var n,r},d=255,Ge={aqua:[0,d,d],lime:[0,d,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,d],navy:[0,0,128],white:[d,d,d],olive:[128,128,0],yellow:[d,d,0],orange:[d,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[d,0,0],pink:[d,192,203],cyan:[0,d,d],transparent:[d,d,d,0]},Ue=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in Ge)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),He=/hsl[a]?\(/,f=(se=Date.now,ae=500,oe=33,le=se(),he=le,ue=ce=1e3/240,ie={time:0,frame:0,tick:function(){Xe(!0)},deltaRatio:function(t){return ne/(1e3/(t||60))},wake:function(){Kt&&(!jt&&n()&&(l=jt=window,Xt=l.document||{},a.gsap=c,(l.gsapVersions||(l.gsapVersions=[])).push(c.version),m(Yt||l.GreenSockGlobals||!l.gsap&&l||{}),ee=l.requestAnimationFrame),Zt&&ie.sleep(),te=ee||function(t){return setTimeout(t,ue-1e3*ie.time+1|0)},$t=1,Xe(2))},sleep:function(){(ee?l.cancelAnimationFrame:clearTimeout)(Zt),$t=0,te=A},lagSmoothing:function(t,e){ae=t||1e8,oe=Math.min(e,ae,0)},fps:function(t){ce=1e3/(t||240),ue=1e3*ie.time+ce},add:function(r,t,e){var s=t?function(t,e,i,n){r(t,e,i,n),ie.remove(s)}:r;return ie.remove(r),de[e?"unshift":"push"](s),Ve(),s},remove:function(t,e){~(e=de.indexOf(t))&&de.splice(e,1)&&e<=re&&re--},_listeners:de=[]}),Ve=function(){return!$t&&f.wake()},P={},ze=/^[\d.\-M][\d.\-,\s]/,We=/["']/g,qe=function(e){return function(t){return 1-e(1-t)}},je=function(t,e){return t&&(u(t)?t:P[t]||(s=((t=t)+"").split("("),(a=P[s[0]])&&1<s.length&&a.config?a.config.apply(null,~t.indexOf("{")?[function(t){for(var e,i,n,r={},s=t.substr(1,t.length-3).split(":"),a=s[0],o=1,l=s.length;o<l;o++)i=s[o],e=o!==l-1?i.lastIndexOf(","):i.length,n=i.substr(0,e),r[a]=isNaN(n)?n.replace(We,"").trim():+n,a=i.substr(e+1).trim();return r}(s[1])]:(i=(s=t).indexOf("(")+1,n=s.indexOf(")"),r=s.indexOf("(",i),s.substring(i,~r&&r<n?s.indexOf(")",n+1):n).split(",").map(_))):P._CE&&ze.test(t)?P._CE("",t):a))||e;var i,n,r,s,a};function Xe(t){var e,i,n,r=se()-he,s=!0===t;if(ae<r&&(le+=r-oe),(0<(r=(i=(he+=r)-le)-ue)||s)&&(n=++ie.frame,ne=i-1e3*ie.time,ie.time=i/=1e3,ue+=r+(ce<=r?4:ce-r),e=1),s||(Zt=te(Xe)),e)for(re=0;re<de.length;re++)de[re](i,ne,n,t)}function Ye(t){return t<1/2.75?pe*t*t:t<.7272727272727273?pe*Math.pow(t-1.5/2.75,2)+.75:t<.9090909090909092?pe*(t-=2.25/2.75)*t+.9375:pe*Math.pow(t-2.625/2.75,2)+.984375}p("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var i=e<5?e+1:e;Qt(t+",Power"+(i-1),e?function(t){return Math.pow(t,i)}:function(t){return t},function(t){return 1-Math.pow(1-t,i)},function(t){return t<.5?Math.pow(2*t,i)/2:1-Math.pow(2*(1-t),i)/2})}),P.Linear.easeNone=P.none=P.Linear.easeIn,Qt("Elastic",Ot("in"),Ot("out"),Ot()),pe=7.5625,Qt("Bounce",function(t){return 1-Ye(1-t)},Ye),Qt("Expo",function(t){return t?Math.pow(2,10*(t-1)):0}),Qt("Circ",function(t){return-(ve(1-t*t)-1)}),Qt("Sine",function(t){return 1===t?1:1-ye(t*ge)}),Qt("Back",Gt("in"),Gt("out"),Gt()),P.SteppedEase=P.steps=a.SteppedEase={config:function(t,e){var i=1/(t=void 0===t?1:t),n=t+(e?0:1),r=e?1:0;return function(t){return((n*zt(0,.99999999,t)|0)+r)*i}}},fe.ease=P["quad.out"],p("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return Qe+=t+","+t+"Params,"});var Ke=function(t,e){this.id=Ae++,(t._gsap=this).target=t,this.harness=e,this.get=e?e.get:v,this.set=e?e.getSetter:bi},Je=((e=$e.prototype).delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(0<this._repeat?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,gt(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Ve(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(dt(this,t),i._dp&&!i.parent&&pt(i,this);i&&i.parent;)i.parent._time!==i._start+(0<=i._ts?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(0<this._ts&&t<this._tDur||this._ts<0&&0<t||!this._tDur&&!t)&&I(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===V||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),y(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+ht(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+ht(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*i,e):this._repeat?Ht(this._tTime,i)+1:1},e.timeScale=function(t){if(!arguments.length)return this._rts===-V?0:this._rts;if(this._rts===t)return this;for(var e=this.parent&&this._ts?ct(this.parent._time,this):this._tTime,t=(this._rts=+t||0,this._ts=this._ps||t===-V?0:this._rts,this.totalTime(zt(-this._delay,this._tDur,e),!0),ut(this),this),i=t.parent;i&&i.parent;)i._dirty=1,i.totalDuration(),i=i.parent;return t},e.paused=function(t){return arguments.length?(this._ps!==t&&((this._ps=t)?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Ve(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==V&&(this._tTime-=V)))),this):this._ps},e.startTime=function(t){var e;return arguments.length?(this._start=t,!(e=this.parent||this._dp)||!e._sort&&this.parent||I(e,this,t-this._delay),this):this._start},e.endTime=function(t){return this._start+(R(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ct(e.rawTime(t),this):this._tTime:this._tTime},e.revert=function(t){var e=Q;return Q=t=void 0===t?Be:t,this.timeline&&this.timeline.revert(t),this.totalTime(-.01,t.suppressEvents),"nested"!==this.data&&ot(this),Q=e,this},e.globalTime=function(t){for(var e=this,i=arguments.length?t:e.rawTime();e;)i=e._start+i/(e._ts||1),e=e._dp;return!this.parent&&this.vars.immediateRender?-1:i},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,At(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){var e;return arguments.length?(e=this._time,this._rDelay=t,At(this),e?this.time(e):this):this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(h(this,t),R(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,R(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-V:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-V,this},e.isActive=function(){var t=this.parent||this._dp,e=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(t=t.rawTime(!0))>=e&&t<this.endTime(!0)-V))},e.eventCallback=function(t,e,i){var n=this.vars;return 1<arguments.length?(e?(n[t]=e,i&&(n[t+"Params"]=i),"onUpdate"===t&&(this._onUpdate=e)):delete n[t],this):n[t]},e.then=function(n){var r=this;return new Promise(function(e){function t(){var t=r.then;r.then=null,u(i)&&(i=i(r))&&(i.then||i===r)&&(r.then=t),e(i),r.then=t}var i=u(n)?n:x;r._initted&&1===r.totalProgress()&&0<=r._ts||!r._tTime&&r._ts<0?t():r._prom=t})},e.kill=function(){Bt(this)},$e);function $e(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,gt(this,+t.duration,1,1),this.data=t.data,o&&(this._ctx=o).data.push(this),$t||f.wake()}N(Je.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-V,_prom:0,_ps:!1,_rts:1});i(ti,Ze=Je),(e=ti.prototype).to=function(t,e,i){return vt(0,arguments,this),this},e.from=function(t,e,i){return vt(1,arguments,this),this},e.fromTo=function(t,e,i,n){return vt(2,arguments,this),this},e.set=function(t,e,i){return e.duration=0,e.parent=this,at(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new W(t,e,h(this,i),1),this},e.call=function(t,e,i){return I(this,W.delayedCall(0,t,e),i)},e.staggerTo=function(t,e,i,n,r,s,a){return i.duration=e,i.stagger=i.stagger||n,i.onComplete=s,i.onCompleteParams=a,i.parent=this,new W(t,i,h(this,r)),this},e.staggerFrom=function(t,e,i,n,r,s,a){return i.runBackwards=1,at(i).immediateRender=R(i.immediateRender),this.staggerTo(t,e,i,n,r,s,a)},e.staggerFromTo=function(t,e,i,n,r,s,a,o){return n.startAt=i,at(n).immediateRender=R(n.immediateRender),this.staggerTo(t,e,n,r,s,a,o)},e.render=function(t,e,i){var n,r,s,a,o,l,h,c,u,d,p=this._time,f=this._dirty?this.totalDuration():this._tDur,m=this._dur,g=t<=0?0:M(t),A=this._zTime<0!=t<0&&(this._initted||!m);if((g=this!==F&&f<g&&0<=t?f:g)!==this._tTime||i||A){if(p!==this._time&&m&&(g+=this._time-p,t+=this._time-p),n=g,c=this._start,o=!(h=this._ts),A&&(m||(p=this._zTime),!t&&e||(this._zTime=t)),this._repeat){if(A=this._yoyo,a=m+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*a+t,e,i);if(n=M(g%a),g===f?(s=this._repeat,n=m):((s=~~(g/a))&&s===g/a&&(n=m,s--),m<n&&(n=m)),u=Ht(this._tTime,a),A&&1&s&&(n=m-n,d=1),s!==(u=!p&&this._tTime&&u!==s?s:u)&&!this._lock){var v=A&&1&u,A=v===(A&&1&s),p=(v=s<u?!v:v)?0:m;if(this._lock=1,this.render(p||(d?0:M(s*a)),e,!m)._lock=0,this._tTime=g,!e&&this.parent&&b(this,"onRepeat"),this.vars.repeatRefresh&&!d&&(this.invalidate()._lock=1),p&&p!==this._time||o!=!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(m=this._dur,f=this._tDur,A&&(this._lock=2,this.render(p=v?m:-1e-4,!0),this.vars.repeatRefresh&&!d&&this.invalidate()),this._lock=0,!this._ts&&!o)return this;Nt(this,d)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(l=function(t,e,i){var n;if(e<i)for(n=t._first;n&&n._start<=i;){if("isPause"===n.data&&n._start>e)return n;n=n._next}else for(n=t._last;n&&n._start>=i;){if("isPause"===n.data&&n._start<e)return n;n=n._prev}}(this,M(p),M(n)))&&(g-=n-(n=l._start)),this._tTime=g,this._time=n,this._act=!h,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,p=0),!p&&n&&!e&&(b(this,"onStart"),this._tTime!==g))return this;if(p<=n&&0<=t)for(y=this._first;y;){if(r=y._next,(y._act||n>=y._start)&&y._ts&&l!==y){if(y.parent!==this)return this.render(t,e,i);if(y.render(0<y._ts?(n-y._start)*y._ts:(y._dirty?y.totalDuration():y._tDur)+(n-y._start)*y._ts,e,i),n!==this._time||!this._ts&&!o){l=0,r&&(g+=this._zTime=-V);break}}y=r}else{i=i||Q;for(var y=this._last,_=t<0?t:n;y;){if(r=y._prev,(y._act||_<=y._end)&&y._ts&&l!==y){if(y.parent!==this)return this.render(t,e,i);if(y.render(0<y._ts?(_-y._start)*y._ts:(y._dirty?y.totalDuration():y._tDur)+(_-y._start)*y._ts,e,i),n!==this._time||!this._ts&&!o){l=0,r&&(g+=this._zTime=_?-V:V);break}}y=r}}if(l&&!e&&(this.pause(),l.render(p<=n?0:-V)._zTime=p<=n?1:-1,this._ts))return this._start=c,ut(this),this.render(t,e,i);this._onUpdate&&!e&&b(this,"onUpdate",!0),!(g===f&&this._tTime>=this.totalDuration()||!g&&p)||c!==this._start&&Math.abs(h)===Math.abs(this._ts)||this._lock||(!t&&m||!(g===f&&0<this._ts||!g&&this._ts<0)||ot(this,1),e||t<0&&!p||!g&&!p&&f||(b(this,g===f&&0<=t?"onComplete":"onReverseComplete",!0),!this._prom||g<f&&0<this.timeScale()||this._prom()))}return this},e.add=function(t,e){var i=this;if(J(e)||(e=h(this,e,t)),!(t instanceof Je)){if(B(t))return t.forEach(function(t){return i.add(t,e)}),this;if(O(t))return this.addLabel(t,e);if(!u(t))return this;t=W.delayedCall(0,t)}return this!==t?I(this,t,e):this},e.getChildren=function(t,e,i,n){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===n&&(n=-H);for(var r=[],s=this._first;s;)s._start>=n&&(s instanceof W?e&&r.push(s):(i&&r.push(s),t&&r.push.apply(r,s.getChildren(!0,e,i)))),s=s._next;return r},e.getById=function(t){for(var e=this.getChildren(1,1,1),i=e.length;i--;)if(e[i].vars.id===t)return e[i]},e.remove=function(t){return O(t)?this.removeLabel(t):u(t)?this.killTweensOf(t):(E(this,t),t===this._recent&&(this._recent=this._last),C(this))},e.totalTime=function(t,e){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=M(f.time-(0<this._ts?t/this._ts:(this.totalDuration()-t)/-this._ts))),Ze.prototype.totalTime.call(this,t,e),this._forcing=0,this):this._tTime},e.addLabel=function(t,e){return this.labels[t]=h(this,e),this},e.removeLabel=function(t){return delete this.labels[t],this},e.addPause=function(t,e,i){e=W.delayedCall(0,e||A,i);return e.data="isPause",this._hasPause=1,I(this,e,h(this,t))},e.removePause=function(t){var e=this._first;for(t=h(this,t);e;)e._start===t&&"isPause"===e.data&&ot(e),e=e._next},e.killTweensOf=function(t,e,i){for(var n=this.getTweensOf(t,i),r=n.length;r--;)ri!==n[r]&&n[r].kill(t,e);return this},e.getTweensOf=function(t,e){for(var i,n=[],r=D(t),s=this._first,a=J(e);s;)s instanceof W?function(t,e){for(var i=e.length,n=0;t.indexOf(e[n])<0&&++n<i;);return n<i}(s._targets,r)&&(a?(!ri||s._initted&&s._ts)&&s.globalTime(0)<=e&&s.globalTime(s.totalDuration())>e:!e||s.isActive())&&n.push(s):(i=s.getTweensOf(r,e)).length&&n.push.apply(n,i),s=s._next;return n},e.tweenTo=function(t,e){e=e||{};var i,n=this,r=h(n,t),s=e.startAt,a=e.onStart,o=e.onStartParams,t=e.immediateRender,l=W.to(n,N({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:e.duration||Math.abs((r-(s&&"time"in s?s.time:n._time))/n.timeScale())||V,onStart:function(){var t;n.pause(),i||(t=e.duration||Math.abs((r-(s&&"time"in s?s.time:n._time))/n.timeScale()),l._dur!==t&&gt(l,t,0,1).render(l._time,!0,!0),i=1),a&&a.apply(l,o||[])}},e));return t?l.render(0):l},e.tweenFromTo=function(t,e,i){return this.tweenTo(e,N({startAt:{time:h(this,t)}},i))},e.recent=function(){return this._recent},e.nextLabel=function(t){return void 0===t&&(t=this._time),It(this,h(this,t))},e.previousLabel=function(t){return void 0===t&&(t=this._time),It(this,h(this,t),1)},e.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+V)},e.shiftChildren=function(t,e,i){void 0===i&&(i=0);for(var n,r=this._first,s=this.labels;r;)r._start>=i&&(r._start+=t,r._end+=t),r=r._next;if(e)for(n in s)s[n]>=i&&(s[n]+=t);return C(this)},e.invalidate=function(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return Ze.prototype.invalidate.call(this)},e.clear=function(t){void 0===t&&(t=!0);for(var e,i=this._first;i;)e=i._next,this.remove(i),i=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),C(this)},e.totalDuration=function(t){var e,i,n,r=0,s=this,a=s._last,o=H;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-t:t));if(s._dirty){for(n=s.parent;a;)e=a._prev,a._dirty&&a.totalDuration(),o<(i=a._start)&&s._sort&&a._ts&&!s._lock?(s._lock=1,I(s,a,i-a._delay,1)._lock=0):o=i,i<0&&a._ts&&(r-=i,(!n&&!s._dp||n&&n.smoothChildTiming)&&(s._start+=i/s._ts,s._time-=i,s._tTime-=i),s.shiftChildren(-i,!1,-1/0),o=0),a._end>r&&a._ts&&(r=a._end),a=e;gt(s,s===F&&s._time>r?s._time:r,1,1),s._dirty=0}return s._tDur},ti.updateRoot=function(t){if(F._ts&&(y(F,ct(t,F)),Jt=f.frame),f.frame>=ke){ke+=U.autoSleep||120;var e=F._first;if((!e||!e._ts)&&U.autoSleep&&f._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||f.sleep()}}};var Ze,L=ti;function ti(t,e){var i;return(i=Ze.call(this,t=void 0===t?{}:t)||this).labels={},i.smoothChildTiming=!!t.smoothChildTiming,i.autoRemoveChildren=!!t.autoRemoveChildren,i._sort=R(t.sortChildren),F&&I(t.parent||F,K(i),e),t.reversed&&i.reverse(),t.paused&&i.paused(!0),t.scrollTrigger&&ft(K(i),t.scrollTrigger),i}function ei(t,e,i,n,r,s){var a,o,l,h;if(z[t]&&!1!==(a=new z[t]).init(r,a.rawVars?e[t]:function(t,e,i,n,r){if(!T(t=u(t)?ni(t,r,e,i,n):t)||t.style&&t.nodeType||B(t)||be(t))return O(t)?ni(t,r,e,i,n):t;var s,a={};for(s in t)a[s]=ni(t[s],r,e,i,n);return a}(e[t],n,r,s,i),i,n,s)&&(i._pt=o=new q(i._pt,r,t,0,1,a.render,a,0,a.priority),i!==Ni))for(l=i._ptLookup[i._targets.indexOf(r)],h=a._props.length;h--;)l[a._props[h]]=o;return a}N(L.prototype,{_lock:0,_hasPause:0,_forcing:0});function ii(t,e){var i,n,r,s,a,o,l,h,c,u,d,p,f,m=t.vars,g=m.ease,A=m.startAt,v=m.immediateRender,y=m.lazy,_=m.onUpdate,b=m.onUpdateParams,x=m.callbackScope,S=m.runBackwards,w=m.yoyoEase,E=m.keyframes,C=m.autoRevert,T=t._dur,M=t._startAt,I=t._targets,B=t.parent,D=B&&"nested"===B.data?B.vars.targets:I,P="auto"===t._overwrite&&!qt,L=t.timeline;if(t._ease=je(g=!L||E&&g?g:"none",fe.ease),t._yEase=w?qe(je(!0===w?g:w,fe.ease)):0,w&&t._yoyo&&!t._repeat&&(w=t._yEase,t._yEase=t._ease,t._ease=w),t._from=!L&&!!m.runBackwards,!L||E&&!m.stagger){if(p=(h=I[0]?it(I[0]).harness:0)&&m[h.prop],i=st(m,De),M&&(e<0&&S&&v&&!C?M.render(-1,!0):M.revert(S&&T?Be:Ie),M._lazy=0),A){if(ot(t._startAt=W.set(I,N({data:"isStart",overwrite:!1,parent:B,immediateRender:!0,lazy:R(y),startAt:null,delay:0,onUpdate:_,onUpdateParams:b,callbackScope:x,stagger:0},A))),e<0&&(Q||!v&&!C)&&t._startAt.revert(Be),v&&T&&e<=0)return void(e&&(t._zTime=e))}else if(S&&T&&!M)if(r=N({overwrite:!1,data:"isFromStart",lazy:(v=e?!1:v)&&R(y),immediateRender:v,stagger:0,parent:B},i),p&&(r[h.prop]=p),ot(t._startAt=W.set(I,r)),e<0&&(Q?t._startAt.revert(Be):t._startAt.render(-1,!0)),t._zTime=e,v){if(!e)return}else ii(t._startAt,V);for(t._pt=t._ptCache=0,y=T&&R(y)||y&&!T,n=0;n<I.length;n++){if(l=(a=I[n])._gsap||et(I)[n]._gsap,t._ptLookup[n]=u={},Le[l.id]&&Pe.length&&rt(),d=D===I?n:D.indexOf(a),h&&!1!==(c=new h).init(a,p||i,t,d,D)&&(t._pt=s=new q(t._pt,a,c.name,0,1,c.render,c,0,c.priority),c._props.forEach(function(t){u[t]=s}),c.priority&&(o=1)),!h||p)for(r in i)z[r]&&(c=ei(r,i,t,d,a,D))?c.priority&&(o=1):u[r]=s=oi.call(t,a,r,"get",i[r],d,D,0,m.stringFilter);t._op&&t._op[n]&&t.kill(a,t._op[n]),P&&t._pt&&(ri=t,F.killTweensOf(a,u,t.globalTime(e)),f=!t.parent,ri=0),t._pt&&y&&(Le[l.id]=1)}o&&xi(t),t._onInit&&t._onInit(t)}t._onUpdate=_,t._initted=(!t._op||t._pt)&&!f,E&&e<=0&&L.render(H,!0,!0)}function ni(t,e,i,n,r){return u(t)?t.call(e,i,n,r):O(t)&&~t.indexOf("random(")?Mt(t):t}var ri,si,ai,oi=function(t,e,i,n,r,s,a,o,l,h){u(n)&&(n=n(r||0,t,s));var c,r=t[e],s="get"!==i?i:u(r)?l?t[e.indexOf("set")||!u(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():r,i=u(r)?l?fi:pi:di;if(O(n)&&("="!==(n=~n.indexOf("random(")?Mt(n):n).charAt(1)||!(c=nt(s,n)+(G(s)||0))&&0!==c||(n=c)),!h||s!==n||si)return isNaN(s*n)||""===n?(r||e in t||Z(e,n),function(t,e,i,n,r,s,a){var o,l,h,c,u,d=new q(this._pt,t,e,0,1,Ai,null,r),p=0,f=0;for(d.b=i,d.e=n,i+="",(r=~(n+="").indexOf("random("))&&(n=Mt(n)),s&&(s(s=[i,n],t,e),i=s[0],n=s[1]),o=i.match(Ee)||[];c=Ee.exec(n);)h=c[0],c=n.substring(p,c.index),l?l=(l+1)%5:"rgba("===c.substr(-5)&&(l=1),h!==o[f++]&&(u=parseFloat(o[f-1])||0,d._pt={_next:d._pt,p:c||1===f?c:",",s:u,c:"="===h.charAt(1)?nt(u,h)-u:parseFloat(h)-u,m:l&&l<4?Math.round:0},p=Ee.lastIndex);return d.c=p<n.length?n.substring(p,n.length):"",d.fp=a,(Ce.test(n)||r)&&(d.e=0),this._pt=d}.call(this,t,e,s,n,i,o||U.stringFilter,l)):(c=new q(this._pt,t,e,+s||0,n-(s||0),"boolean"==typeof r?gi:mi,0,i),l&&(c.fp=l),a&&c.modifier(a,this,t),this._pt=c)},li=Qe+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",hi={},W=(p(li+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return hi[t]=1}),i(r,ai=Je),(e=r.prototype).render=function(t,e,i){var n,r,s=this._time,a=this._tDur,o=this._dur,l=t<0,h=a-V<t&&!l?a:t<V?0:t;if(o){if(h!==this._tTime||!t||i||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=l){if(g=h,p=this.timeline,this._repeat){if(c=o+this._rDelay,this._repeat<-1&&l)return this.totalTime(100*c+t,e,i);if(g=M(h%c),h===a?(v=this._repeat,g=o):((v=~~(h/c))&&v===h/c&&(g=o,v--),o<g&&(g=o)),(d=this._yoyo&&1&v)&&(u=this._yEase,g=o-g),y=Ht(this._tTime,c),g===s&&!i&&this._initted)return this._tTime=h,this;v!==y&&(p&&this._yEase&&Nt(p,d),!this.vars.repeatRefresh||d||this._lock||(this._lock=i=1,this.render(M(c*v),!0).invalidate()._lock=0))}if(!this._initted){if(mt(this,l?t:g,i,e))return this._tTime=0,this;if(s!==this._time)return this;if(o!==this._dur)return this.render(t,e,i)}if(this._tTime=h,this._time=g,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=r=(u||this._ease)(g/o),this._from&&(this.ratio=r=1-r),g&&!s&&!e&&(b(this,"onStart"),this._tTime!==h))return this;for(n=this._pt;n;)n.r(r,n.d),n=n._next;p&&p.render(t<0?t:!g&&d?-V:p._dur*p._ease(g/this._dur),e,i)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(l&&lt(this,t,0,i),b(this,"onUpdate")),this._repeat&&v!==y&&this.vars.onRepeat&&!e&&this.parent&&b(this,"onRepeat"),h!==this._tDur&&h||this._tTime!==h||(l&&!this._onUpdate&&lt(this,t,0,!0),!t&&o||!(h===this._tDur&&0<this._ts||!h&&this._ts<0)||ot(this,1),e||l&&!s||!h&&!s||(b(this,h===a?"onComplete":"onReverseComplete",!0),!this._prom||h<a&&0<this.timeScale()||this._prom()))}}else{var c=this;var u=t;var d=e;var p=i;var f,m,g=c.ratio,A=u<0||!u&&(!c._start&&function t(e){e=e.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||t(e))}(c)&&(c._initted||!Vt(c))||(c._ts<0||c._dp._ts<0)&&!Vt(c))?0:1,v=c._rDelay,y=0;if(v&&c._repeat&&(y=zt(0,c._tDur,u),m=Ht(y,v),c._yoyo&&1&m&&(A=1-A),m!==Ht(c._tTime,v)&&(g=1-A,c.vars.repeatRefresh&&c._initted&&c.invalidate())),A!==g||Q||p||c._zTime===V||!u&&c._zTime){if(c._initted||!mt(c,u,p,d)){for(m=c._zTime,c._zTime=u||(d?V:0),d=d||u&&!m,c.ratio=A,c._from&&(A=1-A),c._time=0,c._tTime=y,f=c._pt;f;)f.r(A,f.d),f=f._next;u<0&&lt(c,u,0,!0),c._onUpdate&&!d&&b(c,"onUpdate"),y&&c._repeat&&!d&&c.parent&&b(c,"onRepeat"),(u>=c._tDur||u<0)&&c.ratio===A&&(A&&ot(c,1),d||Q||(b(c,A?"onComplete":"onReverseComplete",!0),c._prom&&c._prom()))}}else c._zTime||(c._zTime=u)}return this},e.targets=function(){return this._targets},e.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),ai.prototype.invalidate.call(this)},e.resetTo=function(t,e,i,n){$t||f.wake(),this._ts||this.play();var r,s=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||ii(this,s),r=this._ease(s/this._dur),function(t,e,i,n,r,s,a){var o,l,h,c,u=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!u)for(u=t._ptCache[e]=[],h=t._ptLookup,c=t._targets.length;c--;){if((o=h[c][e])&&o.d&&o.d._pt)for(o=o.d._pt;o&&o.p!==e&&o.fp!==e;)o=o._next;if(!o)return si=1,t.vars[e]="+=0",ii(t,a),si=0,1;u.push(o)}for(c=u.length;c--;)(o=(l=u[c])._pt||l).s=!n&&0!==n||r?o.s+(n||0)+s*o.c:n,o.c=i-o.s,l.e&&(l.e=k(i)+G(l.e)),l.b&&(l.b=o.s+G(l.b))}(this,t,e,i,n,r,s)?this.resetTo(t,e,i,n):(dt(this,0),this.parent||w(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?Bt(this):this;if(this.timeline)return d=this.timeline.totalDuration(),this.timeline.killTweensOf(t,e,ri&&!0!==ri.vars.overwrite)._first||Bt(this),this.parent&&d!==this.timeline.totalDuration()&&gt(this,this._dur*this.timeline._tDur/d,0,1),this;var i,n,r,s,a,o,l,h=this._targets,c=t?D(t):h,u=this._ptLookup,d=this._pt;if((!e||"all"===e)&&function(t,e){for(var i=t.length,n=i===e.length;n&&i--&&t[i]===e[i];);return i<0}(h,c))return"all"===e&&(this._pt=0),Bt(this);for(i=this._op=this._op||[],"all"!==e&&(O(e)&&(a={},p(e,function(t){return a[t]=1}),e=a),e=function(t,e){var i,n,r,s,t=t[0]?it(t[0]).harness:0,a=t&&t.aliases;if(!a)return e;for(n in i=Ut({},e),a)if(n in i)for(r=(s=a[n].split(",")).length;r--;)i[s[r]]=i[n];return i}(h,e)),l=h.length;l--;)if(~c.indexOf(h[l]))for(a in n=u[l],"all"===e?(i[l]=e,s=n,r={}):(r=i[l]=i[l]||{},s=e),s)(o=n&&n[a])&&("kill"in o.d&&!0!==o.d.kill(a)||E(this,o,"_pt"),delete n[a]),"all"!==r&&(r[a]=1);return this._initted&&!this._pt&&d&&Bt(this),this},r.to=function(t,e,i){return new r(t,e,i)},r.from=function(t,e){return vt(1,arguments)},r.delayedCall=function(t,e,i,n){return new r(e,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:e,onReverseComplete:e,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:n})},r.fromTo=function(t,e,i){return vt(2,arguments)},r.set=function(t,e){return e.duration=0,e.repeatDelay||(e.repeat=0),new r(t,e)},r.killTweensOf=function(t,e,i){return F.killTweensOf(t,e,i)},r);function r(t,e,i,n){var r;"number"==typeof e&&(i.duration=e,e=i,i=null);var s,a,o,l,h,c,u,d,n=(r=ai.call(this,n?e:at(e))||this).vars,p=n.duration,f=n.delay,m=n.immediateRender,g=n.stagger,A=n.overwrite,v=n.keyframes,y=n.defaults,_=n.scrollTrigger,b=n.yoyoEase,n=e.parent||F,x=(B(t)||be(t)?J(t[0]):"length"in e)?[t]:D(t);if(r._targets=x.length?et(x):tt("GSAP target "+t+" not found. https://greensock.com",!U.nullTargetWarn)||[],r._ptLookup=[],r._overwrite=A,v||g||$(p)||$(f)){if(e=r.vars,(s=r.timeline=new L({data:"nested",defaults:y||{},targets:n&&"nested"===n.data?n.vars.targets:x})).kill(),s.parent=s._dp=K(r),s._start=0,g||$(p)||$(f)){if(l=x.length,u=g&&St(g),T(g))for(h in g)~li.indexOf(h)&&((d=d||{})[h]=g[h]);for(a=0;a<l;a++)(o=st(e,hi)).stagger=0,b&&(o.yoyoEase=b),d&&Ut(o,d),c=x[a],o.duration=+ni(p,K(r),a,c,x),o.delay=(+ni(f,K(r),a,c,x)||0)-r._delay,!g&&1===l&&o.delay&&(r._delay=f=o.delay,r._start+=f,o.delay=0),s.to(c,o,u?u(a,c,x):0),s._ease=P.none;s.duration()?p=f=0:r.timeline=0}else if(v){at(N(s.vars.defaults,{ease:"none"})),s._ease=je(v.ease||e.ease||"none");var S,w,E,C=0;if(B(v))v.forEach(function(t){return s.to(x,t,">")}),s.duration();else{for(h in o={},v)"ease"!==h&&"easeEach"!==h&&function(t,i,e,n){var r,s,a=i.ease||n||"power1.inOut";if(B(i))s=e[t]||(e[t]=[]),i.forEach(function(t,e){return s.push({t:e/(i.length-1)*100,v:t,e:a})});else for(r in i)s=e[r]||(e[r]=[]),"ease"!==r&&s.push({t:parseFloat(t),v:i[r],e:a})}(h,v[h],o,v.easeEach);for(h in o)for(S=o[h].sort(function(t,e){return t.t-e.t}),a=C=0;a<S.length;a++)(E={ease:(w=S[a]).e,duration:(w.t-(a?S[a-1].t:0))/100*p})[h]=w.v,s.to(x,E,C),C+=E.duration;s.duration()<p&&s.to({},{duration:p-s.duration()})}}p||r.duration(p=s.duration())}else r.timeline=0;return!0!==A||qt||(ri=K(r),F.killTweensOf(x),ri=0),I(n,K(r),i),e.reversed&&r.reverse(),e.paused&&r.paused(!0),(m||!p&&!v&&r._start===M(n._time)&&R(m)&&function t(e){return!e||e._ts&&t(e.parent)}(K(r))&&"nested"!==n.data)&&(r._tTime=-V,r.render(Math.max(0,-f))),_&&ft(K(r),_),r}function ci(t,e,i){return t.setAttribute(e,i)}function ui(t,e,i,n){n.mSet(t,e,n.m.call(n.tween,i,n.mt),n)}N(W.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),p("staggerTo,staggerFrom,staggerFromTo",function(i){W[i]=function(){var t=new L,e=Oe.call(arguments,0);return e.splice("staggerFromTo"===i?5:4,0,0),t[i].apply(t,e)}});function di(t,e,i){return t[e]=i}function pi(t,e,i){return t[e](i)}function fi(t,e,i,n){return t[e](n.fp,i)}function mi(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)}function gi(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)}function Ai(t,e){var i=e._pt,n="";if(!t&&e.b)n=e.b;else if(1===t&&e.e)n=e.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*t):Math.round(1e4*(i.s+i.c*t))/1e4)+n,i=i._next;n+=e.c}e.set(e.t,e.p,n,e)}function vi(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next}function yi(t,e,i,n){for(var r,s=this._pt;s;)r=s._next,s.p===n&&s.modifier(t,e,i),s=r}function _i(t){for(var e,i,n=this._pt;n;)i=n._next,n.p===t&&!n.op||n.op===t?E(this,n,"_pt"):n.dep||(e=1),n=i;return!e}var bi=function(t,e){return u(t[e])?pi:s(t[e])&&t.setAttribute?ci:di},xi=function(t){for(var e,i,n,r,s=t._pt;s;){for(e=s._next,i=n;i&&i.pr>s.pr;)i=i._next;(s._prev=i?i._prev:r)?s._prev._next=s:n=s,(s._next=i)?i._prev=s:r=s,s=e}t._pt=n},q=(Si.prototype.modifier=function(t,e,i){this.mSet=this.mSet||this.set,this.set=ui,this.m=t,this.mt=i,this.tween=e},Si);function Si(t,e,i,n,r,s,a,o,l){this.t=e,this.s=n,this.c=r,this.p=i,this.r=s||mi,this.d=a||this,this.set=o||di,this.pr=l||0,(this._next=t)&&(t._prev=this)}function wi(t){(Ti[t]||Mi).map(function(t){return t()})}function Ei(){var t=Date.now(),o=[];2<t-Ii&&(wi("matchMediaInit"),Ci.forEach(function(t){var e,i,n,r,s=t.queries,a=t.conditions;for(i in s)(e=l.matchMedia(s[i]).matches)&&(n=1),e!==a[i]&&(a[i]=e,r=1);r&&(t.revert(),n&&o.push(t))}),wi("matchMediaRevert"),o.forEach(function(t){return t.onMatch(t)}),Ii=t,wi("matchMedia"))}p(Qe+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return De[t]=1}),a.TweenMax=a.TweenLite=W,a.TimelineLite=a.TimelineMax=L,F=new L({sortChildren:!1,defaults:fe,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),U.stringFilter=kt;var Ci=[],Ti={},Mi=[],Ii=0,Bi=((e=Di.prototype).add=function(t,n,r){function e(){var t,e=o,i=s.selector;return e&&e!==s&&e.data.push(s),r&&(s.selector=bt(r)),o=s,u(t=n.apply(s,arguments))&&s._r.push(t),o=e,s.selector=i,s.isReverted=!1,t}u(t)&&(r=n,n=t,t=u);var s=this;return s.last=e,t===u?e(s):t?s[t]=e:e},e.ignore=function(t){var e=o;o=null,t(this),o=e},e.getTweens=function(){var e=[];return this.data.forEach(function(t){return t instanceof Di?e.push.apply(e,t.getTweens()):t instanceof W&&e.push(t)}),e},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(e,t){var i=this;e?(this.getTweens().map(function(t){return{g:t.globalTime(0),t:t}}).sort(function(t,e){return e.g-t.g||-1}).forEach(function(t){return t.t.revert(e)}),this.data.forEach(function(t){return!(t instanceof Je)&&t.revert&&t.revert(e)}),this._r.forEach(function(t){return t(e,i)}),this.isReverted=!0):this.data.forEach(function(t){return t.kill&&t.kill()}),this.clear(),t&&~(t=Ci.indexOf(this))&&Ci.splice(t,1)},e.revert=function(t){this.kill(t||{})},Di);function Di(t,e){this.selector=e&&bt(e),this.data=[],this._r=[],this.isReverted=!1,t&&this.add(t)}(e=Li.prototype).add=function(t,e,i){T(t)||(t={matches:t});var n,r,s,a=new Bi(0,i||this.scope),o=a.conditions={};for(r in this.contexts.push(a),e=a.add("onMatch",e),a.queries=t)"all"===r?s=1:(n=l.matchMedia(t[r]))&&(Ci.indexOf(a)<0&&Ci.push(a),(o[r]=n.matches)&&(s=1),n.addListener?n.addListener(Ei):n.addEventListener("change",Ei));return s&&e(a),this},e.revert=function(t){this.kill(t||{})},e.kill=function(e){this.contexts.forEach(function(t){return t.kill(e,!0)})};var Pi=Li;function Li(t){this.contexts=[],this.scope=t}var Ri={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(t){var e=(t=!t.name&&t.default||t).name,i=u(t),i=e&&!i&&t.init?function(){this._props=[]}:t,n={init:A,render:vi,add:oi,kill:_i,modifier:yi,rawVars:0},r={targetTest:0,get:0,getSetter:bi,aliases:{},register:0};if(Ve(),t!==i){if(z[e])return;N(i,N(st(t,n),r)),Ut(i.prototype,Ut(n,st(t,r))),z[i.prop=e]=i,t.targetTest&&(Ne.push(i),De[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}g(e,i),t.register&&t.register(c,i,q)})},timeline:function(t){return new L(t)},getTweensOf:function(t,e){return F.getTweensOf(t,e)},getProperty:function(n,t,e,i){var r=it((n=O(n)?D(n)[0]:n)||{}).get,s=e?x:_;return"native"===e&&(e=""),n&&(t?s((z[t]&&z[t].get||r)(n,t,e,i)):function(t,e,i){return s((z[t]&&z[t].get||r)(n,t,e,i))})},quickSetter:function(i,e,n){var r,s;if(1<(i=D(i)).length)return r=i.map(function(t){return c.quickSetter(t,e,n)}),s=r.length,function(t){for(var e=s;e--;)r[e](t)};i=i[0]||{};var a=z[e],o=it(i),l=o.harness&&(o.harness.aliases||{})[e]||e,h=a?function(t){var e=new a;Ni._pt=0,e.init(i,n?t+n:t,Ni,0,[i]),e.render(1,e),Ni._pt&&vi(1,Ni)}:o.set(i,l);return a?h:function(t){return h(i,l,n?t+n:t,o,1)}},quickTo:function(t,n,e){function i(t,e,i){return r.resetTo(n,t,e,i)}var r=c.to(t,Ut(((t={})[n]="+=0.1",t.paused=!0,t),e||{}));return i.tween=r,i},isTweening:function(t){return 0<F.getTweensOf(t,!0).length},defaults:function(t){return t&&t.ease&&(t.ease=je(t.ease,fe.ease)),S(fe,t||{})},config:function(t){return S(U,t||{})},registerEffect:function(t){var n=t.name,r=t.effect,e=t.plugins,s=t.defaults,t=t.extendTimeline;(e||"").split(",").forEach(function(t){return t&&!z[t]&&!a[t]&&tt(n+" effect requires "+t+" plugin.")}),Re[n]=function(t,e,i){return r(D(t),N(e||{},s),i)},t&&(L.prototype[n]=function(t,e,i){return this.add(Re[n](t,T(e)?e:(i=e)&&{},this),i)})},registerEase:function(t,e){P[t]=je(e)},parseEase:function(t,e){return arguments.length?je(t,e):P},getById:function(t){return F.getById(t)},exportRoot:function(t,e){var i,n,r=new L(t=void 0===t?{}:t);for(r.smoothChildTiming=R(t.smoothChildTiming),F.remove(r),r._dp=0,r._time=r._tTime=F._time,i=F._first;i;)n=i._next,!e&&!i._dur&&i instanceof W&&i.vars.onComplete===i._targets[0]||I(r,i,i._start-i._delay),i=n;return I(F,r,0),r},context:function(t,e){return t?new Bi(t,e):o},matchMedia:function(t){return new Pi(t)},matchMediaRefresh:function(){return Ci.forEach(function(t){var e,i,n=t.conditions;for(i in n)n[i]&&(n[i]=!1,e=1);e&&t.revert()})||Ei()},addEventListener:function(t,e){t=Ti[t]||(Ti[t]=[]);~t.indexOf(e)||t.push(e)},removeEventListener:function(t,e){t=Ti[t],e=t&&t.indexOf(e);0<=e&&t.splice(e,1)},utils:{wrap:function t(e,i,n){var r=i-e;return B(e)?Tt(e,t(0,e.length),i):yt(n,function(t){return(r+(t-e)%r)%r+e})},wrapYoyo:function t(e,i,n){var r=i-e,s=2*r;return B(e)?Tt(e,t(0,e.length-1),i):yt(n,function(t){return e+(r<(t=(s+(t-e)%s)%s||0)?s-t:t)})},distribute:St,random:Ct,snap:Et,normalize:function(t,e,i){return Wt(t,e,0,1,i)},getUnit:G,clamp:function(e,i,t){return yt(t,function(t){return zt(e,i,t)})},splitColor:Pt,toArray:D,selector:bt,mapRange:Wt,pipe:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){return e.reduce(function(t,e){return e(t)},t)}},unitize:function(e,i){return function(t){return e(parseFloat(t))+(i||G(t))}},interpolate:function t(e,i,n,r){var s=isNaN(e+i)?0:function(t){return(1-t)*e+t*i};if(!s){var a,o,l,h,c,u=O(e),d={};if(!0===n&&(r=1)&&(n=null),u)e={p:e},i={p:i};else if(B(e)&&!B(i)){for(l=[],h=e.length,c=h-2,o=1;o<h;o++)l.push(t(e[o-1],e[o]));h--,s=function(t){t*=h;var e=Math.min(c,~~t);return l[e](t-e)},n=i}else r||(e=Ut(B(e)?[]:{},e));if(!l){for(a in i)oi.call(d,e,a,"get",i[a]);s=function(t){return vi(t,d),u?e.p:e}}}return yt(n,s)},shuffle:xt},install:m,effects:Re,ticker:f,updateRoot:L.updateRoot,plugins:z,globalTimeline:F,core:{PropTween:q,globals:g,Tween:W,Timeline:L,Animation:Je,getCache:it,_removeLinkedListItem:E,reverting:function(){return Q},context:function(t){return t&&o&&(o.data.push(t),t._ctx=o),o},suppressOverwrites:function(t){return qt=t}}};function ki(t,c){return{name:t,rawVars:1,init:function(t,h,e){e._onInit=function(t){var e,i;if(O(h)&&(e={},p(h,function(t){return e[t]=1}),h=e),c){for(i in e={},h)e[i]=c(h[i]);h=e}var n,r,s,a=t,o=h,l=a._targets;for(n in o)for(r=l.length;r--;)(s=(s=a._ptLookup[r][n])&&s.d)&&(s._pt&&(s=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i}(s,n)),s&&s.modifier&&s.modifier(o[n],a,l[r],n))}}}}p("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return Ri[t]=W[t]}),f.add(L.updateRoot);var Ni=Ri.to({},{duration:0}),c=Ri.registerPlugin({name:"attr",init:function(t,e,i,n,r){var s,a,o;for(s in this.tween=i,e)o=t.getAttribute(s)||"",(a=this.add(t,"setAttribute",(o||0)+"",e[s],n,r,0,0,s)).op=s,a.b=o,this._props.push(s)},render:function(t,e){for(var i=e._pt;i;)Q?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},ki("roundProps",wt),ki("modifiers"),ki("snap",Et))||Ri;function Qi(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function Fi(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function Oi(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)}function Gi(t,e){t=e.s+e.c*t;e.set(e.t,e.p,~~(t+(t<0?-.5:.5))+e.u,e)}function Ui(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)}function Hi(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)}function Vi(t,e,i){return t.style[e]=i}function zi(t,e,i){return t.style.setProperty(e,i)}function Wi(t,e,i){return t._gsap[e]=i}function qi(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i}function ji(t,e,i,n,r){t=t._gsap;t.scaleX=t.scaleY=i,t.renderTransform(r,t)}function Xi(t,e,i,n,r){t=t._gsap;t[e]=i,t.renderTransform(r,t)}function Yi(t){var e=this,i=this.target,n=i.style;if(t in Un){if(this.tfm=this.tfm||{},"transform"!==t&&(~(t=Xn[t]||t).indexOf(",")?t.split(",").forEach(function(t){return e.tfm[t]=Zn(i,t)}):this.tfm[t]=i._gsap.x?i._gsap[t]:Zn(i,t)),0<=this.props.indexOf(X))return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Y,"")),t=X}n&&this.props.push(t,n[t])}function Ki(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))}function Ji(){for(var t,e=this.props,i=this.target,n=i.style,r=i._gsap,s=0;s<e.length;s+=2)e[s+1]?n[e[s]]=e[s+1]:n.removeProperty(e[s].replace(Wn,"-$1").toLowerCase());if(this.tfm){for(t in this.tfm)r[t]=this.tfm[t];r.svg&&(r.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),!(s=xn())||s.isStart||n[X]||(Ki(n),r.uncache=1)}}function $i(t,e){var i={target:t,props:[],revert:Ji,save:Yi};return e&&e.split(",").forEach(function(t){return i.save(t)}),i}function Zi(t,e){e=An.createElementNS?An.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):An.createElement(t);return e.style?e:An.createElement(t)}function j(t,e,i){var n=getComputedStyle(t);return n[e]||n.getPropertyValue(e.replace(Wn,"-$1").toLowerCase())||n.getPropertyValue(e)||!i&&j(t,Kn(e)||e,1)||""}function tn(){"undefined"!=typeof window&&window.document&&(vn=(An=window.document).documentElement,_n=Zi("div")||{style:{}},Zi("div"),X=Kn(X),Y=X+"Origin",_n.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Sn=!!Kn("perspective"),xn=c.core.reverting,yn=1)}function en(t){var e,i=Zi("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,s=this.style.cssText;if(vn.appendChild(i),i.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=en}catch(t){}else this._gsapBBox&&(e=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),vn.removeChild(i),this.style.cssText=s,e}function nn(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])}function rn(e){var i;try{i=e.getBBox()}catch(t){i=en.call(e,!0)}return!(i=i&&(i.width||i.height)||e.getBBox===en?i:en.call(e,!0))||i.width||i.x||i.y?i:{x:+nn(e,["x","cx","x1"])||0,y:+nn(e,["y","cy","y1"])||0,width:0,height:0}}function sn(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!rn(t))}function an(t,e){e&&(t=t.style,e in Un&&e!==Y&&(e=X),t.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),t.removeProperty(e.replace(Wn,"-$1").toLowerCase())):t.removeAttribute(e))}function on(t,e,i,n,r,s){e=new q(t._pt,e,i,0,1,s?Hi:Ui);(t._pt=e).b=n,e.e=r,t._props.push(i)}function ln(t,e,i,n){var r,s=parseFloat(i)||0,a=(i+"").trim().substr((s+"").length)||"px",o=_n.style,l=qn.test(e),h="svg"===t.tagName.toLowerCase(),c=(h?"client":"offset")+(l?"Width":"Height"),u="px"===n,d="%"===n;return n===a||!s||Jn[n]||Jn[a]?s:("px"===a||u||(s=ln(t,e,i,"px")),i=t.getCTM&&sn(t),!d&&"%"!==a||!Un[e]&&!~e.indexOf("adius")?(o[l?"width":"height"]=100+(u?a:n),e=~e.indexOf("adius")||"em"===n&&t.appendChild&&!h?t:t.parentNode,(n=(e=(e=i?(t.ownerSVGElement||{}).parentNode:e)&&e!==An&&e.appendChild?e:An.body)._gsap)&&d&&n.width&&l&&n.time===f.time&&!n.uncache?k(s/n.width*100):(!d&&"%"!==a||$n[j(e,"display")]||(o.position=j(t,"position")),e===t&&(o.position="static"),e.appendChild(_n),r=_n[c],e.removeChild(_n),o.position="absolute",l&&d&&((n=it(e)).time=f.time,n.width=e[c]),k(u?r*s/100:r&&s?100/r*s:0))):(r=i?t.getBBox()[l?"width":"height"]:t[c],k(d?s/r*100:s/100*r)))}function hn(t,e,i,n){var r;i&&"none"!==i||((r=(s=Kn(e,t,1))&&j(t,s,1))&&r!==i?(e=s,i=r):"borderColor"===e&&(i=j(t,"borderTopColor")));var s,a,o,l,h,c,u,d,p,f=new q(this._pt,t.style,e,0,1,Ai),m=0,g=0;if(f.b=i,f.e=n,i+="","auto"==(n+="")&&(t.style[e]=n,n=j(t,e)||n,t.style[e]=i),kt(s=[i,n]),n=s[1],a=(i=s[0]).match(we)||[],(n.match(we)||[]).length){for(;u=we.exec(n);)d=u[0],u=n.substring(m,u.index),l?l=(l+1)%5:"rgba("!==u.substr(-5)&&"hsla("!==u.substr(-5)||(l=1),d!==(h=a[g++]||"")&&(o=parseFloat(h)||0,p=h.substr((o+"").length),"="===d.charAt(1)&&(d=nt(o,d)+p),c=parseFloat(d),d=d.substr((c+"").length),m=we.lastIndex-d.length,d||(d=d||U.units[e]||p,m===n.length&&(n+=d,f.e+=d)),p!==d&&(o=ln(t,e,h,d)||0),f._pt={_next:f._pt,p:u||1===g?u:",",s:o,c:c-o,m:l&&l<4||"zIndex"===e?Math.round:0});f.c=m<n.length?n.substring(m,n.length):""}else f.r="display"===e&&"none"===n?Hi:Ui;return Ce.test(n)&&(f.e=0),this._pt=f}function cn(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i,n,r,s=e.t,a=s.style,o=e.u,e=s._gsap;if("all"===o||!0===o)a.cssText="",n=1;else for(r=(o=o.split(",")).length;-1<--r;)i=o[r],Un[i]&&(n=1,i="transformOrigin"===i?Y:X),an(s,i);n&&(an(s,X),e&&(e.svg&&s.removeAttribute("transform"),rr(s,1),e.uncache=1,Ki(a)))}}function un(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t}function dn(t){t=j(t,X);return un(t)?ir:t.substr(7).match(Se).map(k)}function pn(t,e){var i,n,r,s=t._gsap||it(t),a=t.style,o=dn(t);return s.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(o=[(n=t.transform.baseVal.consolidate().matrix).a,n.b,n.c,n.d,n.e,n.f]).join(",")?ir:o:(o!==ir||t.offsetParent||t===vn||s.svg||(n=a.display,a.display="block",(s=t.parentNode)&&t.offsetParent||(r=1,i=t.nextElementSibling,vn.appendChild(t)),o=dn(t),n?a.display=n:an(t,"display"),r&&(i?s.insertBefore(t,i):s?s.appendChild(t):vn.removeChild(t))),e&&6<o.length?[o[0],o[1],o[4],o[5],o[12],o[13]]:o)}function fn(t,e,i,n,r,s){var a,o=t._gsap,r=r||pn(t,!0),l=o.xOrigin||0,h=o.yOrigin||0,c=o.xOffset||0,u=o.yOffset||0,d=r[0],p=r[1],f=r[2],m=r[3],g=r[4],A=r[5],v=e.split(" "),y=parseFloat(v[0])||0,_=parseFloat(v[1])||0;i?r!==ir&&(r=d*m-p*f)&&(a=y*(-p/r)+_*(d/r)-(d*A-p*g)/r,y=y*(m/r)+_*(-f/r)+(f*A-m*g)/r,_=a):(y=(r=rn(t)).x+(~v[0].indexOf("%")?y/100*r.width:y),_=r.y+(~(v[1]||v[0]).indexOf("%")?_/100*r.height:_)),n||!1!==n&&o.smooth?(o.xOffset=c+((g=y-l)*d+(A=_-h)*f)-g,o.yOffset=u+(g*p+A*m)-A):o.xOffset=o.yOffset=0,o.xOrigin=y,o.yOrigin=_,o.smooth=!!n,o.origin=e,o.originIsAbsolute=!!i,t.style[Y]="0px 0px",s&&(on(s,o,"xOrigin",l,y),on(s,o,"yOrigin",h,_),on(s,o,"xOffset",c,o.xOffset),on(s,o,"yOffset",u,o.yOffset)),t.setAttribute("data-svg-origin",y+" "+_)}function mn(t,e,i){var n=G(e);return k(parseFloat(e)+parseFloat(ln(t,"x",i+"px",n)))+n}function gn(t,e){for(var i in e)t[i]=e[i];return t}W.version=L.version=c.version="3.11.1",Kt=1,n()&&Ve();var An,vn,yn,_n,bn,xn,Sn,e=P.Power0,wn=P.Power1,En=P.Power2,Cn=P.Power3,Tn=P.Power4,Mn=P.Linear,In=P.Quad,Bn=P.Cubic,Dn=P.Quart,Pn=P.Quint,Ln=P.Strong,Rn=P.Elastic,kn=P.Back,Nn=P.SteppedEase,Qn=P.Bounce,Fn=P.Sine,On=P.Expo,Gn=P.Circ,Un={},Hn=180/Math.PI,Vn=Math.PI/180,zn=Math.atan2,Wn=/([A-Z])/g,qn=/(left|right|width|margin|padding|x)/i,jn=/[\s,\(]\S/,Xn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},X="transform",Y=X+"Origin",Yn="O,Moz,ms,Ms,Webkit".split(","),Kn=function(t,e,i){var n=(e||_n).style,r=5;if(t in n&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);r--&&!(Yn[r]+t in n););return r<0?null:(3===r?"ms":0<=r?Yn[r]:"")+t},Jn={deg:1,rad:1,turn:1},$n={grid:1,flex:1},Zn=function(t,e,i,n){var r;return yn||tn(),e in Xn&&"transform"!==e&&~(e=Xn[e]).indexOf(",")&&(e=e.split(",")[0]),Un[e]&&"transform"!==e?(r=rr(t,n),r="transformOrigin"!==e?r[e]:r.svg?r.origin:sr(j(t,Y))+" "+r.zOrigin+"px"):(r=t.style[e])&&"auto"!==r&&!n&&!~(r+"").indexOf("calc(")||(r=er[e]&&er[e](t,e,i)||j(t,e)||v(t,e)||("opacity"===e?1:0)),i&&!~(r+"").trim().indexOf(" ")?ln(t,e,r,i)+i:r},tr={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},er={clearProps:function(t,e,i,n,r){if("isFromStart"!==r.data)return(e=t._pt=new q(t._pt,e,i,0,0,cn)).u=n,e.pr=-10,e.tween=r,t._props.push(i),1}},ir=[1,0,0,1,0,0],nr={},rr=function(t,e){var i=t._gsap||new Ke(t);if("x"in i&&!e&&!i.uncache)return i;var n,r,s,a,o,l,h,c,u,d,p,f,m,g,A,v,y,_,b,x,S,w,E,C,T,M=t.style,I=i.scaleX<0,B=getComputedStyle(t),D=j(t,Y)||"0",P=n=r=a=o=l=h=c=0,L=s=1;return i.svg=!(!t.getCTM||!sn(t)),B.translate&&("none"===B.translate&&"none"===B.scale&&"none"===B.rotate||(M[X]=("none"!==B.translate?"translate3d("+(B.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==B.rotate?"rotate("+B.rotate+") ":"")+("none"!==B.scale?"scale("+B.scale.split(" ").join(",")+") ":"")+B[X]),M.scale=M.rotate=M.translate="none"),B=pn(t,i.svg),i.svg&&(y=i.uncache?(_=t.getBBox(),D=i.xOrigin-_.x+"px "+(i.yOrigin-_.y)+"px",""):!e&&t.getAttribute("data-svg-origin"),fn(t,y||D,!!y||i.originIsAbsolute,!1!==i.smooth,B)),T=i.xOrigin||0,E=i.yOrigin||0,B!==ir&&(p=B[0],f=B[1],m=B[2],g=B[3],P=A=B[4],n=v=B[5],6===B.length?(L=Math.sqrt(p*p+f*f),s=Math.sqrt(g*g+m*m),a=p||f?zn(f,p)*Hn:0,(h=m||g?zn(m,g)*Hn+a:0)&&(s*=Math.abs(Math.cos(h*Vn))),i.svg&&(P-=T-(T*p+E*m),n-=E-(T*f+E*g))):(T=B[6],E=B[7],x=B[8],S=B[9],w=B[10],C=B[11],P=B[12],n=B[13],r=B[14],o=(B=zn(T,w))*Hn,B&&(y=A*(u=Math.cos(-B))+x*(d=Math.sin(-B)),_=v*u+S*d,b=T*u+w*d,x=A*-d+x*u,S=v*-d+S*u,w=T*-d+w*u,C=E*-d+C*u,A=y,v=_,T=b),l=(B=zn(-m,w))*Hn,B&&(u=Math.cos(-B),C=g*(d=Math.sin(-B))+C*u,p=y=p*u-x*d,f=_=f*u-S*d,m=b=m*u-w*d),a=(B=zn(f,p))*Hn,B&&(y=p*(u=Math.cos(B))+f*(d=Math.sin(B)),_=A*u+v*d,f=f*u-p*d,v=v*u-A*d,p=y,A=_),o&&359.9<Math.abs(o)+Math.abs(a)&&(o=a=0,l=180-l),L=k(Math.sqrt(p*p+f*f+m*m)),s=k(Math.sqrt(v*v+T*T)),B=zn(A,v),h=2e-4<Math.abs(B)?B*Hn:0,c=C?1/(C<0?-C:C):0),i.svg&&(y=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!un(j(t,X)),y&&t.setAttribute("transform",y))),90<Math.abs(h)&&Math.abs(h)<270&&(I?(L*=-1,h+=a<=0?180:-180,a+=a<=0?180:-180):(s*=-1,h+=h<=0?180:-180)),e=e||i.uncache,i.x=P-((i.xPercent=P&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-P)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+"px",i.y=n-((i.yPercent=n&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-n)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+"px",i.z=r+"px",i.scaleX=k(L),i.scaleY=k(s),i.rotation=k(a)+"deg",i.rotationX=k(o)+"deg",i.rotationY=k(l)+"deg",i.skewX=h+"deg",i.skewY="0deg",i.transformPerspective=c+"px",(i.zOrigin=parseFloat(D.split(" ")[2])||0)&&(M[Y]=sr(D)),i.xOffset=i.yOffset=0,i.force3D=U.force3D,i.renderTransform=i.svg?ur:Sn?cr:ar,i.uncache=0,i},sr=function(t){return(t=t.split(" "))[0]+" "+t[1]},ar=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,cr(t,e)},or="0deg",lr="0px",hr=") ",cr=function(t,e){var i,n,e=e||this,r=e.xPercent,s=e.yPercent,a=e.x,o=e.y,l=e.z,h=e.rotation,c=e.rotationY,u=e.rotationX,d=e.skewX,p=e.skewY,f=e.scaleX,m=e.scaleY,g=e.transformPerspective,A=e.force3D,v=e.target,e=e.zOrigin,y="",t="auto"===A&&t&&1!==t||!0===A;!e||u===or&&c===or||(A=parseFloat(c)*Vn,n=Math.sin(A),i=Math.cos(A),A=parseFloat(u)*Vn,a=mn(v,a,n*(n=Math.cos(A))*-e),o=mn(v,o,-Math.sin(A)*-e),l=mn(v,l,i*n*-e+e)),g!==lr&&(y+="perspective("+g+hr),(r||s)&&(y+="translate("+r+"%, "+s+"%) "),!t&&a===lr&&o===lr&&l===lr||(y+=l!==lr||t?"translate3d("+a+", "+o+", "+l+") ":"translate("+a+", "+o+hr),h!==or&&(y+="rotate("+h+hr),c!==or&&(y+="rotateY("+c+hr),u!==or&&(y+="rotateX("+u+hr),d===or&&p===or||(y+="skew("+d+", "+p+hr),1===f&&1===m||(y+="scale("+f+", "+m+hr),v.style[X]=y||"translate(0, 0)"},ur=function(t,e){var i,n,r,s,a,e=e||this,o=e.xPercent,l=e.yPercent,h=e.x,c=e.y,u=e.rotation,d=e.skewX,p=e.skewY,f=e.scaleX,m=e.scaleY,g=e.target,A=e.xOrigin,v=e.yOrigin,y=e.xOffset,_=e.yOffset,e=e.forceCSS,b=parseFloat(h),x=parseFloat(c),u=parseFloat(u),d=parseFloat(d);(p=parseFloat(p))&&(d+=p=parseFloat(p),u+=p),u||d?(u*=Vn,d*=Vn,i=Math.cos(u)*f,n=Math.sin(u)*f,r=Math.sin(u-d)*-m,s=Math.cos(u-d)*m,d&&(p*=Vn,a=Math.tan(d-p),r*=a=Math.sqrt(1+a*a),s*=a,p&&(a=Math.tan(p),i*=a=Math.sqrt(1+a*a),n*=a)),i=k(i),n=k(n),r=k(r),s=k(s)):(i=f,s=m,n=r=0),(b&&!~(h+"").indexOf("px")||x&&!~(c+"").indexOf("px"))&&(b=ln(g,"x",h,"px"),x=ln(g,"y",c,"px")),(A||v||y||_)&&(b=k(b+A-(A*i+v*r)+y),x=k(x+v-(A*n+v*s)+_)),(o||l)&&(b=k(b+o/100*(a=g.getBBox()).width),x=k(x+l/100*a.height)),g.setAttribute("transform",a="matrix("+i+","+n+","+r+","+s+","+b+","+x+")"),e&&(g.style[X]=a)};p("padding,margin,Width,Radius",function(e,i){var t="Bottom",o=(i<3?["Top","Right",t,"Left"]:["TopLeft","TopRight",t+"Right",t+"Left"]).map(function(t){return i<2?e+t:"border"+t+e});er[1<i?"border"+e:e]=function(e,t,i,n,r){var s,a;if(arguments.length<4)return s=o.map(function(t){return Zn(e,t,i)}),5===(a=s.join(" ")).split(s[0]).length?s[0]:a;s=(n+"").split(" "),a={},o.forEach(function(t,e){return a[t]=s[e]=s[e]||s[(e-1)/2|0]}),e.init(t,a,r)}});var dr,pr={name:"css",register:tn,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,n,r){var s,a,o,l,h,c,u,d,p,N,f,m,Q,g,A,v,y,_,b,x,F=this._props,S=t.style,w=i.vars.startAt;for(h in yn||tn(),this.styles=this.styles||$i(t),g=this.styles.props,this.tween=i,e)if("autoRound"!==h&&(a=e[h],!z[h]||!ei(h,e,i,n,t,r)))if(d=typeof a,l=er[h],"function"===d&&(d=typeof(a=a.call(i,n,t,r))),"string"===d&&~a.indexOf("random(")&&(a=Mt(a)),l)l(this,t,h,a,i)&&(Q=1);else if("--"===h.substr(0,2))s=(getComputedStyle(t).getPropertyValue(h)+"").trim(),a+="",Ue.lastIndex=0,Ue.test(s)||(c=G(s),u=G(a)),u?c!==u&&(s=ln(t,h,s,u)+u):c&&(a+=c),this.add(S,"setProperty",s,a,n,r,0,0,h),F.push(h),g.push(h,S[h]);else if("undefined"!==d){if(w&&h in w?(G((s=O(s="function"==typeof w[h]?w[h].call(i,n,t,r):w[h])&&~s.indexOf("random(")?Mt(s):s)+"")||(s+=U.units[h]||G(Zn(t,h))||""),"="===(s+"").charAt(1)&&(s=Zn(t,h))):s=Zn(t,h),l=parseFloat(s),(d="string"===d&&"="===a.charAt(1)&&a.substr(0,2))&&(a=a.substr(2)),o=parseFloat(a),h in Xn&&("autoAlpha"===h&&(1===l&&"hidden"===Zn(t,"visibility")&&o&&(l=0),g.push("visibility",S.visibility),on(this,S,"visibility",l?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==h&&"transform"!==h&&~(h=Xn[h]).indexOf(",")&&(h=h.split(",")[0])),p=h in Un)if(this.styles.save(h),N||((f=t._gsap).renderTransform&&!e.parseTransform||rr(t,e.parseTransform),m=!1!==e.smoothOrigin&&f.smooth,(N=this._pt=new q(this._pt,S,X,0,1,f.renderTransform,f,0,-1)).dep=1),"scale"===h)this._pt=new q(this._pt,f,"scaleY",f.scaleY,(d?nt(f.scaleY,d+o):o)-f.scaleY||0,Qi),this._pt.u=0,F.push("scaleY",h),h+="X";else{if("transformOrigin"===h){g.push(Y,S[Y]),x=b=_=void 0,_=(y=a).split(" "),b=_[0],x=_[1]||"50%","top"!==b&&"bottom"!==b&&"left"!==x&&"right"!==x||(y=b,b=x,x=y),_[0]=tr[b]||b,_[1]=tr[x]||x,a=_.join(" "),f.svg?fn(t,a,0,m,0,this):((u=parseFloat(a.split(" ")[2])||0)!==f.zOrigin&&on(this,f,"zOrigin",f.zOrigin,u),on(this,S,h,sr(s),sr(a)));continue}if("svgOrigin"===h){fn(t,a,1,m,0,this);continue}if(h in nr){y=this,b=f,x=h,_=l,A=d?nt(l,d+a):a,v=k=P=void 0,P=O(A),k=parseFloat(A)*(P&&~A.indexOf("rad")?Hn:1)-_,v=_+k+"deg",P&&("short"===(P=A.split("_")[1])&&(k%=360)!=k%180&&(k+=k<0?360:-360),"cw"===P&&k<0?k=(k+36e9)%360-360*~~(k/360):"ccw"===P&&0<k&&(k=(k-36e9)%360-360*~~(k/360))),y._pt=A=new q(y._pt,b,x,_,k,Fi),A.e=v,A.u="deg",y._props.push(x);continue}if("smoothOrigin"===h){on(this,f,"smooth",f.smooth,a);continue}if("force3D"===h){f[h]=a;continue}if("transform"===h){k=R=B=I=M=I=T=C=E=L=P=D=void 0;var E,C,T,M,I,B,D=this,P=a,L=t,R=gn({},L._gsap),k=L.style;for(C in R.svg?(T=L.getAttribute("transform"),L.setAttribute("transform",""),k[X]=P,E=rr(L,1),an(L,X),L.setAttribute("transform",T)):(T=getComputedStyle(L)[X],k[X]=P,E=rr(L,1),k[X]=T),Un)(T=R[C])!==(I=E[C])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(C)<0&&(M=G(T)!==(B=G(I))?ln(L,C,T,B):parseFloat(T),I=parseFloat(I),D._pt=new q(D._pt,E,C,M,I-M,Qi),D._pt.u=B||0,D._props.push(C));gn(E,R);continue}}else h in S||(h=Kn(h)||h);if(p||(o||0===o)&&(l||0===l)&&!jn.test(a)&&h in S)o=o||0,(c=(s+"").substr((l+"").length))!==(u=G(a)||(h in U.units?U.units[h]:c))&&(l=ln(t,h,s,u)),this._pt=new q(this._pt,p?f:S,h,l,(d?nt(l,d+o):o)-l,p||"px"!==u&&"zIndex"!==h||!1===e.autoRound?Qi:Gi),this._pt.u=u||0,c!==u&&"%"!==u&&(this._pt.b=s,this._pt.r=Oi);else if(h in S)hn.call(this,t,h,s,d?d+a:a);else{if(!(h in t)){Z(h,a);continue}this.add(t,h,s||t[h],d?d+a:a,n,r)}p||g.push(h,S[h]),F.push(h)}Q&&xi(this)},render:function(t,e){if(e.tween._time||!xn())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:Zn,aliases:Xn,getSetter:function(t,e,i){var n=Xn[e];return(e=n&&n.indexOf(",")<0?n:e)in Un&&e!==Y&&(t._gsap.x||Zn(t,"x"))?i&&bn===i?"scale"===e?qi:Wi:(bn=i||{})&&("scale"===e?ji:Xi):t.style&&!s(t.style[e])?Vi:~e.indexOf("-")?zi:bi(t,e)},core:{_removeProperty:an,_getMatrix:pn}},fr=(c.utils.checkPrefix=Kn,c.core.getStyleSaver=$i,dr=p("x,y,z,scale,scaleX,scaleY,xPercent,yPercent"+","+(fr="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(t){Un[t]=1}),p(fr,function(t){U.units[t]="deg",nr[t]=1}),Xn[dr[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+fr,p("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(t){t=t.split(":");Xn[t[1]]=dr[t[0]]}),p("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){U.units[t]="px"}),c.registerPlugin(pr),c.registerPlugin(pr)||c),mr=fr.core.Tween;t.Back=kn,t.Bounce=Qn,t.CSSPlugin=pr,t.Circ=Gn,t.Cubic=Bn,t.Elastic=Rn,t.Expo=On,t.Linear=Mn,t.Power0=e,t.Power1=wn,t.Power2=En,t.Power3=Cn,t.Power4=Tn,t.Quad=In,t.Quart=Dn,t.Quint=Pn,t.Sine=Fn,t.SteppedEase=Nn,t.Strong=Ln,t.TimelineLite=L,t.TimelineMax=L,t.TweenLite=W,t.TweenMax=mr,t.default=fr,t.gsap=fr,"undefined"==typeof window||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete t.default}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){var i;if(t&&e)return-1==(i=(i=this._events=this._events||{})[t]=i[t]||[]).indexOf(e)&&i.push(e),this},e.once=function(t,e){var i;if(t&&e)return this.on(t,e),((i=this._onceEvents=this._onceEvents||{})[t]=i[t]||{})[e]=!0,this},e.off=function(t,e){t=this._events&&this._events[t];if(t&&t.length)return-1!=(e=t.indexOf(e))&&t.splice(e,1),this},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],r=0;r<i.length;r++){var s=i[r];n&&n[s]&&(this.off(t,s),delete n[s]),s.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}),function(e,i){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("ev-emitter")):e.imagesLoaded=i(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){function s(t,e){for(var i in e)t[i]=e[i];return t}function a(t,e,i){if(!(this instanceof a))return new a(t,e,i);var n,r=t;return(r="string"==typeof t?document.querySelectorAll(t):r)?(this.elements=(n=r,Array.isArray(n)?n:"object"==typeof n&&"number"==typeof n.length?h.call(n):[n]),this.options=s({},this.options),"function"==typeof e?i=e:s(this.options,e),i&&this.on("always",i),this.getImages(),o&&(this.jqDeferred=new o.Deferred),void setTimeout(this.check.bind(this))):void l.error("Bad element for imagesLoaded "+(r||t))}function i(t){this.img=t}function n(t,e){this.url=t,this.element=e,this.img=new Image}var o=e.jQuery,l=e.console,h=Array.prototype.slice,c=((a.prototype=Object.create(t.prototype)).options={},a.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},a.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&c[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var r=i[n];this.addImage(r)}if("string"==typeof this.options.background)for(var s=t.querySelectorAll(this.options.background),n=0;n<s.length;n++){var a=s[n];this.addElementBackgroundImages(a)}}},{1:!0,9:!0,11:!0});return a.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var r=n&&n[2];r&&this.addBackground(r,t),n=i.exec(e.backgroundImage)}},a.prototype.addImage=function(t){t=new i(t);this.images.push(t)},a.prototype.addBackground=function(t,e){t=new n(t,e);this.images.push(t)},a.prototype.check=function(){function e(t,e,i){setTimeout(function(){n.progress(t,e,i)})}var n=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},a.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&l&&l.log("progress: "+i,t,e)},a.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred&&(t=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[t](this))},(i.prototype=Object.create(t.prototype)).check=function(){return this.getIsImageComplete()?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},i.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},i.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},i.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},i.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},i.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(n.prototype=Object.create(i.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},n.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},n.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},(a.makeJQueryPlugin=function(t){(t=t||e.jQuery)&&((o=t).fn.imagesLoaded=function(t,e){return new a(this,t,e).jqDeferred.promise(o(this))})})(),a}),function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(t.document)return e(t);throw new Error("jQuery requires a window with a document")}:e(t)}("undefined"!=typeof window?window:this,function(x,N){"use strict";function v(t){return"function"==typeof t&&"number"!=typeof t.nodeType}function m(t){return null!=t&&t===t.window}var e=[],Q=Object.getPrototypeOf,o=e.slice,F=e.flat?function(t){return e.flat.call(t)}:function(t){return e.concat.apply([],t)},O=e.push,G=e.indexOf,U={},H=U.toString,V=U.hasOwnProperty,z=V.toString,W=z.call(Object),g={},S=x.document,q={type:!0,src:!0,nonce:!0,noModule:!0};function j(t,e,i){var n,r,s=(i=i||S).createElement("script");if(s.text=t,e)for(n in q)(r=e[n]||e.getAttribute&&e.getAttribute(n))&&s.setAttribute(n,r);i.head.appendChild(s).parentNode.removeChild(s)}function f(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?U[H.call(t)]||"object":typeof t}var w=function(t,e){return new w.fn.init(t,e)};function X(t){var e=!!t&&"length"in t&&t.length,i=f(t);return!v(t)&&!m(t)&&("array"===i||0===e||"number"==typeof e&&0<e&&e-1 in t)}w.fn=w.prototype={jquery:"3.5.1",constructor:w,length:0,toArray:function(){return o.call(this)},get:function(t){return null==t?o.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){t=w.merge(this.constructor(),t);return t.prevObject=this,t},each:function(t){return w.each(this,t)},map:function(i){return this.pushStack(w.map(this,function(t,e){return i.call(t,e,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(w.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,t=+t+(t<0?e:0);return this.pushStack(0<=t&&t<e?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:O,sort:e.sort,splice:e.splice},w.extend=w.fn.extend=function(){var t,e,i,n,r,s=arguments[0]||{},a=1,o=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||v(s)||(s={}),a===o&&(s=this,a--);a<o;a++)if(null!=(t=arguments[a]))for(e in t)i=t[e],"__proto__"!==e&&s!==i&&(l&&i&&(w.isPlainObject(i)||(n=Array.isArray(i)))?(r=s[e],r=n&&!Array.isArray(r)?[]:n||w.isPlainObject(r)?r:{},n=!1,s[e]=w.extend(l,r,i)):void 0!==i&&(s[e]=i));return s},w.extend({expando:"jQuery"+("3.5.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){return!(!t||"[object Object]"!==H.call(t)||(t=Q(t))&&("function"!=typeof(t=V.call(t,"constructor")&&t.constructor)||z.call(t)!==W))},isEmptyObject:function(t){for(var e in t)return!1;return!0},globalEval:function(t,e,i){j(t,{nonce:e&&e.nonce},i)},each:function(t,e){var i,n=0;if(X(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},makeArray:function(t,e){e=e||[];return null!=t&&(X(Object(t))?w.merge(e,"string"==typeof t?[t]:t):O.call(e,t)),e},inArray:function(t,e,i){return null==e?-1:G.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;n<i;n++)t[r++]=e[n];return t.length=r,t},grep:function(t,e,i){for(var n=[],r=0,s=t.length,a=!i;r<s;r++)!e(t[r],r)!=a&&n.push(t[r]);return n},map:function(t,e,i){var n,r,s=0,a=[];if(X(t))for(n=t.length;s<n;s++)null!=(r=e(t[s],s,i))&&a.push(r);else for(s in t)null!=(r=e(t[s],s,i))&&a.push(r);return F(a)},guid:1,support:g}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=e[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){U["[object "+e+"]"]=e.toLowerCase()});function n(t,e,i){for(var n=[],r=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&w(t).is(i))break;n.push(t)}return n}function Y(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}var t=function(N){function u(t,e){return t="0x"+t.slice(1)-65536,e||(t<0?String.fromCharCode(65536+t):String.fromCharCode(t>>10|55296,1023&t|56320))}function Q(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}function F(){x()}var t,d,_,s,O,p,G,U,b,l,h,x,S,i,w,f,n,r,m,E="sizzle"+ +new Date,c=N.document,C=0,H=0,V=D(),z=D(),W=D(),g=D(),q=function(t,e){return t===e&&(h=!0),0},j={}.hasOwnProperty,e=[],X=e.pop,Y=e.push,T=e.push,K=e.slice,v=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",a="[\\x20\\t\\r\\n\\f]",o="(?:\\\\[\\da-fA-F]{1,6}"+a+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",$="\\["+a+"*("+o+")(?:"+a+"*([*^$|!~]?=)"+a+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+o+"))|)"+a+"*\\]",Z=":("+o+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+$+")*)|.*)\\)|)",tt=new RegExp(a+"+","g"),A=new RegExp("^"+a+"+|((?:^|[^\\\\])(?:\\\\.)*)"+a+"+$","g"),et=new RegExp("^"+a+"*,"+a+"*"),it=new RegExp("^"+a+"*([>+~]|"+a+")"+a+"*"),nt=new RegExp(a+"|>"),rt=new RegExp(Z),st=new RegExp("^"+o+"$"),y={ID:new RegExp("^#("+o+")"),CLASS:new RegExp("^\\.("+o+")"),TAG:new RegExp("^("+o+"|[*])"),ATTR:new RegExp("^"+$),PSEUDO:new RegExp("^"+Z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+a+"*(even|odd|(([+-]|)(\\d*)n|)"+a+"*(?:([+-]|)"+a+"*(\\d+)|))"+a+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+a+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+a+"*((?:-\\d)?\\d*)"+a+"*\\)|)(?=[^-]|$)","i")},at=/HTML$/i,ot=/^(?:input|select|textarea|button)$/i,lt=/^h\d$/i,M=/^[^{]+\{\s*\[native \w/,ht=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ct=/[+~]/,I=new RegExp("\\\\[\\da-fA-F]{1,6}"+a+"?|\\\\([^\\r\\n\\f])","g"),ut=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,dt=vt(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{T.apply(e=K.call(c.childNodes),c.childNodes),e[c.childNodes.length].nodeType}catch(t){T={apply:e.length?function(t,e){Y.apply(t,K.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function B(t,e,i,n){var r,s,a,o,l,h,c=e&&e.ownerDocument,u=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==u&&9!==u&&11!==u)return i;if(!n&&(x(e),e=e||S,w)){if(11!==u&&(o=ht.exec(t)))if(r=o[1]){if(9===u){if(!(h=e.getElementById(r)))return i;if(h.id===r)return i.push(h),i}else if(c&&(h=c.getElementById(r))&&m(e,h)&&h.id===r)return i.push(h),i}else{if(o[2])return T.apply(i,e.getElementsByTagName(t)),i;if((r=o[3])&&d.getElementsByClassName&&e.getElementsByClassName)return T.apply(i,e.getElementsByClassName(r)),i}if(d.qsa&&!g[t+" "]&&(!f||!f.test(t))&&(1!==u||"object"!==e.nodeName.toLowerCase())){if(h=t,c=e,1===u&&(nt.test(t)||it.test(t))){for((c=ct.test(t)&&gt(e.parentNode)||e)===e&&d.scope||((a=e.getAttribute("id"))?a=a.replace(ut,Q):e.setAttribute("id",a=E)),s=(l=p(t)).length;s--;)l[s]=(a?"#"+a:":scope")+" "+k(l[s]);h=l.join(",")}try{return T.apply(i,c.querySelectorAll(h)),i}catch(e){g(t,!0)}finally{a===E&&e.removeAttribute("id")}}}return U(t.replace(A,"$1"),e,i,n)}function D(){var n=[];return function t(e,i){return n.push(e+" ")>_.cacheLength&&delete t[n.shift()],t[e+" "]=i}}function P(t){return t[E]=!0,t}function L(t){var e=S.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e)}}function pt(t,e){for(var i=t.split("|"),n=i.length;n--;)_.attrHandle[i[n]]=e}function ft(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function mt(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&dt(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function R(a){return P(function(s){return s=+s,P(function(t,e){for(var i,n=a([],t.length,s),r=n.length;r--;)t[i=n[r]]&&(t[i]=!(e[i]=t[i]))})})}function gt(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in d=B.support={},O=B.isXML=function(t){var e=t.namespaceURI,t=(t.ownerDocument||t).documentElement;return!at.test(e||t&&t.nodeName||"HTML")},x=B.setDocument=function(t){var t=t?t.ownerDocument||t:c;return t!=S&&9===t.nodeType&&t.documentElement&&(i=(S=t).documentElement,w=!O(S),c!=S&&(t=S.defaultView)&&t.top!==t&&(t.addEventListener?t.addEventListener("unload",F,!1):t.attachEvent&&t.attachEvent("onunload",F)),d.scope=L(function(t){return i.appendChild(t).appendChild(S.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length}),d.attributes=L(function(t){return t.className="i",!t.getAttribute("className")}),d.getElementsByTagName=L(function(t){return t.appendChild(S.createComment("")),!t.getElementsByTagName("*").length}),d.getElementsByClassName=M.test(S.getElementsByClassName),d.getById=L(function(t){return i.appendChild(t).id=E,!S.getElementsByName||!S.getElementsByName(E).length}),d.getById?(_.filter.ID=function(t){var e=t.replace(I,u);return function(t){return t.getAttribute("id")===e}},_.find.ID=function(t,e){if(void 0!==e.getElementById&&w)return(e=e.getElementById(t))?[e]:[]}):(_.filter.ID=function(t){var e=t.replace(I,u);return function(t){t=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return t&&t.value===e}},_.find.ID=function(t,e){if(void 0!==e.getElementById&&w){var i,n,r,s=e.getElementById(t);if(s){if((i=s.getAttributeNode("id"))&&i.value===t)return[s];for(r=e.getElementsByName(t),n=0;s=r[n++];)if((i=s.getAttributeNode("id"))&&i.value===t)return[s]}return[]}}),_.find.TAG=d.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):d.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],r=0,s=e.getElementsByTagName(t);if("*"!==t)return s;for(;i=s[r++];)1===i.nodeType&&n.push(i);return n},_.find.CLASS=d.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&w)return e.getElementsByClassName(t)},n=[],f=[],(d.qsa=M.test(S.querySelectorAll))&&(L(function(t){var e;i.appendChild(t).innerHTML="<a id='"+E+"'></a><select id='"+E+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&f.push("[*^$]="+a+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||f.push("\\["+a+"*(?:value|"+J+")"),t.querySelectorAll("[id~="+E+"-]").length||f.push("~="),(e=S.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||f.push("\\["+a+"*name"+a+"*="+a+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||f.push(":checked"),t.querySelectorAll("a#"+E+"+*").length||f.push(".#.+[+~]"),t.querySelectorAll("\\\f"),f.push("[\\r\\n\\f]")}),L(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=S.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&f.push("name"+a+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&f.push(":enabled",":disabled"),i.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&f.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),f.push(",.*:")})),(d.matchesSelector=M.test(r=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.oMatchesSelector||i.msMatchesSelector))&&L(function(t){d.disconnectedMatch=r.call(t,"*"),r.call(t,"[s!='']:x"),n.push("!=",Z)}),f=f.length&&new RegExp(f.join("|")),n=n.length&&new RegExp(n.join("|")),t=M.test(i.compareDocumentPosition),m=t||M.test(i.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,e=e&&e.parentNode;return t===e||!(!e||1!==e.nodeType||!(i.contains?i.contains(e):t.compareDocumentPosition&&16&t.compareDocumentPosition(e)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},q=t?function(t,e){return t===e?(h=!0,0):!t.compareDocumentPosition-!e.compareDocumentPosition||(1&(i=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!d.sortDetached&&e.compareDocumentPosition(t)===i?t==S||t.ownerDocument==c&&m(c,t)?-1:e==S||e.ownerDocument==c&&m(c,e)?1:l?v(l,t)-v(l,e):0:4&i?-1:1);var i}:function(t,e){if(t===e)return h=!0,0;var i,n=0,r=t.parentNode,s=e.parentNode,a=[t],o=[e];if(!r||!s)return t==S?-1:e==S?1:r?-1:s?1:l?v(l,t)-v(l,e):0;if(r===s)return ft(t,e);for(i=t;i=i.parentNode;)a.unshift(i);for(i=e;i=i.parentNode;)o.unshift(i);for(;a[n]===o[n];)n++;return n?ft(a[n],o[n]):a[n]==c?-1:o[n]==c?1:0}),S},B.matches=function(t,e){return B(t,null,null,e)},B.matchesSelector=function(t,e){if(x(t),d.matchesSelector&&w&&!g[e+" "]&&(!n||!n.test(e))&&(!f||!f.test(e)))try{var i=r.call(t,e);if(i||d.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){g(e,!0)}return 0<B(e,S,null,[t]).length},B.contains=function(t,e){return(t.ownerDocument||t)!=S&&x(t),m(t,e)},B.attr=function(t,e){(t.ownerDocument||t)!=S&&x(t);var i=_.attrHandle[e.toLowerCase()],i=i&&j.call(_.attrHandle,e.toLowerCase())?i(t,e,!w):void 0;return void 0!==i?i:d.attributes||!w?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},B.escape=function(t){return(t+"").replace(ut,Q)},B.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},B.uniqueSort=function(t){var e,i=[],n=0,r=0;if(h=!d.detectDuplicates,l=!d.sortStable&&t.slice(0),t.sort(q),h){for(;e=t[r++];)e===t[r]&&(n=i.push(r));for(;n--;)t.splice(i[n],1)}return l=null,t},s=B.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=s(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=s(e);return i},(_=B.selectors={cacheLength:50,createPseudo:P,match:y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(I,u),t[3]=(t[3]||t[4]||t[5]||"").replace(I,u),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||B.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&B.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return y.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&rt.test(i)&&(e=p(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(I,u).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=V[t+" "];return e||(e=new RegExp("(^|"+a+")"+t+"("+a+"|$)"))&&V(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(t){t=B.attr(t,e);return null==t?"!="===i:!i||(t+="","="===i?t===n:"!="===i?t!==n:"^="===i?n&&0===t.indexOf(n):"*="===i?n&&-1<t.indexOf(n):"$="===i?n&&t.slice(-n.length)===n:"~="===i?-1<(" "+t.replace(tt," ")+" ").indexOf(n):"|="===i&&(t===n||t.slice(0,n.length+1)===n+"-"))}},CHILD:function(f,t,e,m,g){var A="nth"!==f.slice(0,3),v="last"!==f.slice(-4),y="of-type"===t;return 1===m&&0===g?function(t){return!!t.parentNode}:function(t,e,i){var n,r,s,a,o,l,h=A!=v?"nextSibling":"previousSibling",c=t.parentNode,u=y&&t.nodeName.toLowerCase(),d=!i&&!y,p=!1;if(c){if(A){for(;h;){for(a=t;a=a[h];)if(y?a.nodeName.toLowerCase()===u:1===a.nodeType)return!1;l=h="only"===f&&!l&&"nextSibling"}return!0}if(l=[v?c.firstChild:c.lastChild],v&&d){for(p=(o=(n=(r=(s=(a=c)[E]||(a[E]={}))[a.uniqueID]||(s[a.uniqueID]={}))[f]||[])[0]===C&&n[1])&&n[2],a=o&&c.childNodes[o];a=++o&&a&&a[h]||(p=o=0)||l.pop();)if(1===a.nodeType&&++p&&a===t){r[f]=[C,o,p];break}}else if(!1===(p=d?o=(n=(r=(s=(a=t)[E]||(a[E]={}))[a.uniqueID]||(s[a.uniqueID]={}))[f]||[])[0]===C&&n[1]:p))for(;(a=++o&&a&&a[h]||(p=o=0)||l.pop())&&((y?a.nodeName.toLowerCase()!==u:1!==a.nodeType)||!++p||(d&&((r=(s=a[E]||(a[E]={}))[a.uniqueID]||(s[a.uniqueID]={}))[f]=[C,p]),a!==t)););return(p-=g)===m||p%m==0&&0<=p/m}}},PSEUDO:function(t,s){var e,a=_.pseudos[t]||_.setFilters[t.toLowerCase()]||B.error("unsupported pseudo: "+t);return a[E]?a(s):1<a.length?(e=[t,t,"",s],_.setFilters.hasOwnProperty(t.toLowerCase())?P(function(t,e){for(var i,n=a(t,s),r=n.length;r--;)t[i=v(t,n[r])]=!(e[i]=n[r])}):function(t){return a(t,0,e)}):a}},pseudos:{not:P(function(t){var n=[],r=[],o=G(t.replace(A,"$1"));return o[E]?P(function(t,e,i,n){for(var r,s=o(t,null,n,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,e,i){return n[0]=t,o(n,null,i,r),n[0]=null,!r.pop()}}),has:P(function(e){return function(t){return 0<B(e,t).length}}),contains:P(function(e){return e=e.replace(I,u),function(t){return-1<(t.textContent||s(t)).indexOf(e)}}),lang:P(function(i){return st.test(i||"")||B.error("unsupported lang: "+i),i=i.replace(I,u).toLowerCase(),function(t){var e;do{if(e=w?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===i||0===e.indexOf(i+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=N.location&&N.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===i},focus:function(t){return t===S.activeElement&&(!S.hasFocus||S.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:mt(!1),disabled:mt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!_.pseudos.empty(t)},header:function(t){return lt.test(t.nodeName)},input:function(t){return ot.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(t=t.getAttribute("type"))||"text"===t.toLowerCase())},first:R(function(){return[0]}),last:R(function(t,e){return[e-1]}),eq:R(function(t,e,i){return[i<0?i+e:i]}),even:R(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:R(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:R(function(t,e,i){for(var n=i<0?i+e:e<i?e:i;0<=--n;)t.push(n);return t}),gt:R(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}}).pseudos.nth=_.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[t]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(t);for(t in{submit:!0,reset:!0})_.pseudos[t]=function(i){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===i}}(t);function At(){}function k(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function vt(a,t,e){var o=t.dir,l=t.next,h=l||o,c=e&&"parentNode"===h,u=H++;return t.first?function(t,e,i){for(;t=t[o];)if(1===t.nodeType||c)return a(t,e,i);return!1}:function(t,e,i){var n,r,s=[C,u];if(i){for(;t=t[o];)if((1===t.nodeType||c)&&a(t,e,i))return!0}else for(;t=t[o];)if(1===t.nodeType||c)if(r=(r=t[E]||(t[E]={}))[t.uniqueID]||(r[t.uniqueID]={}),l&&l===t.nodeName.toLowerCase())t=t[o]||t;else{if((n=r[h])&&n[0]===C&&n[1]===u)return s[2]=n[2];if((r[h]=s)[2]=a(t,e,i))return!0}return!1}}function yt(r){return 1<r.length?function(t,e,i){for(var n=r.length;n--;)if(!r[n](t,e,i))return!1;return!0}:r[0]}function _t(t,e,i,n,r){for(var s,a=[],o=0,l=t.length,h=null!=e;o<l;o++)!(s=t[o])||i&&!i(s,n,r)||(a.push(s),h&&e.push(o));return a}function bt(t){for(var n,e,i,r=t.length,s=_.relative[t[0].type],a=s||_.relative[" "],o=s?1:0,l=vt(function(t){return t===n},a,!0),h=vt(function(t){return-1<v(n,t)},a,!0),c=[function(t,e,i){t=!s&&(i||e!==b)||((n=e).nodeType?l:h)(t,e,i);return n=null,t}];o<r;o++)if(e=_.relative[t[o].type])c=[vt(yt(c),e)];else{if((e=_.filter[t[o].type].apply(null,t[o].matches))[E]){for(i=++o;i<r&&!_.relative[t[i].type];i++);return function t(p,f,m,g,A,e){return g&&!g[E]&&(g=t(g)),A&&!A[E]&&(A=t(A,e)),P(function(t,e,i,n){var r,s,a,o=[],l=[],h=e.length,c=t||function(t,e,i){for(var n=0,r=e.length;n<r;n++)B(t,e[n],i);return i}(f||"*",i.nodeType?[i]:i,[]),u=!p||!t&&f?c:_t(c,o,p,i,n),d=m?A||(t?p:h||g)?[]:e:u;if(m&&m(u,d,i,n),g)for(r=_t(d,l),g(r,[],i,n),s=r.length;s--;)(a=r[s])&&(d[l[s]]=!(u[l[s]]=a));if(t){if(A||p){if(A){for(r=[],s=d.length;s--;)(a=d[s])&&r.push(u[s]=a);A(null,d=[],r,n)}for(s=d.length;s--;)(a=d[s])&&-1<(r=A?v(t,a):o[s])&&(t[r]=!(e[r]=a))}}else d=_t(d===e?d.splice(h,d.length):d),A?A(null,e,d,n):T.apply(e,d)})}(1<o&&yt(c),1<o&&k(t.slice(0,o-1).concat({value:" "===t[o-2].type?"*":""})).replace(A,"$1"),e,o<i&&bt(t.slice(o,i)),i<r&&bt(t=t.slice(i)),i<r&&k(t))}c.push(e)}return yt(c)}return At.prototype=_.filters=_.pseudos,_.setFilters=new At,p=B.tokenize=function(t,e){var i,n,r,s,a,o,l,h=z[t+" "];if(h)return e?0:h.slice(0);for(a=t,o=[],l=_.preFilter;a;){for(s in i&&!(n=et.exec(a))||(n&&(a=a.slice(n[0].length)||a),o.push(r=[])),i=!1,(n=it.exec(a))&&(i=n.shift(),r.push({value:i,type:n[0].replace(A," ")}),a=a.slice(i.length)),_.filter)!(n=y[s].exec(a))||l[s]&&!(n=l[s](n))||(i=n.shift(),r.push({value:i,type:s,matches:n}),a=a.slice(i.length));if(!i)break}return e?a.length:a?B.error(t):z(t,o).slice(0)},G=B.compile=function(t,e){var i,g,A,v,y,n,r=[],s=[],a=W[t+" "];if(!a){for(i=(e=e||p(t)).length;i--;)((a=bt(e[i]))[E]?r:s).push(a);(a=W(t,(v=0<(A=r).length,y=0<(g=s).length,n=function(t,e,i,n,r){var s,a,o,l=0,h="0",c=t&&[],u=[],d=b,p=t||y&&_.find.TAG("*",r),f=C+=null==d?1:Math.random()||.1,m=p.length;for(r&&(b=e==S||e||r);h!==m&&null!=(s=p[h]);h++){if(y&&s){for(a=0,e||s.ownerDocument==S||(x(s),i=!w);o=g[a++];)if(o(s,e||S,i)){n.push(s);break}r&&(C=f)}v&&((s=!o&&s)&&l--,t&&c.push(s))}if(l+=h,v&&h!==l){for(a=0;o=A[a++];)o(c,u,e,i);if(t){if(0<l)for(;h--;)c[h]||u[h]||(u[h]=X.call(n));u=_t(u)}T.apply(n,u),r&&!t&&0<u.length&&1<l+A.length&&B.uniqueSort(n)}return r&&(C=f,b=d),c},v?P(n):n))).selector=t}return a},U=B.select=function(t,e,i,n){var r,s,a,o,l,h="function"==typeof t&&t,c=!n&&p(t=h.selector||t);if(i=i||[],1===c.length){if(2<(s=c[0]=c[0].slice(0)).length&&"ID"===(a=s[0]).type&&9===e.nodeType&&w&&_.relative[s[1].type]){if(!(e=(_.find.ID(a.matches[0].replace(I,u),e)||[])[0]))return i;h&&(e=e.parentNode),t=t.slice(s.shift().value.length)}for(r=y.needsContext.test(t)?0:s.length;r--&&(a=s[r],!_.relative[o=a.type]);)if((l=_.find[o])&&(n=l(a.matches[0].replace(I,u),ct.test(s[0].type)&&gt(e.parentNode)||e))){if(s.splice(r,1),t=n.length&&k(s))break;return T.apply(i,n),i}}return(h||G(t,c))(n,e,!w,i,!e||ct.test(t)&&gt(e.parentNode)||e),i},d.sortStable=E.split("").sort(q).join("")===E,d.detectDuplicates=!!h,x(),d.sortDetached=L(function(t){return 1&t.compareDocumentPosition(S.createElement("fieldset"))}),L(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||pt("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),d.attributes&&L(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||pt("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),L(function(t){return null==t.getAttribute("disabled")})||pt(J,function(t,e,i){if(!i)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),B}(x),K=(w.find=t,w.expr=t.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=t.uniqueSort,w.text=t.getText,w.isXMLDoc=t.isXML,w.contains=t.contains,w.escapeSelector=t.escape,w.expr.match.needsContext);function l(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var J=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function $(t,i,n){return v(i)?w.grep(t,function(t,e){return!!i.call(t,e,t)!==n}):i.nodeType?w.grep(t,function(t){return t===i!==n}):"string"!=typeof i?w.grep(t,function(t){return-1<G.call(i,t)!==n}):w.filter(i,t,n)}w.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?w.find.matchesSelector(n,t)?[n]:[]:w.find.matches(t,w.grep(e,function(t){return 1===t.nodeType}))},w.fn.extend({find:function(t){var e,i,n=this.length,r=this;if("string"!=typeof t)return this.pushStack(w(t).filter(function(){for(e=0;e<n;e++)if(w.contains(r[e],this))return!0}));for(i=this.pushStack([]),e=0;e<n;e++)w.find(t,r[e],i);return 1<n?w.uniqueSort(i):i},filter:function(t){return this.pushStack($(this,t||[],!1))},not:function(t){return this.pushStack($(this,t||[],!0))},is:function(t){return!!$(this,"string"==typeof t&&K.test(t)?w(t):t||[],!1).length}});var Z,tt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,et=((w.fn.init=function(t,e,i){if(!t)return this;if(i=i||Z,"string"!=typeof t)return t.nodeType?(this[0]=t,this.length=1,this):v(t)?void 0!==i.ready?i.ready(t):t(w):w.makeArray(t,this);if(!(n="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:tt.exec(t))||!n[1]&&e)return(!e||e.jquery?e||i:this.constructor(e)).find(t);if(n[1]){if(e=e instanceof w?e[0]:e,w.merge(this,w.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:S,!0)),J.test(n[1])&&w.isPlainObject(e))for(var n in e)v(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(i=S.getElementById(n[2]))&&(this[0]=i,this.length=1),this}).prototype=w.fn,Z=w(S),/^(?:parents|prev(?:Until|All))/),it={children:!0,contents:!0,next:!0,prev:!0};function nt(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}w.fn.extend({has:function(t){var e=w(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(w.contains(this,e[t]))return!0})},closest:function(t,e){var i,n=0,r=this.length,s=[],a="string"!=typeof t&&w(t);if(!K.test(t))for(;n<r;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(a?-1<a.index(i):1===i.nodeType&&w.find.matchesSelector(i,t))){s.push(i);break}return this.pushStack(1<s.length?w.uniqueSort(s):s)},index:function(t){return t?"string"==typeof t?G.call(w(t),this[0]):G.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),w.each({parent:function(t){t=t.parentNode;return t&&11!==t.nodeType?t:null},parents:function(t){return n(t,"parentNode")},parentsUntil:function(t,e,i){return n(t,"parentNode",i)},next:function(t){return nt(t,"nextSibling")},prev:function(t){return nt(t,"previousSibling")},nextAll:function(t){return n(t,"nextSibling")},prevAll:function(t){return n(t,"previousSibling")},nextUntil:function(t,e,i){return n(t,"nextSibling",i)},prevUntil:function(t,e,i){return n(t,"previousSibling",i)},siblings:function(t){return Y((t.parentNode||{}).firstChild,t)},children:function(t){return Y(t.firstChild)},contents:function(t){return null!=t.contentDocument&&Q(t.contentDocument)?t.contentDocument:(l(t,"template")&&(t=t.content||t),w.merge([],t.childNodes))}},function(n,r){w.fn[n]=function(t,e){var i=w.map(this,r,t);return(e="Until"!==n.slice(-5)?t:e)&&"string"==typeof e&&(i=w.filter(e,i)),1<this.length&&(it[n]||w.uniqueSort(i),et.test(n)&&i.reverse()),this.pushStack(i)}});var E=/[^\x20\t\r\n\f]+/g;function c(t){return t}function rt(t){throw t}function st(t,e,i,n){var r;try{t&&v(r=t.promise)?r.call(t).done(e).fail(i):t&&v(r=t.then)?r.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}w.Callbacks=function(n){var t,i;n="string"==typeof n?(t=n,i={},w.each(t.match(E)||[],function(t,e){i[e]=!0}),i):w.extend({},n);function r(){for(o=o||n.once,a=s=!0;h.length;c=-1)for(e=h.shift();++c<l.length;)!1===l[c].apply(e[0],e[1])&&n.stopOnFalse&&(c=l.length,e=!1);n.memory||(e=!1),s=!1,o&&(l=e?[]:"")}var s,e,a,o,l=[],h=[],c=-1,u={add:function(){return l&&(e&&!s&&(c=l.length-1,h.push(e)),function i(t){w.each(t,function(t,e){v(e)?n.unique&&u.has(e)||l.push(e):e&&e.length&&"string"!==f(e)&&i(e)})}(arguments),e&&!s&&r()),this},remove:function(){return w.each(arguments,function(t,e){for(var i;-1<(i=w.inArray(e,l,i));)l.splice(i,1),i<=c&&c--}),this},has:function(t){return t?-1<w.inArray(t,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return o=h=[],l=e="",this},disabled:function(){return!l},lock:function(){return o=h=[],e||s||(l=e=""),this},locked:function(){return!!o},fireWith:function(t,e){return o||(e=[t,(e=e||[]).slice?e.slice():e],h.push(e),s||r()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!a}};return u},w.extend({Deferred:function(t){var s=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return a.then(null,t)},pipe:function(){var r=arguments;return w.Deferred(function(n){w.each(s,function(t,e){var i=v(r[e[4]])&&r[e[4]];o[e[1]](function(){var t=i&&i.apply(this,arguments);t&&v(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[e[0]+"With"](this,i?[t]:arguments)})}),r=null}).promise()},then:function(e,i,n){var l=0;function h(r,s,a,o){return function(){function t(){var t,e;if(!(r<l)){if((t=a.apply(i,n))===s.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==typeof t||"function"==typeof t)&&t.then,v(e)?o?e.call(t,h(l,s,c,o),h(l,s,rt,o)):(l++,e.call(t,h(l,s,c,o),h(l,s,rt,o),h(l,s,c,s.notifyWith))):(a!==c&&(i=void 0,n=[t]),(o||s.resolveWith)(i,n))}}var i=this,n=arguments,e=o?t:function(){try{t()}catch(t){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(t,e.stackTrace),l<=r+1&&(a!==rt&&(i=void 0,n=[t]),s.rejectWith(i,n))}};r?e():(w.Deferred.getStackHook&&(e.stackTrace=w.Deferred.getStackHook()),x.setTimeout(e))}}return w.Deferred(function(t){s[0][3].add(h(0,t,v(n)?n:c,t.notifyWith)),s[1][3].add(h(0,t,v(e)?e:c)),s[2][3].add(h(0,t,v(i)?i:rt))}).promise()},promise:function(t){return null!=t?w.extend(t,a):a}},o={};return w.each(s,function(t,e){var i=e[2],n=e[5];a[e[1]]=i.add,n&&i.add(function(){r=n},s[3-t][2].disable,s[3-t][3].disable,s[0][2].lock,s[0][3].lock),i.add(e[3].fire),o[e[0]]=function(){return o[e[0]+"With"](this===o?void 0:this,arguments),this},o[e[0]+"With"]=i.fireWith}),a.promise(o),t&&t.call(o,o),o},when:function(t){function e(e){return function(t){r[e]=this,s[e]=1<arguments.length?o.call(arguments):t,--i||a.resolveWith(r,s)}}var i=arguments.length,n=i,r=Array(n),s=o.call(arguments),a=w.Deferred();if(i<=1&&(st(t,a.done(e(n)).resolve,a.reject,!i),"pending"===a.state()||v(s[n]&&s[n].then)))return a.then();for(;n--;)st(s[n],e(n),a.reject);return a.promise()}});var at=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/,ot=(w.Deferred.exceptionHook=function(t,e){x.console&&x.console.warn&&t&&at.test(t.name)&&x.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},w.readyException=function(t){x.setTimeout(function(){throw t})},w.Deferred());function lt(){S.removeEventListener("DOMContentLoaded",lt),x.removeEventListener("load",lt),w.ready()}w.fn.ready=function(t){return ot.then(t).catch(function(t){w.readyException(t)}),this},w.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--w.readyWait:w.isReady)||(w.isReady=!0)!==t&&0<--w.readyWait||ot.resolveWith(S,[w])}}),w.ready.then=ot.then,"complete"===S.readyState||"loading"!==S.readyState&&!S.documentElement.doScroll?x.setTimeout(w.ready):(S.addEventListener("DOMContentLoaded",lt),x.addEventListener("load",lt));function u(t,e,i,n,r,s,a){var o=0,l=t.length,h=null==i;if("object"===f(i))for(o in r=!0,i)u(t,e,o,i[o],!0,s,a);else if(void 0!==n&&(r=!0,v(n)||(a=!0),e=h?a?(e.call(t,n),null):(h=e,function(t,e,i){return h.call(w(t),i)}):e))for(;o<l;o++)e(t[o],i,a?n:n.call(t[o],o,e(t[o],i)));return r?t:h?e.call(t):l?e(t[0],i):s}var ht=/^-ms-/,ct=/-([a-z])/g;function ut(t,e){return e.toUpperCase()}function y(t){return t.replace(ht,"ms-").replace(ct,ut)}function A(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType}function dt(){this.expando=w.expando+dt.uid++}dt.uid=1,dt.prototype={cache:function(t){var e=t[this.expando];return e||(e={},A(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,r=this.cache(t);if("string"==typeof e)r[y(e)]=i;else for(n in e)r[y(n)]=e[n];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][y(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){i=(e=Array.isArray(e)?e.map(y):(e=y(e))in n?[e]:e.match(E)||[]).length;for(;i--;)delete n[e[i]]}void 0!==e&&!w.isEmptyObject(n)||(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){t=t[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var _=new dt,h=new dt,pt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ft=/[A-Z]/g;function mt(t,e,i){var n,r;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(ft,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i="true"===(r=i)||"false"!==r&&("null"===r?null:r===+r+""?+r:pt.test(r)?JSON.parse(r):r)}catch(t){}h.set(t,e,i)}else i=void 0;return i}w.extend({hasData:function(t){return h.hasData(t)||_.hasData(t)},data:function(t,e,i){return h.access(t,e,i)},removeData:function(t,e){h.remove(t,e)},_data:function(t,e,i){return _.access(t,e,i)},_removeData:function(t,e){_.remove(t,e)}}),w.fn.extend({data:function(i,t){var e,n,r,s=this[0],a=s&&s.attributes;if(void 0!==i)return"object"==typeof i?this.each(function(){h.set(this,i)}):u(this,function(t){var e;if(s&&void 0===t)return void 0!==(e=h.get(s,i))||void 0!==(e=mt(s,i))?e:void 0;this.each(function(){h.set(this,i,t)})},null,t,1<arguments.length,null,!0);if(this.length&&(r=h.get(s),1===s.nodeType&&!_.get(s,"hasDataAttrs"))){for(e=a.length;e--;)a[e]&&0===(n=a[e].name).indexOf("data-")&&(n=y(n.slice(5)),mt(s,n,r[n]));_.set(s,"hasDataAttrs",!0)}return r},removeData:function(t){return this.each(function(){h.remove(this,t)})}}),w.extend({queue:function(t,e,i){var n;if(t)return n=_.get(t,e=(e||"fx")+"queue"),i&&(!n||Array.isArray(i)?n=_.access(t,e,w.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=w.queue(t,e),n=i.length,r=i.shift(),s=w._queueHooks(t,e);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete s.stop,r.call(t,function(){w.dequeue(t,e)},s)),!n&&s&&s.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return _.get(t,i)||_.access(t,i,{empty:w.Callbacks("once memory").add(function(){_.remove(t,[e+"queue",i])})})}}),w.fn.extend({queue:function(e,i){var t=2;return"string"!=typeof e&&(i=e,e="fx",t--),arguments.length<t?w.queue(this[0],e):void 0===i?this:this.each(function(){var t=w.queue(this,e,i);w._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&w.dequeue(this,e)})},dequeue:function(t){return this.each(function(){w.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){function i(){--r||s.resolveWith(a,[a])}var n,r=1,s=w.Deferred(),a=this,o=this.length;for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(n=_.get(a[o],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(i));return i(),s.promise(e)}});function gt(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&C(t)&&"none"===w.css(t,"display")}var t=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,At=new RegExp("^(?:([+-])=|)("+t+")([a-z%]*)$","i"),d=["Top","Right","Bottom","Left"],b=S.documentElement,C=function(t){return w.contains(t.ownerDocument,t)},vt={composed:!0};b.getRootNode&&(C=function(t){return w.contains(t.ownerDocument,t)||t.getRootNode(vt)===t.ownerDocument});function yt(t,e,i,n){var r,s,a=20,o=n?function(){return n.cur()}:function(){return w.css(t,e,"")},l=o(),h=i&&i[3]||(w.cssNumber[e]?"":"px"),c=t.nodeType&&(w.cssNumber[e]||"px"!==h&&+l)&&At.exec(w.css(t,e));if(c&&c[3]!==h){for(h=h||c[3],c=+(l/=2)||1;a--;)w.style(t,e,c+h),(1-s)*(1-(s=o()/l||.5))<=0&&(a=0),c/=s;w.style(t,e,(c*=2)+h),i=i||[]}return i&&(c=+c||+l||0,r=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=h,n.start=c,n.end=r)),r}var _t={};function T(t,e){for(var i,n,r,s,a,o,l=[],h=0,c=t.length;h<c;h++)(n=t[h]).style&&(i=n.style.display,e?("none"===i&&(l[h]=_.get(n,"display")||null,l[h]||(n.style.display="")),""===n.style.display&&gt(n)&&(l[h]=(o=s=r=void 0,s=n.ownerDocument,a=n.nodeName,(o=_t[a])||(r=s.body.appendChild(s.createElement(a)),o=w.css(r,"display"),r.parentNode.removeChild(r),_t[a]=o="none"===o?"block":o)))):"none"!==i&&(l[h]="none",_.set(n,"display",i)));for(h=0;h<c;h++)null!=l[h]&&(t[h].style.display=l[h]);return t}w.fn.extend({show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){gt(this)?w(this).show():w(this).hide()})}});var bt=/^(?:checkbox|radio)$/i,xt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,St=/^$|^module$|\/(?:java|ecma)script/i,i=S.createDocumentFragment().appendChild(S.createElement("div")),M=((P=S.createElement("input")).setAttribute("type","radio"),P.setAttribute("checked","checked"),P.setAttribute("name","t"),i.appendChild(P),g.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,i.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!i.cloneNode(!0).lastChild.defaultValue,i.innerHTML="<option></option>",g.option=!!i.lastChild,{thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]});function I(t,e){var i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&l(t,e)?w.merge([t],i):i}function wt(t,e){for(var i=0,n=t.length;i<n;i++)_.set(t[i],"globalEval",!e||_.get(e[i],"globalEval"))}M.tbody=M.tfoot=M.colgroup=M.caption=M.thead,M.th=M.td,g.option||(M.optgroup=M.option=[1,"<select multiple='multiple'>","</select>"]);var Et=/<|&#?\w+;/;function Ct(t,e,i,n,r){for(var s,a,o,l,h,c=e.createDocumentFragment(),u=[],d=0,p=t.length;d<p;d++)if((s=t[d])||0===s)if("object"===f(s))w.merge(u,s.nodeType?[s]:s);else if(Et.test(s)){for(a=a||c.appendChild(e.createElement("div")),o=(xt.exec(s)||["",""])[1].toLowerCase(),o=M[o]||M._default,a.innerHTML=o[1]+w.htmlPrefilter(s)+o[2],h=o[0];h--;)a=a.lastChild;w.merge(u,a.childNodes),(a=c.firstChild).textContent=""}else u.push(e.createTextNode(s));for(c.textContent="",d=0;s=u[d++];)if(n&&-1<w.inArray(s,n))r&&r.push(s);else if(l=C(s),a=I(c.appendChild(s),"script"),l&&wt(a),i)for(h=0;s=a[h++];)St.test(s.type||"")&&i.push(s);return c}var Tt=/^key/,Mt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,It=/^([^.]*)(?:\.(.+)|)/;function a(){return!0}function p(){return!1}function Bt(t,e){return t===function(){try{return S.activeElement}catch(t){}}()==("focus"===e)}function Dt(t,e,i,n,r,s){var a,o;if("object"==typeof e){for(o in"string"!=typeof i&&(n=n||i,i=void 0),e)Dt(t,o,i,n,e[o],s);return t}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=p;else if(!r)return t;return 1===s&&(a=r,(r=function(t){return w().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=w.guid++)),t.each(function(){w.event.add(this,e,r,n,i)})}function Pt(t,r,s){s?(_.set(t,r,!1),w.event.add(t,r,{namespace:!1,handler:function(t){var e,i,n=_.get(this,r);if(1&t.isTrigger&&this[r]){if(n.length)(w.event.special[r]||{}).delegateType&&t.stopPropagation();else if(n=o.call(arguments),_.set(this,r,n),e=s(this,r),this[r](),n!==(i=_.get(this,r))||e?_.set(this,r,!1):i={},n!==i)return t.stopImmediatePropagation(),t.preventDefault(),i.value}else n.length&&(_.set(this,r,{value:w.event.trigger(w.extend(n[0],w.Event.prototype),n.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===_.get(t,r)&&w.event.add(t,r,a)}w.event={global:{},add:function(e,t,i,n,r){var s,a,o,l,h,c,u,d,p,f=_.get(e);if(A(e))for(i.handler&&(i=(s=i).handler,r=s.selector),r&&w.find.matchesSelector(b,r),i.guid||(i.guid=w.guid++),(o=f.events)||(o=f.events=Object.create(null)),(a=f.handle)||(a=f.handle=function(t){return void 0!==w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(E)||[""]).length;l--;)u=p=(d=It.exec(t[l])||[])[1],d=(d[2]||"").split(".").sort(),u&&(h=w.event.special[u]||{},u=(r?h.delegateType:h.bindType)||u,h=w.event.special[u]||{},p=w.extend({type:u,origType:p,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&w.expr.match.needsContext.test(r),namespace:d.join(".")},s),(c=o[u])||((c=o[u]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,n,d,a)||e.addEventListener&&e.addEventListener(u,a)),h.add&&(h.add.call(e,p),p.handler.guid||(p.handler.guid=i.guid)),r?c.splice(c.delegateCount++,0,p):c.push(p),w.event.global[u]=!0)},remove:function(t,e,i,n,r){var s,a,o,l,h,c,u,d,p,f,m,g=_.hasData(t)&&_.get(t);if(g&&(l=g.events)){for(h=(e=(e||"").match(E)||[""]).length;h--;)if(p=m=(o=It.exec(e[h])||[])[1],f=(o[2]||"").split(".").sort(),p){for(u=w.event.special[p]||{},d=l[p=(n?u.delegateType:u.bindType)||p]||[],o=o[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=d.length;s--;)c=d[s],!r&&m!==c.origType||i&&i.guid!==c.guid||o&&!o.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(d.splice(s,1),c.selector&&d.delegateCount--,u.remove&&u.remove.call(t,c));a&&!d.length&&(u.teardown&&!1!==u.teardown.call(t,f,g.handle)||w.removeEvent(t,p,g.handle),delete l[p])}else for(p in l)w.event.remove(t,p+e[h],i,n,!0);w.isEmptyObject(l)&&_.remove(t,"handle events")}},dispatch:function(t){var e,i,n,r,s,a=new Array(arguments.length),o=w.event.fix(t),t=(_.get(this,"events")||Object.create(null))[o.type]||[],l=w.event.special[o.type]||{};for(a[0]=o,e=1;e<arguments.length;e++)a[e]=arguments[e];if(o.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,o)){for(s=w.event.handlers.call(this,o,t),e=0;(n=s[e++])&&!o.isPropagationStopped();)for(o.currentTarget=n.elem,i=0;(r=n.handlers[i++])&&!o.isImmediatePropagationStopped();)o.rnamespace&&!1!==r.namespace&&!o.rnamespace.test(r.namespace)||(o.handleObj=r,o.data=r.data,void 0!==(r=((w.event.special[r.origType]||{}).handle||r.handler).apply(n.elem,a))&&!1===(o.result=r)&&(o.preventDefault(),o.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,o),o.result}},handlers:function(t,e){var i,n,r,s,a,o=[],l=e.delegateCount,h=t.target;if(l&&h.nodeType&&!("click"===t.type&&1<=t.button))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==t.type||!0!==h.disabled)){for(s=[],a={},i=0;i<l;i++)void 0===a[r=(n=e[i]).selector+" "]&&(a[r]=n.needsContext?-1<w(r,this).index(h):w.find(r,this,null,[h]).length),a[r]&&s.push(n);s.length&&o.push({elem:h,handlers:s})}return h=this,l<e.length&&o.push({elem:h,handlers:e.slice(l)}),o},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:v(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[w.expando]?t:new w.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){t=this||t;return bt.test(t.type)&&t.click&&l(t,"input")&&Pt(t,"click",a),!1},trigger:function(t){t=this||t;return bt.test(t.type)&&t.click&&l(t,"input")&&Pt(t,"click"),!0},_default:function(t){t=t.target;return bt.test(t.type)&&t.click&&l(t,"input")&&_.get(t,"click")||l(t,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},w.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},w.Event=function(t,e){if(!(this instanceof w.Event))return new w.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?a:p,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&w.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=a,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=a,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=a,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&Tt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Mt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},function(t,e){w.event.special[t]={setup:function(){return Pt(this,t,Bt),!1},trigger:function(){return Pt(this,t),!0},delegateType:e}}),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,r){w.event.special[t]={delegateType:r,bindType:r,handle:function(t){var e,i=t.relatedTarget,n=t.handleObj;return i&&(i===this||w.contains(this,i))||(t.type=n.origType,e=n.handler.apply(this,arguments),t.type=r),e}}}),w.fn.extend({on:function(t,e,i,n){return Dt(this,t,e,i,n)},one:function(t,e,i,n){return Dt(this,t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,w(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=p),this.each(function(){w.event.remove(this,t,i,e)});for(r in t)this.off(r,e,t[r]);return this}});var Lt=/<script|<style|<link/i,Rt=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Nt(t,e){return l(t,"table")&&l(11!==e.nodeType?e:e.firstChild,"tr")&&w(t).children("tbody")[0]||t}function Qt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Ft(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Ot(t,e){var i,n,r,s;if(1===e.nodeType){if(_.hasData(t)&&(s=_.get(t).events))for(r in _.remove(e,"handle events"),s)for(i=0,n=s[r].length;i<n;i++)w.event.add(e,r,s[r][i]);h.hasData(t)&&(t=h.access(t),t=w.extend({},t),h.set(e,t))}}function B(i,n,r,s){n=F(n);var t,e,a,o,l,h,c=0,u=i.length,d=u-1,p=n[0],f=v(p);if(f||1<u&&"string"==typeof p&&!g.checkClone&&Rt.test(p))return i.each(function(t){var e=i.eq(t);f&&(n[0]=p.call(this,t,e.html())),B(e,n,r,s)});if(u&&(e=(t=Ct(n,i[0].ownerDocument,!1,i,s)).firstChild,1===t.childNodes.length&&(t=e),e||s)){for(o=(a=w.map(I(t,"script"),Qt)).length;c<u;c++)l=t,c!==d&&(l=w.clone(l,!0,!0),o&&w.merge(a,I(l,"script"))),r.call(i[c],l,c);if(o)for(h=a[a.length-1].ownerDocument,w.map(a,Ft),c=0;c<o;c++)l=a[c],St.test(l.type||"")&&!_.access(l,"globalEval")&&w.contains(h,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?w._evalUrl&&!l.noModule&&w._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},h):j(l.textContent.replace(kt,""),l,h))}return i}function Gt(t,e,i){for(var n,r=e?w.filter(e,t):t,s=0;null!=(n=r[s]);s++)i||1!==n.nodeType||w.cleanData(I(n)),n.parentNode&&(i&&C(n)&&wt(I(n,"script")),n.parentNode.removeChild(n));return t}w.extend({htmlPrefilter:function(t){return t},clone:function(t,e,i){var n,r,s,a,o,l,h,c=t.cloneNode(!0),u=C(t);if(!(g.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||w.isXMLDoc(t)))for(a=I(c),n=0,r=(s=I(t)).length;n<r;n++)o=s[n],"input"===(h=(l=a[n]).nodeName.toLowerCase())&&bt.test(o.type)?l.checked=o.checked:"input"!==h&&"textarea"!==h||(l.defaultValue=o.defaultValue);if(e)if(i)for(s=s||I(t),a=a||I(c),n=0,r=s.length;n<r;n++)Ot(s[n],a[n]);else Ot(t,c);return 0<(a=I(c,"script")).length&&wt(a,!u&&I(t,"script")),c},cleanData:function(t){for(var e,i,n,r=w.event.special,s=0;void 0!==(i=t[s]);s++)if(A(i)){if(e=i[_.expando]){if(e.events)for(n in e.events)r[n]?w.event.remove(i,n):w.removeEvent(i,n,e.handle);i[_.expando]=void 0}i[h.expando]&&(i[h.expando]=void 0)}}}),w.fn.extend({detach:function(t){return Gt(this,t,!0)},remove:function(t){return Gt(this,t)},text:function(t){return u(this,function(t){return void 0===t?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return B(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Nt(this,t).appendChild(t)})},prepend:function(){return B(this,arguments,function(t){var e;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(e=Nt(this,t)).insertBefore(t,e.firstChild)})},before:function(){return B(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return B(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(w.cleanData(I(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return w.clone(this,t,e)})},html:function(t){return u(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Lt.test(t)&&!M[(xt.exec(t)||["",""])[1].toLowerCase()]){t=w.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(w.cleanData(I(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var i=[];return B(this,arguments,function(t){var e=this.parentNode;w.inArray(this,i)<0&&(w.cleanData(I(this)),e&&e.replaceChild(t,this))},i)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,a){w.fn[t]=function(t){for(var e,i=[],n=w(t),r=n.length-1,s=0;s<=r;s++)e=s===r?this:this.clone(!0),w(n[s])[a](e),O.apply(i,e.get());return this.pushStack(i)}});function Ut(t){var e=t.ownerDocument.defaultView;return(e=e&&e.opener?e:x).getComputedStyle(t)}function Ht(t,e,i){var n,r={};for(n in e)r[n]=t.style[n],t.style[n]=e[n];for(n in i=i.call(t),e)t.style[n]=r[n];return i}var Vt,zt,Wt,qt,jt,Xt,Yt,r,Kt=new RegExp("^("+t+")(?!px)[a-z%]+$","i"),Jt=new RegExp(d.join("|"),"i");function $t(t,e,i){var n,r,s=t.style;return(i=i||Ut(t))&&(""!==(r=i.getPropertyValue(e)||i[e])||C(t)||(r=w.style(t,e)),!g.pixelBoxStyles()&&Kt.test(r)&&Jt.test(e)&&(t=s.width,e=s.minWidth,n=s.maxWidth,s.minWidth=s.maxWidth=s.width=r,r=i.width,s.width=t,s.minWidth=e,s.maxWidth=n)),void 0!==r?r+"":r}function Zt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}function te(){var t;r&&(Yt.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",r.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",b.appendChild(Yt).appendChild(r),t=x.getComputedStyle(r),Vt="1%"!==t.top,Xt=12===ee(t.marginLeft),r.style.right="60%",qt=36===ee(t.right),zt=36===ee(t.width),r.style.position="absolute",Wt=12===ee(r.offsetWidth/3),b.removeChild(Yt),r=null)}function ee(t){return Math.round(parseFloat(t))}Yt=S.createElement("div"),(r=S.createElement("div")).style&&(r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===r.style.backgroundClip,w.extend(g,{boxSizingReliable:function(){return te(),zt},pixelBoxStyles:function(){return te(),qt},pixelPosition:function(){return te(),Vt},reliableMarginLeft:function(){return te(),Xt},scrollboxSize:function(){return te(),Wt},reliableTrDimensions:function(){var t,e,i;return null==jt&&(t=S.createElement("table"),e=S.createElement("tr"),i=S.createElement("div"),t.style.cssText="position:absolute;left:-11111px",e.style.height="1px",i.style.height="9px",b.appendChild(t).appendChild(e).appendChild(i),i=x.getComputedStyle(e),jt=3<parseInt(i.height),b.removeChild(t)),jt}}));var ie=["Webkit","Moz","ms"],ne=S.createElement("div").style,re={};function se(t){return w.cssProps[t]||re[t]||(t in ne?t:re[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),i=ie.length;i--;)if((t=ie[i]+e)in ne)return t}(t)||t)}var ae=/^(none|table(?!-c[ea]).+)/,oe=/^--/,le={position:"absolute",visibility:"hidden",display:"block"},he={letterSpacing:"0",fontWeight:"400"};function ce(t,e,i){var n=At.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function ue(t,e,i,n,r,s){var a="width"===e?1:0,o=0,l=0;if(i===(n?"border":"content"))return 0;for(;a<4;a+=2)"margin"===i&&(l+=w.css(t,i+d[a],!0,r)),n?("content"===i&&(l-=w.css(t,"padding"+d[a],!0,r)),"margin"!==i&&(l-=w.css(t,"border"+d[a]+"Width",!0,r))):(l+=w.css(t,"padding"+d[a],!0,r),"padding"!==i?l+=w.css(t,"border"+d[a]+"Width",!0,r):o+=w.css(t,"border"+d[a]+"Width",!0,r));return!n&&0<=s&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-s-l-o-.5))||0),l}function de(t,e,i){var n=Ut(t),r=(!g.boxSizingReliable()||i)&&"border-box"===w.css(t,"boxSizing",!1,n),s=r,a=$t(t,e,n),o="offset"+e[0].toUpperCase()+e.slice(1);if(Kt.test(a)){if(!i)return a;a="auto"}return(!g.boxSizingReliable()&&r||!g.reliableTrDimensions()&&l(t,"tr")||"auto"===a||!parseFloat(a)&&"inline"===w.css(t,"display",!1,n))&&t.getClientRects().length&&(r="border-box"===w.css(t,"boxSizing",!1,n),(s=o in t)&&(a=t[o])),(a=parseFloat(a)||0)+ue(t,e,i||(r?"border":"content"),s,n,a)+"px"}function s(t,e,i,n,r){return new s.prototype.init(t,e,i,n,r)}w.extend({cssHooks:{opacity:{get:function(t,e){if(e)return""===(e=$t(t,"opacity"))?"1":e}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,a,o=y(e),l=oe.test(e),h=t.style;if(l||(e=se(o)),a=w.cssHooks[e]||w.cssHooks[o],void 0===i)return a&&"get"in a&&void 0!==(r=a.get(t,!1,n))?r:h[e];"string"==(s=typeof i)&&(r=At.exec(i))&&r[1]&&(i=yt(t,e,r),s="number"),null!=i&&i==i&&("number"!==s||l||(i+=r&&r[3]||(w.cssNumber[o]?"":"px")),g.clearCloneStyle||""!==i||0!==e.indexOf("background")||(h[e]="inherit"),a&&"set"in a&&void 0===(i=a.set(t,i,n))||(l?h.setProperty(e,i):h[e]=i))}},css:function(t,e,i,n){var r,s=y(e);return oe.test(e)||(e=se(s)),"normal"===(r=void 0===(r=(s=w.cssHooks[e]||w.cssHooks[s])&&"get"in s?s.get(t,!0,i):r)?$t(t,e,n):r)&&e in he&&(r=he[e]),""===i||i?(s=parseFloat(r),!0===i||isFinite(s)?s||0:r):r}}),w.each(["height","width"],function(t,a){w.cssHooks[a]={get:function(t,e,i){if(e)return!ae.test(w.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?de(t,a,i):Ht(t,le,function(){return de(t,a,i)})},set:function(t,e,i){var n=Ut(t),r=!g.scrollboxSize()&&"absolute"===n.position,s=(r||i)&&"border-box"===w.css(t,"boxSizing",!1,n),i=i?ue(t,a,i,s,n):0;return s&&r&&(i-=Math.ceil(t["offset"+a[0].toUpperCase()+a.slice(1)]-parseFloat(n[a])-ue(t,a,"border",!1,n)-.5)),i&&(s=At.exec(e))&&"px"!==(s[3]||"px")&&(t.style[a]=e,e=w.css(t,a)),ce(0,e,i)}}}),w.cssHooks.marginLeft=Zt(g.reliableMarginLeft,function(t,e){if(e)return(parseFloat($t(t,"marginLeft"))||t.getBoundingClientRect().left-Ht(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(r,s){w.cssHooks[r+s]={expand:function(t){for(var e=0,i={},n="string"==typeof t?t.split(" "):[t];e<4;e++)i[r+d[e]+s]=n[e]||n[e-2]||n[0];return i}},"margin"!==r&&(w.cssHooks[r+s].set=ce)}),w.fn.extend({css:function(t,e){return u(this,function(t,e,i){var n,r,s={},a=0;if(Array.isArray(e)){for(n=Ut(t),r=e.length;a<r;a++)s[e[a]]=w.css(t,e[a],!1,n);return s}return void 0!==i?w.style(t,e,i):w.css(t,e)},t,e,1<arguments.length)}}),((w.Tween=s).prototype={constructor:s,init:function(t,e,i,n,r,s){this.elem=t,this.prop=i,this.easing=r||w.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=s||(w.cssNumber[i]?"":"px")},cur:function(){var t=s.propHooks[this.prop];return(t&&t.get?t:s.propHooks._default).get(this)},run:function(t){var e,i=s.propHooks[this.prop];return this.options.duration?this.pos=e=w.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(i&&i.set?i:s.propHooks._default).set(this),this}}).init.prototype=s.prototype,(s.propHooks={_default:{get:function(t){return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(t=w.css(t.elem,t.prop,""))&&"auto"!==t?t:0},set:function(t){w.fx.step[t.prop]?w.fx.step[t.prop](t):1!==t.elem.nodeType||!w.cssHooks[t.prop]&&null==t.elem.style[se(t.prop)]?t.elem[t.prop]=t.now:w.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=s.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},w.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},w.fx=s.prototype.init,w.fx.step={};var D,pe,P,fe=/^(?:toggle|show|hide)$/,me=/queueHooks$/;function ge(){pe&&(!1===S.hidden&&x.requestAnimationFrame?x.requestAnimationFrame(ge):x.setTimeout(ge,w.fx.interval),w.fx.tick())}function Ae(){return x.setTimeout(function(){D=void 0}),D=Date.now()}function ve(t,e){var i,n=0,r={height:t};for(e=e?1:0;n<4;n+=2-e)r["margin"+(i=d[n])]=r["padding"+i]=t;return e&&(r.opacity=r.width=t),r}function ye(t,e,i){for(var n,r=(L.tweeners[e]||[]).concat(L.tweeners["*"]),s=0,a=r.length;s<a;s++)if(n=r[s].call(i,e,t))return n}function L(r,t,e){var i,s,n,a,o,l,h,c=0,u=L.prefilters.length,d=w.Deferred().always(function(){delete p.elem}),p=function(){if(s)return!1;for(var t=D||Ae(),t=Math.max(0,f.startTime+f.duration-t),e=1-(t/f.duration||0),i=0,n=f.tweens.length;i<n;i++)f.tweens[i].run(e);return d.notifyWith(r,[f,e,t]),e<1&&n?t:(n||d.notifyWith(r,[f,1,0]),d.resolveWith(r,[f]),!1)},f=d.promise({elem:r,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},e),originalProperties:t,originalOptions:e,startTime:D||Ae(),duration:e.duration,tweens:[],createTween:function(t,e){e=w.Tween(r,f.opts,t,e,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(e),e},stop:function(t){var e=0,i=t?f.tweens.length:0;if(s)return this;for(s=!0;e<i;e++)f.tweens[e].run(1);return t?(d.notifyWith(r,[f,1,0]),d.resolveWith(r,[f,t])):d.rejectWith(r,[f,t]),this}}),m=f.props,g=m,A=f.opts.specialEasing;for(n in g)if(o=A[a=y(n)],l=g[n],Array.isArray(l)&&(o=l[1],l=g[n]=l[0]),n!==a&&(g[a]=l,delete g[n]),(h=w.cssHooks[a])&&"expand"in h)for(n in l=h.expand(l),delete g[a],l)n in g||(g[n]=l[n],A[n]=o);else A[a]=o;for(;c<u;c++)if(i=L.prefilters[c].call(f,r,m,f.opts))return v(i.stop)&&(w._queueHooks(f.elem,f.opts.queue).stop=i.stop.bind(i)),i;return w.map(m,ye,f),v(f.opts.start)&&f.opts.start.call(r,f),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always),w.fx.timer(w.extend(p,{elem:r,anim:f,queue:f.opts.queue})),f}w.Animation=w.extend(L,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return yt(i.elem,t,At.exec(e),i),i}]},tweener:function(t,e){for(var i,n=0,r=(t=v(t)?(e=t,["*"]):t.match(E)).length;n<r;n++)i=t[n],L.tweeners[i]=L.tweeners[i]||[],L.tweeners[i].unshift(e)},prefilters:[function(t,e,i){var n,r,s,a,o,l,h,c="width"in e||"height"in e,u=this,d={},p=t.style,f=t.nodeType&&gt(t),m=_.get(t,"fxshow");for(n in i.queue||(null==(a=w._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,o=a.empty.fire,a.empty.fire=function(){a.unqueued||o()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,w.queue(t,"fx").length||a.empty.fire()})})),e)if(r=e[n],fe.test(r)){if(delete e[n],s=s||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[n])continue;f=!0}d[n]=m&&m[n]||w.style(t,n)}if((l=!w.isEmptyObject(e))||!w.isEmptyObject(d))for(n in c&&1===t.nodeType&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],null==(h=m&&m.display)&&(h=_.get(t,"display")),"none"===(c=w.css(t,"display"))&&(h?c=h:(T([t],!0),h=t.style.display||h,c=w.css(t,"display"),T([t]))),("inline"===c||"inline-block"===c&&null!=h)&&"none"===w.css(t,"float")&&(l||(u.done(function(){p.display=h}),null==h&&(c=p.display,h="none"===c?"":c)),p.display="inline-block")),i.overflow&&(p.overflow="hidden",u.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]})),l=!1,d)l||(m?"hidden"in m&&(f=m.hidden):m=_.access(t,"fxshow",{display:h}),s&&(m.hidden=!f),f&&T([t],!0),u.done(function(){for(n in f||T([t]),_.remove(t,"fxshow"),d)w.style(t,n,d[n])})),l=ye(f?m[n]:0,n,u),n in m||(m[n]=l.start,f&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?L.prefilters.unshift(t):L.prefilters.push(t)}}),w.speed=function(t,e,i){var n=t&&"object"==typeof t?w.extend({},t):{complete:i||!i&&e||v(t)&&t,duration:t,easing:i&&e||e&&!v(e)&&e};return w.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in w.fx.speeds?n.duration=w.fx.speeds[n.duration]:n.duration=w.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){v(n.old)&&n.old.call(this),n.queue&&w.dequeue(this,n.queue)},n},w.fn.extend({fadeTo:function(t,e,i,n){return this.filter(gt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(e,t,i,n){function r(){var t=L(this,w.extend({},e),a);(s||_.get(this,"finish"))&&t.stop(!0)}var s=w.isEmptyObject(e),a=w.speed(t,i,n);return r.finish=r,s||!1===a.queue?this.each(r):this.queue(a.queue,r)},stop:function(r,t,s){function a(t){var e=t.stop;delete t.stop,e(s)}return"string"!=typeof r&&(s=t,t=r,r=void 0),t&&this.queue(r||"fx",[]),this.each(function(){var t=!0,e=null!=r&&r+"queueHooks",i=w.timers,n=_.get(this);if(e)n[e]&&n[e].stop&&a(n[e]);else for(e in n)n[e]&&n[e].stop&&me.test(e)&&a(n[e]);for(e=i.length;e--;)i[e].elem!==this||null!=r&&i[e].queue!==r||(i[e].anim.stop(s),t=!1,i.splice(e,1));!t&&s||w.dequeue(this,r)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var t,e=_.get(this),i=e[a+"queue"],n=e[a+"queueHooks"],r=w.timers,s=i?i.length:0;for(e.finish=!0,w.queue(this,a,[]),n&&n.stop&&n.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===a&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete e.finish})}}),w.each(["toggle","show","hide"],function(t,n){var r=w.fn[n];w.fn[n]=function(t,e,i){return null==t||"boolean"==typeof t?r.apply(this,arguments):this.animate(ve(n,!0),t,e,i)}}),w.each({slideDown:ve("show"),slideUp:ve("hide"),slideToggle:ve("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,n){w.fn[t]=function(t,e,i){return this.animate(n,t,e,i)}}),w.timers=[],w.fx.tick=function(){var t,e=0,i=w.timers;for(D=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||w.fx.stop(),D=void 0},w.fx.timer=function(t){w.timers.push(t),w.fx.start()},w.fx.interval=13,w.fx.start=function(){pe||(pe=!0,ge())},w.fx.stop=function(){pe=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(n,t){return n=w.fx&&w.fx.speeds[n]||n,this.queue(t=t||"fx",function(t,e){var i=x.setTimeout(t,n);e.stop=function(){x.clearTimeout(i)}})},P=S.createElement("input"),i=S.createElement("select").appendChild(S.createElement("option")),P.type="checkbox",g.checkOn=""!==P.value,g.optSelected=i.selected,(P=S.createElement("input")).value="t",P.type="radio",g.radioValue="t"===P.value;var _e,be=w.expr.attrHandle,xe=(w.fn.extend({attr:function(t,e){return u(this,w.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){w.removeAttr(this,t)})}}),w.extend({attr:function(t,e,i){var n,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===t.getAttribute?w.prop(t,e,i):(1===s&&w.isXMLDoc(t)||(r=w.attrHooks[e.toLowerCase()]||(w.expr.match.bool.test(e)?_e:void 0)),void 0!==i?null===i?void w.removeAttr(t,e):r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:(t.setAttribute(e,i+""),i):!(r&&"get"in r&&null!==(n=r.get(t,e)))&&null==(n=w.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){var i;if(!g.radioValue&&"radio"===e&&l(t,"input"))return i=t.value,t.setAttribute("type",e),i&&(t.value=i),e}}},removeAttr:function(t,e){var i,n=0,r=e&&e.match(E);if(r&&1===t.nodeType)for(;i=r[n++];)t.removeAttribute(i)}}),_e={set:function(t,e,i){return!1===e?w.removeAttr(t,i):t.setAttribute(i,i),i}},w.each(w.expr.match.bool.source.match(/\w+/g),function(t,e){var a=be[e]||w.find.attr;be[e]=function(t,e,i){var n,r,s=e.toLowerCase();return i||(r=be[s],be[s]=n,n=null!=a(t,e,i)?s:null,be[s]=r),n}}),/^(?:input|select|textarea|button)$/i),Se=/^(?:a|area)$/i;function R(t){return(t.match(E)||[]).join(" ")}function k(t){return t.getAttribute&&t.getAttribute("class")||""}function we(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(E)||[]}w.fn.extend({prop:function(t,e){return u(this,w.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[w.propFix[t]||t]})}}),w.extend({prop:function(t,e,i){var n,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&w.isXMLDoc(t)||(e=w.propFix[e]||e,r=w.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=w.find.attr(t,"tabindex");return e?parseInt(e,10):xe.test(t.nodeName)||Se.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(w.propHooks.selected={get:function(t){t=t.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(t){t=t.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(e){var t,i,n,r,s,a,o=0;if(v(e))return this.each(function(t){w(this).addClass(e.call(this,t,k(this)))});if((t=we(e)).length)for(;i=this[o++];)if(a=k(i),n=1===i.nodeType&&" "+R(a)+" "){for(s=0;r=t[s++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");a!==(a=R(n))&&i.setAttribute("class",a)}return this},removeClass:function(e){var t,i,n,r,s,a,o=0;if(v(e))return this.each(function(t){w(this).removeClass(e.call(this,t,k(this)))});if(!arguments.length)return this.attr("class","");if((t=we(e)).length)for(;i=this[o++];)if(a=k(i),n=1===i.nodeType&&" "+R(a)+" "){for(s=0;r=t[s++];)for(;-1<n.indexOf(" "+r+" ");)n=n.replace(" "+r+" "," ");a!==(a=R(n))&&i.setAttribute("class",a)}return this},toggleClass:function(r,e){var s=typeof r,a="string"==s||Array.isArray(r);return"boolean"==typeof e&&a?e?this.addClass(r):this.removeClass(r):v(r)?this.each(function(t){w(this).toggleClass(r.call(this,t,k(this),e),e)}):this.each(function(){var t,e,i,n;if(a)for(e=0,i=w(this),n=we(r);t=n[e++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==r&&"boolean"!=s||((t=k(this))&&_.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",!t&&!1!==r&&_.get(this,"__className__")||""))})},hasClass:function(t){for(var e,i=0,n=" "+t+" ";e=this[i++];)if(1===e.nodeType&&-1<(" "+R(k(e))+" ").indexOf(n))return!0;return!1}});function Ee(t){t.stopPropagation()}var Ce=/\r/g,Te=(w.fn.extend({val:function(e){var i,t,n,r=this[0];return arguments.length?(n=v(e),this.each(function(t){1===this.nodeType&&(null==(t=n?e.call(this,t,w(this).val()):e)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=w.map(t,function(t){return null==t?"":t+""})),(i=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,t,"value")||(this.value=t))})):r?(i=w.valHooks[r.type]||w.valHooks[r.nodeName.toLowerCase()])&&"get"in i&&void 0!==(t=i.get(r,"value"))?t:"string"==typeof(t=r.value)?t.replace(Ce,""):null==t?"":t:void 0}}),w.extend({valHooks:{option:{get:function(t){var e=w.find.attr(t,"value");return null!=e?e:R(w.text(t))}},select:{get:function(t){for(var e,i=t.options,n=t.selectedIndex,r="select-one"===t.type,s=r?null:[],a=r?n+1:i.length,o=n<0?a:r?n:0;o<a;o++)if(((e=i[o]).selected||o===n)&&!e.disabled&&(!e.parentNode.disabled||!l(e.parentNode,"optgroup"))){if(e=w(e).val(),r)return e;s.push(e)}return s},set:function(t,e){for(var i,n,r=t.options,s=w.makeArray(e),a=r.length;a--;)((n=r[a]).selected=-1<w.inArray(w.valHooks.option.get(n),s))&&(i=!0);return i||(t.selectedIndex=-1),s}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<w.inArray(w(t).val(),e)}},g.checkOn||(w.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),g.focusin="onfocusin"in x,/^(?:focusinfocus|focusoutblur)$/),Me=(w.extend(w.event,{trigger:function(t,e,i,n){var r,s,a,o,l,h,c,u=[i||S],d=V.call(t,"type")?t.type:t,p=V.call(t,"namespace")?t.namespace.split("."):[],f=c=s=i=i||S;if(3!==i.nodeType&&8!==i.nodeType&&!Te.test(d+w.event.triggered)&&(-1<d.indexOf(".")&&(d=(p=d.split(".")).shift(),p.sort()),o=d.indexOf(":")<0&&"on"+d,(t=t[w.expando]?t:new w.Event(d,"object"==typeof t&&t)).isTrigger=n?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:w.makeArray(e,[t]),h=w.event.special[d]||{},n||!h.trigger||!1!==h.trigger.apply(i,e))){if(!n&&!h.noBubble&&!m(i)){for(a=h.delegateType||d,Te.test(a+d)||(f=f.parentNode);f;f=f.parentNode)u.push(f),s=f;s===(i.ownerDocument||S)&&u.push(s.defaultView||s.parentWindow||x)}for(r=0;(f=u[r++])&&!t.isPropagationStopped();)c=f,t.type=1<r?a:h.bindType||d,(l=(_.get(f,"events")||Object.create(null))[t.type]&&_.get(f,"handle"))&&l.apply(f,e),(l=o&&f[o])&&l.apply&&A(f)&&(t.result=l.apply(f,e),!1===t.result&&t.preventDefault());return t.type=d,n||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(u.pop(),e)||!A(i)||o&&v(i[d])&&!m(i)&&((s=i[o])&&(i[o]=null),w.event.triggered=d,t.isPropagationStopped()&&c.addEventListener(d,Ee),i[d](),t.isPropagationStopped()&&c.removeEventListener(d,Ee),w.event.triggered=void 0,s&&(i[o]=s)),t.result}},simulate:function(t,e,i){i=w.extend(new w.Event,i,{type:t,isSimulated:!0});w.event.trigger(i,null,e)}}),w.fn.extend({trigger:function(t,e){return this.each(function(){w.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return w.event.trigger(t,e,i,!0)}}),g.focusin||w.each({focus:"focusin",blur:"focusout"},function(i,n){function r(t){w.event.simulate(n,t.target,w.event.fix(t))}w.event.special[n]={setup:function(){var t=this.ownerDocument||this.document||this,e=_.access(t,n);e||t.addEventListener(i,r,!0),_.access(t,n,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this.document||this,e=_.access(t,n)-1;e?_.access(t,n,e):(t.removeEventListener(i,r,!0),_.remove(t,n))}}}),x.location),Ie={guid:Date.now()},Be=/\?/,De=(w.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new x.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),e},/\[\]$/),Pe=/\r?\n/g,Le=/^(?:submit|button|image|reset|file)$/i,Re=/^(?:input|select|textarea|keygen)/i;w.param=function(t,e){function i(t,e){e=v(e)?e():e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==e?"":e)}var n,r=[];if(null==t)return"";if(Array.isArray(t)||t.jquery&&!w.isPlainObject(t))w.each(t,function(){i(this.name,this.value)});else for(n in t)!function i(n,t,r,s){if(Array.isArray(t))w.each(t,function(t,e){r||De.test(n)?s(n,e):i(n+"["+("object"==typeof e&&null!=e?t:"")+"]",e,r,s)});else if(r||"object"!==f(t))s(n,t);else for(var e in t)i(n+"["+e+"]",t[e],r,s)}(n,t[n],e,i);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=w.prop(this,"elements");return t?w.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!w(this).is(":disabled")&&Re.test(this.nodeName)&&!Le.test(t)&&(this.checked||!bt.test(t))}).map(function(t,e){var i=w(this).val();return null==i?null:Array.isArray(i)?w.map(i,function(t){return{name:e.name,value:t.replace(Pe,"\r\n")}}):{name:e.name,value:i.replace(Pe,"\r\n")}}).get()}});var ke=/%20/g,Ne=/#.*$/,Qe=/([?&])_=[^&]*/,Fe=/^(.*?):[ \t]*([^\r\n]*)$/gm,Oe=/^(?:GET|HEAD)$/,Ge=/^\/\//,Ue={},He={},Ve="*/".concat("*"),ze=S.createElement("a");function We(s){return function(t,e){"string"!=typeof t&&(e=t,t="*");var i,n=0,r=t.toLowerCase().match(E)||[];if(v(e))for(;i=r[n++];)"+"===i[0]?(i=i.slice(1)||"*",(s[i]=s[i]||[]).unshift(e)):(s[i]=s[i]||[]).push(e)}}function qe(e,n,r,s){var a={},o=e===He;function l(t){var i;return a[t]=!0,w.each(e[t]||[],function(t,e){e=e(n,r,s);return"string"!=typeof e||o||a[e]?o?!(i=e):void 0:(n.dataTypes.unshift(e),l(e),!1)}),i}return l(n.dataTypes[0])||!a["*"]&&l("*")}function je(t,e){var i,n,r=w.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n=n||{})[i]=e[i]);return n&&w.extend(!0,t,n),t}ze.href=Me.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Me.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Me.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ve,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?je(je(t,w.ajaxSettings),e):je(w.ajaxSettings,t)},ajaxPrefilter:We(Ue),ajaxTransport:We(He),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0);var l,h,c,i,u,d,p,n,r,f=w.ajaxSetup({},e=e||{}),m=f.context||f,g=f.context&&(m.nodeType||m.jquery)?w(m):w.event,A=w.Deferred(),v=w.Callbacks("once memory"),y=f.statusCode||{},s={},a={},o="canceled",_={readyState:0,getResponseHeader:function(t){var e;if(d){if(!i)for(i={};e=Fe.exec(c);)i[e[1].toLowerCase()+" "]=(i[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=i[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return d?c:null},setRequestHeader:function(t,e){return null==d&&(t=a[t.toLowerCase()]=a[t.toLowerCase()]||t,s[t]=e),this},overrideMimeType:function(t){return null==d&&(f.mimeType=t),this},statusCode:function(t){if(t)if(d)_.always(t[_.status]);else for(var e in t)y[e]=[y[e],t[e]];return this},abort:function(t){t=t||o;return l&&l.abort(t),b(0,t),this}};if(A.promise(_),f.url=((t||f.url||Me.href)+"").replace(Ge,Me.protocol+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(E)||[""],null==f.crossDomain){r=S.createElement("a");try{r.href=f.url,r.href=r.href,f.crossDomain=ze.protocol+"//"+ze.host!=r.protocol+"//"+r.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=w.param(f.data,f.traditional)),qe(Ue,f,e,_),d)return _;for(n in(p=w.event&&f.global)&&0==w.active++&&w.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Oe.test(f.type),h=f.url.replace(Ne,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(ke,"+")):(r=f.url.slice(h.length),f.data&&(f.processData||"string"==typeof f.data)&&(h+=(Be.test(h)?"&":"?")+f.data,delete f.data),!1===f.cache&&(h=h.replace(Qe,"$1"),r=(Be.test(h)?"&":"?")+"_="+Ie.guid+++r),f.url=h+r),f.ifModified&&(w.lastModified[h]&&_.setRequestHeader("If-Modified-Since",w.lastModified[h]),w.etag[h]&&_.setRequestHeader("If-None-Match",w.etag[h])),(f.data&&f.hasContent&&!1!==f.contentType||e.contentType)&&_.setRequestHeader("Content-Type",f.contentType),_.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ve+"; q=0.01":""):f.accepts["*"]),f.headers)_.setRequestHeader(n,f.headers[n]);if(f.beforeSend&&(!1===f.beforeSend.call(m,_,f)||d))return _.abort();if(o="abort",v.add(f.complete),_.done(f.success),_.fail(f.error),l=qe(He,f,e,_)){if(_.readyState=1,p&&g.trigger("ajaxSend",[_,f]),d)return _;f.async&&0<f.timeout&&(u=x.setTimeout(function(){_.abort("timeout")},f.timeout));try{d=!1,l.send(s,b)}catch(t){if(d)throw t;b(-1,t)}}else b(-1,"No Transport");function b(t,e,i,n){var r,s,a,o=e;d||(d=!0,u&&x.clearTimeout(u),l=void 0,c=n||"",_.readyState=0<t?4:0,n=200<=t&&t<300||304===t,i&&(a=function(t,e,i){for(var n,r,s,a,o=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in o)if(o[r]&&o[r].test(n)){l.unshift(r);break}if(l[0]in i)s=l[0];else{for(r in i){if(!l[0]||t.converters[r+" "+l[0]]){s=r;break}a=a||r}s=s||a}if(s)return s!==l[0]&&l.unshift(s),i[s]}(f,_,i)),!n&&-1<w.inArray("script",f.dataTypes)&&(f.converters["text script"]=function(){}),a=function(t,e,i,n){var r,s,a,o,l,h={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)h[a.toLowerCase()]=t.converters[a];for(s=c.shift();s;)if(t.responseFields[s]&&(i[t.responseFields[s]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=c.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(a=h[l+" "+s]||h["* "+s]))for(r in h)if((o=r.split(" "))[1]===s&&(a=h[l+" "+o[0]]||h["* "+o[0]])){!0===a?a=h[r]:!0!==h[r]&&(s=o[0],c.unshift(o[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}(f,a,_,n),n?(f.ifModified&&((i=_.getResponseHeader("Last-Modified"))&&(w.lastModified[h]=i),(i=_.getResponseHeader("etag"))&&(w.etag[h]=i)),204===t||"HEAD"===f.type?o="nocontent":304===t?o="notmodified":(o=a.state,r=a.data,n=!(s=a.error))):(s=o,!t&&o||(o="error",t<0&&(t=0))),_.status=t,_.statusText=(e||o)+"",n?A.resolveWith(m,[r,o,_]):A.rejectWith(m,[_,o,s]),_.statusCode(y),y=void 0,p&&g.trigger(n?"ajaxSuccess":"ajaxError",[_,f,n?r:s]),v.fireWith(m,[_,o]),p&&(g.trigger("ajaxComplete",[_,f]),--w.active||w.event.trigger("ajaxStop")))}return _},getJSON:function(t,e,i){return w.get(t,e,i,"json")},getScript:function(t,e){return w.get(t,void 0,e,"script")}}),w.each(["get","post"],function(t,r){w[r]=function(t,e,i,n){return v(e)&&(n=n||i,i=e,e=void 0),w.ajax(w.extend({url:t,type:r,dataType:n,data:e,success:i},w.isPlainObject(t)&&t))}}),w.ajaxPrefilter(function(t){for(var e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")}),w._evalUrl=function(t,e,i){return w.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){w.globalEval(t,e,i)}})},w.fn.extend({wrapAll:function(t){return this[0]&&(v(t)&&(t=t.call(this[0])),t=w(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(i){return v(i)?this.each(function(t){w(this).wrapInner(i.call(this,t))}):this.each(function(){var t=w(this),e=t.contents();e.length?e.wrapAll(i):t.append(i)})},wrap:function(e){var i=v(e);return this.each(function(t){w(this).wrapAll(i?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(t){return!w.expr.pseudos.visible(t)},w.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new x.XMLHttpRequest}catch(t){}};var Xe={0:200,1223:204},Ye=w.ajaxSettings.xhr();g.cors=!!Ye&&"withCredentials"in Ye,g.ajax=Ye=!!Ye,w.ajaxTransport(function(r){var s,a;if(g.cors||Ye&&!r.crossDomain)return{send:function(t,e){var i,n=r.xhr();if(n.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(i in r.xhrFields)n[i]=r.xhrFields[i];for(i in r.mimeType&&n.overrideMimeType&&n.overrideMimeType(r.mimeType),r.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)n.setRequestHeader(i,t[i]);s=function(t){return function(){s&&(s=a=n.onload=n.onerror=n.onabort=n.ontimeout=n.onreadystatechange=null,"abort"===t?n.abort():"error"===t?"number"!=typeof n.status?e(0,"error"):e(n.status,n.statusText):e(Xe[n.status]||n.status,n.statusText,"text"!==(n.responseType||"text")||"string"!=typeof n.responseText?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders()))}},n.onload=s(),a=n.onerror=n.ontimeout=s("error"),void 0!==n.onabort?n.onabort=a:n.onreadystatechange=function(){4===n.readyState&&x.setTimeout(function(){s&&a()})},s=s("abort");try{n.send(r.hasContent&&r.data||null)}catch(t){if(s)throw t}},abort:function(){s&&s()}}}),w.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return w.globalEval(t),t}}}),w.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),w.ajaxTransport("script",function(i){var n,r;if(i.crossDomain||i.scriptAttrs)return{send:function(t,e){n=w("<script>").attr(i.scriptAttrs||{}).prop({charset:i.scriptCharset,src:i.url}).on("load error",r=function(t){n.remove(),r=null,t&&e("error"===t.type?404:200,t.type)}),S.head.appendChild(n[0])},abort:function(){r&&r()}}});var Ke=[],Je=/(=)\?(?=&|$)|\?\?/,$e=(w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ke.pop()||w.expando+"_"+Ie.guid++;return this[t]=!0,t}}),w.ajaxPrefilter("json jsonp",function(t,e,i){var n,r,s,a=!1!==t.jsonp&&(Je.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Je.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return n=t.jsonpCallback=v(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Je,"$1"+n):!1!==t.jsonp&&(t.url+=(Be.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return s||w.error(n+" was not called"),s[0]},t.dataTypes[0]="json",r=x[n],x[n]=function(){s=arguments},i.always(function(){void 0===r?w(x).removeProp(n):x[n]=r,t[n]&&(t.jsonpCallback=e.jsonpCallback,Ke.push(n)),s&&v(r)&&r(s[0]),s=r=void 0}),"script"}),g.createHTMLDocument=((t=S.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===t.childNodes.length),w.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(g.createHTMLDocument?((n=(e=S.implementation.createHTMLDocument("")).createElement("base")).href=S.location.href,e.head.appendChild(n)):e=S),n=!i&&[],(i=J.exec(t))?[e.createElement(i[1])]:(i=Ct([t],e,n),n&&n.length&&w(n).remove(),w.merge([],i.childNodes)));var n},w.fn.load=function(t,e,i){var n,r,s,a=this,o=t.indexOf(" ");return-1<o&&(n=R(t.slice(o)),t=t.slice(0,o)),v(e)?(i=e,e=void 0):e&&"object"==typeof e&&(r="POST"),0<a.length&&w.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){s=arguments,a.html(n?w("<div>").append(w.parseHTML(t)).find(n):t)}).always(i&&function(t,e){a.each(function(){i.apply(this,s||[t.responseText,e,t])})}),this},w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(t,e,i){var n,r,s,a,o=w.css(t,"position"),l=w(t),h={};"static"===o&&(t.style.position="relative"),s=l.offset(),n=w.css(t,"top"),a=w.css(t,"left"),o=("absolute"===o||"fixed"===o)&&-1<(n+a).indexOf("auto")?(r=(o=l.position()).top,o.left):(r=parseFloat(n)||0,parseFloat(a)||0),null!=(e=v(e)?e.call(t,i,w.extend({},s)):e).top&&(h.top=e.top-s.top+r),null!=e.left&&(h.left=e.left-s.left+o),"using"in e?e.using.call(t,h):("number"==typeof h.top&&(h.top+="px"),"number"==typeof h.left&&(h.left+="px"),l.css(h))}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),i=i.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,n=this[0],r={top:0,left:0};if("fixed"===w.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),i=n.ownerDocument,t=n.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===w.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((r=w(t).offset()).top+=w.css(t,"borderTopWidth",!0),r.left+=w.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-w.css(n,"marginTop",!0),left:e.left-r.left-w.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===w.css(t,"position");)t=t.offsetParent;return t||b})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var s="pageYOffset"===r;w.fn[e]=function(t){return u(this,function(t,e,i){var n;if(m(t)?n=t:9===t.nodeType&&(n=t.defaultView),void 0===i)return n?n[r]:t[e];n?n.scrollTo(s?n.pageXOffset:i,s?i:n.pageYOffset):t[e]=i},e,t,arguments.length)}}),w.each(["top","left"],function(t,i){w.cssHooks[i]=Zt(g.pixelPosition,function(t,e){if(e)return e=$t(t,i),Kt.test(e)?w(t).position()[i]+"px":e})}),w.each({Height:"height",Width:"width"},function(a,o){w.each({padding:"inner"+a,content:o,"":"outer"+a},function(n,s){w.fn[s]=function(t,e){var i=arguments.length&&(n||"boolean"!=typeof t),r=n||(!0===t||!0===e?"margin":"border");return u(this,function(t,e,i){var n;return m(t)?0===s.indexOf("outer")?t["inner"+a]:t.document.documentElement["client"+a]:9===t.nodeType?(n=t.documentElement,Math.max(t.body["scroll"+a],n["scroll"+a],t.body["offset"+a],n["offset"+a],n["client"+a])):void 0===i?w.css(t,e,r):w.style(t,e,i,r)},o,i?t:void 0,i)}})}),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){w.fn[e]=function(t){return this.on(e,t)}}),w.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,i){w.fn[i]=function(t,e){return 0<arguments.length?this.on(i,null,t,e):this.trigger(i)}}),/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g),Ze=(w.proxy=function(t,e){var i,n;if("string"==typeof e&&(n=t[e],e=t,t=n),v(t))return i=o.call(arguments,2),(n=function(){return t.apply(e||this,i.concat(o.call(arguments)))}).guid=t.guid=t.guid||w.guid++,n},w.holdReady=function(t){t?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=l,w.isFunction=v,w.isWindow=m,w.camelCase=y,w.type=f,w.now=Date.now,w.isNumeric=function(t){var e=w.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},w.trim=function(t){return null==t?"":(t+"").replace($e,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w}),x.jQuery),ti=x.$;return w.noConflict=function(t){return x.$===w&&(x.$=ti),t&&x.jQuery===w&&(x.jQuery=Ze),w},void 0===N&&(x.jQuery=x.$=w),w}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).LocomotiveScroll=e()}(this,function(){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function t(t,e,i){e&&n(t.prototype,e),i&&n(t,i)}function e(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}function r(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e(Object(r),!0).forEach(function(t){var e,i;e=n,i=r[t=t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))})}return n}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,i=a(n);return t=r?(t=a(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments),i=this,!(e=t)||"object"!=typeof e&&"function"!=typeof e?l(i):e}}function c(t,e,i){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(t)return(t=Object.getOwnPropertyDescriptor(t,e)).get?t.get.call(i):t.value})(t,e,i||t)}function E(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,r=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,s=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}return i}}(t,e)||f(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"==typeof t)return m(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(i="Object"===i&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var u={el:document,name:"scroll",offset:[0,0],repeat:!1,smooth:!1,initPosition:{x:0,y:0},direction:"vertical",gestureDirection:"vertical",reloadOnContextChange:!1,lerp:.1,class:"is-inview",scrollbarContainer:!1,scrollbarClass:"c-scrollbar",scrollingClass:"has-scroll-scrolling",draggingClass:"has-scroll-dragging",smoothClass:"has-scroll-smooth",initClass:"has-scroll-init",getSpeed:!1,getDirection:!1,scrollFromAnywhere:!1,multiplier:1,firefoxMultiplier:50,touchMultiplier:2,resetNativeScroll:!0,tablet:{smooth:!1,direction:"vertical",gestureDirection:"vertical",breakpoint:1024},smartphone:{smooth:!1,direction:"vertical",gestureDirection:"vertical"}},d=(t(p,[{key:"init",value:function(){this.initEvents()}},{key:"checkScroll",value:function(){this.dispatchScroll()}},{key:"checkResize",value:function(){var t=this;this.resizeTick||(this.resizeTick=!0,requestAnimationFrame(function(){t.resize(),t.resizeTick=!1}))}},{key:"resize",value:function(){}},{key:"checkContext",value:function(){var t;this.reloadOnContextChange&&(this.isMobile=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints||this.windowWidth<this.tablet.breakpoint,this.isTablet=this.isMobile&&this.windowWidth>=this.tablet.breakpoint,t=this.context,this.isMobile?this.isTablet?this.context="tablet":this.context="smartphone":this.context="desktop",t!=this.context&&("desktop"==t?this:this[t]).smooth!=("desktop"==this.context?this:this[this.context]).smooth&&window.location.reload())}},{key:"initEvents",value:function(){var e=this;this.scrollToEls=this.el.querySelectorAll("[data-".concat(this.name,"-to]")),this.setScrollTo=this.setScrollTo.bind(this),this.scrollToEls.forEach(function(t){t.addEventListener("click",e.setScrollTo,!1)})}},{key:"setScrollTo",value:function(t){t.preventDefault(),this.scrollTo(t.currentTarget.getAttribute("data-".concat(this.name,"-href"))||t.currentTarget.getAttribute("href"),{offset:t.currentTarget.getAttribute("data-".concat(this.name,"-offset"))})}},{key:"addElements",value:function(){}},{key:"detectElements",value:function(n){var r=this,s=this.instance.scroll.y,a=s+this.windowHeight,o=this.instance.scroll.x,l=o+this.windowWidth;Object.entries(this.els).forEach(function(t){var e,t=E(t,2),i=t[0],t=t[1];!t||t.inView&&!n||("horizontal"===r.direction?l>=t.left&&o<t.right&&r.setInView(t,i):a>=t.top&&s<t.bottom&&r.setInView(t,i)),t&&t.inView&&("horizontal"===r.direction?(e=t.right-t.left,t.progress=(r.instance.scroll.x-(t.left-r.windowWidth))/(e+r.windowWidth),(l<t.left||o>t.right)&&r.setOutOfView(t,i)):(e=t.bottom-t.top,t.progress=(r.instance.scroll.y-(t.top-r.windowHeight))/(e+r.windowHeight),(a<t.top||s>t.bottom)&&r.setOutOfView(t,i)))}),this.hasScrollTicking=!1}},{key:"setInView",value:function(t,e){this.els[e].inView=!0,t.el.classList.add(t.class),(this.currentElements[e]=t).call&&this.hasCallEventSet&&(this.dispatchCall(t,"enter"),t.repeat||(this.els[e].call=!1))}},{key:"setOutOfView",value:function(t,e){var i=this;this.els[e].inView=!1,Object.keys(this.currentElements).forEach(function(t){t===e&&delete i.currentElements[t]}),t.call&&this.hasCallEventSet&&this.dispatchCall(t,"exit"),t.repeat&&t.el.classList.remove(t.class)}},{key:"dispatchCall",value:function(t,e){this.callWay=e,this.callValue=t.call.split(",").map(function(t){return t.trim()}),this.callObj=t,1==this.callValue.length&&(this.callValue=this.callValue[0]);e=new Event(this.namespace+"call");this.el.dispatchEvent(e)}},{key:"dispatchScroll",value:function(){var t=new Event(this.namespace+"scroll");this.el.dispatchEvent(t)}},{key:"setEvents",value:function(t,e){this.listeners[t]||(this.listeners[t]=[]);var i=this.listeners[t];i.push(e),1===i.length&&this.el.addEventListener(this.namespace+t,this.checkEvent,!1),"call"===t&&(this.hasCallEventSet=!0,this.detectElements(!0))}},{key:"unsetEvents",value:function(t,e){var i;!this.listeners[t]||(e=(i=this.listeners[t]).indexOf(e))<0||(i.splice(e,1),0===i.index&&this.el.removeEventListener(this.namespace+t,this.checkEvent,!1))}},{key:"checkEvent",value:function(t){var e=this,i=t.type.replace(this.namespace,""),t=this.listeners[i];t&&0!==t.length&&t.forEach(function(t){switch(i){case"scroll":return t(e.instance);case"call":return t(e.callValue,e.callWay,e.callObj);default:return t()}})}},{key:"startScroll",value:function(){}},{key:"stopScroll",value:function(){}},{key:"setScroll",value:function(t,e){this.instance.scroll={x:0,y:0}}},{key:"destroy",value:function(){var e=this;window.removeEventListener("resize",this.checkResize,!1),Object.keys(this.listeners).forEach(function(t){e.el.removeEventListener(e.namespace+t,e.checkEvent,!1)}),this.listeners={},this.scrollToEls.forEach(function(t){t.removeEventListener("click",e.setScrollTo,!1)}),this.html.classList.remove(this.initClass)}}]),p),N="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function p(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};i(this,p),Object.assign(this,u,t),this.smartphone=u.smartphone,t.smartphone&&Object.assign(this.smartphone,t.smartphone),this.tablet=u.tablet,t.tablet&&Object.assign(this.tablet,t.tablet),this.namespace="locomotive",this.html=document.documentElement,this.windowHeight=window.innerHeight,this.windowWidth=window.innerWidth,this.windowMiddle={x:this.windowWidth/2,y:this.windowHeight/2},this.els={},this.currentElements={},this.listeners={},this.hasScrollTicking=!1,this.hasCallEventSet=!1,this.checkScroll=this.checkScroll.bind(this),this.checkResize=this.checkResize.bind(this),this.checkEvent=this.checkEvent.bind(this),this.instance={scroll:{x:0,y:0},limit:{x:this.html.offsetWidth,y:this.html.offsetHeight},currentElements:this.currentElements},this.isMobile?this.isTablet?this.context="tablet":this.context="smartphone":this.context="desktop",this.isMobile&&(this.direction=this[this.context].direction),"horizontal"===this.direction?this.directionAxis="x":this.directionAxis="y",this.getDirection&&(this.instance.direction=null),this.getDirection&&(this.instance.speed=0),this.html.classList.add(this.initClass),window.addEventListener("resize",this.checkResize,!1)}function g(t,e){return t(e={exports:{}},e.exports),e.exports}var A,v=g(function(t,e){t.exports={polyfill:function(){var t,e,o,l,i,h=window,c=document;function u(t,e){this.scrollLeft=t,this.scrollTop=e}function n(t){if(null===t||"object"!=typeof t||void 0===t.behavior||"auto"===t.behavior||"instant"===t.behavior)return!0;if("object"==typeof t&&"smooth"===t.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+t.behavior+" is not a valid value for enumeration ScrollBehavior.")}function r(t,e){return"Y"===e?t.clientHeight+i<t.scrollHeight:"X"===e?t.clientWidth+i<t.scrollWidth:void 0}function s(t,e){t=h.getComputedStyle(t,null)["overflow"+e];return"auto"===t||"scroll"===t}function d(t){var e=(l()-t.startTime)/468,e=e=1<e?1:e,e=.5*(1-Math.cos(Math.PI*e)),i=t.startX+(t.x-t.startX)*e,e=t.startY+(t.y-t.startY)*e;t.method.call(t.scrollable,i,e),i===t.x&&e===t.y||h.requestAnimationFrame(d.bind(h,t))}function a(t,e,i){var n,r,s,a=l(),t=t===c.body?(r=(n=h).scrollX||h.pageXOffset,s=h.scrollY||h.pageYOffset,o.scroll):(r=(n=t).scrollLeft,s=t.scrollTop,u);d({scrollable:n,method:t,startTime:a,startX:r,startY:s,x:e,y:i})}"scrollBehavior"in c.documentElement.style&&!0!==h.__forceSmoothScrollPolyfill__||(e=h.HTMLElement||h.Element,o={scroll:h.scroll||h.scrollTo,scrollBy:h.scrollBy,elementScroll:e.prototype.scroll||u,scrollIntoView:e.prototype.scrollIntoView},l=h.performance&&h.performance.now?h.performance.now.bind(h.performance):Date.now,t=h.navigator.userAgent,i=new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(t)?1:0,h.scroll=h.scrollTo=function(){void 0!==arguments[0]&&(!0!==n(arguments[0])?a.call(h,c.body,void 0!==arguments[0].left?~~arguments[0].left:h.scrollX||h.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:h.scrollY||h.pageYOffset):o.scroll.call(h,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:h.scrollX||h.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:h.scrollY||h.pageYOffset))},h.scrollBy=function(){void 0!==arguments[0]&&(n(arguments[0])?o.scrollBy.call(h,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):a.call(h,c.body,~~arguments[0].left+(h.scrollX||h.pageXOffset),~~arguments[0].top+(h.scrollY||h.pageYOffset)))},e.prototype.scroll=e.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==n(arguments[0])){var t=arguments[0].left,e=arguments[0].top;a.call(this,this,void 0===t?this.scrollLeft:~~t,void 0===e?this.scrollTop:~~e)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");o.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},e.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==n(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):o.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},e.prototype.scrollIntoView=function(){var t,e,i;!0!==n(arguments[0])?(e=(t=function(t){for(;t!==c.body&&!1===function(t){var e=r(t,"Y")&&s(t,"Y"),t=r(t,"X")&&s(t,"X");return e||t}(t);)t=t.parentNode||t.host;return t}(this)).getBoundingClientRect(),i=this.getBoundingClientRect(),t!==c.body?(a.call(this,t,t.scrollLeft+i.left-e.left,t.scrollTop+i.top-e.top),"fixed"!==h.getComputedStyle(t).position&&h.scrollBy({left:e.left,top:e.top,behavior:"smooth"})):h.scrollBy({left:i.left,top:i.top,behavior:"smooth"})):o.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])})}}}),Q=(v.polyfill,s(_,d),A=h(_),t(_,[{key:"init",value:function(){this.instance.scroll.y=window.pageYOffset,this.addElements(),this.detectElements(),c(a(_.prototype),"init",this).call(this)}},{key:"checkScroll",value:function(){var t=this;c(a(_.prototype),"checkScroll",this).call(this),this.getDirection&&this.addDirection(),this.getSpeed&&(this.addSpeed(),this.speedTs=Date.now()),this.instance.scroll.y=window.pageYOffset,Object.entries(this.els).length&&!this.hasScrollTicking&&(requestAnimationFrame(function(){t.detectElements()}),this.hasScrollTicking=!0)}},{key:"addDirection",value:function(){window.pageYOffset>this.instance.scroll.y?"down"!==this.instance.direction&&(this.instance.direction="down"):window.pageYOffset<this.instance.scroll.y&&"up"!==this.instance.direction&&(this.instance.direction="up")}},{key:"addSpeed",value:function(){window.pageYOffset!=this.instance.scroll.y?this.instance.speed=(window.pageYOffset-this.instance.scroll.y)/Math.max(1,Date.now()-this.speedTs):this.instance.speed=0}},{key:"resize",value:function(){Object.entries(this.els).length&&(this.windowHeight=window.innerHeight,this.updateElements())}},{key:"addElements",value:function(){var d=this;this.els={},this.el.querySelectorAll("[data-"+this.name+"]").forEach(function(t,e){t.getBoundingClientRect();var i=t.dataset[d.name+"Class"]||d.class,e="string"==typeof t.dataset[d.name+"Id"]?t.dataset[d.name+"Id"]:e,n="string"==typeof t.dataset[d.name+"Offset"]?t.dataset[d.name+"Offset"].split(","):d.offset,r=t.dataset[d.name+"Repeat"],s=t.dataset[d.name+"Call"],a=t.dataset[d.name+"Target"],o=(a=void 0!==a?document.querySelector("".concat(a)):t).getBoundingClientRect(),l=o.top+d.instance.scroll.y,o=o.left+d.instance.scroll.x,h=l+a.offsetHeight,c=o+a.offsetWidth,r="false"!=r&&(null!=r||d.repeat),u=d.getRelativeOffset(n),a={el:t,targetEl:a,id:e,class:i,top:l+=u[0],bottom:h-=u[1],left:o,right:c,offset:n,progress:0,repeat:r,inView:!1,call:s};d.els[e]=a,t.classList.contains(i)&&d.setInView(d.els[e],e)})}},{key:"updateElements",value:function(){var r=this;Object.entries(this.els).forEach(function(t){var t=E(t,2),e=t[0],t=t[1],i=t.targetEl.getBoundingClientRect().top+r.instance.scroll.y,n=i+t.targetEl.offsetHeight,t=r.getRelativeOffset(t.offset);r.els[e].top=i+t[0],r.els[e].bottom=n-t[1]}),this.hasScrollTicking=!1}},{key:"getRelativeOffset",value:function(t){var e=[0,0];if(t)for(var i=0;i<t.length;i++)"string"==typeof t[i]?t[i].includes("%")?e[i]=parseInt(t[i].replace("%","")*this.windowHeight/100):e[i]=parseInt(t[i]):e[i]=t[i];return e}},{key:"scrollTo",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=parseInt(e.offset)||0,n=!!e.callback&&e.callback;if("string"==typeof t){if("top"===t)t=this.html;else if("bottom"===t)t=this.html.offsetHeight-window.innerHeight;else if(!(t=document.querySelector(t)))return}else if("number"==typeof t)t=parseInt(t);else if(!t||!t.tagName)return void console.warn("`target` parameter is not valid");var i="number"!=typeof t?t.getBoundingClientRect().top+i+this.instance.scroll.y:t+i,r=function(){return parseInt(window.pageYOffset)===parseInt(i)};if(n){if(r())return void n();window.addEventListener("scroll",function t(){r()&&(window.removeEventListener("scroll",t),n())})}window.scrollTo({top:i,behavior:0===e.duration?"auto":"smooth"})}},{key:"update",value:function(){this.addElements(),this.detectElements()}},{key:"destroy",value:function(){c(a(_.prototype),"destroy",this).call(this),window.removeEventListener("scroll",this.checkScroll,!1)}}]),_),y=Object.getOwnPropertySymbols,F=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;function _(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return i(this,_),(t=A.call(this,t)).resetNativeScroll&&(history.scrollRestoration&&(history.scrollRestoration="manual"),window.scrollTo(0,0)),window.addEventListener("scroll",t.checkScroll,!1),void 0===window.smoothscrollPolyfill&&(window.smoothscrollPolyfill=v,window.smoothscrollPolyfill.polyfill()),t}var G=function(){try{if(!Object.assign)return;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return}}()?Object.assign:function(t,e){for(var i,n=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),r=1;r<arguments.length;r++){for(var s in i=Object(arguments[r]))F.call(i,s)&&(n[s]=i[s]);if(y)for(var a=y(i),o=0;o<a.length;o++)O.call(i,a[o])&&(n[a[o]]=i[a[o]])}return n};function b(){}b.prototype={on:function(t,e,i){var n=this.e||(this.e={});return(n[t]||(n[t]=[])).push({fn:e,ctx:i}),this},once:function(t,e,i){var n=this;function r(){n.off(t,r),e.apply(i,arguments)}return r._=e,this.on(t,r,i)},emit:function(t){for(var e=[].slice.call(arguments,1),i=((this.e||(this.e={}))[t]||[]).slice(),n=0,r=i.length;n<r;n++)i[n].fn.apply(i[n].ctx,e);return this},off:function(t,e){var i=this.e||(this.e={}),n=i[t],r=[];if(n&&e)for(var s=0,a=n.length;s<a;s++)n[s].fn!==e&&n[s].fn._!==e&&r.push(n[s]);return r.length?i[t]=r:delete i[t],this}};var U=b,H=g(function(t,e){!function(){function t(t,e,i,n){this.stability=null!=t?Math.abs(t):8,this.sensitivity=null!=e?1+Math.abs(e):100,this.tolerance=null!=i?1+Math.abs(i):1.1,this.delay=null!=n?n:150,this.lastUpDeltas=function(){for(var t=[],e=1,i=2*this.stability;1<=i?e<=i:i<=e;1<=i?e++:e--)t.push(null);return t}.call(this),this.lastDownDeltas=function(){for(var t=[],e=1,i=2*this.stability;1<=i?e<=i:i<=e;1<=i?e++:e--)t.push(null);return t}.call(this),this.deltasTimestamp=function(){for(var t=[],e=1,i=2*this.stability;1<=i?e<=i:i<=e;1<=i?e++:e--)t.push(null);return t}.call(this)}(null!==e?e:this).Lethargy=(t.prototype.check=function(t){var e;return null!=(t=t.originalEvent||t).wheelDelta?e=t.wheelDelta:null!=t.deltaY?e=-40*t.deltaY:null==t.detail&&0!==t.detail||(e=-40*t.detail),this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),0<e?(this.lastUpDeltas.push(e),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(e),this.lastDownDeltas.shift(),this.isInertia(-1))},t.prototype.isInertia=function(t){var e,i,n,r;return null===(e=-1===t?this.lastDownDeltas:this.lastUpDeltas)[0]?t:!(this.deltasTimestamp[2*this.stability-2]+this.delay>Date.now()&&e[0]===e[2*this.stability-1])&&(i=e.slice(0,this.stability),e=e.slice(this.stability,2*this.stability),r=i.reduce(function(t,e){return t+e}),n=e.reduce(function(t,e){return t+e}),r=r/i.length,i=n/e.length,Math.abs(r)<Math.abs(i*this.tolerance)&&this.sensitivity<Math.abs(i)&&t)},t.prototype.showLastUpDeltas=function(){return this.lastUpDeltas},t.prototype.showLastDownDeltas=function(){return this.lastDownDeltas},t)}.call(N)}),x="onwheel"in document,S="onmousewheel"in document,w="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,C=navigator.msMaxTouchPoints&&1<navigator.msMaxTouchPoints,T=!!window.navigator.msPointerEnabled,V="onkeydown"in document,z=-1<navigator.userAgent.indexOf("Firefox"),W=Object.prototype.toString,q=Object.prototype.hasOwnProperty;var j=H.Lethargy,M="virtualscroll",X=I;function I(t){!function(t){if(!t)return console.warn("bindAll requires at least one argument.");var e=Array.prototype.slice.call(arguments,1);if(0===e.length)for(var i in t)q.call(t,i)&&"function"==typeof t[i]&&"[object Function]"==W.call(t[i])&&e.push(i);for(var n=0;n<e.length;n++){var r=e[n];t[r]=function(t,e){return function(){return t.apply(e,arguments)}}(t[r],t)}}(this,"_onWheel","_onMouseWheel","_onTouchStart","_onTouchMove","_onKeyDown"),this.el=window,t&&t.el&&(this.el=t.el,delete t.el),this.options=G({mouseMultiplier:1,touchMultiplier:2,firefoxMultiplier:15,keyStep:120,preventTouch:!1,unpreventTouchClass:"vs-touchmove-allowed",limitInertia:!1,useKeyboard:!0,useTouch:!0},t),this.options.limitInertia&&(this._lethargy=new j),this._emitter=new U,this._event={y:0,x:0,deltaX:0,deltaY:0},this.touchStartX=null,this.touchStartY=null,this.bodyTouchAction=null,void 0!==this.options.passive&&(this.listenerOptions={passive:this.options.passive})}function B(t,e,i){return(1-i)*t+i*e}function D(t){var e,i={};if(window.getComputedStyle)return(e=(t=(t=getComputedStyle(t)).transform||t.webkitTransform||t.mozTransform).match(/^matrix3d\((.+)\)$/))?(i.x=e?parseFloat(e[1].split(", ")[12]):0,i.y=e?parseFloat(e[1].split(", ")[13]):0):(e=t.match(/^matrix\((.+)\)$/),i.x=e?parseFloat(e[1].split(", ")[4]):0,i.y=e?parseFloat(e[1].split(", ")[5]):0),i}function P(t){for(var e=[];t&&t!==document;t=t.parentNode)e.push(t);return e}I.prototype._notify=function(t){var e=this._event;e.x+=e.deltaX,e.y+=e.deltaY,this._emitter.emit(M,{x:e.x,y:e.y,deltaX:e.deltaX,deltaY:e.deltaY,originalEvent:t})},I.prototype._onWheel=function(t){var e,i=this.options;this._lethargy&&!1===this._lethargy.check(t)||((e=this._event).deltaX=t.wheelDeltaX||-1*t.deltaX,e.deltaY=t.wheelDeltaY||-1*t.deltaY,z&&1==t.deltaMode&&(e.deltaX*=i.firefoxMultiplier,e.deltaY*=i.firefoxMultiplier),e.deltaX*=i.mouseMultiplier,e.deltaY*=i.mouseMultiplier,this._notify(t))},I.prototype._onMouseWheel=function(t){var e;this.options.limitInertia&&!1===this._lethargy.check(t)||((e=this._event).deltaX=t.wheelDeltaX||0,e.deltaY=t.wheelDeltaY||t.wheelDelta,this._notify(t))},I.prototype._onTouchStart=function(t){t=t.targetTouches?t.targetTouches[0]:t;this.touchStartX=t.pageX,this.touchStartY=t.pageY},I.prototype._onTouchMove=function(t){var e=this.options,i=(e.preventTouch&&!t.target.classList.contains(e.unpreventTouchClass)&&t.preventDefault(),this._event),n=t.targetTouches?t.targetTouches[0]:t;i.deltaX=(n.pageX-this.touchStartX)*e.touchMultiplier,i.deltaY=(n.pageY-this.touchStartY)*e.touchMultiplier,this.touchStartX=n.pageX,this.touchStartY=n.pageY,this._notify(t)},I.prototype._onKeyDown=function(t){var e=this._event,i=(e.deltaX=e.deltaY=0,window.innerHeight-40);switch(t.keyCode){case 37:case 38:e.deltaY=this.options.keyStep;break;case 39:case 40:e.deltaY=-this.options.keyStep;break;case t.shiftKey:e.deltaY=i;break;case 32:e.deltaY=-i;break;default:return}this._notify(t)},I.prototype._bind=function(){x&&this.el.addEventListener("wheel",this._onWheel,this.listenerOptions),S&&this.el.addEventListener("mousewheel",this._onMouseWheel,this.listenerOptions),w&&this.options.useTouch&&(this.el.addEventListener("touchstart",this._onTouchStart,this.listenerOptions),this.el.addEventListener("touchmove",this._onTouchMove,this.listenerOptions)),T&&C&&(this.bodyTouchAction=document.body.style.msTouchAction,document.body.style.msTouchAction="none",this.el.addEventListener("MSPointerDown",this._onTouchStart,!0),this.el.addEventListener("MSPointerMove",this._onTouchMove,!0)),V&&this.options.useKeyboard&&document.addEventListener("keydown",this._onKeyDown)},I.prototype._unbind=function(){x&&this.el.removeEventListener("wheel",this._onWheel),S&&this.el.removeEventListener("mousewheel",this._onMouseWheel),w&&(this.el.removeEventListener("touchstart",this._onTouchStart),this.el.removeEventListener("touchmove",this._onTouchMove)),T&&C&&(document.body.style.msTouchAction=this.bodyTouchAction,this.el.removeEventListener("MSPointerDown",this._onTouchStart,!0),this.el.removeEventListener("MSPointerMove",this._onTouchMove,!0)),V&&this.options.useKeyboard&&document.removeEventListener("keydown",this._onKeyDown)},I.prototype.on=function(t,e){this._emitter.on(M,t,e);t=this._emitter.e;t&&t[M]&&1===t[M].length&&this._bind()},I.prototype.off=function(t,e){this._emitter.off(M,t,e);t=this._emitter.e;(!t[M]||t[M].length<=0)&&this._unbind()},I.prototype.reset=function(){var t=this._event;t.x=0,t.y=0},I.prototype.destroy=function(){this._emitter.off(),this._unbind()};var Y="function"==typeof Float32Array;function K(t,e){return 1-3*e+3*t}function L(t,e,i){return((K(e,i)*t+(3*i-6*e))*t+3*e)*t}function J(t,e,i){return 3*K(e,i)*t*t+2*(3*i-6*e)*t+3*e}function $(t){return t}function Z(y,e,_,i){if(!(0<=y&&y<=1&&0<=_&&_<=1))throw new Error("bezier x values must be in [0, 1] range");if(y===e&&_===i)return $;for(var b=new(Y?Float32Array:Array)(11),t=0;t<11;++t)b[t]=L(.1*t,y,_);return function(t){return 0===t?0:1===t?1:L(function(t){for(var e=0,i=1;10!==i&&b[i]<=t;++i)e+=.1;var n=e+(t-b[--i])/(b[i+1]-b[i])*.1,r=J(n,y,_);if(.001<=r){for(var s=t,a=n,o=y,l=_,h=0;h<4;++h){var c=J(a,o,l);if(0===c)return a;a-=(L(a,o,l)-s)/c}return a}if(0===r)return n;for(var u,d,p=t,f=e,m=e+.1,g=y,A=_,v=0;0<(u=L(d=f+(m-f)/2,g,A)-p)?m=d:f=d,1e-7<Math.abs(u)&&++v<10;);return d}(t),e,i)}}s(R,d),tt=h(R),t(R,[{key:"init",value:function(){var e=this;this.html.classList.add(this.smoothClass),this.html.setAttribute("data-".concat(this.name,"-direction"),this.direction),this.instance=r({delta:{x:this.initPosition.x,y:this.initPosition.y},scroll:{x:this.initPosition.x,y:this.initPosition.y}},this.instance),this.vs=new X({el:this.scrollFromAnywhere?document:this.el,mouseMultiplier:-1<navigator.platform.indexOf("Win")?1:.4,firefoxMultiplier:this.firefoxMultiplier,touchMultiplier:this.touchMultiplier,useKeyboard:!1,passive:!0}),this.vs.on(function(t){e.stop||e.isDraggingScrollbar||requestAnimationFrame(function(){e.updateDelta(t),e.isScrolling||e.startScrolling()})}),this.setScrollLimit(),this.initScrollBar(),this.addSections(),this.addElements(),this.checkScroll(!0),this.transformElements(!0,!0),c(a(R.prototype),"init",this).call(this)}},{key:"setScrollLimit",value:function(){if(this.instance.limit.y=this.el.offsetHeight-this.windowHeight,"horizontal"===this.direction){for(var t=0,e=this.el.children,i=0;i<e.length;i++)t+=e[i].offsetWidth;this.instance.limit.x=t-this.windowWidth}}},{key:"startScrolling",value:function(){this.startScrollTs=Date.now(),this.isScrolling=!0,this.checkScroll(),this.html.classList.add(this.scrollingClass)}},{key:"stopScrolling",value:function(){cancelAnimationFrame(this.checkScrollRaf),this.startScrollTs=void 0,this.scrollToRaf&&(cancelAnimationFrame(this.scrollToRaf),this.scrollToRaf=null),this.isScrolling=!1,this.instance.scroll.y=Math.round(this.instance.scroll.y),this.html.classList.remove(this.scrollingClass)}},{key:"checkKey",value:function(t){var e=this;if(this.stop)9==t.keyCode&&requestAnimationFrame(function(){e.html.scrollTop=0,document.body.scrollTop=0,e.html.scrollLeft=0,document.body.scrollLeft=0});else{switch(t.keyCode){case 9:requestAnimationFrame(function(){e.html.scrollTop=0,document.body.scrollTop=0,e.html.scrollLeft=0,document.body.scrollLeft=0,e.scrollTo(document.activeElement,{offset:-window.innerHeight/2})});break;case 38:this.isActiveElementScrollSensitive()&&(this.instance.delta[this.directionAxis]-=240);break;case 40:this.isActiveElementScrollSensitive()&&(this.instance.delta[this.directionAxis]+=240);break;case 33:this.instance.delta[this.directionAxis]-=window.innerHeight;break;case 34:this.instance.delta[this.directionAxis]+=window.innerHeight;break;case 36:this.instance.delta[this.directionAxis]-=this.instance.limit[this.directionAxis];break;case 35:this.instance.delta[this.directionAxis]+=this.instance.limit[this.directionAxis];break;case 32:this.isActiveElementScrollSensitive()&&(t.shiftKey?this.instance.delta[this.directionAxis]-=window.innerHeight:this.instance.delta[this.directionAxis]+=window.innerHeight);break;default:return}this.instance.delta[this.directionAxis]<0&&(this.instance.delta[this.directionAxis]=0),this.instance.delta[this.directionAxis]>this.instance.limit[this.directionAxis]&&(this.instance.delta[this.directionAxis]=this.instance.limit[this.directionAxis]),this.stopScrolling(),this.isScrolling=!0,this.checkScroll(),this.html.classList.add(this.scrollingClass)}}},{key:"isActiveElementScrollSensitive",value:function(){return!(document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement||document.activeElement instanceof HTMLButtonElement||document.activeElement instanceof HTMLSelectElement)}},{key:"checkScroll",value:function(){var t,e,i=this,n=0<arguments.length&&void 0!==arguments[0]&&arguments[0];(n||this.isScrolling||this.isDraggingScrollbar)&&(this.hasScrollTicking||(this.checkScrollRaf=requestAnimationFrame(function(){return i.checkScroll()}),this.hasScrollTicking=!0),this.updateScroll(),t=Math.abs(this.instance.delta[this.directionAxis]-this.instance.scroll[this.directionAxis]),e=Date.now()-this.startScrollTs,!this.animatingScroll&&100<e&&(t<.5&&0!=this.instance.delta[this.directionAxis]||t<.5&&0==this.instance.delta[this.directionAxis])&&this.stopScrolling(),Object.entries(this.sections).forEach(function(t){t=E(t,2),t[0],t=t[1];t.persistent||i.instance.scroll[i.directionAxis]>t.offset[i.directionAxis]&&i.instance.scroll[i.directionAxis]<t.limit[i.directionAxis]?("horizontal"===i.direction?i.transform(t.el,-i.instance.scroll[i.directionAxis],0):i.transform(t.el,0,-i.instance.scroll[i.directionAxis]),t.inView||(t.inView=!0,t.el.style.opacity=1,t.el.style.pointerEvents="all",t.el.setAttribute("data-".concat(i.name,"-section-inview"),""))):((t.inView||n)&&(t.inView=!1,t.el.style.opacity=0,t.el.style.pointerEvents="none",t.el.removeAttribute("data-".concat(i.name,"-section-inview"))),i.transform(t.el,0,0))}),this.getDirection&&this.addDirection(),this.getSpeed&&(this.addSpeed(),this.speedTs=Date.now()),this.detectElements(),this.transformElements(),this.hasScrollbar&&(e=this.instance.scroll[this.directionAxis]/this.instance.limit[this.directionAxis]*this.scrollBarLimit[this.directionAxis],"horizontal"===this.direction?this.transform(this.scrollbarThumb,e,0):this.transform(this.scrollbarThumb,0,e)),c(a(R.prototype),"checkScroll",this).call(this),this.hasScrollTicking=!1)}},{key:"resize",value:function(){this.windowHeight=window.innerHeight,this.windowWidth=window.innerWidth,this.checkContext(),this.windowMiddle={x:this.windowWidth/2,y:this.windowHeight/2},this.update()}},{key:"updateDelta",value:function(t){var e=(this[this.context]&&this[this.context].gestureDirection?this[this.context]:this).gestureDirection,e="both"===e?t.deltaX+t.deltaY:"vertical"!==e&&"horizontal"===e?t.deltaX:t.deltaY;this.instance.delta[this.directionAxis]-=e*this.multiplier,this.instance.delta[this.directionAxis]<0&&(this.instance.delta[this.directionAxis]=0),this.instance.delta[this.directionAxis]>this.instance.limit[this.directionAxis]&&(this.instance.delta[this.directionAxis]=this.instance.limit[this.directionAxis])}},{key:"updateScroll",value:function(t){this.isScrolling||this.isDraggingScrollbar?this.instance.scroll[this.directionAxis]=B(this.instance.scroll[this.directionAxis],this.instance.delta[this.directionAxis],this.lerp):this.instance.scroll[this.directionAxis]>this.instance.limit[this.directionAxis]?this.setScroll(this.instance.scroll[this.directionAxis],this.instance.limit[this.directionAxis]):this.instance.scroll.y<0?this.setScroll(this.instance.scroll[this.directionAxis],0):this.setScroll(this.instance.scroll[this.directionAxis],this.instance.delta[this.directionAxis])}},{key:"addDirection",value:function(){this.instance.delta.y>this.instance.scroll.y?"down"!==this.instance.direction&&(this.instance.direction="down"):this.instance.delta.y<this.instance.scroll.y&&"up"!==this.instance.direction&&(this.instance.direction="up"),this.instance.delta.x>this.instance.scroll.x?"right"!==this.instance.direction&&(this.instance.direction="right"):this.instance.delta.x<this.instance.scroll.x&&"left"!==this.instance.direction&&(this.instance.direction="left")}},{key:"addSpeed",value:function(){this.instance.delta[this.directionAxis]!=this.instance.scroll[this.directionAxis]?this.instance.speed=(this.instance.delta[this.directionAxis]-this.instance.scroll[this.directionAxis])/Math.max(1,Date.now()-this.speedTs):this.instance.speed=0}},{key:"initScrollBar",value:function(){if(this.scrollbar=document.createElement("span"),this.scrollbarThumb=document.createElement("span"),this.scrollbar.classList.add("".concat(this.scrollbarClass)),this.scrollbarThumb.classList.add("".concat(this.scrollbarClass,"_thumb")),this.scrollbar.append(this.scrollbarThumb),(this.scrollbarContainer||document.body).append(this.scrollbar),this.getScrollBar=this.getScrollBar.bind(this),this.releaseScrollBar=this.releaseScrollBar.bind(this),this.moveScrollBar=this.moveScrollBar.bind(this),this.scrollbarThumb.addEventListener("mousedown",this.getScrollBar),window.addEventListener("mouseup",this.releaseScrollBar),window.addEventListener("mousemove",this.moveScrollBar),this.hasScrollbar=!1,"horizontal"==this.direction){if(this.instance.limit.x+this.windowWidth<=this.windowWidth)return}else if(this.instance.limit.y+this.windowHeight<=this.windowHeight)return;this.hasScrollbar=!0,this.scrollbarBCR=this.scrollbar.getBoundingClientRect(),this.scrollbarHeight=this.scrollbarBCR.height,this.scrollbarWidth=this.scrollbarBCR.width,"horizontal"===this.direction?this.scrollbarThumb.style.width="".concat(this.scrollbarWidth*this.scrollbarWidth/(this.instance.limit.x+this.scrollbarWidth),"px"):this.scrollbarThumb.style.height="".concat(this.scrollbarHeight*this.scrollbarHeight/(this.instance.limit.y+this.scrollbarHeight),"px"),this.scrollbarThumbBCR=this.scrollbarThumb.getBoundingClientRect(),this.scrollBarLimit={x:this.scrollbarWidth-this.scrollbarThumbBCR.width,y:this.scrollbarHeight-this.scrollbarThumbBCR.height}}},{key:"reinitScrollBar",value:function(){if(this.hasScrollbar=!1,"horizontal"==this.direction){if(this.instance.limit.x+this.windowWidth<=this.windowWidth)return}else if(this.instance.limit.y+this.windowHeight<=this.windowHeight)return;this.hasScrollbar=!0,this.scrollbarBCR=this.scrollbar.getBoundingClientRect(),this.scrollbarHeight=this.scrollbarBCR.height,this.scrollbarWidth=this.scrollbarBCR.width,"horizontal"===this.direction?this.scrollbarThumb.style.width="".concat(this.scrollbarWidth*this.scrollbarWidth/(this.instance.limit.x+this.scrollbarWidth),"px"):this.scrollbarThumb.style.height="".concat(this.scrollbarHeight*this.scrollbarHeight/(this.instance.limit.y+this.scrollbarHeight),"px"),this.scrollbarThumbBCR=this.scrollbarThumb.getBoundingClientRect(),this.scrollBarLimit={x:this.scrollbarWidth-this.scrollbarThumbBCR.width,y:this.scrollbarHeight-this.scrollbarThumbBCR.height}}},{key:"destroyScrollBar",value:function(){this.scrollbarThumb.removeEventListener("mousedown",this.getScrollBar),window.removeEventListener("mouseup",this.releaseScrollBar),window.removeEventListener("mousemove",this.moveScrollBar),this.scrollbar.remove()}},{key:"getScrollBar",value:function(t){this.isDraggingScrollbar=!0,this.checkScroll(),this.html.classList.remove(this.scrollingClass),this.html.classList.add(this.draggingClass)}},{key:"releaseScrollBar",value:function(t){this.isDraggingScrollbar=!1,this.isScrolling&&this.html.classList.add(this.scrollingClass),this.html.classList.remove(this.draggingClass)}},{key:"moveScrollBar",value:function(i){var n=this;this.isDraggingScrollbar&&requestAnimationFrame(function(){var t=100*(i.clientX-n.scrollbarBCR.left)/n.scrollbarWidth*n.instance.limit.x/100,e=100*(i.clientY-n.scrollbarBCR.top)/n.scrollbarHeight*n.instance.limit.y/100;0<e&&e<n.instance.limit.y&&(n.instance.delta.y=e),0<t&&t<n.instance.limit.x&&(n.instance.delta.x=t)})}},{key:"addElements",value:function(){var w=this;this.els={},this.parallaxElements={},this.el.querySelectorAll("[data-".concat(this.name,"]")).forEach(function(t,e){var i,n,r,s=P(t),a=Object.entries(w.sections).map(function(t){t=E(t,2);return t[0],t[1]}).find(function(t){return s.includes(t.el)}),o=t.dataset[w.name+"Class"]||w.class,e="string"==typeof t.dataset[w.name+"Id"]?t.dataset[w.name+"Id"]:"el"+e,l=t.dataset[w.name+"Repeat"],h=t.dataset[w.name+"Call"],c=t.dataset[w.name+"Position"],u=t.dataset[w.name+"Delay"],d=t.dataset[w.name+"Direction"],p="string"==typeof t.dataset[w.name+"Sticky"],f=!!t.dataset[w.name+"Speed"]&&parseFloat(t.dataset[w.name+"Speed"])/10,m="string"==typeof t.dataset[w.name+"Offset"]?t.dataset[w.name+"Offset"].split(","):w.offset,g=t.dataset[w.name+"Target"],A=(g=void 0!==g?document.querySelector("".concat(g)):t).getBoundingClientRect(),A=null===a||a.inView?(i=A.top+w.instance.scroll.y-D(g).y,A.left+w.instance.scroll.x-D(g).x):(i=A.top-D(a.el).y-D(g).y,A.left-D(a.el).x-D(g).x),v=i+g.offsetHeight,y=A+g.offsetWidth,_={x:(y-A)/2+A,y:(v-i)/2+i},b=(p&&(S=(n=t.getBoundingClientRect()).top,r={x:(n=n.left)-A,y:S-i},i+=window.innerHeight,A+=window.innerWidth,v=S+g.offsetHeight-t.offsetHeight-r[w.directionAxis],_={x:((y=n+g.offsetWidth-t.offsetWidth-r[w.directionAxis])-A)/2+A,y:(v-i)/2+i}),l="false"!=l&&(null!=l||w.repeat),[0,0]);if(m)if("horizontal"===w.direction){for(var x=0;x<m.length;x++)"string"==typeof m[x]?m[x].includes("%")?b[x]=parseInt(m[x].replace("%","")*w.windowWidth/100):b[x]=parseInt(m[x]):b[x]=m[x];A+=b[0],y-=b[1]}else{for(x=0;x<m.length;x++)"string"==typeof m[x]?m[x].includes("%")?b[x]=parseInt(m[x].replace("%","")*w.windowHeight/100):b[x]=parseInt(m[x]):b[x]=m[x];i+=b[0],v-=b[1]}var S={el:t,id:e,class:o,section:a,top:i,middle:_,bottom:v,left:A,right:y,offset:m,progress:0,repeat:l,inView:!1,call:h,speed:f,delay:u,position:c,target:g,direction:d,sticky:p};w.els[e]=S,t.classList.contains(o)&&w.setInView(w.els[e],e),!1===f&&!p||(w.parallaxElements[e]=S)})}},{key:"addSections",value:function(){var s=this,t=(this.sections={},this.el.querySelectorAll("[data-".concat(this.name,"-section]")));(t=0===t.length?[this.el]:t).forEach(function(t,e){var e="string"==typeof t.dataset[s.name+"Id"]?t.dataset[s.name+"Id"]:"section"+e,i=t.getBoundingClientRect(),n={x:i.left-1.5*window.innerWidth-D(t).x,y:i.top-1.5*window.innerHeight-D(t).y},i={x:n.x+i.width+2*window.innerWidth,y:n.y+i.height+2*window.innerHeight},r="string"==typeof t.dataset[s.name+"Persistent"];t.setAttribute("data-scroll-section-id",e),s.sections[e]={el:t,offset:n,limit:i,inView:!1,persistent:r,id:e}})}},{key:"transform",value:function(t,e,i,n){var r,s;n=n?(r=B((s=D(t)).x,e,n),s=B(s.y,i,n),"matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,".concat(r,",").concat(s,",0,1)")):"matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,".concat(e,",").concat(i,",0,1)"),t.style.webkitTransform=n,t.style.msTransform=n,t.style.transform=n}},{key:"transformElements",value:function(n){var r=this,s=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=this.instance.scroll.x+this.windowWidth,o=this.instance.scroll.y+this.windowHeight,l={x:this.instance.scroll.x+this.windowMiddle.x,y:this.instance.scroll.y+this.windowMiddle.y};Object.entries(this.parallaxElements).forEach(function(t){var t=E(t,2),e=(t[0],t[1]),i=n?0:!1;if(e.inView||s)switch(e.position){case"top":i=r.instance.scroll[r.directionAxis]*-e.speed;break;case"elementTop":i=(o-e.top)*-e.speed;break;case"bottom":i=(r.instance.limit[r.directionAxis]-o+r.windowHeight)*e.speed;break;case"left":i=r.instance.scroll[r.directionAxis]*-e.speed;break;case"elementLeft":i=(a-e.left)*-e.speed;break;case"right":i=(r.instance.limit[r.directionAxis]-a+r.windowHeight)*e.speed;break;default:i=(l[r.directionAxis]-e.middle[r.directionAxis])*-e.speed}!1!==(i=e.sticky?e.inView?"horizontal"===r.direction?r.instance.scroll.x-e.left+window.innerWidth:r.instance.scroll.y-e.top+window.innerHeight:"horizontal"===r.direction?r.instance.scroll.x<e.left-window.innerWidth&&r.instance.scroll.x<e.left-window.innerWidth/2?0:r.instance.scroll.x>e.right&&r.instance.scroll.x>e.right+100&&e.right-e.left+window.innerWidth:r.instance.scroll.y<e.top-window.innerHeight&&r.instance.scroll.y<e.top-window.innerHeight/2?0:r.instance.scroll.y>e.bottom&&r.instance.scroll.y>e.bottom+100&&e.bottom-e.top+window.innerHeight:i)&&("horizontal"===e.direction||"horizontal"===r.direction&&"vertical"!==e.direction?r.transform(e.el,i,0,!n&&e.delay):r.transform(e.el,0,i,!n&&e.delay))})}},{key:"scrollTo",value:function(t){var i=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=parseInt(e.offset)||0,r=isNaN(parseInt(e.duration))?1e3:parseInt(e.duration),s=e.easing||[.25,0,.35,1],a=!!e.disableLerp,o=!!e.callback&&e.callback,s=Z.apply(void 0,function(t){if(Array.isArray(t))return m(t)}(e=s)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());if("string"==typeof t){if("top"===t)t=0;else if("bottom"===t)t=this.instance.limit.y;else if("left"===t)t=0;else if("right"===t)t=this.instance.limit.x;else if(!(t=document.querySelector(t)))return}else if("number"==typeof t)t=parseInt(t);else if(!t||!t.tagName)return void console.warn("`target` parameter is not valid");if("number"!=typeof t){if(!P(t).includes(this.el))return;var e=t.getBoundingClientRect(),l=e.top,e=e.left,h=P(t).find(function(e){return Object.entries(i.sections).map(function(t){t=E(t,2);return t[0],t[1]}).find(function(t){return t.el==e})}),h=h?D(h)[this.directionAxis]:-this.instance.scroll[this.directionAxis],n="horizontal"===this.direction?e+n-h:l+n-h}else n=t+n;var c=parseFloat(this.instance.delta[this.directionAxis]),u=Math.max(0,Math.min(n,this.instance.limit[this.directionAxis]))-c,d=function(t){a?"horizontal"===i.direction?i.setScroll(c+u*t,i.instance.delta.y):i.setScroll(i.instance.delta.x,c+u*t):i.instance.delta[i.directionAxis]=c+u*t},p=(this.animatingScroll=!0,this.stopScrolling(),this.startScrolling(),Date.now());(function t(){var e=(Date.now()-p)/r;1<e?(d(1),i.animatingScroll=!1,0==r&&i.update(),o&&o()):(i.scrollToRaf=requestAnimationFrame(t),d(s(e)))})()}},{key:"update",value:function(){this.setScrollLimit(),this.addSections(),this.addElements(),this.detectElements(),this.updateScroll(),this.transformElements(!0),this.reinitScrollBar(),this.checkScroll(!0)}},{key:"startScroll",value:function(){this.stop=!1}},{key:"stopScroll",value:function(){this.stop=!0}},{key:"setScroll",value:function(t,e){this.instance=r(r({},this.instance),{},{scroll:{x:t,y:e},delta:{x:t,y:e},speed:0})}},{key:"destroy",value:function(){c(a(R.prototype),"destroy",this).call(this),this.stopScrolling(),this.html.classList.remove(this.smoothClass),this.vs.destroy(),this.destroyScrollBar(),window.removeEventListener("keydown",this.checkKey,!1)}}]);var tt,et=R;function R(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return i(this,R),history.scrollRestoration&&(history.scrollRestoration="manual"),window.scrollTo(0,0),(t=tt.call(this,e)).inertia&&(t.lerp=.1*t.inertia),t.isScrolling=!1,t.isDraggingScrollbar=!1,t.isTicking=!1,t.hasScrollTicking=!1,t.parallaxElements={},t.stop=!1,t.scrollbarContainer=e.scrollbarContainer,t.checkKey=t.checkKey.bind(l(t)),window.addEventListener("keydown",t.checkKey,!1),t}return t(k,[{key:"init",value:function(){var t;this.options.isMobile=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints||window.innerWidth<this.tablet.breakpoint,this.options.isTablet=this.options.isMobile&&window.innerWidth>=this.tablet.breakpoint,this.smooth&&!this.options.isMobile||this.tablet.smooth&&this.options.isTablet||this.smartphone.smooth&&this.options.isMobile&&!this.options.isTablet?this.scroll=new et(this.options):this.scroll=new Q(this.options),this.scroll.init(),window.location.hash&&(t=window.location.hash.slice(1,window.location.hash.length),(t=document.getElementById(t))&&this.scroll.scrollTo(t))}},{key:"update",value:function(){this.scroll.update()}},{key:"start",value:function(){this.scroll.startScroll()}},{key:"stop",value:function(){this.scroll.stopScroll()}},{key:"scrollTo",value:function(t,e){this.scroll.scrollTo(t,e)}},{key:"setScroll",value:function(t,e){this.scroll.setScroll(t,e)}},{key:"on",value:function(t,e){this.scroll.setEvents(t,e)}},{key:"off",value:function(t,e){this.scroll.unsetEvents(t,e)}},{key:"destroy",value:function(){this.scroll.destroy()}}]),k;function k(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};i(this,k),this.options=t,Object.assign(this,u,t),this.smartphone=u.smartphone,t.smartphone&&Object.assign(this.smartphone,t.smartphone),this.tablet=u.tablet,t.tablet&&Object.assign(this.tablet,t.tablet),this.smooth||"horizontal"!=this.direction||console.warn("🚨 `smooth:false` & `horizontal` direction are not yet compatible"),this.tablet.smooth||"horizontal"!=this.tablet.direction||console.warn("🚨 `smooth:false` & `horizontal` direction are not yet compatible (tablet)"),this.smartphone.smooth||"horizontal"!=this.smartphone.direction||console.warn("🚨 `smooth:false` & `horizontal` direction are not yet compatible (smartphone)"),this.init()}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).window=t.window||{})}(this,function(t){"use strict";function i(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}function T(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(t){return"string"==typeof t}function u(t){return"function"==typeof t}function K(t){return"number"==typeof t}function s(t){return void 0===t}function M(t){return"object"==typeof t}function n(){return"undefined"!=typeof window}function J(t){return u(t)||O(t)}function m(t){return(Xt=Gt(t,a))&&c}function $(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")}function Z(t,e){return!e&&console.warn(t)}function g(t,e){return t&&(a[t]=e)&&Xt&&(Xt[t]=e)||a}function A(){return 0}function tt(t){var e,i,n=t[0];if(M(n)||u(n)||(t=[t]),!(e=(n._gsap||{}).harness)){for(i=ke.length;i--&&!ke[i].targetTest(n););e=ke[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new Ye(t[i],e)))||t.splice(i,1);return t}function et(t){return t._gsap||tt(P(t))[0]._gsap}function v(t,e,i){return(i=t[e])&&u(i)?t[e]():s(i)&&t.getAttribute&&t.getAttribute(e)||i}function p(t,e){return(t=t.split(",")).forEach(e)||t}function R(t){return Math.round(1e5*t)/1e5||0}function I(t){return Math.round(1e7*t)/1e7||0}function it(t,e){var i=e.charAt(0),e=parseFloat(e.substr(2));return t=parseFloat(t),"+"===i?t+e:"-"===i?t-e:"*"===i?t*e:t/e}function nt(){var t,e,i=De.length,n=De.slice(0);for(Pe={},t=De.length=0;t<i;t++)(e=n[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)}function y(t,e,i,n){De.length&&nt(),t.render(e,i,n||N),De.length&&nt()}function _(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(Ce).length<2?e:O(t)?t.trim():t}function x(t){return t}function k(t,e){for(var i in e)i in t||(t[i]=e[i]);return t}function S(t,e){for(var i in e)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(t[i]=M(e[i])?S(t[i]||(t[i]={}),e[i]):e[i]);return t}function rt(t,e){var i,n={};for(i in t)i in e||(n[i]=t[i]);return n}function st(t){var n,e=t.parent||Q,i=t.keyframes?(n=D(t.keyframes),function(t,e){for(var i in e)i in t||"duration"===i&&n||"ease"===i||(t[i]=e[i])}):k;if(!1!==t.inherit)for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t}function w(t,e,i,n,r){void 0===i&&(i="_first");var s,a=t[n=void 0===n?"_last":n];if(r)for(s=e[r];a&&a[r]>s;)a=a._prev;a?(e._next=a._next,a._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[n]=e,e._prev=a,e.parent=e._dp=t}function E(t,e,i,n){void 0===i&&(i="_first"),void 0===n&&(n="_last");var r=e._prev,s=e._next;r?r._next=s:t[i]===e&&(t[i]=s),s?s._prev=r:t[n]===e&&(t[n]=r),e._next=e._prev=e.parent=null}function at(t,e){!t.parent||e&&!t.parent.autoRemoveChildren||t.parent.remove(t),t._act=0}function C(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t}function ot(t,e,i,n){t._startAt&&(N?t._startAt.revert(Ie):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,n))}function lt(t){return t._repeat?Ut(t._tTime,t=t.duration()+t._rDelay)*t:0}function ht(t,e){return(t-e._start)*e._ts+(0<=e._ts?0:e._dirty?e.totalDuration():e._tDur)}function ct(t){t._end=I(t._start+(t._tDur/Math.abs(t._ts||t._rts||H)||0))}function ut(t,e){var i=t._dp;i&&i.smoothChildTiming&&t._ts&&(t._start=I(i._time-(0<t._ts?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),ct(t),i._dirty||C(i,t))}function dt(t,e){var i;if((e._time||e._initted&&!e._dur)&&(i=ht(t.rawTime(),e),(!e._dur||Vt(0,e.totalDuration(),i)-e._tTime>H)&&e.render(i,!0)),C(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)0<=i.rawTime()&&i.totalTime(i._tTime),i=i._dp;t._zTime=-H}}function B(t,e,i,n){return e.parent&&at(e),e._start=I((K(i)?i:i||t!==Q?h(t,i,e):t._time)+e._delay),e._end=I(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),w(t,e,"_first","_last",t._sort?"_start":0),Ht(e)||(t._recent=e),n||dt(t,e),t._ts<0&&ut(t,t._tTime),t}function pt(t,e){(a.ScrollTrigger||$("scrollTrigger",e))&&a.ScrollTrigger.create(e,t)}function ft(t,e,i,n){return ei(t,e),!t._initted||!i&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&Kt!==f.frame&&(De.push(t),t._lazy=[e,n])}function mt(t,e,i,n){var r=t._repeat,e=I(e)||0,s=t._tTime/t._tDur;return s&&!n&&(t._time*=e/t._dur),t._dur=e,t._tDur=r?r<0?1e10:I(e*(r+1)+t._rDelay*r):e,0<s&&!n?ut(t,t._tTime=t._tDur*s):t.parent&&ct(t),i||C(t.parent,t),t}function gt(t){return t instanceof z?C(t):mt(t,t._dur)}function At(t,e,i){var n,r,s=K(e[1]),a=(s?2:1)+(t<2?0:1),o=e[a];if(s&&(o.duration=e[1]),o.parent=i,t){for(n=o,r=i;r&&!("immediateRender"in n);)n=r.vars.defaults||{},r=!1!==r.vars.inherit&&r.parent;o.immediateRender=!1!==n.immediateRender,t<2?o.runBackwards=1:o.startAt=e[a-1]}return new W(e[0],o,e[1+a])}function vt(t,e){return t||0===t?e(t):e}function G(t,e){return O(t)&&(e=Te.exec(t))?e[1]:""}function yt(t,e){return t&&M(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&M(t[0]))&&!t.nodeType&&t!==l}function _t(i){return i=P(i)[0]||Z("Invalid scope")||{},function(t){var e=i.current||i.nativeElement||i;return P(t,e.querySelectorAll?e:e===i?Z("Invalid scope")||jt.createElement("div"):i)}}function bt(t){return t.sort(function(){return.5-Math.random()})}function xt(t){if(u(t))return t;var p=M(t)?t:{each:t},f=qe(p.ease),m=p.from||0,g=parseFloat(p.base)||0,A={},t=0<m&&m<1,v=isNaN(m)||t,y=p.axis,_=m,b=m;return O(m)?_=b={center:.5,edges:.5,end:1}[m]||0:!t&&v&&(_=m[0],b=m[1]),function(t,e,i){var n,r,s,a,o,l,h,c,u=(i||p).length,d=A[u];if(!d){if(!(c="auto"===p.grid?0:(p.grid||[1,F])[1])){for(l=-F;l<(l=i[c++].getBoundingClientRect().left)&&c<u;);c--}for(d=A[u]=[],n=v?Math.min(c,u)*_-.5:m%c,r=c===F?0:v?u*b/c-.5:m/c|0,h=F,o=l=0;o<u;o++)a=o%c-n,s=r-(o/c|0),d[o]=a=y?Math.abs("y"===y?s:a):Ae(a*a+s*s),l<a&&(l=a),a<h&&(h=a);"random"===m&&bt(d),d.max=l-h,d.min=h,d.v=u=(parseFloat(p.amount)||parseFloat(p.each)*(u<c?u-1:y?"y"===y?u/c:c:Math.max(c,u/c))||0)*("edges"===m?-1:1),d.b=u<0?g-u:g,d.u=G(p.amount||p.each)||0,f=f&&u<0?We(f):f}return u=(d[t]-d.min)/d.max||0,I(d.b+(f?f(u):u)*d.v)+d.u}}function St(i){var n=Math.pow(10,((i+"").split(".")[1]||"").length);return function(t){var e=I(Math.round(parseFloat(t)/i)*i*n);return(e-e%1)/n+(K(t)?0:G(t))}}function wt(l,t){var h,c,e=D(l);return!e&&M(l)&&(h=e=l.radius||F,l.values?(l=P(l.values),(c=!K(l[0]))&&(h*=h)):l=St(l.increment)),vt(t,e?u(l)?function(t){return c=l(t),Math.abs(c-t)<=h?c:t}:function(t){for(var e,i,n=parseFloat(c?t.x:t),r=parseFloat(c?t.y:0),s=F,a=0,o=l.length;o--;)(e=c?(e=l[o].x-n)*e+(i=l[o].y-r)*i:Math.abs(l[o]-n))<s&&(s=e,a=o);return a=!h||s<=h?l[a]:t,c||a===t||K(t)?a:a+G(t)}:St(l))}function Et(t,e,i,n){return vt(D(t)?!e:!0===i?!!(i=0):!n,function(){return D(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+.99*i))/i)*i*n)/n})}function Ct(e,i,t){return vt(t,function(t){return e[~~i(t)]})}function Tt(t){for(var e,i,n,r,s=0,a="";~(e=t.indexOf("random(",s));)n=t.indexOf(")",e),r="["===t.charAt(e+7),i=t.substr(e+7,n-e-7).match(r?Ce:be),a+=t.substr(s,e-s)+Et(r?i:+i[0],r?0:+i[1],+i[2]||1e-5),s=n+1;return a+t.substr(s,t.length-s)}function Mt(t,e,i){var n,r,s,a=t.labels,o=F;for(n in a)(r=a[n]-e)<0==!!i&&r&&o>(r=Math.abs(r))&&(s=n,o=r);return s}function It(t){return at(t),t.scrollTrigger&&t.scrollTrigger.kill(!1),t.progress()<1&&b(t,"onInterrupt"),t}function Bt(t,e,i){return(6*(t+=t<0?1:1<t?-1:0)<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)*d+.5|0}function Dt(t,e,i){var n,r,s,a,o,l,h,c=t?K(t)?[t>>16,t>>8&d,t&d]:0:Oe.black;if(!c){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),Oe[t])c=Oe[t];else if("#"===t.charAt(0)){if(9===(t=t.length<6?"#"+(n=t.charAt(1))+n+(r=t.charAt(2))+r+(s=t.charAt(3))+s+(5===t.length?t.charAt(4)+t.charAt(4):""):t).length)return[(c=parseInt(t.substr(1,6),16))>>16,c>>8&d,c&d,parseInt(t.substr(7),16)/255];c=[(t=parseInt(t.substr(1),16))>>16,t>>8&d,t&d]}else if("hsl"===t.substr(0,3))if(c=h=t.match(be),e){if(~t.indexOf("="))return c=t.match(xe),i&&c.length<4&&(c[3]=1),c}else a=+c[0]%360/360,o=c[1]/100,n=2*(l=c[2]/100)-(r=l<=.5?l*(o+1):l+o-l*o),3<c.length&&(c[3]*=1),c[0]=Bt(a+1/3,n,r),c[1]=Bt(a,n,r),c[2]=Bt(a-1/3,n,r);else c=t.match(be)||Oe.transparent;c=c.map(Number)}return e&&!h&&(n=c[0]/d,r=c[1]/d,s=c[2]/d,l=((t=Math.max(n,r,s))+(e=Math.min(n,r,s)))/2,t===e?a=o=0:(h=t-e,o=.5<l?h/(2-t-e):h/(t+e),a=t===n?(r-s)/h+(r<s?6:0):t===r?(s-n)/h+2:(n-r)/h+4,a*=60),c[0]=~~(a+.5),c[1]=~~(100*o+.5),c[2]=~~(100*l+.5)),i&&c.length<4&&(c[3]=1),c}function Pt(t){var e=[],i=[],n=-1;return t.split(Ge).forEach(function(t){t=t.match(Se)||[];e.push.apply(e,t),i.push(n+=t.length+1)}),e.c=i,e}function Lt(t,e,i){var n,r,s,a,o="",l=(t+o).match(Ge),h=e?"hsla(":"rgba(",c=0;if(!l)return t;if(l=l.map(function(t){return(t=Dt(t,e,1))&&h+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"}),i&&(s=Pt(t),(n=i.c).join(o)!==s.c.join(o)))for(a=(r=t.replace(Ge,"1").split(Se)).length-1;c<a;c++)o+=r[c]+(~n.indexOf(c)?l.shift()||h+"0,0,0,0)":(s.length?s:l.length?l:i).shift());if(!r)for(a=(r=t.split(Ge)).length-1;c<a;c++)o+=r[c]+l[c];return o+r[a]}function Rt(t){var e=t.join(" ");if(Ge.lastIndex=0,Ge.test(e))return e=Ue.test(e),t[1]=Lt(t[1],e),t[0]=Lt(t[0],e,Pt(t[1])),!0}function kt(t,e){for(var i,n=t._first;n;)n instanceof z?kt(n,e):!n.vars.yoyoEase||n._yoyo&&n._repeat||n._yoyo===e||(n.timeline?kt(n.timeline,e):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=e)),n=n._next}function Nt(t,e,i,n){var r,s={easeIn:e,easeOut:i=void 0===i?function(t){return 1-e(1-t)}:i,easeInOut:n=void 0===n?function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2}:n};p(t,function(t){for(var e in L[t]=a[t]=s,L[r=t.toLowerCase()]=i,s)L[r+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=L[t+"."+e]=s[e]})}function Qt(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}}function Ft(i,t,e){function n(t){return 1===t?1:r*Math.pow(2,-10*t)*ye((t-s)*a)+1}var r=1<=t?t:1,s=(a=(e||(i?.3:.45))/(t<1?t:1))/fe*(Math.asin(1/r)||0),e="out"===i?n:"in"===i?function(t){return 1-n(1-t)}:Qt(n),a=fe/a;return e.config=function(t,e){return Ft(i,t,e)},e}function Ot(e,i){function n(t){return t?--t*t*((i+1)*t+i)+1:0}void 0===i&&(i=1.70158);var t="out"===e?n:"in"===e?function(t){return 1-n(1-t)}:Qt(n);return t.config=function(t){return Ot(e,t)},t}function Gt(t,e){for(var i in e)t[i]=e[i];return t}function Ut(t,e){return e=Math.floor(t/=e),t&&e===t?e-1:e}function Ht(t){return"isFromStart"===(t=t.data)||"isStart"===t}function h(t,e,i){var n,r,s,a=t.labels,o=t._recent||Qe,l=t.duration()>=F?o.endTime(!1):t._dur;return O(e)&&(isNaN(e)||e in a)?(r=e.charAt(0),s="%"===e.substr(-1),n=e.indexOf("="),"<"===r||">"===r?(0<=n&&(e=e.replace(/=/,"")),("<"===r?o._start:o.endTime(0<=o._repeat))+(parseFloat(e.substr(1))||0)*(s?(n<0?o:i).totalDuration()/100:1)):n<0?(e in a||(a[e]=l),a[e]):(r=parseFloat(e.charAt(n-1)+e.substr(n+1)),s&&i&&(r=r/100*(D(i)?i[0]:i).totalDuration()),1<n?h(t,e.substr(0,n-1),i)+r:l+r)):null==e?l:+e}function Vt(t,e,i){return i<t?t:e<i?e:i}function zt(e,t,i,n,r){var s=t-e,a=n-i;return vt(r,function(t){return i+((t-e)/s*a||0)})}function b(t,e,i){var n=t.vars,r=n[e],s=o,a=t._ctx;if(r)e=n[e+"Params"],n=n.callbackScope||t,i&&De.length&&nt(),a&&(o=a),t=e?r.apply(n,e):r.call(n),o=s}var Wt,N,o,Q,l,qt,jt,Xt,Yt,Kt,Jt,$t,Zt,te,ee,ie,ne,re,se,ae,oe,le,he,ce,ue,de,U={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},pe={duration:.5,overwrite:!1,delay:0},F=1e8,H=1/F,fe=2*Math.PI,me=fe/4,ge=0,Ae=Math.sqrt,ve=Math.cos,ye=Math.sin,_e="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},D=Array.isArray,be=/(?:-?\.?\d|\.)+/gi,xe=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Se=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,we=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Ee=/[+-]=-?[.\d]+/,Ce=/[^,'"\[\]\s]+/gi,Te=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,a={},Me={suppressEvents:!0,isStart:!0},Ie={suppressEvents:!0},Be={},De=[],Pe={},V={},Le={},Re=30,ke=[],Ne="",Qe={_start:0,endTime:A,totalDuration:A},Fe=[].slice,P=function(t,e,i){return o&&!e&&o.selector?o.selector(t):!O(t)||i||!qt&&He()?D(t)?(n=i,void 0===r&&(r=[]),t.forEach(function(t){return O(t)&&!n||yt(t,1)?r.push.apply(r,P(t)):r.push(t)})||r):yt(t)?Fe.call(t,0):t?[t]:[]:Fe.call((e||jt).querySelectorAll(t),0);var n,r},d=255,Oe={aqua:[0,d,d],lime:[0,d,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,d],navy:[0,0,128],white:[d,d,d],olive:[128,128,0],yellow:[d,d,0],orange:[d,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[d,0,0],pink:[d,192,203],cyan:[0,d,d],transparent:[d,d,d,0]},Ge=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in Oe)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Ue=/hsl[a]?\(/,f=(re=Date.now,se=500,ae=33,oe=re(),le=oe,ce=he=1e3/240,ee={time:0,frame:0,tick:function(){je(!0)},deltaRatio:function(t){return ie/(1e3/(t||60))},wake:function(){Yt&&(!qt&&n()&&(l=qt=window,jt=l.document||{},a.gsap=c,(l.gsapVersions||(l.gsapVersions=[])).push(c.version),m(Xt||l.GreenSockGlobals||!l.gsap&&l||{}),te=l.requestAnimationFrame),$t&&ee.sleep(),Zt=te||function(t){return setTimeout(t,ce-1e3*ee.time+1|0)},Jt=1,je(2))},sleep:function(){(te?l.cancelAnimationFrame:clearTimeout)($t),Jt=0,Zt=A},lagSmoothing:function(t,e){se=t||1e8,ae=Math.min(e,se,0)},fps:function(t){he=1e3/(t||240),ce=1e3*ee.time+he},add:function(r,t,e){var s=t?function(t,e,i,n){r(t,e,i,n),ee.remove(s)}:r;return ee.remove(r),ue[e?"unshift":"push"](s),He(),s},remove:function(t,e){~(e=ue.indexOf(t))&&ue.splice(e,1)&&e<=ne&&ne--},_listeners:ue=[]}),He=function(){return!Jt&&f.wake()},L={},Ve=/^[\d.\-M][\d.\-,\s]/,ze=/["']/g,We=function(e){return function(t){return 1-e(1-t)}},qe=function(t,e){return t&&(u(t)?t:L[t]||(s=((t=t)+"").split("("),(a=L[s[0]])&&1<s.length&&a.config?a.config.apply(null,~t.indexOf("{")?[function(t){for(var e,i,n,r={},s=t.substr(1,t.length-3).split(":"),a=s[0],o=1,l=s.length;o<l;o++)i=s[o],e=o!==l-1?i.lastIndexOf(","):i.length,n=i.substr(0,e),r[a]=isNaN(n)?n.replace(ze,"").trim():+n,a=i.substr(e+1).trim();return r}(s[1])]:(i=(s=t).indexOf("(")+1,n=s.indexOf(")"),r=s.indexOf("(",i),s.substring(i,~r&&r<n?s.indexOf(")",n+1):n).split(",").map(_))):L._CE&&Ve.test(t)?L._CE("",t):a))||e;var i,n,r,s,a};function je(t){var e,i,n,r=re()-le,s=!0===t;if(se<r&&(oe+=r-ae),(0<(r=(i=(le+=r)-oe)-ce)||s)&&(n=++ee.frame,ie=i-1e3*ee.time,ee.time=i/=1e3,ce+=r+(he<=r?4:he-r),e=1),s||($t=Zt(je)),e)for(ne=0;ne<ue.length;ne++)ue[ne](i,ie,n,t)}function Xe(t){return t<1/2.75?de*t*t:t<.7272727272727273?de*Math.pow(t-1.5/2.75,2)+.75:t<.9090909090909092?de*(t-=2.25/2.75)*t+.9375:de*Math.pow(t-2.625/2.75,2)+.984375}p("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var i=e<5?e+1:e;Nt(t+",Power"+(i-1),e?function(t){return Math.pow(t,i)}:function(t){return t},function(t){return 1-Math.pow(1-t,i)},function(t){return t<.5?Math.pow(2*t,i)/2:1-Math.pow(2*(1-t),i)/2})}),L.Linear.easeNone=L.none=L.Linear.easeIn,Nt("Elastic",Ft("in"),Ft("out"),Ft()),de=7.5625,Nt("Bounce",function(t){return 1-Xe(1-t)},Xe),Nt("Expo",function(t){return t?Math.pow(2,10*(t-1)):0}),Nt("Circ",function(t){return-(Ae(1-t*t)-1)}),Nt("Sine",function(t){return 1===t?1:1-ve(t*me)}),Nt("Back",Ot("in"),Ot("out"),Ot()),L.SteppedEase=L.steps=a.SteppedEase={config:function(t,e){var i=1/(t=void 0===t?1:t),n=t+(e?0:1),r=e?1:0;return function(t){return((n*Vt(0,.99999999,t)|0)+r)*i}}},pe.ease=L["quad.out"],p("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return Ne+=t+","+t+"Params,"});var Ye=function(t,e){this.id=ge++,(t._gsap=this).target=t,this.harness=e,this.get=e?e.get:v,this.set=e?e.getSetter:_i},Ke=((e=Je.prototype).delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(0<this._repeat?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,mt(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(He(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(ut(this,t),i._dp&&!i.parent&&dt(i,this);i&&i.parent;)i.parent._time!==i._start+(0<=i._ts?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(0<this._ts&&t<this._tDur||this._ts<0&&0<t||!this._tDur&&!t)&&B(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===H||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),y(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+lt(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+lt(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*i,e):this._repeat?Ut(this._tTime,i)+1:1},e.timeScale=function(t){if(!arguments.length)return this._rts===-H?0:this._rts;if(this._rts===t)return this;for(var e=this.parent&&this._ts?ht(this.parent._time,this):this._tTime,t=(this._rts=+t||0,this._ts=this._ps||t===-H?0:this._rts,this.totalTime(Vt(-this._delay,this._tDur,e),!0),ct(this),this),i=t.parent;i&&i.parent;)i._dirty=1,i.totalDuration(),i=i.parent;return t},e.paused=function(t){return arguments.length?(this._ps!==t&&((this._ps=t)?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(He(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==H&&(this._tTime-=H)))),this):this._ps},e.startTime=function(t){var e;return arguments.length?(this._start=t,!(e=this.parent||this._dp)||!e._sort&&this.parent||B(e,this,t-this._delay),this):this._start},e.endTime=function(t){return this._start+(!1!==t?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ht(e.rawTime(t),this):this._tTime:this._tTime},e.revert=function(t){var e=N;return N=t=void 0===t?Ie:t,this.timeline&&this.timeline.revert(t),this.totalTime(-.01,t.suppressEvents),"nested"!==this.data&&at(this),N=e,this},e.globalTime=function(t){for(var e=this,i=arguments.length?t:e.rawTime();e;)i=e._start+i/(e._ts||1),e=e._dp;return!this.parent&&this.vars.immediateRender?-1:i},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,gt(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){var e;return arguments.length?(e=this._time,this._rDelay=t,gt(this),e?this.time(e):this):this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(h(this,t),!1!==e)},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,!1!==e)},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-H:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-H,this},e.isActive=function(){var t=this.parent||this._dp,e=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(t=t.rawTime(!0))>=e&&t<this.endTime(!0)-H))},e.eventCallback=function(t,e,i){var n=this.vars;return 1<arguments.length?(e?(n[t]=e,i&&(n[t+"Params"]=i),"onUpdate"===t&&(this._onUpdate=e)):delete n[t],this):n[t]},e.then=function(n){var r=this;return new Promise(function(e){function t(){var t=r.then;r.then=null,u(i)&&(i=i(r))&&(i.then||i===r)&&(r.then=t),e(i),r.then=t}var i=u(n)?n:x;r._initted&&1===r.totalProgress()&&0<=r._ts||!r._tTime&&r._ts<0?t():r._prom=t})},e.kill=function(){It(this)},Je);function Je(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,mt(this,+t.duration,1,1),this.data=t.data,o&&(this._ctx=o).data.push(this),Jt||f.wake()}k(Ke.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-H,_prom:0,_ps:!1,_rts:1});i(Ze,$e=Ke),(e=Ze.prototype).to=function(t,e,i){return At(0,arguments,this),this},e.from=function(t,e,i){return At(1,arguments,this),this},e.fromTo=function(t,e,i,n){return At(2,arguments,this),this},e.set=function(t,e,i){return e.duration=0,e.parent=this,st(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new W(t,e,h(this,i),1),this},e.call=function(t,e,i){return B(this,W.delayedCall(0,t,e),i)},e.staggerTo=function(t,e,i,n,r,s,a){return i.duration=e,i.stagger=i.stagger||n,i.onComplete=s,i.onCompleteParams=a,i.parent=this,new W(t,i,h(this,r)),this},e.staggerFrom=function(t,e,i,n,r,s,a){return i.runBackwards=1,st(i).immediateRender=!1!==i.immediateRender,this.staggerTo(t,e,i,n,r,s,a)},e.staggerFromTo=function(t,e,i,n,r,s,a,o){return n.startAt=i,st(n).immediateRender=!1!==n.immediateRender,this.staggerTo(t,e,n,r,s,a,o)},e.render=function(t,e,i){var n,r,s,a,o,l,h,c,u,d,p=this._time,f=this._dirty?this.totalDuration():this._tDur,m=this._dur,g=t<=0?0:I(t),A=this._zTime<0!=t<0&&(this._initted||!m);if((g=this!==Q&&f<g&&0<=t?f:g)!==this._tTime||i||A){if(p!==this._time&&m&&(g+=this._time-p,t+=this._time-p),n=g,c=this._start,o=!(h=this._ts),A&&(m||(p=this._zTime),!t&&e||(this._zTime=t)),this._repeat){if(A=this._yoyo,a=m+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*a+t,e,i);if(n=I(g%a),g===f?(s=this._repeat,n=m):((s=~~(g/a))&&s===g/a&&(n=m,s--),m<n&&(n=m)),u=Ut(this._tTime,a),A&&1&s&&(n=m-n,d=1),s!==(u=!p&&this._tTime&&u!==s?s:u)&&!this._lock){var v=A&&1&u,A=v===(A&&1&s),p=(v=s<u?!v:v)?0:m;if(this._lock=1,this.render(p||(d?0:I(s*a)),e,!m)._lock=0,this._tTime=g,!e&&this.parent&&b(this,"onRepeat"),this.vars.repeatRefresh&&!d&&(this.invalidate()._lock=1),p&&p!==this._time||o!=!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(m=this._dur,f=this._tDur,A&&(this._lock=2,this.render(p=v?m:-1e-4,!0),this.vars.repeatRefresh&&!d&&this.invalidate()),this._lock=0,!this._ts&&!o)return this;kt(this,d)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(l=function(t,e,i){var n;if(e<i)for(n=t._first;n&&n._start<=i;){if("isPause"===n.data&&n._start>e)return n;n=n._next}else for(n=t._last;n&&n._start>=i;){if("isPause"===n.data&&n._start<e)return n;n=n._prev}}(this,I(p),I(n)))&&(g-=n-(n=l._start)),this._tTime=g,this._time=n,this._act=!h,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,p=0),!p&&n&&!e&&(b(this,"onStart"),this._tTime!==g))return this;if(p<=n&&0<=t)for(y=this._first;y;){if(r=y._next,(y._act||n>=y._start)&&y._ts&&l!==y){if(y.parent!==this)return this.render(t,e,i);if(y.render(0<y._ts?(n-y._start)*y._ts:(y._dirty?y.totalDuration():y._tDur)+(n-y._start)*y._ts,e,i),n!==this._time||!this._ts&&!o){l=0,r&&(g+=this._zTime=-H);break}}y=r}else{i=i||N;for(var y=this._last,_=t<0?t:n;y;){if(r=y._prev,(y._act||_<=y._end)&&y._ts&&l!==y){if(y.parent!==this)return this.render(t,e,i);if(y.render(0<y._ts?(_-y._start)*y._ts:(y._dirty?y.totalDuration():y._tDur)+(_-y._start)*y._ts,e,i),n!==this._time||!this._ts&&!o){l=0,r&&(g+=this._zTime=_?-H:H);break}}y=r}}if(l&&!e&&(this.pause(),l.render(p<=n?0:-H)._zTime=p<=n?1:-1,this._ts))return this._start=c,ct(this),this.render(t,e,i);this._onUpdate&&!e&&b(this,"onUpdate",!0),!(g===f&&this._tTime>=this.totalDuration()||!g&&p)||c!==this._start&&Math.abs(h)===Math.abs(this._ts)||this._lock||(!t&&m||!(g===f&&0<this._ts||!g&&this._ts<0)||at(this,1),e||t<0&&!p||!g&&!p&&f||(b(this,g===f&&0<=t?"onComplete":"onReverseComplete",!0),!this._prom||g<f&&0<this.timeScale()||this._prom()))}return this},e.add=function(t,e){var i=this;if(K(e)||(e=h(this,e,t)),!(t instanceof Ke)){if(D(t))return t.forEach(function(t){return i.add(t,e)}),this;if(O(t))return this.addLabel(t,e);if(!u(t))return this;t=W.delayedCall(0,t)}return this!==t?B(this,t,e):this},e.getChildren=function(t,e,i,n){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===n&&(n=-F);for(var r=[],s=this._first;s;)s._start>=n&&(s instanceof W?e&&r.push(s):(i&&r.push(s),t&&r.push.apply(r,s.getChildren(!0,e,i)))),s=s._next;return r},e.getById=function(t){for(var e=this.getChildren(1,1,1),i=e.length;i--;)if(e[i].vars.id===t)return e[i]},e.remove=function(t){return O(t)?this.removeLabel(t):u(t)?this.killTweensOf(t):(E(this,t),t===this._recent&&(this._recent=this._last),C(this))},e.totalTime=function(t,e){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=I(f.time-(0<this._ts?t/this._ts:(this.totalDuration()-t)/-this._ts))),$e.prototype.totalTime.call(this,t,e),this._forcing=0,this):this._tTime},e.addLabel=function(t,e){return this.labels[t]=h(this,e),this},e.removeLabel=function(t){return delete this.labels[t],this},e.addPause=function(t,e,i){e=W.delayedCall(0,e||A,i);return e.data="isPause",this._hasPause=1,B(this,e,h(this,t))},e.removePause=function(t){var e=this._first;for(t=h(this,t);e;)e._start===t&&"isPause"===e.data&&at(e),e=e._next},e.killTweensOf=function(t,e,i){for(var n=this.getTweensOf(t,i),r=n.length;r--;)ni!==n[r]&&n[r].kill(t,e);return this},e.getTweensOf=function(t,e){for(var i,n=[],r=P(t),s=this._first,a=K(e);s;)s instanceof W?function(t,e){for(var i=e.length,n=0;t.indexOf(e[n])<0&&++n<i;);return n<i}(s._targets,r)&&(a?(!ni||s._initted&&s._ts)&&s.globalTime(0)<=e&&s.globalTime(s.totalDuration())>e:!e||s.isActive())&&n.push(s):(i=s.getTweensOf(r,e)).length&&n.push.apply(n,i),s=s._next;return n},e.tweenTo=function(t,e){e=e||{};var i,n=this,r=h(n,t),s=e.startAt,a=e.onStart,o=e.onStartParams,t=e.immediateRender,l=W.to(n,k({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:e.duration||Math.abs((r-(s&&"time"in s?s.time:n._time))/n.timeScale())||H,onStart:function(){var t;n.pause(),i||(t=e.duration||Math.abs((r-(s&&"time"in s?s.time:n._time))/n.timeScale()),l._dur!==t&&mt(l,t,0,1).render(l._time,!0,!0),i=1),a&&a.apply(l,o||[])}},e));return t?l.render(0):l},e.tweenFromTo=function(t,e,i){return this.tweenTo(e,k({startAt:{time:h(this,t)}},i))},e.recent=function(){return this._recent},e.nextLabel=function(t){return void 0===t&&(t=this._time),Mt(this,h(this,t))},e.previousLabel=function(t){return void 0===t&&(t=this._time),Mt(this,h(this,t),1)},e.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+H)},e.shiftChildren=function(t,e,i){void 0===i&&(i=0);for(var n,r=this._first,s=this.labels;r;)r._start>=i&&(r._start+=t,r._end+=t),r=r._next;if(e)for(n in s)s[n]>=i&&(s[n]+=t);return C(this)},e.invalidate=function(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return $e.prototype.invalidate.call(this)},e.clear=function(t){void 0===t&&(t=!0);for(var e,i=this._first;i;)e=i._next,this.remove(i),i=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),C(this)},e.totalDuration=function(t){var e,i,n,r=0,s=this,a=s._last,o=F;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-t:t));if(s._dirty){for(n=s.parent;a;)e=a._prev,a._dirty&&a.totalDuration(),o<(i=a._start)&&s._sort&&a._ts&&!s._lock?(s._lock=1,B(s,a,i-a._delay,1)._lock=0):o=i,i<0&&a._ts&&(r-=i,(!n&&!s._dp||n&&n.smoothChildTiming)&&(s._start+=i/s._ts,s._time-=i,s._tTime-=i),s.shiftChildren(-i,!1,-1/0),o=0),a._end>r&&a._ts&&(r=a._end),a=e;mt(s,s===Q&&s._time>r?s._time:r,1,1),s._dirty=0}return s._tDur},Ze.updateRoot=function(t){if(Q._ts&&(y(Q,ht(t,Q)),Kt=f.frame),f.frame>=Re){Re+=U.autoSleep||120;var e=Q._first;if((!e||!e._ts)&&U.autoSleep&&f._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||f.sleep()}}};var $e,z=Ze;function Ze(t,e){var i;return(i=$e.call(this,t=void 0===t?{}:t)||this).labels={},i.smoothChildTiming=!!t.smoothChildTiming,i.autoRemoveChildren=!!t.autoRemoveChildren,i._sort=!1!==t.sortChildren,Q&&B(t.parent||Q,T(i),e),t.reversed&&i.reverse(),t.paused&&i.paused(!0),t.scrollTrigger&&pt(T(i),t.scrollTrigger),i}function ti(t,e,i,n,r,s){var a,o,l,h;if(V[t]&&!1!==(a=new V[t]).init(r,a.rawVars?e[t]:function(t,e,i,n,r){if(!M(t=u(t)?ii(t,r,e,i,n):t)||t.style&&t.nodeType||D(t)||_e(t))return O(t)?ii(t,r,e,i,n):t;var s,a={};for(s in t)a[s]=ii(t[s],r,e,i,n);return a}(e[t],n,r,s,i),i,n,s)&&(i._pt=o=new q(i._pt,r,t,0,1,a.render,a,0,a.priority),i!==ki))for(l=i._ptLookup[i._targets.indexOf(r)],h=a._props.length;h--;)l[a._props[h]]=o;return a}k(z.prototype,{_lock:0,_hasPause:0,_forcing:0});function ei(t,e){var i,n,r,s,a,o,l,h,c,u,d,p,f,m=t.vars,g=m.ease,A=m.startAt,v=m.immediateRender,y=m.lazy,_=m.onUpdate,b=m.onUpdateParams,x=m.callbackScope,S=m.runBackwards,w=m.yoyoEase,E=m.keyframes,C=m.autoRevert,T=t._dur,M=t._startAt,I=t._targets,B=t.parent,D=B&&"nested"===B.data?B.vars.targets:I,P="auto"===t._overwrite&&!Wt,L=t.timeline;if(t._ease=qe(g=!L||E&&g?g:"none",pe.ease),t._yEase=w?We(qe(!0===w?g:w,pe.ease)):0,w&&t._yoyo&&!t._repeat&&(w=t._yEase,t._yEase=t._ease,t._ease=w),t._from=!L&&!!m.runBackwards,!L||E&&!m.stagger){if(p=(h=I[0]?et(I[0]).harness:0)&&m[h.prop],i=rt(m,Be),M&&(e<0&&S&&v&&!C?M.render(-1,!0):M.revert(S&&T?Ie:Me),M._lazy=0),A){if(at(t._startAt=W.set(I,k({data:"isStart",overwrite:!1,parent:B,immediateRender:!0,lazy:!1!==y,startAt:null,delay:0,onUpdate:_,onUpdateParams:b,callbackScope:x,stagger:0},A))),e<0&&(N||!v&&!C)&&t._startAt.revert(Ie),v&&T&&e<=0)return void(e&&(t._zTime=e))}else if(S&&T&&!M)if(r=k({overwrite:!1,data:"isFromStart",lazy:(v=e?!1:v)&&!1!==y,immediateRender:v,stagger:0,parent:B},i),p&&(r[h.prop]=p),at(t._startAt=W.set(I,r)),e<0&&(N?t._startAt.revert(Ie):t._startAt.render(-1,!0)),t._zTime=e,v){if(!e)return}else ei(t._startAt,H);for(y=T&&!1!==y||y&&!T,n=t._pt=t._ptCache=0;n<I.length;n++){if(l=(a=I[n])._gsap||tt(I)[n]._gsap,t._ptLookup[n]=u={},Pe[l.id]&&De.length&&nt(),d=D===I?n:D.indexOf(a),h&&!1!==(c=new h).init(a,p||i,t,d,D)&&(t._pt=s=new q(t._pt,a,c.name,0,1,c.render,c,0,c.priority),c._props.forEach(function(t){u[t]=s}),c.priority&&(o=1)),!h||p)for(r in i)V[r]&&(c=ti(r,i,t,d,a,D))?c.priority&&(o=1):u[r]=s=ai.call(t,a,r,"get",i[r],d,D,0,m.stringFilter);t._op&&t._op[n]&&t.kill(a,t._op[n]),P&&t._pt&&(ni=t,Q.killTweensOf(a,u,t.globalTime(e)),f=!t.parent,ni=0),t._pt&&y&&(Pe[l.id]=1)}o&&bi(t),t._onInit&&t._onInit(t)}t._onUpdate=_,t._initted=(!t._op||t._pt)&&!f,E&&e<=0&&L.render(F,!0,!0)}function ii(t,e,i,n,r){return u(t)?t.call(e,i,n,r):O(t)&&~t.indexOf("random(")?Tt(t):t}var ni,ri,si,ai=function(t,e,i,n,r,s,a,o,l,h){u(n)&&(n=n(r||0,t,s));var c,r=t[e],s="get"!==i?i:u(r)?l?t[e.indexOf("set")||!u(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():r,i=u(r)?l?pi:di:ui;if(O(n)&&("="!==(n=~n.indexOf("random(")?Tt(n):n).charAt(1)||!(c=it(s,n)+(G(s)||0))&&0!==c||(n=c)),!h||s!==n||ri)return isNaN(s*n)||""===n?(r||e in t||$(e,n),function(t,e,i,n,r,s,a){var o,l,h,c,u,d=new q(this._pt,t,e,0,1,gi,null,r),p=0,f=0;for(d.b=i,d.e=n,i+="",(r=~(n+="").indexOf("random("))&&(n=Tt(n)),s&&(s(s=[i,n],t,e),i=s[0],n=s[1]),o=i.match(we)||[];c=we.exec(n);)h=c[0],c=n.substring(p,c.index),l?l=(l+1)%5:"rgba("===c.substr(-5)&&(l=1),h!==o[f++]&&(u=parseFloat(o[f-1])||0,d._pt={_next:d._pt,p:c||1===f?c:",",s:u,c:"="===h.charAt(1)?it(u,h)-u:parseFloat(h)-u,m:l&&l<4?Math.round:0},p=we.lastIndex);return d.c=p<n.length?n.substring(p,n.length):"",d.fp=a,(Ee.test(n)||r)&&(d.e=0),this._pt=d}.call(this,t,e,s,n,i,o||U.stringFilter,l)):(c=new q(this._pt,t,e,+s||0,n-(s||0),"boolean"==typeof r?mi:fi,0,i),l&&(c.fp=l),a&&c.modifier(a,this,t),this._pt=c)},oi=Ne+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",li={},W=(p(oi+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return li[t]=1}),i(r,si=Ke),(e=r.prototype).render=function(t,e,i){var n,r,s=this._time,a=this._tDur,o=this._dur,l=t<0,h=a-H<t&&!l?a:t<H?0:t;if(o){if(h!==this._tTime||!t||i||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=l){if(g=h,p=this.timeline,this._repeat){if(c=o+this._rDelay,this._repeat<-1&&l)return this.totalTime(100*c+t,e,i);if(g=I(h%c),h===a?(v=this._repeat,g=o):((v=~~(h/c))&&v===h/c&&(g=o,v--),o<g&&(g=o)),(d=this._yoyo&&1&v)&&(u=this._yEase,g=o-g),y=Ut(this._tTime,c),g===s&&!i&&this._initted)return this._tTime=h,this;v!==y&&(p&&this._yEase&&kt(p,d),!this.vars.repeatRefresh||d||this._lock||(this._lock=i=1,this.render(I(c*v),!0).invalidate()._lock=0))}if(!this._initted){if(ft(this,l?t:g,i,e))return this._tTime=0,this;if(s!==this._time)return this;if(o!==this._dur)return this.render(t,e,i)}if(this._tTime=h,this._time=g,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=r=(u||this._ease)(g/o),this._from&&(this.ratio=r=1-r),g&&!s&&!e&&(b(this,"onStart"),this._tTime!==h))return this;for(n=this._pt;n;)n.r(r,n.d),n=n._next;p&&p.render(t<0?t:!g&&d?-H:p._dur*p._ease(g/this._dur),e,i)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(l&&ot(this,t,0,i),b(this,"onUpdate")),this._repeat&&v!==y&&this.vars.onRepeat&&!e&&this.parent&&b(this,"onRepeat"),h!==this._tDur&&h||this._tTime!==h||(l&&!this._onUpdate&&ot(this,t,0,!0),!t&&o||!(h===this._tDur&&0<this._ts||!h&&this._ts<0)||at(this,1),e||l&&!s||!h&&!s||(b(this,h===a?"onComplete":"onReverseComplete",!0),!this._prom||h<a&&0<this.timeScale()||this._prom()))}}else{var c=this;var u=t;var d=e;var p=i;var f,m,g=c.ratio,A=u<0||!u&&(!c._start&&function t(e){e=e.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||t(e))}(c)&&(c._initted||!Ht(c))||(c._ts<0||c._dp._ts<0)&&!Ht(c))?0:1,v=c._rDelay,y=0;if(v&&c._repeat&&(y=Vt(0,c._tDur,u),m=Ut(y,v),c._yoyo&&1&m&&(A=1-A),m!==Ut(c._tTime,v)&&(g=1-A,c.vars.repeatRefresh&&c._initted&&c.invalidate())),A!==g||N||p||c._zTime===H||!u&&c._zTime){if(c._initted||!ft(c,u,p,d)){for(m=c._zTime,c._zTime=u||(d?H:0),d=d||u&&!m,c.ratio=A,c._from&&(A=1-A),c._time=0,c._tTime=y,f=c._pt;f;)f.r(A,f.d),f=f._next;u<0&&ot(c,u,0,!0),c._onUpdate&&!d&&b(c,"onUpdate"),y&&c._repeat&&!d&&c.parent&&b(c,"onRepeat"),(u>=c._tDur||u<0)&&c.ratio===A&&(A&&at(c,1),d||N||(b(c,A?"onComplete":"onReverseComplete",!0),c._prom&&c._prom()))}}else c._zTime||(c._zTime=u)}return this},e.targets=function(){return this._targets},e.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),si.prototype.invalidate.call(this)},e.resetTo=function(t,e,i,n){Jt||f.wake(),this._ts||this.play();var r,s=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||ei(this,s),r=this._ease(s/this._dur),function(t,e,i,n,r,s,a){var o,l,h,c,u=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!u)for(u=t._ptCache[e]=[],h=t._ptLookup,c=t._targets.length;c--;){if((o=h[c][e])&&o.d&&o.d._pt)for(o=o.d._pt;o&&o.p!==e&&o.fp!==e;)o=o._next;if(!o)return ri=1,t.vars[e]="+=0",ei(t,a),ri=0,1;u.push(o)}for(c=u.length;c--;)(o=(l=u[c])._pt||l).s=!n&&0!==n||r?o.s+(n||0)+s*o.c:n,o.c=i-o.s,l.e&&(l.e=R(i)+G(l.e)),l.b&&(l.b=o.s+G(l.b))}(this,t,e,i,n,r,s)?this.resetTo(t,e,i,n):(ut(this,0),this.parent||w(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?It(this):this;if(this.timeline)return d=this.timeline.totalDuration(),this.timeline.killTweensOf(t,e,ni&&!0!==ni.vars.overwrite)._first||It(this),this.parent&&d!==this.timeline.totalDuration()&&mt(this,this._dur*this.timeline._tDur/d,0,1),this;var i,n,r,s,a,o,l,h=this._targets,c=t?P(t):h,u=this._ptLookup,d=this._pt;if((!e||"all"===e)&&function(t,e){for(var i=t.length,n=i===e.length;n&&i--&&t[i]===e[i];);return i<0}(h,c))return"all"===e&&(this._pt=0),It(this);for(i=this._op=this._op||[],"all"!==e&&(O(e)&&(a={},p(e,function(t){return a[t]=1}),e=a),e=function(t,e){var i,n,r,s,t=t[0]?et(t[0]).harness:0,a=t&&t.aliases;if(!a)return e;for(n in i=Gt({},e),a)if(n in i)for(r=(s=a[n].split(",")).length;r--;)i[s[r]]=i[n];return i}(h,e)),l=h.length;l--;)if(~c.indexOf(h[l]))for(a in n=u[l],"all"===e?(i[l]=e,s=n,r={}):(r=i[l]=i[l]||{},s=e),s)(o=n&&n[a])&&("kill"in o.d&&!0!==o.d.kill(a)||E(this,o,"_pt"),delete n[a]),"all"!==r&&(r[a]=1);return this._initted&&!this._pt&&d&&It(this),this},r.to=function(t,e,i){return new r(t,e,i)},r.from=function(t,e){return At(1,arguments)},r.delayedCall=function(t,e,i,n){return new r(e,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:e,onReverseComplete:e,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:n})},r.fromTo=function(t,e,i){return At(2,arguments)},r.set=function(t,e){return e.duration=0,e.repeatDelay||(e.repeat=0),new r(t,e)},r.killTweensOf=function(t,e,i){return Q.killTweensOf(t,e,i)},r);function r(t,e,i,n){var r;"number"==typeof e&&(i.duration=e,e=i,i=null);var s,a,o,l,h,c,u,d,n=(r=si.call(this,n?e:st(e))||this).vars,p=n.duration,f=n.delay,m=n.immediateRender,g=n.stagger,A=n.overwrite,v=n.keyframes,y=n.defaults,_=n.scrollTrigger,b=n.yoyoEase,n=e.parent||Q,x=(D(t)||_e(t)?K(t[0]):"length"in e)?[t]:P(t);if(r._targets=x.length?tt(x):Z("GSAP target "+t+" not found. https://greensock.com",!U.nullTargetWarn)||[],r._ptLookup=[],r._overwrite=A,v||g||J(p)||J(f)){if(e=r.vars,(s=r.timeline=new z({data:"nested",defaults:y||{},targets:n&&"nested"===n.data?n.vars.targets:x})).kill(),s.parent=s._dp=T(r),s._start=0,g||J(p)||J(f)){if(l=x.length,u=g&&xt(g),M(g))for(h in g)~oi.indexOf(h)&&((d=d||{})[h]=g[h]);for(a=0;a<l;a++)(o=rt(e,li)).stagger=0,b&&(o.yoyoEase=b),d&&Gt(o,d),c=x[a],o.duration=+ii(p,T(r),a,c,x),o.delay=(+ii(f,T(r),a,c,x)||0)-r._delay,!g&&1===l&&o.delay&&(r._delay=f=o.delay,r._start+=f,o.delay=0),s.to(c,o,u?u(a,c,x):0),s._ease=L.none;s.duration()?p=f=0:r.timeline=0}else if(v){st(k(s.vars.defaults,{ease:"none"})),s._ease=qe(v.ease||e.ease||"none");var S,w,E,C=0;if(D(v))v.forEach(function(t){return s.to(x,t,">")}),s.duration();else{for(h in o={},v)"ease"!==h&&"easeEach"!==h&&function(t,i,e,n){var r,s,a=i.ease||n||"power1.inOut";if(D(i))s=e[t]||(e[t]=[]),i.forEach(function(t,e){return s.push({t:e/(i.length-1)*100,v:t,e:a})});else for(r in i)s=e[r]||(e[r]=[]),"ease"!==r&&s.push({t:parseFloat(t),v:i[r],e:a})}(h,v[h],o,v.easeEach);for(h in o)for(S=o[h].sort(function(t,e){return t.t-e.t}),a=C=0;a<S.length;a++)(E={ease:(w=S[a]).e,duration:(w.t-(a?S[a-1].t:0))/100*p})[h]=w.v,s.to(x,E,C),C+=E.duration;s.duration()<p&&s.to({},{duration:p-s.duration()})}}p||r.duration(p=s.duration())}else r.timeline=0;return!0!==A||Wt||(ni=T(r),Q.killTweensOf(x),ni=0),B(n,T(r),i),e.reversed&&r.reverse(),e.paused&&r.paused(!0),(m||!p&&!v&&r._start===I(n._time)&&!1!==m&&function t(e){return!e||e._ts&&t(e.parent)}(T(r))&&"nested"!==n.data)&&(r._tTime=-H,r.render(Math.max(0,-f))),_&&pt(T(r),_),r}function hi(t,e,i){return t.setAttribute(e,i)}function ci(t,e,i,n){n.mSet(t,e,n.m.call(n.tween,i,n.mt),n)}k(W.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),p("staggerTo,staggerFrom,staggerFromTo",function(i){W[i]=function(){var t=new z,e=Fe.call(arguments,0);return e.splice("staggerFromTo"===i?5:4,0,0),t[i].apply(t,e)}});function ui(t,e,i){return t[e]=i}function di(t,e,i){return t[e](i)}function pi(t,e,i,n){return t[e](n.fp,i)}function fi(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)}function mi(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)}function gi(t,e){var i=e._pt,n="";if(!t&&e.b)n=e.b;else if(1===t&&e.e)n=e.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*t):Math.round(1e4*(i.s+i.c*t))/1e4)+n,i=i._next;n+=e.c}e.set(e.t,e.p,n,e)}function Ai(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next}function vi(t,e,i,n){for(var r,s=this._pt;s;)r=s._next,s.p===n&&s.modifier(t,e,i),s=r}function yi(t){for(var e,i,n=this._pt;n;)i=n._next,n.p===t&&!n.op||n.op===t?E(this,n,"_pt"):n.dep||(e=1),n=i;return!e}var _i=function(t,e){return u(t[e])?di:s(t[e])&&t.setAttribute?hi:ui},bi=function(t){for(var e,i,n,r,s=t._pt;s;){for(e=s._next,i=n;i&&i.pr>s.pr;)i=i._next;(s._prev=i?i._prev:r)?s._prev._next=s:n=s,(s._next=i)?i._prev=s:r=s,s=e}t._pt=n},q=(xi.prototype.modifier=function(t,e,i){this.mSet=this.mSet||this.set,this.set=ci,this.m=t,this.mt=i,this.tween=e},xi);function xi(t,e,i,n,r,s,a,o,l){this.t=e,this.s=n,this.c=r,this.p=i,this.r=s||fi,this.d=a||this,this.set=o||ui,this.pr=l||0,(this._next=t)&&(t._prev=this)}function Si(t){(Ci[t]||Ti).map(function(t){return t()})}function wi(){var t=Date.now(),o=[];2<t-Mi&&(Si("matchMediaInit"),Ei.forEach(function(t){var e,i,n,r,s=t.queries,a=t.conditions;for(i in s)(e=l.matchMedia(s[i]).matches)&&(n=1),e!==a[i]&&(a[i]=e,r=1);r&&(t.revert(),n&&o.push(t))}),Si("matchMediaRevert"),o.forEach(function(t){return t.onMatch(t)}),Mi=t,Si("matchMedia"))}p(Ne+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return Be[t]=1}),a.TweenMax=a.TweenLite=W,a.TimelineLite=a.TimelineMax=z,Q=new z({sortChildren:!1,defaults:pe,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),U.stringFilter=Rt;var Ei=[],Ci={},Ti=[],Mi=0,Ii=((e=Bi.prototype).add=function(t,n,r){function e(){var t,e=o,i=s.selector;return e&&e!==s&&e.data.push(s),r&&(s.selector=_t(r)),o=s,u(t=n.apply(s,arguments))&&s._r.push(t),o=e,s.selector=i,s.isReverted=!1,t}u(t)&&(r=n,n=t,t=u);var s=this;return s.last=e,t===u?e(s):t?s[t]=e:e},e.ignore=function(t){var e=o;o=null,t(this),o=e},e.getTweens=function(){var e=[];return this.data.forEach(function(t){return t instanceof Bi?e.push.apply(e,t.getTweens()):t instanceof W&&e.push(t)}),e},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(e,t){var i=this;e?(this.getTweens().map(function(t){return{g:t.globalTime(0),t:t}}).sort(function(t,e){return e.g-t.g||-1}).forEach(function(t){return t.t.revert(e)}),this.data.forEach(function(t){return!(t instanceof Ke)&&t.revert&&t.revert(e)}),this._r.forEach(function(t){return t(e,i)}),this.isReverted=!0):this.data.forEach(function(t){return t.kill&&t.kill()}),this.clear(),t&&~(t=Ei.indexOf(this))&&Ei.splice(t,1)},e.revert=function(t){this.kill(t||{})},Bi);function Bi(t,e){this.selector=e&&_t(e),this.data=[],this._r=[],this.isReverted=!1,t&&this.add(t)}(e=Pi.prototype).add=function(t,e,i){M(t)||(t={matches:t});var n,r,s,a=new Ii(0,i||this.scope),o=a.conditions={};for(r in this.contexts.push(a),e=a.add("onMatch",e),a.queries=t)"all"===r?s=1:(n=l.matchMedia(t[r]))&&(Ei.indexOf(a)<0&&Ei.push(a),(o[r]=n.matches)&&(s=1),n.addListener?n.addListener(wi):n.addEventListener("change",wi));return s&&e(a),this},e.revert=function(t){this.kill(t||{})},e.kill=function(e){this.contexts.forEach(function(t){return t.kill(e,!0)})};var Di=Pi;function Pi(t){this.contexts=[],this.scope=t}var Li={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(t){var e=(t=!t.name&&t.default||t).name,i=u(t),i=e&&!i&&t.init?function(){this._props=[]}:t,n={init:A,render:Ai,add:ai,kill:yi,modifier:vi,rawVars:0},r={targetTest:0,get:0,getSetter:_i,aliases:{},register:0};if(He(),t!==i){if(V[e])return;k(i,k(rt(t,n),r)),Gt(i.prototype,Gt(n,rt(t,r))),V[i.prop=e]=i,t.targetTest&&(ke.push(i),Be[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}g(e,i),t.register&&t.register(c,i,q)})},timeline:function(t){return new z(t)},getTweensOf:function(t,e){return Q.getTweensOf(t,e)},getProperty:function(n,t,e,i){var r=et((n=O(n)?P(n)[0]:n)||{}).get,s=e?x:_;return"native"===e&&(e=""),n&&(t?s((V[t]&&V[t].get||r)(n,t,e,i)):function(t,e,i){return s((V[t]&&V[t].get||r)(n,t,e,i))})},quickSetter:function(i,e,n){var r,s;if(1<(i=P(i)).length)return r=i.map(function(t){return c.quickSetter(t,e,n)}),s=r.length,function(t){for(var e=s;e--;)r[e](t)};i=i[0]||{};var a=V[e],o=et(i),l=o.harness&&(o.harness.aliases||{})[e]||e,h=a?function(t){var e=new a;ki._pt=0,e.init(i,n?t+n:t,ki,0,[i]),e.render(1,e),ki._pt&&Ai(1,ki)}:o.set(i,l);return a?h:function(t){return h(i,l,n?t+n:t,o,1)}},quickTo:function(t,n,e){function i(t,e,i){return r.resetTo(n,t,e,i)}var r=c.to(t,Gt(((t={})[n]="+=0.1",t.paused=!0,t),e||{}));return i.tween=r,i},isTweening:function(t){return 0<Q.getTweensOf(t,!0).length},defaults:function(t){return t&&t.ease&&(t.ease=qe(t.ease,pe.ease)),S(pe,t||{})},config:function(t){return S(U,t||{})},registerEffect:function(t){var n=t.name,r=t.effect,e=t.plugins,s=t.defaults,t=t.extendTimeline;(e||"").split(",").forEach(function(t){return t&&!V[t]&&!a[t]&&Z(n+" effect requires "+t+" plugin.")}),Le[n]=function(t,e,i){return r(P(t),k(e||{},s),i)},t&&(z.prototype[n]=function(t,e,i){return this.add(Le[n](t,M(e)?e:(i=e)&&{},this),i)})},registerEase:function(t,e){L[t]=qe(e)},parseEase:function(t,e){return arguments.length?qe(t,e):L},getById:function(t){return Q.getById(t)},exportRoot:function(t,e){var i,n,r=new z(t=void 0===t?{}:t);for(r.smoothChildTiming=!1!==t.smoothChildTiming,Q.remove(r),r._dp=0,r._time=r._tTime=Q._time,i=Q._first;i;)n=i._next,!e&&!i._dur&&i instanceof W&&i.vars.onComplete===i._targets[0]||B(r,i,i._start-i._delay),i=n;return B(Q,r,0),r},context:function(t,e){return t?new Ii(t,e):o},matchMedia:function(t){return new Di(t)},matchMediaRefresh:function(){return Ei.forEach(function(t){var e,i,n=t.conditions;for(i in n)n[i]&&(n[i]=!1,e=1);e&&t.revert()})||wi()},addEventListener:function(t,e){t=Ci[t]||(Ci[t]=[]);~t.indexOf(e)||t.push(e)},removeEventListener:function(t,e){t=Ci[t],e=t&&t.indexOf(e);0<=e&&t.splice(e,1)},utils:{wrap:function t(e,i,n){var r=i-e;return D(e)?Ct(e,t(0,e.length),i):vt(n,function(t){return(r+(t-e)%r)%r+e})},wrapYoyo:function t(e,i,n){var r=i-e,s=2*r;return D(e)?Ct(e,t(0,e.length-1),i):vt(n,function(t){return e+(r<(t=(s+(t-e)%s)%s||0)?s-t:t)})},distribute:xt,random:Et,snap:wt,normalize:function(t,e,i){return zt(t,e,0,1,i)},getUnit:G,clamp:function(e,i,t){return vt(t,function(t){return Vt(e,i,t)})},splitColor:Dt,toArray:P,selector:_t,mapRange:zt,pipe:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){return e.reduce(function(t,e){return e(t)},t)}},unitize:function(e,i){return function(t){return e(parseFloat(t))+(i||G(t))}},interpolate:function t(e,i,n,r){var s=isNaN(e+i)?0:function(t){return(1-t)*e+t*i};if(!s){var a,o,l,h,c,u=O(e),d={};if(!0===n&&(r=1)&&(n=null),u)e={p:e},i={p:i};else if(D(e)&&!D(i)){for(l=[],h=e.length,c=h-2,o=1;o<h;o++)l.push(t(e[o-1],e[o]));h--,s=function(t){t*=h;var e=Math.min(c,~~t);return l[e](t-e)},n=i}else r||(e=Gt(D(e)?[]:{},e));if(!l){for(a in i)ai.call(d,e,a,"get",i[a]);s=function(t){return Ai(t,d),u?e.p:e}}}return vt(n,s)},shuffle:bt},install:m,effects:Le,ticker:f,updateRoot:z.updateRoot,plugins:V,globalTimeline:Q,core:{PropTween:q,globals:g,Tween:W,Timeline:z,Animation:Ke,getCache:et,_removeLinkedListItem:E,reverting:function(){return N},context:function(t){return t&&o&&(o.data.push(t),t._ctx=o),o},suppressOverwrites:function(t){return Wt=t}}};function Ri(t,c){return{name:t,rawVars:1,init:function(t,h,e){e._onInit=function(t){var e,i;if(O(h)&&(e={},p(h,function(t){return e[t]=1}),h=e),c){for(i in e={},h)e[i]=c(h[i]);h=e}var n,r,s,a=t,o=h,l=a._targets;for(n in o)for(r=l.length;r--;)(s=(s=a._ptLookup[r][n])&&s.d)&&(s._pt&&(s=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i}(s,n)),s&&s.modifier&&s.modifier(o[n],a,l[r],n))}}}}p("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return Li[t]=W[t]}),f.add(z.updateRoot);var ki=Li.to({},{duration:0}),c=Li.registerPlugin({name:"attr",init:function(t,e,i,n,r){var s,a,o;for(s in this.tween=i,e)o=t.getAttribute(s)||"",(a=this.add(t,"setAttribute",(o||0)+"",e[s],n,r,0,0,s)).op=s,a.b=o,this._props.push(s)},render:function(t,e){for(var i=e._pt;i;)N?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},Ri("roundProps",St),Ri("modifiers"),Ri("snap",wt))||Li;function Ni(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function Qi(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function Fi(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)}function Oi(t,e){t=e.s+e.c*t;e.set(e.t,e.p,~~(t+(t<0?-.5:.5))+e.u,e)}function Gi(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)}function Ui(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)}function Hi(t,e,i){return t.style[e]=i}function Vi(t,e,i){return t.style.setProperty(e,i)}function zi(t,e,i){return t._gsap[e]=i}function Wi(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i}function qi(t,e,i,n,r){t=t._gsap;t.scaleX=t.scaleY=i,t.renderTransform(r,t)}function ji(t,e,i,n,r){t=t._gsap;t[e]=i,t.renderTransform(r,t)}function Xi(t){var e=this,i=this.target,n=i.style;if(t in Gn){if(this.tfm=this.tfm||{},"transform"!==t&&(~(t=jn[t]||t).indexOf(",")?t.split(",").forEach(function(t){return e.tfm[t]=$n(i,t)}):this.tfm[t]=i._gsap.x?i._gsap[t]:$n(i,t)),0<=this.props.indexOf(X))return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Y,"")),t=X}n&&this.props.push(t,n[t])}function Yi(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))}function Ki(){for(var t,e=this.props,i=this.target,n=i.style,r=i._gsap,s=0;s<e.length;s+=2)e[s+1]?n[e[s]]=e[s+1]:n.removeProperty(e[s].replace(zn,"-$1").toLowerCase());if(this.tfm){for(t in this.tfm)r[t]=this.tfm[t];r.svg&&(r.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),!(s=bn())||s.isStart||n[X]||(Yi(n),r.uncache=1)}}function Ji(t,e){var i={target:t,props:[],revert:Ki,save:Xi};return e&&e.split(",").forEach(function(t){return i.save(t)}),i}function $i(t,e){e=gn.createElementNS?gn.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):gn.createElement(t);return e.style?e:gn.createElement(t)}function j(t,e,i){var n=getComputedStyle(t);return n[e]||n.getPropertyValue(e.replace(zn,"-$1").toLowerCase())||n.getPropertyValue(e)||!i&&j(t,Yn(e)||e,1)||""}function Zi(){"undefined"!=typeof window&&window.document&&(An=(gn=window.document).documentElement,yn=$i("div")||{style:{}},$i("div"),X=Yn(X),Y=X+"Origin",yn.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",xn=!!Yn("perspective"),bn=c.core.reverting,vn=1)}function tn(t){var e,i=$i("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,s=this.style.cssText;if(An.appendChild(i),i.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=tn}catch(t){}else this._gsapBBox&&(e=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),An.removeChild(i),this.style.cssText=s,e}function en(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])}function nn(e){var i;try{i=e.getBBox()}catch(t){i=tn.call(e,!0)}return!(i=i&&(i.width||i.height)||e.getBBox===tn?i:tn.call(e,!0))||i.width||i.x||i.y?i:{x:+en(e,["x","cx","x1"])||0,y:+en(e,["y","cy","y1"])||0,width:0,height:0}}function rn(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!nn(t))}function sn(t,e){e&&(t=t.style,e in Gn&&e!==Y&&(e=X),t.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),t.removeProperty(e.replace(zn,"-$1").toLowerCase())):t.removeAttribute(e))}function an(t,e,i,n,r,s){e=new q(t._pt,e,i,0,1,s?Ui:Gi);(t._pt=e).b=n,e.e=r,t._props.push(i)}function on(t,e,i,n){var r,s=parseFloat(i)||0,a=(i+"").trim().substr((s+"").length)||"px",o=yn.style,l=Wn.test(e),h="svg"===t.tagName.toLowerCase(),c=(h?"client":"offset")+(l?"Width":"Height"),u="px"===n,d="%"===n;return n===a||!s||Kn[n]||Kn[a]?s:("px"===a||u||(s=on(t,e,i,"px")),i=t.getCTM&&rn(t),!d&&"%"!==a||!Gn[e]&&!~e.indexOf("adius")?(o[l?"width":"height"]=100+(u?a:n),e=~e.indexOf("adius")||"em"===n&&t.appendChild&&!h?t:t.parentNode,(n=(e=(e=i?(t.ownerSVGElement||{}).parentNode:e)&&e!==gn&&e.appendChild?e:gn.body)._gsap)&&d&&n.width&&l&&n.time===f.time&&!n.uncache?R(s/n.width*100):(!d&&"%"!==a||Jn[j(e,"display")]||(o.position=j(t,"position")),e===t&&(o.position="static"),e.appendChild(yn),r=yn[c],e.removeChild(yn),o.position="absolute",l&&d&&((n=et(e)).time=f.time,n.width=e[c]),R(u?r*s/100:r&&s?100/r*s:0))):(r=i?t.getBBox()[l?"width":"height"]:t[c],R(d?s/r*100:s/100*r)))}function ln(t,e,i,n){var r;i&&"none"!==i||((r=(s=Yn(e,t,1))&&j(t,s,1))&&r!==i?(e=s,i=r):"borderColor"===e&&(i=j(t,"borderTopColor")));var s,a,o,l,h,c,u,d,p,f=new q(this._pt,t.style,e,0,1,gi),m=0,g=0;if(f.b=i,f.e=n,i+="","auto"==(n+="")&&(t.style[e]=n,n=j(t,e)||n,t.style[e]=i),Rt(s=[i,n]),n=s[1],a=(i=s[0]).match(Se)||[],(n.match(Se)||[]).length){for(;u=Se.exec(n);)d=u[0],u=n.substring(m,u.index),l?l=(l+1)%5:"rgba("!==u.substr(-5)&&"hsla("!==u.substr(-5)||(l=1),d!==(h=a[g++]||"")&&(o=parseFloat(h)||0,p=h.substr((o+"").length),"="===d.charAt(1)&&(d=it(o,d)+p),c=parseFloat(d),d=d.substr((c+"").length),m=Se.lastIndex-d.length,d||(d=d||U.units[e]||p,m===n.length&&(n+=d,f.e+=d)),p!==d&&(o=on(t,e,h,d)||0),f._pt={_next:f._pt,p:u||1===g?u:",",s:o,c:c-o,m:l&&l<4||"zIndex"===e?Math.round:0});f.c=m<n.length?n.substring(m,n.length):""}else f.r="display"===e&&"none"===n?Ui:Gi;return Ee.test(n)&&(f.e=0),this._pt=f}function hn(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i,n,r,s=e.t,a=s.style,o=e.u,e=s._gsap;if("all"===o||!0===o)a.cssText="",n=1;else for(r=(o=o.split(",")).length;-1<--r;)i=o[r],Gn[i]&&(n=1,i="transformOrigin"===i?Y:X),sn(s,i);n&&(sn(s,X),e&&(e.svg&&s.removeAttribute("transform"),nr(s,1),e.uncache=1,Yi(a)))}}function cn(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t}function un(t){t=j(t,X);return cn(t)?er:t.substr(7).match(xe).map(R)}function dn(t,e){var i,n,r,s=t._gsap||et(t),a=t.style,o=un(t);return s.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(o=[(n=t.transform.baseVal.consolidate().matrix).a,n.b,n.c,n.d,n.e,n.f]).join(",")?er:o:(o!==er||t.offsetParent||t===An||s.svg||(n=a.display,a.display="block",(s=t.parentNode)&&t.offsetParent||(r=1,i=t.nextElementSibling,An.appendChild(t)),o=un(t),n?a.display=n:sn(t,"display"),r&&(i?s.insertBefore(t,i):s?s.appendChild(t):An.removeChild(t))),e&&6<o.length?[o[0],o[1],o[4],o[5],o[12],o[13]]:o)}function pn(t,e,i,n,r,s){var a,o=t._gsap,r=r||dn(t,!0),l=o.xOrigin||0,h=o.yOrigin||0,c=o.xOffset||0,u=o.yOffset||0,d=r[0],p=r[1],f=r[2],m=r[3],g=r[4],A=r[5],v=e.split(" "),y=parseFloat(v[0])||0,_=parseFloat(v[1])||0;i?r!==er&&(r=d*m-p*f)&&(a=y*(-p/r)+_*(d/r)-(d*A-p*g)/r,y=y*(m/r)+_*(-f/r)+(f*A-m*g)/r,_=a):(y=(r=nn(t)).x+(~v[0].indexOf("%")?y/100*r.width:y),_=r.y+(~(v[1]||v[0]).indexOf("%")?_/100*r.height:_)),n||!1!==n&&o.smooth?(o.xOffset=c+((g=y-l)*d+(A=_-h)*f)-g,o.yOffset=u+(g*p+A*m)-A):o.xOffset=o.yOffset=0,o.xOrigin=y,o.yOrigin=_,o.smooth=!!n,o.origin=e,o.originIsAbsolute=!!i,t.style[Y]="0px 0px",s&&(an(s,o,"xOrigin",l,y),an(s,o,"yOrigin",h,_),an(s,o,"xOffset",c,o.xOffset),an(s,o,"yOffset",u,o.yOffset)),t.setAttribute("data-svg-origin",y+" "+_)}function fn(t,e,i){var n=G(e);return R(parseFloat(e)+parseFloat(on(t,"x",i+"px",n)))+n}function mn(t,e){for(var i in e)t[i]=e[i];return t}W.version=z.version=c.version="3.11.1",Yt=1,n()&&He();var gn,An,vn,yn,_n,bn,xn,e=L.Power0,Sn=L.Power1,wn=L.Power2,En=L.Power3,Cn=L.Power4,Tn=L.Linear,Mn=L.Quad,In=L.Cubic,Bn=L.Quart,Dn=L.Quint,Pn=L.Strong,Ln=L.Elastic,Rn=L.Back,kn=L.SteppedEase,Nn=L.Bounce,Qn=L.Sine,Fn=L.Expo,On=L.Circ,Gn={},Un=180/Math.PI,Hn=Math.PI/180,Vn=Math.atan2,zn=/([A-Z])/g,Wn=/(left|right|width|margin|padding|x)/i,qn=/[\s,\(]\S/,jn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},X="transform",Y=X+"Origin",Xn="O,Moz,ms,Ms,Webkit".split(","),Yn=function(t,e,i){var n=(e||yn).style,r=5;if(t in n&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);r--&&!(Xn[r]+t in n););return r<0?null:(3===r?"ms":0<=r?Xn[r]:"")+t},Kn={deg:1,rad:1,turn:1},Jn={grid:1,flex:1},$n=function(t,e,i,n){var r;return vn||Zi(),e in jn&&"transform"!==e&&~(e=jn[e]).indexOf(",")&&(e=e.split(",")[0]),Gn[e]&&"transform"!==e?(r=nr(t,n),r="transformOrigin"!==e?r[e]:r.svg?r.origin:rr(j(t,Y))+" "+r.zOrigin+"px"):(r=t.style[e])&&"auto"!==r&&!n&&!~(r+"").indexOf("calc(")||(r=tr[e]&&tr[e](t,e,i)||j(t,e)||v(t,e)||("opacity"===e?1:0)),i&&!~(r+"").trim().indexOf(" ")?on(t,e,r,i)+i:r},Zn={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},tr={clearProps:function(t,e,i,n,r){if("isFromStart"!==r.data)return(e=t._pt=new q(t._pt,e,i,0,0,hn)).u=n,e.pr=-10,e.tween=r,t._props.push(i),1}},er=[1,0,0,1,0,0],ir={},nr=function(t,e){var i=t._gsap||new Ye(t);if("x"in i&&!e&&!i.uncache)return i;var n,r,s,a,o,l,h,c,u,d,p,f,m,g,A,v,y,_,b,x,S,w,E,C,T,M=t.style,I=i.scaleX<0,B=getComputedStyle(t),D=j(t,Y)||"0",P=n=r=a=o=l=h=c=0,L=s=1;return i.svg=!(!t.getCTM||!rn(t)),B.translate&&("none"===B.translate&&"none"===B.scale&&"none"===B.rotate||(M[X]=("none"!==B.translate?"translate3d("+(B.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==B.rotate?"rotate("+B.rotate+") ":"")+("none"!==B.scale?"scale("+B.scale.split(" ").join(",")+") ":"")+B[X]),M.scale=M.rotate=M.translate="none"),B=dn(t,i.svg),i.svg&&(y=i.uncache?(_=t.getBBox(),D=i.xOrigin-_.x+"px "+(i.yOrigin-_.y)+"px",""):!e&&t.getAttribute("data-svg-origin"),pn(t,y||D,!!y||i.originIsAbsolute,!1!==i.smooth,B)),T=i.xOrigin||0,E=i.yOrigin||0,B!==er&&(p=B[0],f=B[1],m=B[2],g=B[3],P=A=B[4],n=v=B[5],6===B.length?(L=Math.sqrt(p*p+f*f),s=Math.sqrt(g*g+m*m),a=p||f?Vn(f,p)*Un:0,(h=m||g?Vn(m,g)*Un+a:0)&&(s*=Math.abs(Math.cos(h*Hn))),i.svg&&(P-=T-(T*p+E*m),n-=E-(T*f+E*g))):(T=B[6],E=B[7],x=B[8],S=B[9],w=B[10],C=B[11],P=B[12],n=B[13],r=B[14],o=(B=Vn(T,w))*Un,B&&(y=A*(u=Math.cos(-B))+x*(d=Math.sin(-B)),_=v*u+S*d,b=T*u+w*d,x=A*-d+x*u,S=v*-d+S*u,w=T*-d+w*u,C=E*-d+C*u,A=y,v=_,T=b),l=(B=Vn(-m,w))*Un,B&&(u=Math.cos(-B),C=g*(d=Math.sin(-B))+C*u,p=y=p*u-x*d,f=_=f*u-S*d,m=b=m*u-w*d),a=(B=Vn(f,p))*Un,B&&(y=p*(u=Math.cos(B))+f*(d=Math.sin(B)),_=A*u+v*d,f=f*u-p*d,v=v*u-A*d,p=y,A=_),o&&359.9<Math.abs(o)+Math.abs(a)&&(o=a=0,l=180-l),L=R(Math.sqrt(p*p+f*f+m*m)),s=R(Math.sqrt(v*v+T*T)),B=Vn(A,v),h=2e-4<Math.abs(B)?B*Un:0,c=C?1/(C<0?-C:C):0),i.svg&&(y=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!cn(j(t,X)),y&&t.setAttribute("transform",y))),90<Math.abs(h)&&Math.abs(h)<270&&(I?(L*=-1,h+=a<=0?180:-180,a+=a<=0?180:-180):(s*=-1,h+=h<=0?180:-180)),e=e||i.uncache,i.x=P-((i.xPercent=P&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-P)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+"px",i.y=n-((i.yPercent=n&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-n)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+"px",i.z=r+"px",i.scaleX=R(L),i.scaleY=R(s),i.rotation=R(a)+"deg",i.rotationX=R(o)+"deg",i.rotationY=R(l)+"deg",i.skewX=h+"deg",i.skewY="0deg",i.transformPerspective=c+"px",(i.zOrigin=parseFloat(D.split(" ")[2])||0)&&(M[Y]=rr(D)),i.xOffset=i.yOffset=0,i.force3D=U.force3D,i.renderTransform=i.svg?lr:xn?or:sr,i.uncache=0,i},rr=function(t){return(t=t.split(" "))[0]+" "+t[1]},sr=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,or(t,e)},ar="0deg",or=function(t,e){var i,n,e=e||this,r=e.xPercent,s=e.yPercent,a=e.x,o=e.y,l=e.z,h=e.rotation,c=e.rotationY,u=e.rotationX,d=e.skewX,p=e.skewY,f=e.scaleX,m=e.scaleY,g=e.transformPerspective,A=e.force3D,v=e.target,e=e.zOrigin,y="",t="auto"===A&&t&&1!==t||!0===A;!e||u===ar&&c===ar||(A=parseFloat(c)*Hn,n=Math.sin(A),i=Math.cos(A),A=parseFloat(u)*Hn,a=fn(v,a,n*(n=Math.cos(A))*-e),o=fn(v,o,-Math.sin(A)*-e),l=fn(v,l,i*n*-e+e)),"0px"!==g&&(y+="perspective("+g+") "),(r||s)&&(y+="translate("+r+"%, "+s+"%) "),!t&&"0px"===a&&"0px"===o&&"0px"===l||(y+="0px"!==l||t?"translate3d("+a+", "+o+", "+l+") ":"translate("+a+", "+o+") "),h!==ar&&(y+="rotate("+h+") "),c!==ar&&(y+="rotateY("+c+") "),u!==ar&&(y+="rotateX("+u+") "),d===ar&&p===ar||(y+="skew("+d+", "+p+") "),1===f&&1===m||(y+="scale("+f+", "+m+") "),v.style[X]=y||"translate(0, 0)"},lr=function(t,e){var i,n,r,s,a,e=e||this,o=e.xPercent,l=e.yPercent,h=e.x,c=e.y,u=e.rotation,d=e.skewX,p=e.skewY,f=e.scaleX,m=e.scaleY,g=e.target,A=e.xOrigin,v=e.yOrigin,y=e.xOffset,_=e.yOffset,e=e.forceCSS,b=parseFloat(h),x=parseFloat(c),u=parseFloat(u),d=parseFloat(d);(p=parseFloat(p))&&(d+=p=parseFloat(p),u+=p),u||d?(u*=Hn,d*=Hn,i=Math.cos(u)*f,n=Math.sin(u)*f,r=Math.sin(u-d)*-m,s=Math.cos(u-d)*m,d&&(p*=Hn,a=Math.tan(d-p),r*=a=Math.sqrt(1+a*a),s*=a,p&&(a=Math.tan(p),i*=a=Math.sqrt(1+a*a),n*=a)),i=R(i),n=R(n),r=R(r),s=R(s)):(i=f,s=m,n=r=0),(b&&!~(h+"").indexOf("px")||x&&!~(c+"").indexOf("px"))&&(b=on(g,"x",h,"px"),x=on(g,"y",c,"px")),(A||v||y||_)&&(b=R(b+A-(A*i+v*r)+y),x=R(x+v-(A*n+v*s)+_)),(o||l)&&(b=R(b+o/100*(a=g.getBBox()).width),x=R(x+l/100*a.height)),g.setAttribute("transform",a="matrix("+i+","+n+","+r+","+s+","+b+","+x+")"),e&&(g.style[X]=a)};p("padding,margin,Width,Radius",function(e,i){var t="Bottom",o=(i<3?["Top","Right",t,"Left"]:["TopLeft","TopRight",t+"Right",t+"Left"]).map(function(t){return i<2?e+t:"border"+t+e});tr[1<i?"border"+e:e]=function(e,t,i,n,r){var s,a;if(arguments.length<4)return s=o.map(function(t){return $n(e,t,i)}),5===(a=s.join(" ")).split(s[0]).length?s[0]:a;s=(n+"").split(" "),a={},o.forEach(function(t,e){return a[t]=s[e]=s[e]||s[(e-1)/2|0]}),e.init(t,a,r)}});var hr,cr={name:"css",register:Zi,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,n,r){var s,a,o,l,h,c,u,d,p,N,f,m,Q,g,A,v,y,_,b,x,F=this._props,S=t.style,w=i.vars.startAt;for(h in vn||Zi(),this.styles=this.styles||Ji(t),g=this.styles.props,this.tween=i,e)if("autoRound"!==h&&(a=e[h],!V[h]||!ti(h,e,i,n,t,r)))if(d=typeof a,l=tr[h],"function"===d&&(d=typeof(a=a.call(i,n,t,r))),"string"===d&&~a.indexOf("random(")&&(a=Tt(a)),l)l(this,t,h,a,i)&&(Q=1);else if("--"===h.substr(0,2))s=(getComputedStyle(t).getPropertyValue(h)+"").trim(),a+="",Ge.lastIndex=0,Ge.test(s)||(c=G(s),u=G(a)),u?c!==u&&(s=on(t,h,s,u)+u):c&&(a+=c),this.add(S,"setProperty",s,a,n,r,0,0,h),F.push(h),g.push(h,S[h]);else if("undefined"!==d){if(w&&h in w?(G((s=O(s="function"==typeof w[h]?w[h].call(i,n,t,r):w[h])&&~s.indexOf("random(")?Tt(s):s)+"")||(s+=U.units[h]||G($n(t,h))||""),"="===(s+"").charAt(1)&&(s=$n(t,h))):s=$n(t,h),l=parseFloat(s),(d="string"===d&&"="===a.charAt(1)&&a.substr(0,2))&&(a=a.substr(2)),o=parseFloat(a),h in jn&&("autoAlpha"===h&&(1===l&&"hidden"===$n(t,"visibility")&&o&&(l=0),g.push("visibility",S.visibility),an(this,S,"visibility",l?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==h&&"transform"!==h&&~(h=jn[h]).indexOf(",")&&(h=h.split(",")[0])),p=h in Gn)if(this.styles.save(h),N||((f=t._gsap).renderTransform&&!e.parseTransform||nr(t,e.parseTransform),m=!1!==e.smoothOrigin&&f.smooth,(N=this._pt=new q(this._pt,S,X,0,1,f.renderTransform,f,0,-1)).dep=1),"scale"===h)this._pt=new q(this._pt,f,"scaleY",f.scaleY,(d?it(f.scaleY,d+o):o)-f.scaleY||0,Ni),this._pt.u=0,F.push("scaleY",h),h+="X";else{if("transformOrigin"===h){g.push(Y,S[Y]),x=b=_=void 0,_=(y=a).split(" "),b=_[0],x=_[1]||"50%","top"!==b&&"bottom"!==b&&"left"!==x&&"right"!==x||(y=b,b=x,x=y),_[0]=Zn[b]||b,_[1]=Zn[x]||x,a=_.join(" "),f.svg?pn(t,a,0,m,0,this):((u=parseFloat(a.split(" ")[2])||0)!==f.zOrigin&&an(this,f,"zOrigin",f.zOrigin,u),an(this,S,h,rr(s),rr(a)));continue}if("svgOrigin"===h){pn(t,a,1,m,0,this);continue}if(h in ir){y=this,b=f,x=h,_=l,A=d?it(l,d+a):a,v=k=P=void 0,P=O(A),k=parseFloat(A)*(P&&~A.indexOf("rad")?Un:1)-_,v=_+k+"deg",P&&("short"===(P=A.split("_")[1])&&(k%=360)!=k%180&&(k+=k<0?360:-360),"cw"===P&&k<0?k=(k+36e9)%360-360*~~(k/360):"ccw"===P&&0<k&&(k=(k-36e9)%360-360*~~(k/360))),y._pt=A=new q(y._pt,b,x,_,k,Qi),A.e=v,A.u="deg",y._props.push(x);continue}if("smoothOrigin"===h){an(this,f,"smooth",f.smooth,a);continue}if("force3D"===h){f[h]=a;continue}if("transform"===h){k=R=B=I=M=I=T=C=E=L=P=D=void 0;var E,C,T,M,I,B,D=this,P=a,L=t,R=mn({},L._gsap),k=L.style;for(C in R.svg?(T=L.getAttribute("transform"),L.setAttribute("transform",""),k[X]=P,E=nr(L,1),sn(L,X),L.setAttribute("transform",T)):(T=getComputedStyle(L)[X],k[X]=P,E=nr(L,1),k[X]=T),Gn)(T=R[C])!==(I=E[C])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(C)<0&&(M=G(T)!==(B=G(I))?on(L,C,T,B):parseFloat(T),I=parseFloat(I),D._pt=new q(D._pt,E,C,M,I-M,Ni),D._pt.u=B||0,D._props.push(C));mn(E,R);continue}}else h in S||(h=Yn(h)||h);if(p||(o||0===o)&&(l||0===l)&&!qn.test(a)&&h in S)o=o||0,(c=(s+"").substr((l+"").length))!==(u=G(a)||(h in U.units?U.units[h]:c))&&(l=on(t,h,s,u)),this._pt=new q(this._pt,p?f:S,h,l,(d?it(l,d+o):o)-l,p||"px"!==u&&"zIndex"!==h||!1===e.autoRound?Ni:Oi),this._pt.u=u||0,c!==u&&"%"!==u&&(this._pt.b=s,this._pt.r=Fi);else if(h in S)ln.call(this,t,h,s,d?d+a:a);else{if(!(h in t)){$(h,a);continue}this.add(t,h,s||t[h],d?d+a:a,n,r)}p||g.push(h,S[h]),F.push(h)}Q&&bi(this)},render:function(t,e){if(e.tween._time||!bn())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:$n,aliases:jn,getSetter:function(t,e,i){var n=jn[e];return(e=n&&n.indexOf(",")<0?n:e)in Gn&&e!==Y&&(t._gsap.x||$n(t,"x"))?i&&_n===i?"scale"===e?Wi:zi:(_n=i||{})&&("scale"===e?qi:ji):t.style&&!s(t.style[e])?Hi:~e.indexOf("-")?Vi:_i(t,e)},core:{_removeProperty:sn,_getMatrix:dn}},ur=(c.utils.checkPrefix=Yn,c.core.getStyleSaver=Ji,hr=p("x,y,z,scale,scaleX,scaleY,xPercent,yPercent"+","+(ur="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(t){Gn[t]=1}),p(ur,function(t){U.units[t]="deg",ir[t]=1}),jn[hr[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+ur,p("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(t){t=t.split(":");jn[t[1]]=hr[t[0]]}),p("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){U.units[t]="px"}),c.registerPlugin(cr),c.registerPlugin(cr)||c),dr=ur.core.Tween;t.Back=Rn,t.Bounce=Nn,t.CSSPlugin=cr,t.Circ=On,t.Cubic=In,t.Elastic=Ln,t.Expo=Fn,t.Linear=Tn,t.Power0=e,t.Power1=Sn,t.Power2=wn,t.Power3=En,t.Power4=Cn,t.Quad=Mn,t.Quart=Bn,t.Quint=Dn,t.Sine=Qn,t.SteppedEase=kn,t.Strong=Pn,t.TimelineLite=z,t.TimelineMax=z,t.TweenLite=W,t.TweenMax=dr,t.default=ur,t.gsap=ur,"undefined"==typeof window||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete t.default}),function(f){(function(){if(typeof module!=="undefined"&&module.exports)return function(t){module.exports=t()};else if(typeof define==="function"&&define.amd)return define;else if(typeof window!=="undefined")return function(t){window.MobileDetect=t()};else throw new Error("unknown environment")})()(function(){"use strict";var o={mobileDetectRules:{phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+|\\b(BBA100|BBB100|BBD100|BBE100|BBF100|STH100)\\b-[0-9]+",Pixel:"; \\bPixel\\b",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 5X|Nexus 6",Dell:"Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052",Samsung:"\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F|SM-G610F|SM-G981B|SM-G892A|SM-A530F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323|M257)|LM-G710",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533|SOV34|601SO|F8332",Asus:"Asus.*Galaxy|PadFone.*Mobile",Xiaomi:"^(?!.*\\bx11\\b).*xiaomi.*$|POCOPHONE F1|MI 8|Redmi Note 9S|Redmi Note 5A Prime|N2G47H|M2001J2G|M2001J2I|M1805E10A|M2004J11G|M1902F1G|M2002J9G|M2004J19G|M2003J6A1G",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo (3DS|Switch)",Amoi:"Amoi",INQ:"INQ",OnePlus:"ONEPLUS",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",GoogleTablet:"Android.*Pixel C",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835|SM-T830|SM-T837V|SM-T720|SM-T510|SM-T387V|SM-P610|SM-T290|SM-T515|SM-T590|SM-T595|SM-T725|SM-T817P|SM-P585N0|SM-T395|SM-T295|SM-T865|SM-P610N|SM-P615|SM-T970|SM-T380|SM-T5950|SM-T905|SM-T231|SM-T500|SM-T860",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30|A3-A40",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)|TB-X103F|TB-X304X|TB-X304F|TB-X304L|TB-X505F|TB-X505L|TB-X505X|TB-X605F|TB-X605L|TB-8703F|TB-8703X|TB-8703N|TB-8704N|TB-8704F|TB-8704X|TB-8704V|TB-7304F|TB-7304I|TB-7304X|Tab2A7-10F|Tab2A7-20F|TB2-X30L|YT3-X50L|YT3-X50F|YT3-X50M|YT-X705F|YT-X703F|YT-X703L|YT-X705L|YT-X705X|TB2-X30F|TB2-X30L|TB2-X30M|A2107A-F|A2107A-H|TB3-730F|TB3-730M|TB3-730X|TB-7504F|TB-7504X|TB-X704F|TB-X104F|TB3-X70F|TB-X705F|TB-8504F|TB3-X70L|TB3-710F|TB-X704L",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|SGP612|SGP712",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*\\b(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))\\b|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09|AGS-L09|CMR-AL19",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z930|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android [0-9.]+; [a-z-]+; \\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)|Qualcore 1027",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497|VFD 1400",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9|TECNO DP8D",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",VerizonTablet:"QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+|V10 \\b4G\\b",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MediacomTablet:"M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Windows Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad|AppleCoreMedia",iPadOS:"CPU OS 13",SailfishOS:"Sailfish",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+$|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"\\bEdgiOS\\b|Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version((?!\\bEdgiOS\\b).)*Mobile.*Safari|Safari.*Mobile|MobileSafari",WeChat:"\\bMicroMessenger\\b",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]",UCBrowser:["UCWEB[VER]","UC.*Browser/[VER]"],MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",SailfishBrowser:"SailfishBrowser/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",Sailfish:"Sailfish [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|Google-AMPHTML|s~amp-validator|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom|contentkingapp|AspiegelBot",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|Nintendo Switch|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},detectMobileBrowsers:{fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i}},l=Object.prototype.hasOwnProperty;function e(t,e){return null!=t&&null!=e&&t.toLowerCase()===e.toLowerCase()}function i(t,e){var i,n,r=t.length;if(!r||!e)return!1;for(i=e.toLowerCase(),n=0;n<r;++n)if(i===t[n].toLowerCase())return!0;return!1}function t(t){for(var e in t)l.call(t,e)&&(t[e]=new RegExp(t[e],"i"))}o.FALLBACK_PHONE="UnknownPhone",o.FALLBACK_TABLET="UnknownTablet",o.FALLBACK_MOBILE="UnknownMobile";var n,r,s,a,h,c,u="isArray"in Array?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},d=o.mobileDetectRules;for(n in d.props)if(l.call(d.props,n)){for(r=d.props[n],h=(r=u(r)?r:[r]).length,a=0;a<h;++a)0<=(c=(s=r[a]).indexOf("[VER]"))&&(s=s.substring(0,c)+"([\\w._\\+]+)"+s.substring(c+5)),r[a]=new RegExp(s,"i");d.props[n]=r}function p(t,e){this.ua=(t||"").substr(0,500),this._cache={},this.maxPhoneWidth=e||600}return t(d.oss),t(d.phones),t(d.tablets),t(d.uas),t(d.utils),d.oss0={WindowsPhoneOS:d.oss.WindowsPhoneOS,WindowsMobileOS:d.oss.WindowsMobileOS},o.findMatch=function(t,e){for(var i in t)if(l.call(t,i)&&t[i].test(e))return i;return null},o.findMatches=function(t,e){var i,n=[];for(i in t)l.call(t,i)&&t[i].test(e)&&n.push(i);return n},o.getVersionStr=function(t,e){var i,n,r,s,a=o.mobileDetectRules.props;if(l.call(a,t))for(r=(i=a[t]).length,n=0;n<r;++n)if(null!==(s=i[n].exec(e)))return s[1];return null},o.getVersion=function(t,e){t=o.getVersionStr(t,e);return t?o.prepareVersionNo(t):NaN},o.prepareVersionNo=function(t){var e=t.split(/[a-z._ \/\-]/i);return 1===e.length&&(t=e[0]),1<e.length&&(t=e[0]+".",e.shift(),t+=e.join("")),Number(t)},o.isMobileFallback=function(t){return o.detectMobileBrowsers.fullPattern.test(t)||o.detectMobileBrowsers.shortPattern.test(t.substr(0,4))},o.isTabletFallback=function(t){return o.detectMobileBrowsers.tabletPattern.test(t)},o.prepareDetectionCache=function(t,e,i){var n;if(t.mobile===f)return n=o.findMatch(o.mobileDetectRules.tablets,e),n?(t.mobile=t.tablet=n,void(t.phone=null)):(n=o.findMatch(o.mobileDetectRules.phones,e))?(t.mobile=t.phone=n,void(t.tablet=null)):void(o.isMobileFallback(e)?(n=p.isPhoneSized(i))===f?(t.mobile=o.FALLBACK_MOBILE,t.tablet=t.phone=null):n?(t.mobile=t.phone=o.FALLBACK_PHONE,t.tablet=null):(t.mobile=t.tablet=o.FALLBACK_TABLET,t.phone=null):o.isTabletFallback(e)?(t.mobile=t.tablet=o.FALLBACK_TABLET,t.phone=null):t.mobile=t.tablet=t.phone=null)},o.mobileGrade=function(t){var e=null!==t.mobile();return t.os("iOS")&&4.3<=t.version("iPad")||t.os("iOS")&&3.1<=t.version("iPhone")||t.os("iOS")&&3.1<=t.version("iPod")||2.1<t.version("Android")&&t.is("Webkit")||7<=t.version("Windows Phone OS")||t.is("BlackBerry")&&6<=t.version("BlackBerry")||t.match("Playbook.*Tablet")||1.4<=t.version("webOS")&&t.match("Palm|Pre|Pixi")||t.match("hp.*TouchPad")||t.is("Firefox")&&12<=t.version("Firefox")||t.is("Chrome")&&t.is("AndroidOS")&&4<=t.version("Android")||t.is("Skyfire")&&4.1<=t.version("Skyfire")&&t.is("AndroidOS")&&2.3<=t.version("Android")||t.is("Opera")&&11<t.version("Opera Mobi")&&t.is("AndroidOS")||t.is("MeeGoOS")||t.is("Tizen")||t.is("Dolfin")&&2<=t.version("Bada")||(t.is("UC Browser")||t.is("Dolfin"))&&2.3<=t.version("Android")||t.match("Kindle Fire")||t.is("Kindle")&&3<=t.version("Kindle")||t.is("AndroidOS")&&t.is("NookTablet")||11<=t.version("Chrome")&&!e||5<=t.version("Safari")&&!e||4<=t.version("Firefox")&&!e||7<=t.version("MSIE")&&!e||10<=t.version("Opera")&&!e?"A":t.os("iOS")&&t.version("iPad")<4.3||t.os("iOS")&&t.version("iPhone")<3.1||t.os("iOS")&&t.version("iPod")<3.1||t.is("Blackberry")&&5<=t.version("BlackBerry")&&t.version("BlackBerry")<6||5<=t.version("Opera Mini")&&t.version("Opera Mini")<=6.5&&(2.3<=t.version("Android")||t.is("iOS"))||t.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||11<=t.version("Opera Mobi")&&t.is("SymbianOS")?"B":(t.version("BlackBerry")<5||t.match("MSIEMobile|Windows CE.*Mobile")||t.version("Windows Mobile"),"C")},o.detectOS=function(t){return o.findMatch(o.mobileDetectRules.oss0,t)||o.findMatch(o.mobileDetectRules.oss,t)},o.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height},p.prototype={constructor:p,mobile:function(){return o.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return o.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return o.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===f&&(this._cache.userAgent=o.findMatch(o.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===f&&(this._cache.userAgents=o.findMatches(o.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===f&&(this._cache.os=o.detectOS(this.ua)),this._cache.os},version:function(t){return o.getVersion(t,this.ua)},versionStr:function(t){return o.getVersionStr(t,this.ua)},is:function(t){return i(this.userAgents(),t)||e(t,this.os())||e(t,this.phone())||e(t,this.tablet())||i(o.findMatches(o.mobileDetectRules.utils,this.ua),t)},match:function(t){return(t=t instanceof RegExp?t:new RegExp(t,"i")).test(this.ua)},isPhoneSized:function(t){return p.isPhoneSized(t||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===f&&(this._cache.grade=o.mobileGrade(this)),this._cache.grade}},"undefined"!=typeof window&&window.screen?p.isPhoneSized=function(t){return t<0?f:o.getDeviceSmallerSide()<=t}:p.isPhoneSized=function(){},p._impl=o,p.version="1.4.5 2021-03-13",p})}();const t=(e,i)=>"method"!==i.kind||!i.descriptor||"value"in i.descriptor?{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:i.key,initializer(){"function"==typeof i.initializer&&(this[i.key]=i.initializer.call(this))},finisher(t){t.createProperty(i.key,e)}}:{...i,finisher(t){t.createProperty(i.key,e)}};function e(n){return(e,i)=>void 0!==i?void e.constructor.createProperty(i,n):t(n,e)}var i;null!=(i=window.HTMLSlotElement)&&i.prototype.assignedElements;class n{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)}removeEventListener(t,e){if(void 0!==this._listeners){const i=this._listeners[t];if(void 0!==i){const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}}dispatchEvent(i){if(void 0!==this._listeners){const t=this._listeners[i.type];if(void 0!==t){i.target=this;const n=t.slice(0);for(let t=0,e=n.length;t<e;t++)n[t].call(this,i);i.target=null}}}}const s=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let r=1234567;const a=Math.PI/180,o=180/Math.PI;function l(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(s[255&t]+s[t>>8&255]+s[t>>16&255]+s[t>>24&255]+"-"+s[255&e]+s[e>>8&255]+"-"+s[e>>16&15|64]+s[e>>24&255]+"-"+s[63&i|128]+s[i>>8&255]+"-"+s[i>>16&255]+s[i>>24&255]+s[255&n]+s[n>>8&255]+s[n>>16&255]+s[n>>24&255]).toLowerCase()}function c(t,e,i){return Math.max(e,Math.min(i,t))}function h(t,e){return(t%e+e)%e}function u(t,e,i){return(1-i)*t+i*e}function d(t){return 0==(t&t-1)&&0!==t}function A(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function p(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function g(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function m(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}var f=Object.freeze({__proto__:null,DEG2RAD:a,RAD2DEG:o,generateUUID:l,clamp:c,euclideanModulo:h,mapLinear:function(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)},inverseLerp:function(t,e,i){return t!==e?(i-t)/(e-t):0},lerp:u,damp:function(t,e,i,n){return u(t,e,1-Math.exp(-i*n))},pingpong:function(t,e=1){return e-Math.abs(h(t,2*e)-e)},smoothstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){void 0!==t&&(r=t);t=r+=1831565813,t=Math.imul(t^t>>>15,1|t);return(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296},degToRad:function(t){return t*a},radToDeg:function(t){return t*o},isPowerOfTwo:d,ceilPowerOfTwo:A,floorPowerOfTwo:p,setQuaternionFromProperEuler:function(t,e,i,n,r){const s=Math.cos,a=Math.sin,o=s(i/2),l=a(i/2),h=s((e+n)/2),c=a((e+n)/2),u=s((e-n)/2),d=a((e-n)/2),p=s((n-e)/2),f=a((n-e)/2);switch(r){case"XYX":t.set(o*c,l*u,l*d,o*h);break;case"YZY":t.set(l*d,o*c,l*u,o*h);break;case"ZXZ":t.set(l*u,l*d,o*c,o*h);break;case"XZX":t.set(o*c,l*f,l*p,o*h);break;case"YXY":t.set(l*p,o*c,l*f,o*h);break;case"ZYZ":t.set(l*f,l*p,o*c,o*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:m,denormalize:g});class v{constructor(t=0,e=0){v.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){var e=this.x,i=this.y,t=t.elements;return this.x=t[0]*e+t[3]*i+t[6],this.y=t[1]*e+t[4]*i+t[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){var e=this.x-t.x,t=this.y-t.y;return e*e+t*t}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){var i=Math.cos(e),e=Math.sin(e),n=this.x-t.x,r=this.y-t.y;return this.x=n*i-r*e+t.x,this.y=n*e+r*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class y{constructor(){y.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,i,n,r,s,a,o,l){const h=this.elements;return h[0]=t,h[1]=n,h[2]=a,h[3]=e,h[4]=r,h[5]=o,h[6]=i,h[7]=s,h[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){t=t.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,n=e.elements,r=this.elements,s=i[0],a=i[3],o=i[6],l=i[1],h=i[4],c=i[7],u=i[2],d=i[5],p=i[8],f=n[0],m=n[3],g=n[6],A=n[1],v=n[4],y=n[7],_=n[2],b=n[5],x=n[8];return r[0]=s*f+a*A+o*_,r[3]=s*m+a*v+o*b,r[6]=s*g+a*y+o*x,r[1]=l*f+h*A+c*_,r[4]=l*m+h*v+c*b,r[7]=l*g+h*y+c*x,r[2]=u*f+d*A+p*_,r[5]=u*m+d*v+p*b,r[8]=u*g+d*y+p*x,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){var t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],t=t[8];return e*s*t-e*a*l-i*r*t+i*a*o+n*r*l-n*s*o}invert(){const t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],h=t[8],c=h*s-a*l,u=a*o-h*r,d=l*r-s*o,p=e*c+i*u+n*d;if(0==p)return this.set(0,0,0,0,0,0,0,0,0);var f=1/p;return t[0]=c*f,t[1]=(n*l-h*i)*f,t[2]=(a*i-n*s)*f,t[3]=u*f,t[4]=(h*e-n*o)*f,t[5]=(n*r-a*e)*f,t[6]=d*f,t[7]=(i*o-l*e)*f,t[8]=(s*e-i*r)*f,this}transpose(){var t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,n,r,s,a){var o=Math.cos(r),r=Math.sin(r);return this.set(i*o,i*r,-i*(o*s+r*a)+s+t,-n*r,n*o,-n*(-r*s+o*a)+a+e,0,0,1),this}scale(t,e){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),n=this.elements,r=n[0],s=n[3],a=n[6],o=n[1],l=n[4],h=n[7];return n[0]=e*r+i*o,n[3]=e*s+i*l,n[6]=e*a+i*h,n[1]=-i*r+e*o,n[4]=-i*s+e*l,n[7]=-i*a+e*h,this}translate(t,e){const i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this}equals(t){var e=this.elements,i=t.elements;for(let t=0;t<9;t++)if(e[t]!==i[t])return!1;return!0}fromArray(e,i=0){for(let t=0;t<9;t++)this.elements[t]=e[t+i];return this}toArray(t=[],e=0){var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function x(e){for(let t=e.length-1;0<=t;--t)if(65535<=e[t])return!0;return!1}function _(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function E(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function w(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const b={srgb:{"srgb-linear":E},"srgb-linear":{srgb:w}},I={legacyMode:!0,get workingColorSpace(){return"srgb-linear"},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,i){if(this.legacyMode||e===i||!e||!i)return t;if(b[e]&&void 0!==b[e][i]){const n=b[e][i];return t.r=n(t.r),t.g=n(t.g),t.b=n(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},C={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},S={r:0,g:0,b:0},M={h:0,s:0,l:0},B={h:0,s:0,l:0};function T(t,e,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}function R(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}class D{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e="srgb"){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,I.toWorkingColorSpace(this,e),this}setRGB(t,e,i,n="srgb-linear"){return this.r=t,this.g=e,this.b=i,I.toWorkingColorSpace(this,n),this}setHSL(t,e,i,n="srgb-linear"){if(t=h(t,1),e=c(e,0,1),i=c(i,0,1),0===e)this.r=this.g=this.b=i;else{const n=i<=.5?i*(1+e):i+e-i*e,r=2*i-n;this.r=T(r,n,t+1/3),this.g=T(r,n,t),this.b=T(r,n,t-1/3)}return I.toWorkingColorSpace(this,n),this}setStyle(e,i="srgb"){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let t;var s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,I.toWorkingColorSpace(this,i),n(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,I.toWorkingColorSpace(this,i),n(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const r=parseFloat(t[1])/360,o=parseFloat(t[2])/100,l=parseFloat(t[3])/100;return n(t[4]),this.setHSL(r,o,l,i)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=r[1],n=e.length;if(3===n)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,I.toWorkingColorSpace(this,i),this;if(6===n)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,I.toWorkingColorSpace(this,i),this}return e&&0<e.length?this.setColorName(e,i):this}setColorName(t,e="srgb"){var i=C[t.toLowerCase()];return void 0!==i?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=E(t.r),this.g=E(t.g),this.b=E(t.b),this}copyLinearToSRGB(t){return this.r=w(t.r),this.g=w(t.g),this.b=w(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t="srgb"){return I.fromWorkingColorSpace(R(this,S),t),c(255*S.r,0,255)<<16^c(255*S.g,0,255)<<8^c(255*S.b,0,255)<<0}getHexString(t="srgb"){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e="srgb-linear"){I.fromWorkingColorSpace(R(this,S),e);var i=S.r,n=S.g,r=S.b,e=Math.max(i,n,r),s=Math.min(i,n,r);let a,o;var l=(s+e)/2;if(s===e)a=0,o=0;else{const t=e-s;switch(o=l<=.5?t/(e+s):t/(2-e-s),e){case i:a=(n-r)/t+(n<r?6:0);break;case n:a=(r-i)/t+2;break;case r:a=(i-n)/t+4}a/=6}return t.h=a,t.s=o,t.l=l,t}getRGB(t,e="srgb-linear"){return I.fromWorkingColorSpace(R(this,S),e),t.r=S.r,t.g=S.g,t.b=S.b,t}getStyle(t="srgb"){return I.fromWorkingColorSpace(R(this,S),t),"srgb"!==t?`color(${t} ${S.r} ${S.g} ${S.b})`:`rgb(${255*S.r|0},${255*S.g|0},${255*S.b|0})`}offsetHSL(t,e,i){return this.getHSL(M),M.h+=t,M.s+=e,M.l+=i,this.setHSL(M.h,M.s,M.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(M),t.getHSL(B);var t=u(M.h,B.h,e),i=u(M.s,B.s,e),e=u(M.l,B.l,e);return this.setHSL(t,i,e),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let L;D.NAMES=C;class Q{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{(L=void 0===L?_("canvas"):L).width=t.width,L.height=t.height;const i=L.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=L}return 2048<e.width||2048<e.height?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=_("canvas"),i=(e.width=t.width,e.height=t.height,e.getContext("2d")),n=(i.drawImage(t,0,0,t.width,t.height),i.getImageData(0,0,t.width,t.height)),r=n.data;for(let t=0;t<r.length;t++)r[t]=255*E(r[t]/255);return i.putImageData(n,0,0),e}if(t.data){const s=t.data.slice(0);for(let t=0;t<s.length;t++)s instanceof Uint8Array||s instanceof Uint8ClampedArray?s[t]=Math.floor(255*E(s[t]/255)):s[t]=E(s[t]);return{data:s,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class P{constructor(t=null){this.isSource=!0,this.uuid=l(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let i;if(Array.isArray(r)){i=[];for(let t=0,e=r.length;t<e;t++)r[t].isDataTexture?i.push(F(r[t].image)):i.push(F(r[t]))}else i=F(r);n.url=i}return e||(t.images[this.uuid]=n),n}}function F(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?Q.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let U=0;class N extends n{constructor(t=N.DEFAULT_IMAGE,e=N.DEFAULT_MAPPING,i=1001,n=1001,r=1006,s=1008,a=1023,o=1009,h=1,c=3e3){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:U++}),this.uuid=l(),this.name="",this.source=new P(t),this.mipmaps=[],this.mapping=e,this.wrapS=i,this.wrapT=n,this.magFilter=r,this.minFilter=s,this.anisotropy=h,this.format=a,this.internalFormat=null,this.type=o,this.offset=new v(0,0),this.repeat=new v(1,1),this.center=new v(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new y,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||1<t.x)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case 1001:t.x=t.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||1<t.y)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case 1001:t.y=t.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}N.DEFAULT_IMAGE=null,N.DEFAULT_MAPPING=300;class k{constructor(t=0,e=0,i=0,n=1){k.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=n}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){var e=this.x,i=this.y,n=this.z,r=this.w,t=t.elements;return this.x=t[0]*e+t[4]*i+t[8]*n+t[12]*r,this.y=t[1]*e+t[5]*i+t[9]*n+t[13]*r,this.z=t[2]*e+t[6]*i+t[10]*n+t[14]*r,this.w=t[3]*e+t[7]*i+t[11]*n+t[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,n,r;const s=t.elements,a=s[0],o=s[4],l=s[8],h=s[1],c=s[5],u=s[9],d=s[2],p=s[6],f=s[10];if(Math.abs(o-h)<.01&&Math.abs(l-d)<.01&&Math.abs(u-p)<.01){if(Math.abs(o+h)<.1&&Math.abs(l+d)<.1&&Math.abs(u+p)<.1&&Math.abs(a+c+f-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const t=(a+1)/2,s=(c+1)/2,m=(f+1)/2,g=(o+h)/4,A=(l+d)/4,v=(u+p)/4;return t>s&&t>m?r=t<.01?(i=0,n=.707106781):(i=Math.sqrt(t),n=g/i,A/i):s>m?r=s<.01?(i=.707106781,n=0,.707106781):(n=Math.sqrt(s),i=g/n,v/n):m<.01?(i=.707106781,n=.707106781,r=0):(r=Math.sqrt(m),i=A/r,n=v/r),this.set(i,n,r,e),this}let m=Math.sqrt((p-u)*(p-u)+(l-d)*(l-d)+(h-o)*(h-o));return Math.abs(m)<.001&&(m=1),this.x=(p-u)/m,this.y=(l-d)/m,this.z=(h-o)/m,this.w=Math.acos((a+c+f-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class O extends n{constructor(t,e,i={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new k(0,0,t,e),this.scissorTest=!1,this.viewport=new k(0,0,t,e);t={width:t,height:e,depth:1};this.texture=new N(t,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:1006,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(t,e,i=1){this.width===t&&this.height===e&&this.depth===i||(this.width=t,this.height=e,this.depth=i,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;var e=Object.assign({},t.texture.image);return this.texture.source=new P(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class G extends N{constructor(t=null,e=1,i=1,n=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:n},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class H extends N{constructor(t=null,e=1,i=1,n=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:n},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class z{constructor(t=0,e=0,i=0,n=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=n}static slerpFlat(e,i,n,r,s,a,o){let l=n[r+0],h=n[r+1],c=n[r+2],u=n[r+3];var d=s[a+0],p=s[a+1],f=s[a+2],a=s[a+3];if(0===o)return e[i+0]=l,e[i+1]=h,e[i+2]=c,void(e[i+3]=u);if(1===o)return e[i+0]=d,e[i+1]=p,e[i+2]=f,void(e[i+3]=a);if(u!==a||l!==d||h!==p||c!==f){let t=1-o;const i=l*d+h*p+c*f+u*a,n=0<=i?1:-1,r=1-i*i;if(r>Number.EPSILON){const s=Math.sqrt(r),a=Math.atan2(s,i*n);t=Math.sin(t*a)/s,o=Math.sin(o*a)/s}const s=o*n;if(l=l*t+d*s,h=h*t+p*s,c=c*t+f*s,u=u*t+a*s,t===1-o){const e=1/Math.sqrt(l*l+h*h+c*c+u*u);l*=e,h*=e,c*=e,u*=e}}e[i]=l,e[i+1]=h,e[i+2]=c,e[i+3]=u}static multiplyQuaternionsFlat(t,e,i,n,r,s){var a=i[n],o=i[n+1],l=i[n+2],i=i[n+3],n=r[s],h=r[s+1],c=r[s+2],r=r[s+3];return t[e]=a*r+i*n+o*c-l*h,t[e+1]=o*r+i*h+l*n-a*c,t[e+2]=l*r+i*c+a*h-o*n,t[e+3]=i*r-a*n-o*h-l*c,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const i=t._x,n=t._y,r=t._z,s=t._order,a=Math.cos,o=Math.sin,l=a(i/2),h=a(n/2),c=a(r/2),u=o(i/2),d=o(n/2),p=o(r/2);switch(s){case"XYZ":this._x=u*h*c+l*d*p,this._y=l*d*c-u*h*p,this._z=l*h*p+u*d*c,this._w=l*h*c-u*d*p;break;case"YXZ":this._x=u*h*c+l*d*p,this._y=l*d*c-u*h*p,this._z=l*h*p-u*d*c,this._w=l*h*c+u*d*p;break;case"ZXY":this._x=u*h*c-l*d*p,this._y=l*d*c+u*h*p,this._z=l*h*p+u*d*c,this._w=l*h*c-u*d*p;break;case"ZYX":this._x=u*h*c-l*d*p,this._y=l*d*c+u*h*p,this._z=l*h*p-u*d*c,this._w=l*h*c+u*d*p;break;case"YZX":this._x=u*h*c+l*d*p,this._y=l*d*c+u*h*p,this._z=l*h*p-u*d*c,this._w=l*h*c-u*d*p;break;case"XZY":this._x=u*h*c-l*d*p,this._y=l*d*c-u*h*p,this._z=l*h*p+u*d*c,this._w=l*h*c+u*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){var e=e/2,i=Math.sin(e);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(e),this._onChangeCallback(),this}setFromRotationMatrix(t){var t=t.elements,e=t[0],i=t[4],n=t[8],r=t[1],s=t[5],a=t[9],o=t[2],l=t[6],h=t[10],c=e+s+h;if(0<c){const t=.5/Math.sqrt(c+1);this._w=.25/t,this._x=(l-a)*t,this._y=(n-o)*t,this._z=(r-i)*t}else if(s<e&&h<e){const t=2*Math.sqrt(1+e-s-h);this._w=(l-a)/t,this._x=.25*t,this._y=(i+r)/t,this._z=(n+o)/t}else if(h<s){const t=2*Math.sqrt(1+s-e-h);this._w=(n-o)/t,this._x=(i+r)/t,this._y=.25*t,this._z=(a+l)/t}else{const t=2*Math.sqrt(1+h-e-s);this._w=(r-i)/t,this._x=(n+o)/t,this._y=(a+l)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0):(this._x=0,this._y=-t.z,this._z=t.y)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x),this._w=i,this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(c(this.dot(t),-1,1)))}rotateTowards(t,e){var i=this.angleTo(t);if(0===i)return this;e=Math.min(1,e/i);return this.slerp(t,e),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(t=1/t),this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){var i=t._x,n=t._y,r=t._z,t=t._w,s=e._x,a=e._y,o=e._z,e=e._w;return this._x=i*e+t*s+n*o-r*a,this._y=n*e+t*a+r*s-i*o,this._z=r*e+t*o+i*a-n*s,this._w=t*e-i*s-n*a-r*o,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,n=this._y,r=this._z,s=this._w;let a=s*t._w+i*t._x+n*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),1<=a)return this._w=s,this._x=i,this._y=n,this._z=r,this;t=1-a*a;if(t<=Number.EPSILON){const t=1-e;return this._w=t*s+e*this._w,this._x=t*i+e*this._x,this._y=t*n+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}var t=Math.sqrt(t),o=Math.atan2(t,a),l=Math.sin((1-e)*o)/t,e=Math.sin(e*o)/t;return this._w=s*l+this._w*e,this._x=i*l+this._x*e,this._y=n*l+this._y*e,this._z=r*l+this._z*e,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){var t=Math.random(),e=Math.sqrt(1-t),t=Math.sqrt(t),i=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(e*Math.cos(i),t*Math.sin(n),t*Math.cos(n),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class V{constructor(t=0,e=0,i=0){V.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(q.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(q.setFromAxisAngle(t,e))}applyMatrix3(t){var e=this.x,i=this.y,n=this.z,t=t.elements;return this.x=t[0]*e+t[3]*i+t[6]*n,this.y=t[1]*e+t[4]*i+t[7]*n,this.z=t[2]*e+t[5]*i+t[8]*n,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){var e=this.x,i=this.y,n=this.z,t=t.elements,r=1/(t[3]*e+t[7]*i+t[11]*n+t[15]);return this.x=(t[0]*e+t[4]*i+t[8]*n+t[12])*r,this.y=(t[1]*e+t[5]*i+t[9]*n+t[13])*r,this.z=(t[2]*e+t[6]*i+t[10]*n+t[14])*r,this}applyQuaternion(t){var e=this.x,i=this.y,n=this.z,r=t.x,s=t.y,a=t.z,t=t.w,o=t*e+s*n-a*i,l=t*i+a*e-r*n,h=t*n+r*i-s*e,e=-r*e-s*i-a*n;return this.x=o*t+e*-r+l*-a-h*-s,this.y=l*t+e*-s+h*-r-o*-a,this.z=h*t+e*-a+o*-s-l*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){var e=this.x,i=this.y,n=this.z,t=t.elements;return this.x=t[0]*e+t[4]*i+t[8]*n,this.y=t[1]*e+t[5]*i+t[9]*n,this.z=t[2]*e+t[6]*i+t[10]*n,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){var i=t.x,n=t.y,t=t.z,r=e.x,s=e.y,e=e.z;return this.x=n*e-t*s,this.y=t*r-i*e,this.z=i*s-n*r,this}projectOnVector(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);e=t.dot(this)/e;return this.copy(t).multiplyScalar(e)}projectOnPlane(t){return W.copy(this).projectOnVector(t),this.sub(W)}reflect(t){return this.sub(W.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;t=this.dot(t)/e;return Math.acos(c(t,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){var e=this.x-t.x,i=this.y-t.y,t=this.z-t.z;return e*e+i*i+t*t}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){var n=Math.sin(e)*t;return this.x=n*Math.sin(i),this.y=Math.cos(e)*t,this.z=n*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){t=t.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),t=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=t,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){var t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,i=Math.sqrt(1-t**2);return this.x=i*Math.cos(e),this.y=i*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const W=new V,q=new z;class j{constructor(t=new V(1/0,1/0,1/0),e=new V(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(i){let n=1/0,r=1/0,s=1/0,a=-1/0,o=-1/0,l=-1/0;for(let t=0,e=i.length;t<e;t+=3){var h=i[t],c=i[t+1],u=i[t+2];h<n&&(n=h),c<r&&(r=c),u<s&&(s=u),h>a&&(a=h),c>o&&(o=c),u>l&&(l=u)}return this.min.set(n,r,s),this.max.set(a,o,l),this}setFromBufferAttribute(i){let n=1/0,r=1/0,s=1/0,a=-1/0,o=-1/0,l=-1/0;for(let t=0,e=i.count;t<e;t++){var h=i.getX(t),c=i.getY(t),u=i.getZ(t);h<n&&(n=h),c<r&&(r=c),u<s&&(s=u),h>a&&(a=h),c>o&&(o=c),u>l&&(l=u)}return this.min.set(n,r,s),this.max.set(a,o,l),this}setFromPoints(i){this.makeEmpty();for(let t=0,e=i.length;t<e;t++)this.expandByPoint(i[t]);return this}setFromCenterAndSize(t,e){e=J.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(e),this.max.copy(t).add(e),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(i,n=!1){i.updateWorldMatrix(!1,!1);const t=i.geometry;if(void 0!==t)if(n&&null!=t.attributes&&void 0!==t.attributes.position){const n=t.attributes.position;for(let t=0,e=n.count;t<e;t++)J.fromBufferAttribute(n,t).applyMatrix4(i.matrixWorld),this.expandByPoint(J)}else null===t.boundingBox&&t.computeBoundingBox(),X.copy(t.boundingBox),X.applyMatrix4(i.matrixWorld),this.union(X);var r=i.children;for(let t=0,e=r.length;t<e;t++)this.expandByObject(r[t],n);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,J),J.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return i=0<t.normal.x?(e=t.normal.x*this.min.x,t.normal.x*this.max.x):(e=t.normal.x*this.max.x,t.normal.x*this.min.x),0<t.normal.y?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){return!this.isEmpty()&&(this.getCenter(nt),st.subVectors(this.max,nt),K.subVectors(t.a,nt),$.subVectors(t.b,nt),Z.subVectors(t.c,nt),tt.subVectors($,K),et.subVectors(Z,$),it.subVectors(K,Z),!!ot([0,-tt.z,tt.y,0,-et.z,et.y,0,-it.z,it.y,tt.z,0,-tt.x,et.z,0,-et.x,it.z,0,-it.x,-tt.y,tt.x,0,-et.y,et.x,0,-it.y,it.x,0],K,$,Z,st)&&(!!ot([1,0,0,0,1,0,0,0,1],K,$,Z,st)&&(rt.crossVectors(tt,et),ot([rt.x,rt.y,rt.z],K,$,Z,st))))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return J.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(J).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Y[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Y[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Y[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Y[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Y[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Y[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Y[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Y[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Y)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Y=[new V,new V,new V,new V,new V,new V,new V,new V],J=new V,X=new j,K=new V,$=new V,Z=new V,tt=new V,et=new V,it=new V,nt=new V,st=new V,rt=new V,at=new V;function ot(i,n,r,s,a){for(let t=0,e=i.length-3;t<=e;t+=3){at.fromArray(i,t);var o=a.x*Math.abs(at.x)+a.y*Math.abs(at.y)+a.z*Math.abs(at.z),l=n.dot(at),h=r.dot(at),c=s.dot(at);if(Math.max(-Math.max(l,h,c),Math.min(l,h,c))>o)return!1}return!0}const lt=new j,ct=new V,ht=new V,ut=new V;class dt{constructor(t=new V,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(i,t){const n=this.center;void 0!==t?n.copy(t):lt.setFromPoints(i).getCenter(n);let r=0;for(let t=0,e=i.length;t<e;t++)r=Math.max(r,n.distanceToSquared(i[t]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){var i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?t.makeEmpty():(t.set(this.center,this.center),t.expandByScalar(this.radius)),t}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){ut.subVectors(t,this.center);var e=ut.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),i=.5*(t-this.radius);this.center.add(ut.multiplyScalar(i/t)),this.radius+=i}return this}union(t){return(!0===this.center.equals(t.center)?ht.set(0,0,1):ht.subVectors(t.center,this.center).normalize()).multiplyScalar(t.radius),this.expandByPoint(ct.copy(t.center).add(ht)),this.expandByPoint(ct.copy(t.center).sub(ht)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const At=new V,pt=new V,gt=new V,mt=new V,ft=new V,vt=new V,yt=new V;class xt{constructor(t=new V,e=new V(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,At)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);t=e.dot(this.direction);return t<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(t).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){var e=At.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(At.copy(this.direction).multiplyScalar(e).add(this.origin),At.distanceToSquared(t))}distanceSqToSegment(t,e,i,n){pt.copy(t).add(e).multiplyScalar(.5),gt.copy(e).sub(t).normalize(),mt.copy(this.origin).sub(pt);var t=.5*t.distanceTo(e),e=-this.direction.dot(gt),r=mt.dot(this.direction),s=-mt.dot(gt),a=mt.lengthSq(),o=Math.abs(1-e*e);let l,h,c,u;if(0<o)if(l=e*s-r,h=e*r-s,u=t*o,0<=l)if(h>=-u)if(h<=u){const t=1/o;l*=t,h*=t,c=l*(l+e*h+2*r)+h*(e*l+h+2*s)+a}else h=t,l=Math.max(0,-(e*h+r)),c=-l*l+h*(h+2*s)+a;else h=-t,l=Math.max(0,-(e*h+r)),c=-l*l+h*(h+2*s)+a;else c=h<=-u?(l=Math.max(0,-(-e*t+r)),h=0<l?-t:Math.min(Math.max(-t,-s),t),-l*l+h*(h+2*s)+a):h<=u?(l=0,(h=Math.min(Math.max(-t,-s),t))*(h+2*s)+a):(l=Math.max(0,-(e*t+r)),h=0<l?t:Math.min(Math.max(-t,-s),t),-l*l+h*(h+2*s)+a);else h=0<e?-t:t,l=Math.max(0,-(e*h+r)),c=-l*l+h*(h+2*s)+a;return i&&i.copy(this.direction).multiplyScalar(l).add(this.origin),n&&n.copy(gt).multiplyScalar(h).add(pt),c}intersectSphere(t,e){At.subVectors(t.center,this.origin);var i=At.dot(this.direction),n=At.dot(At)-i*i,t=t.radius*t.radius;if(t<n)return null;t=Math.sqrt(t-n),n=i-t,i+=t;return n<0&&i<0?null:n<0?this.at(i,e):this.at(n,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;t=-(this.origin.dot(t.normal)+t.constant)/e;return 0<=t?t:null}intersectPlane(t,e){t=this.distanceToPlane(t);return null===t?null:this.at(t,e)}intersectsPlane(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,n,r,s,a,o;var l=1/this.direction.x,h=1/this.direction.y,c=1/this.direction.z,u=this.origin;return n=0<=l?(i=(t.min.x-u.x)*l,(t.max.x-u.x)*l):(i=(t.max.x-u.x)*l,(t.min.x-u.x)*l),s=0<=h?(r=(t.min.y-u.y)*h,(t.max.y-u.y)*h):(r=(t.max.y-u.y)*h,(t.min.y-u.y)*h),i>s||r>n?null:((r>i||i!=i)&&(i=r),(s<n||n!=n)&&(n=s),o=0<=c?(a=(t.min.z-u.z)*c,(t.max.z-u.z)*c):(a=(t.max.z-u.z)*c,(t.min.z-u.z)*c),i>o||a>n?null:((a>i||i!=i)&&(i=a),(n=o<n||n!=n?o:n)<0?null:this.at(0<=i?i:n,e)))}intersectsBox(t){return null!==this.intersectBox(t,At)}intersectTriangle(t,e,i,n,r){ft.subVectors(e,t),vt.subVectors(i,t),yt.crossVectors(ft,vt);let s,a=this.direction.dot(yt);if(0<a){if(n)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}mt.subVectors(this.origin,t);e=s*this.direction.dot(vt.crossVectors(mt,vt));if(e<0)return null;i=s*this.direction.dot(ft.cross(mt));if(i<0)return null;if(e+i>a)return null;n=-s*mt.dot(yt);return n<0?null:this.at(n/a,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class _t{constructor(){_t.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,i,n,r,s,a,o,l,h,c,u,d,p,f,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=n,g[1]=r,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=h,g[10]=c,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new _t).fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){t=t.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,n=1/Et.setFromMatrixColumn(t,0).length(),r=1/Et.setFromMatrixColumn(t,1).length(),s=1/Et.setFromMatrixColumn(t,2).length();return e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[3]=0,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=0,e[8]=i[8]*s,e[9]=i[9]*s,e[10]=i[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,i=t.x,n=t.y,r=t.z,s=Math.cos(i),a=Math.sin(i),o=Math.cos(n),l=Math.sin(n),h=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){const t=s*h,i=s*c,n=a*h,r=a*c;e[0]=o*h,e[4]=-o*c,e[8]=l,e[1]=i+n*l,e[5]=t-r*l,e[9]=-a*o,e[2]=r-t*l,e[6]=n+i*l,e[10]=s*o}else if("YXZ"===t.order){const t=o*h,i=o*c,n=l*h,r=l*c;e[0]=t+r*a,e[4]=n*a-i,e[8]=s*l,e[1]=s*c,e[5]=s*h,e[9]=-a,e[2]=i*a-n,e[6]=r+t*a,e[10]=s*o}else if("ZXY"===t.order){const t=o*h,i=o*c,n=l*h,r=l*c;e[0]=t-r*a,e[4]=-s*c,e[8]=n+i*a,e[1]=i+n*a,e[5]=s*h,e[9]=r-t*a,e[2]=-s*l,e[6]=a,e[10]=s*o}else if("ZYX"===t.order){const t=s*h,i=s*c,n=a*h,r=a*c;e[0]=o*h,e[4]=n*l-i,e[8]=t*l+r,e[1]=o*c,e[5]=r*l+t,e[9]=i*l-n,e[2]=-l,e[6]=a*o,e[10]=s*o}else if("YZX"===t.order){const t=s*o,i=s*l,n=a*o,r=a*l;e[0]=o*h,e[4]=r-t*c,e[8]=n*c+i,e[1]=c,e[5]=s*h,e[9]=-a*h,e[2]=-l*h,e[6]=i*c+n,e[10]=t-r*c}else if("XZY"===t.order){const t=s*o,i=s*l,n=a*o,r=a*l;e[0]=o*h,e[4]=-c,e[8]=l*h,e[1]=t*c+r,e[5]=s*h,e[9]=i*c-n,e[2]=n*c-i,e[6]=a*h,e[10]=r*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(bt,t,It)}lookAt(t,e,i){const n=this.elements;return Mt.subVectors(t,e),0===Mt.lengthSq()&&(Mt.z=1),Mt.normalize(),Ct.crossVectors(i,Mt),0===Ct.lengthSq()&&(1===Math.abs(i.z)?Mt.x+=1e-4:Mt.z+=1e-4,Mt.normalize(),Ct.crossVectors(i,Mt)),Ct.normalize(),St.crossVectors(Mt,Ct),n[0]=Ct.x,n[4]=St.x,n[8]=Mt.x,n[1]=Ct.y,n[5]=St.y,n[9]=Mt.y,n[2]=Ct.z,n[6]=St.z,n[10]=Mt.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,N){const e=t.elements,i=N.elements,n=this.elements,r=e[0],s=e[4],a=e[8],o=e[12],l=e[1],h=e[5],c=e[9],u=e[13],d=e[2],p=e[6],f=e[10],m=e[14],g=e[3],A=e[7],v=e[11],y=e[15],_=i[0],b=i[4],x=i[8],S=i[12],w=i[1],E=i[5],C=i[9],T=i[13],M=i[2],I=i[6],B=i[10],D=i[14],P=i[3],L=i[7],R=i[11],k=i[15];return n[0]=r*_+s*w+a*M+o*P,n[4]=r*b+s*E+a*I+o*L,n[8]=r*x+s*C+a*B+o*R,n[12]=r*S+s*T+a*D+o*k,n[1]=l*_+h*w+c*M+u*P,n[5]=l*b+h*E+c*I+u*L,n[9]=l*x+h*C+c*B+u*R,n[13]=l*S+h*T+c*D+u*k,n[2]=d*_+p*w+f*M+m*P,n[6]=d*b+p*E+f*I+m*L,n[10]=d*x+p*C+f*B+m*R,n[14]=d*S+p*T+f*D+m*k,n[3]=g*_+A*w+v*M+y*P,n[7]=g*b+A*E+v*I+y*L,n[11]=g*x+A*C+v*B+y*R,n[15]=g*S+A*T+v*D+y*k,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){var t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],s=t[1],a=t[5],o=t[9],l=t[13],h=t[2],c=t[6],u=t[10],d=t[14];return t[3]*(+r*o*c-n*l*c-r*a*u+i*l*u+n*a*d-i*o*d)+t[7]*(+e*o*d-e*l*u+r*s*u-n*s*d+n*l*h-r*o*h)+t[11]*(+e*l*c-e*a*d-r*s*c+i*s*d+r*a*h-i*l*h)+t[15]*(-n*a*h-e*o*c+e*a*u+n*s*c-i*s*u+i*o*h)}transpose(){const t=this.elements;var e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const n=this.elements;return t.isVector3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=e,n[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],h=t[8],c=t[9],u=t[10],d=t[11],p=t[12],f=t[13],m=t[14],g=t[15],A=c*m*l-f*u*l+f*o*d-a*m*d-c*o*g+a*u*g,v=p*u*l-h*m*l-p*o*d+s*m*d+h*o*g-s*u*g,y=h*f*l-p*c*l+p*a*d-s*f*d-h*a*g+s*c*g,_=p*c*o-h*f*o-p*a*u+s*f*u+h*a*m-s*c*m,b=e*A+i*v+n*y+r*_;if(0==b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var x=1/b;return t[0]=A*x,t[1]=(f*u*r-c*m*r-f*n*d+i*m*d+c*n*g-i*u*g)*x,t[2]=(a*m*r-f*o*r+f*n*l-i*m*l-a*n*g+i*o*g)*x,t[3]=(c*o*r-a*u*r-c*n*l+i*u*l+a*n*d-i*o*d)*x,t[4]=v*x,t[5]=(h*m*r-p*u*r+p*n*d-e*m*d-h*n*g+e*u*g)*x,t[6]=(p*o*r-s*m*r-p*n*l+e*m*l+s*n*g-e*o*g)*x,t[7]=(s*u*r-h*o*r+h*n*l-e*u*l-s*n*d+e*o*d)*x,t[8]=y*x,t[9]=(p*c*r-h*f*r-p*i*d+e*f*d+h*i*g-e*c*g)*x,t[10]=(s*f*r-p*a*r+p*i*l-e*f*l-s*i*g+e*a*g)*x,t[11]=(h*a*r-s*c*r-h*i*l+e*c*l+s*i*d-e*a*d)*x,t[12]=_*x,t[13]=(h*f*n-p*c*n+p*i*u-e*f*u-h*i*m+e*c*m)*x,t[14]=(p*a*n-s*f*n-p*i*o+e*f*o+s*i*m-e*a*m)*x,t[15]=(s*c*n-h*a*n+h*i*o-e*c*o-s*i*u+e*a*u)*x,this}scale(t){const e=this.elements,i=t.x,n=t.y,r=t.z;return e[0]*=i,e[4]*=n,e[8]*=r,e[1]*=i,e[5]*=n,e[9]*=r,e[2]*=i,e[6]*=n,e[10]*=r,e[3]*=i,e[7]*=n,e[11]*=r,this}getMaxScaleOnAxis(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,t))}makeTranslation(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){var e=Math.cos(t),t=Math.sin(t);return this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this}makeRotationY(t){var e=Math.cos(t),t=Math.sin(t);return this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this}makeRotationZ(t){var e=Math.cos(t),t=Math.sin(t);return this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){var i=Math.cos(e),e=Math.sin(e),n=1-i,r=t.x,s=t.y,t=t.z,a=n*r,o=n*s;return this.set(a*r+i,a*s-e*t,a*t+e*s,0,a*s+e*t,o*s+i,o*t-e*r,0,a*t-e*s,o*t+e*r,n*t*t+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,n,r,s){return this.set(1,i,r,0,t,1,s,0,e,n,1,0,0,0,0,1),this}compose(t,e,i){const n=this.elements,r=e._x,s=e._y,a=e._z,o=e._w,l=r+r,h=s+s,c=a+a,u=r*l,d=r*h,p=r*c,f=s*h,m=s*c,g=a*c,A=o*l,v=o*h,y=o*c,_=i.x,b=i.y,x=i.z;return n[0]=(1-(f+g))*_,n[1]=(d+y)*_,n[2]=(p-v)*_,n[3]=0,n[4]=(d-y)*b,n[5]=(1-(u+g))*b,n[6]=(m+A)*b,n[7]=0,n[8]=(p+v)*x,n[9]=(m-A)*x,n[10]=(1-(u+f))*x,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this}decompose(t,e,i){var n=this.elements;let r=Et.set(n[0],n[1],n[2]).length();var s=Et.set(n[4],n[5],n[6]).length(),a=Et.set(n[8],n[9],n[10]).length(),t=(this.determinant()<0&&(r=-r),t.x=n[12],t.y=n[13],t.z=n[14],wt.copy(this),1/r),n=1/s,o=1/a;return wt.elements[0]*=t,wt.elements[1]*=t,wt.elements[2]*=t,wt.elements[4]*=n,wt.elements[5]*=n,wt.elements[6]*=n,wt.elements[8]*=o,wt.elements[9]*=o,wt.elements[10]*=o,e.setFromRotationMatrix(wt),i.x=r,i.y=s,i.z=a,this}makePerspective(t,e,i,n,r,s){const a=this.elements,o=2*r/(e-t),l=2*r/(i-n),h=(e+t)/(e-t),c=(i+n)/(i-n),u=-(s+r)/(s-r),d=-2*s*r/(s-r);return a[0]=o,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=u,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,i,n,r,s){const a=this.elements,o=1/(e-t),l=1/(i-n),h=1/(s-r),c=(e+t)*o,u=(i+n)*l,d=(s+r)*h;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-u,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){var e=this.elements,i=t.elements;for(let t=0;t<16;t++)if(e[t]!==i[t])return!1;return!0}fromArray(e,i=0){for(let t=0;t<16;t++)this.elements[t]=e[t+i];return this}toArray(t=[],e=0){var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const Et=new V,wt=new _t,bt=new V(0,0,0),It=new V(1,1,1),Ct=new V,St=new V,Mt=new V,Bt=new _t,Tt=new z;class Rt{constructor(t=0,e=0,i=0,n=Rt.DefaultOrder){this.isEuler=!0,this._x=t,this._y=e,this._z=i,this._order=n}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,n=this._order){return this._x=t,this._y=e,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){var t=t.elements,n=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],h=t[2],u=t[6],d=t[10];switch(e){case"XYZ":this._y=Math.asin(c(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-r,n)):(this._x=Math.atan2(u,o),this._z=0);break;case"YXZ":this._x=Math.asin(-c(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(a,o)):(this._y=Math.atan2(-h,n),this._z=0);break;case"ZXY":this._x=Math.asin(c(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-r,o)):(this._y=0,this._z=Math.atan2(a,n));break;case"ZYX":this._y=Math.asin(-c(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(u,d),this._z=Math.atan2(a,n)):(this._x=0,this._z=Math.atan2(-r,o));break;case"YZX":this._z=Math.asin(c(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,o),this._y=Math.atan2(-h,n)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-c(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(u,o),this._y=Math.atan2(s,n)):(this._x=Math.atan2(-l,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===i&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return Bt.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Bt,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return Tt.setFromEuler(this),this.setFromQuaternion(Tt,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Rt.DefaultOrder="XYZ",Rt.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Dt{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let Lt=0;const Qt=new V,Pt=new z,Ft=new _t,Ut=new V,Nt=new V,kt=new V,Ot=new z,Gt=new V(1,0,0),Ht=new V(0,1,0),zt=new V(0,0,1),Vt={type:"added"},Wt={type:"removed"};class qt extends n{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Lt++}),this.uuid=l(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=qt.DefaultUp.clone();const t=new V,e=new Rt,i=new z,n=new V(1,1,1);e._onChange(function(){i.setFromEuler(e,!1)}),i._onChange(function(){e.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new _t},normalMatrix:{value:new y}}),this.matrix=new _t,this.matrixWorld=new _t,this.matrixAutoUpdate=qt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=qt.DefaultMatrixWorldAutoUpdate,this.layers=new Dt,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Pt.setFromAxisAngle(t,e),this.quaternion.multiply(Pt),this}rotateOnWorldAxis(t,e){return Pt.setFromAxisAngle(t,e),this.quaternion.premultiply(Pt),this}rotateX(t){return this.rotateOnAxis(Gt,t)}rotateY(t){return this.rotateOnAxis(Ht,t)}rotateZ(t){return this.rotateOnAxis(zt,t)}translateOnAxis(t,e){return Qt.copy(t).applyQuaternion(this.quaternion),this.position.add(Qt.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Gt,t)}translateY(t){return this.translateOnAxis(Ht,t)}translateZ(t){return this.translateOnAxis(zt,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(Ft.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?Ut.copy(t):Ut.set(t,e,i);t=this.parent;this.updateWorldMatrix(!0,!1),Nt.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ft.lookAt(Nt,Ut,this.up):Ft.lookAt(Ut,Nt,this.up),this.quaternion.setFromRotationMatrix(Ft),t&&(Ft.extractRotation(t.matrixWorld),Pt.setFromRotationMatrix(Ft),this.quaternion.premultiply(Pt.invert()))}add(t){if(1<arguments.length){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",t):t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),(t.parent=this).children.push(t),t.dispatchEvent(Vt)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this}remove(t){if(1<arguments.length){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Wt)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Wt)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Ft.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Ft.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ft),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(i,n){if(this[i]===n)return this;for(let t=0,e=this.children.length;t<e;t++){var r=this.children[t].getObjectByProperty(i,n);if(void 0!==r)return r}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Nt,t,kt),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Nt,Ot,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(i){i(this);const n=this.children;for(let t=0,e=n.length;t<e;t++)n[t].traverse(i)}traverseVisible(i){if(!1!==this.visible){i(this);const n=this.children;for(let t=0,e=n.length;t<e;t++)n[t].traverseVisible(i)}}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(i){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||i)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),i=!(this.matrixWorldNeedsUpdate=!1));var n=this.children;for(let t=0,e=n.length;t<e;t++){const r=n[t];!0!==r.matrixWorldAutoUpdate&&!0!==i||r.updateMatrixWorld(i)}}updateWorldMatrix(i,t){const n=this.parent;if(!0===i&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const i=this.children;for(let t=0,e=i.length;t<e;t++){const n=i[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(i){const n=void 0===i||"string"==typeof i,r={},s=(n&&(i={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"}),{});function a(t,e){return void 0===t[e.uuid]&&(t[e.uuid]=e.toJSON(i)),e.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(i).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(i).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=a(i.geometries,this.geometry);const n=this.geometry.parameters;if(void 0!==n&&void 0!==n.shapes){const r=n.shapes;if(Array.isArray(r))for(let t=0,e=r.length;t<e;t++){const s=r[t];a(i.shapes,s)}else a(i.shapes,r)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(a(i.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const n=[];for(let t=0,e=this.material.length;t<e;t++)n.push(a(i.materials,this.material[t]));s.material=n}else s.material=a(i.materials,this.material);if(0<this.children.length){s.children=[];for(let t=0;t<this.children.length;t++)s.children.push(this.children[t].toJSON(i).object)}if(0<this.animations.length){s.animations=[];for(let t=0;t<this.animations.length;t++){const r=this.animations[t];s.animations.push(a(i.animations,r))}}if(n){const n=t(i.geometries),s=t(i.materials),a=t(i.textures),e=t(i.images),o=t(i.shapes),l=t(i.skeletons),h=t(i.animations),c=t(i.nodes);0<n.length&&(r.geometries=n),0<s.length&&(r.materials=s),0<a.length&&(r.textures=a),0<e.length&&(r.images=e),0<o.length&&(r.shapes=o),0<l.length&&(r.skeletons=l),0<h.length&&(r.animations=h),0<c.length&&(r.nodes=c)}return r.object=s,r;function t(t){const e=[];for(const i in t){const n=t[i];delete n.metadata,e.push(n)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const i=e.children[t];this.add(i.clone())}return this}}qt.DefaultUp=new V(0,1,0),qt.DefaultMatrixAutoUpdate=!0,qt.DefaultMatrixWorldAutoUpdate=!0;const jt=new V,Yt=new V,Jt=new V,Xt=new V,Kt=new V,$t=new V,Zt=new V,te=new V,ee=new V,ie=new V;class ne{constructor(t=new V,e=new V,i=new V){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,n){n.subVectors(i,e),jt.subVectors(t,e),n.cross(jt);i=n.lengthSq();return 0<i?n.multiplyScalar(1/Math.sqrt(i)):n.set(0,0,0)}static getBarycoord(t,e,i,n,r){jt.subVectors(n,e),Yt.subVectors(i,e),Jt.subVectors(t,e);var n=jt.dot(jt),i=jt.dot(Yt),t=jt.dot(Jt),e=Yt.dot(Yt),s=Yt.dot(Jt),a=n*e-i*i;if(0==a)return r.set(-2,-1,-1);a=1/a,e=(e*t-i*s)*a,n=(n*s-i*t)*a;return r.set(1-e-n,n,e)}static containsPoint(t,e,i,n){return this.getBarycoord(t,e,i,n,Xt),0<=Xt.x&&0<=Xt.y&&Xt.x+Xt.y<=1}static getUV(t,e,i,n,r,s,a,o){return this.getBarycoord(t,e,i,n,Xt),o.set(0,0),o.addScaledVector(r,Xt.x),o.addScaledVector(s,Xt.y),o.addScaledVector(a,Xt.z),o}static isFrontFacing(t,e,i,n){return jt.subVectors(i,e),Yt.subVectors(t,e),jt.cross(Yt).dot(n)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this}setFromAttributeAndIndices(t,e,i,n){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return jt.subVectors(this.c,this.b),Yt.subVectors(this.a,this.b),.5*jt.cross(Yt).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return ne.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return ne.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,i,n,r){return ne.getUV(t,this.a,this.b,this.c,e,i,n,r)}containsPoint(t){return ne.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return ne.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){var i=this.a,n=this.b,r=this.c;let s,a;Kt.subVectors(n,i),$t.subVectors(r,i),te.subVectors(t,i);var o=Kt.dot(te),l=$t.dot(te);if(o<=0&&l<=0)return e.copy(i);ee.subVectors(t,n);var h=Kt.dot(ee),c=$t.dot(ee);if(0<=h&&c<=h)return e.copy(n);var u=o*c-h*l;if(u<=0&&0<=o&&h<=0)return s=o/(o-h),e.copy(i).addScaledVector(Kt,s);ie.subVectors(t,r);var t=Kt.dot(ie),d=$t.dot(ie);if(0<=d&&t<=d)return e.copy(r);o=t*l-o*d;if(o<=0&&0<=l&&d<=0)return a=l/(l-d),e.copy(i).addScaledVector($t,a);l=h*d-t*c;if(l<=0&&0<=c-h&&0<=t-d)return Zt.subVectors(r,n),a=(c-h)/(c-h+(t-d)),e.copy(n).addScaledVector(Zt,a);r=1/(l+o+u);return s=o*r,a=u*r,e.copy(i).addScaledVector(Kt,s).addScaledVector($t,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let se=0;class re extends n{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:se++}),this.uuid=l(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){0<this._alphaTest!=0<t&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const i in t){var e=t[i];if(void 0===e)console.warn("THREE.Material: '"+i+"' parameter is undefined.");else{const n=this[i];void 0!==n?n&&n.isColor?n.set(e):n&&n.isVector3&&e&&e.isVector3?n.copy(e):this[i]=e:console.warn("THREE."+this.type+": '"+i+"' is not a property of this material.")}}}toJSON(t){const e=void 0===t||"string"==typeof t,i=(e&&(t={textures:{},images:{}}),{metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}});function n(t){const e=[];for(const i in t){const n=t[i];delete n.metadata,e.push(n)}return e}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),0<this.alphaTest&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),1<this.wireframeLinewidth&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),e){const e=n(t.textures),r=n(t.images);0<e.length&&(i.textures=e),0<r.length&&(i.images=r)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const i=e.clippingPlanes;let n=null;if(null!==i){const e=i.length;n=new Array(e);for(let t=0;t!==e;++t)n[t]=i[t].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class ae extends re{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new D(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const oe=new V,le=new v;class ce{constructor(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(i,n,r){i*=this.itemSize,r*=n.itemSize;for(let t=0,e=this.itemSize;t<e;t++)this.array[i+t]=n.array[r+t];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(i){if(2===this.itemSize)for(let t=0,e=this.count;t<e;t++)le.fromBufferAttribute(this,t),le.applyMatrix3(i),this.setXY(t,le.x,le.y);else if(3===this.itemSize)for(let t=0,e=this.count;t<e;t++)oe.fromBufferAttribute(this,t),oe.applyMatrix3(i),this.setXYZ(t,oe.x,oe.y,oe.z);return this}applyMatrix4(i){for(let t=0,e=this.count;t<e;t++)oe.fromBufferAttribute(this,t),oe.applyMatrix4(i),this.setXYZ(t,oe.x,oe.y,oe.z);return this}applyNormalMatrix(i){for(let t=0,e=this.count;t<e;t++)oe.fromBufferAttribute(this,t),oe.applyNormalMatrix(i),this.setXYZ(t,oe.x,oe.y,oe.z);return this}transformDirection(i){for(let t=0,e=this.count;t<e;t++)oe.fromBufferAttribute(this,t),oe.transformDirection(i),this.setXYZ(t,oe.x,oe.y,oe.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return e=this.normalized?g(e,this.array):e}setX(t,e){return this.normalized&&(e=m(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return e=this.normalized?g(e,this.array):e}setY(t,e){return this.normalized&&(e=m(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return e=this.normalized?g(e,this.array):e}setZ(t,e){return this.normalized&&(e=m(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return e=this.normalized?g(e,this.array):e}setW(t,e){return this.normalized&&(e=m(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=m(e,this.array),i=m(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,n){return t*=this.itemSize,this.normalized&&(e=m(e,this.array),i=m(i,this.array),n=m(n,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this}setXYZW(t,e,i,n,r){return t*=this.itemSize,this.normalized&&(e=m(e,this.array),i=m(i,this.array),n=m(n,this.array),r=m(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class he extends ce{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class ue extends ce{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class de extends ce{constructor(t,e,i){super(new Float32Array(t),e,i)}}let Ae=0;const pe=new _t,ge=new qt,me=new V,fe=new j,ve=new j,ye=new V;class xe extends n{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Ae++}),this.uuid=l(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(x(t)?ue:he)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position,i=(void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0),this.attributes.normal);if(void 0!==i){const e=(new y).getNormalMatrix(t);i.applyNormalMatrix(e),i.needsUpdate=!0}const n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(t),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return pe.makeRotationFromQuaternion(t),this.applyMatrix4(pe),this}rotateX(t){return pe.makeRotationX(t),this.applyMatrix4(pe),this}rotateY(t){return pe.makeRotationY(t),this.applyMatrix4(pe),this}rotateZ(t){return pe.makeRotationZ(t),this.applyMatrix4(pe),this}translate(t,e,i){return pe.makeTranslation(t,e,i),this.applyMatrix4(pe),this}scale(t,e,i){return pe.makeScale(t,e,i),this.applyMatrix4(pe),this}lookAt(t){return ge.lookAt(t),ge.updateMatrix(),this.applyMatrix4(ge.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(me).negate(),this.translate(me.x,me.y,me.z),this}setFromPoints(i){const n=[];for(let t=0,e=i.length;t<e;t++){var r=i[t];n.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new de(n,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new j);var t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new V(-1/0,-1/0,-1/0),new V(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),i)for(let t=0,e=i.length;t<e;t++){var n=i[t];fe.setFromBufferAttribute(n),this.morphTargetsRelative?(ye.addVectors(this.boundingBox.min,fe.min),this.boundingBox.expandByPoint(ye),ye.addVectors(this.boundingBox.max,fe.max),this.boundingBox.expandByPoint(ye)):(this.boundingBox.expandByPoint(fe.min),this.boundingBox.expandByPoint(fe.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new dt);var n=this.attributes.position,r=this.morphAttributes.position;if(n&&n.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new V,1/0);if(n){const l=this.boundingSphere.center;if(fe.setFromBufferAttribute(n),r)for(let t=0,e=r.length;t<e;t++){var s=r[t];ve.setFromBufferAttribute(s),this.morphTargetsRelative?(ye.addVectors(fe.min,ve.min),fe.expandByPoint(ye),ye.addVectors(fe.max,ve.max),fe.expandByPoint(ye)):(fe.expandByPoint(ve.min),fe.expandByPoint(ve.max))}fe.getCenter(l);let i=0;for(let t=0,e=n.count;t<e;t++)ye.fromBufferAttribute(n,t),i=Math.max(i,l.distanceToSquared(ye));if(r)for(let t=0,e=r.length;t<e;t++){var a=r[t],o=this.morphTargetsRelative;for(let t=0,e=a.count;t<e;t++)ye.fromBufferAttribute(a,t),o&&(me.fromBufferAttribute(n,t),ye.add(me)),i=Math.max(i,l.distanceToSquared(ye))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,n=this.attributes;if(null===t||void 0===n.position||void 0===n.normal||void 0===n.uv)console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");else{const a=t.array,o=n.position.array,l=n.normal.array,h=n.uv.array,e=o.length/3,c=(!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new ce(new Float32Array(4*e),4)),this.getAttribute("tangent").array),u=[],d=[];for(let t=0;t<e;t++)u[t]=new V,d[t]=new V;const p=new V,f=new V,m=new V,g=new v,A=new v,y=new v,_=new V,b=new V;let i=this.groups;for(let t=0,e=(i=0===i.length?[{start:0,count:a.length}]:i).length;t<e;++t){const n=i[t],o=n.start;for(let t=o,e=o+n.count;t<e;t+=3)r(a[t+0],a[t+1],a[t+2])}const x=new V,S=new V,w=new V,E=new V;for(let t=0,e=i.length;t<e;++t){const n=i[t],o=n.start;for(let t=o,e=o+n.count;t<e;t+=3)s(a[t+0]),s(a[t+1]),s(a[t+2])}function r(t,e,i){p.fromArray(o,3*t),f.fromArray(o,3*e),m.fromArray(o,3*i),g.fromArray(h,2*t),A.fromArray(h,2*e),y.fromArray(h,2*i),f.sub(p),m.sub(p),A.sub(g),y.sub(g);var n=1/(A.x*y.y-y.x*A.y);isFinite(n)&&(_.copy(f).multiplyScalar(y.y).addScaledVector(m,-A.y).multiplyScalar(n),b.copy(m).multiplyScalar(A.x).addScaledVector(f,-y.x).multiplyScalar(n),u[t].add(_),u[e].add(_),u[i].add(_),d[t].add(b),d[e].add(b),d[i].add(b))}function s(t){w.fromArray(l,3*t),E.copy(w);var e=u[t],e=(x.copy(e),x.sub(w.multiplyScalar(w.dot(e))).normalize(),S.crossVectors(E,e),S.dot(d[t])<0?-1:1);c[4*t]=x.x,c[4*t+1]=x.y,c[4*t+2]=x.z,c[4*t+3]=e}}}computeVertexNormals(){const n=this.index,r=this.getAttribute("position");if(void 0!==r){let i=this.getAttribute("normal");if(void 0===i)i=new ce(new Float32Array(3*r.count),3),this.setAttribute("normal",i);else for(let t=0,e=i.count;t<e;t++)i.setXYZ(t,0,0,0);const l=new V,h=new V,c=new V,u=new V,d=new V,p=new V,f=new V,m=new V;if(n)for(let t=0,e=n.count;t<e;t+=3){var s=n.getX(t+0),a=n.getX(t+1),o=n.getX(t+2);l.fromBufferAttribute(r,s),h.fromBufferAttribute(r,a),c.fromBufferAttribute(r,o),f.subVectors(c,h),m.subVectors(l,h),f.cross(m),u.fromBufferAttribute(i,s),d.fromBufferAttribute(i,a),p.fromBufferAttribute(i,o),u.add(f),d.add(f),p.add(f),i.setXYZ(s,u.x,u.y,u.z),i.setXYZ(a,d.x,d.y,d.z),i.setXYZ(o,p.x,p.y,p.z)}else for(let t=0,e=r.count;t<e;t+=3)l.fromBufferAttribute(r,t+0),h.fromBufferAttribute(r,t+1),c.fromBufferAttribute(r,t+2),f.subVectors(c,h),m.subVectors(l,h),f.cross(m),i.setXYZ(t+0,f.x,f.y,f.z),i.setXYZ(t+1,f.x,f.y,f.z),i.setXYZ(t+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const i=this.attributes.normal;for(let t=0,e=i.count;t<e;t++)ye.fromBufferAttribute(i,t),ye.normalize(),i.setXYZ(t,ye.x,ye.y,ye.z)}toNonIndexed(){function i(i,n){const r=i.array,s=i.itemSize,t=i.normalized,a=new r.constructor(n.length*s);let o=0,l=0;for(let t=0,e=n.length;t<e;t++){o=i.isInterleavedBufferAttribute?n[t]*i.data.stride+i.offset:n[t]*s;for(let t=0;t<s;t++)a[l++]=r[o++]}return new ce(a,s,t)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new xe,r=this.index.array,s=this.attributes;for(const t in s){const a=i(s[t],r);n.setAttribute(t,a)}const t=this.morphAttributes;for(const s in t){const a=[],o=t[s];for(let t=0,e=o.length;t<e;t++){const s=i(o[t],r);a.push(s)}n.morphAttributes[s]=a}n.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let t=0,e=a.length;t<e;t++){const r=a[t];n.addGroup(r.start,r.count,r.materialIndex)}return n}toJSON(){const i={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),0<Object.keys(this.userData).length&&(i.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(i[n]=t[n]);return i}i.data={attributes:{}};const t=this.index,n=(null!==t&&(i.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)}),this.attributes);for(const t in n){const r=n[t];i.data.attributes[t]=r.toJSON(i.data)}const r={};let e=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],s=[];for(let t=0,e=n.length;t<e;t++){const r=n[t];s.push(r.toJSON(i.data))}0<s.length&&(r[t]=s,e=!0)}e&&(i.data.morphAttributes=r,i.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups,a=(0<s.length&&(i.data.groups=JSON.parse(JSON.stringify(s))),this.boundingSphere);return null!==a&&(i.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),i}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const i={},n=(this.name=t.name,t.index),r=(null!==n&&this.setIndex(n.clone(i)),t.attributes);for(const t in r){const n=r[t];this.setAttribute(t,n.clone(i))}var e=t.morphAttributes;for(const t in e){const n=[],r=e[t];for(let t=0,e=r.length;t<e;t++)n.push(r[t].clone(i));this.morphAttributes[t]=n}this.morphTargetsRelative=t.morphTargetsRelative;var s=t.groups;for(let t=0,e=s.length;t<e;t++){const i=s[t];this.addGroup(i.start,i.count,i.materialIndex)}const a=t.boundingBox,o=(null!==a&&(this.boundingBox=a.clone()),t.boundingSphere);return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const _e=new _t,Ee=new xt,we=new dt,be=new V,Ie=new V,Ce=new V,Se=new V,Me=new V,Be=new V,Te=new V,Re=new V,De=new V,Le=new v,Qe=new v,Pe=new v,Fe=new V,Ue=new V;class Ne extends qt{constructor(t=new xe,e=new ae){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(0<i.length){var n=t[i[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const i=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}}}raycast(n,r){const t=this.geometry,s=this.material,a=this.matrixWorld;if(void 0!==s&&(null===t.boundingSphere&&t.computeBoundingSphere(),we.copy(t.boundingSphere),we.applyMatrix4(a),!1!==n.ray.intersectsSphere(we)&&(_e.copy(a).invert(),Ee.copy(n.ray).applyMatrix4(_e),null===t.boundingBox||!1!==Ee.intersectsBox(t.boundingBox)))){let i;const o=t.index,l=t.attributes.position,h=t.morphAttributes.position,c=t.morphTargetsRelative,u=t.attributes.uv,d=t.attributes.uv2,p=t.groups,f=t.drawRange;if(null!==o)if(Array.isArray(s))for(let t=0,e=p.length;t<e;t++){const a=p[t],m=s[a.materialIndex];for(let t=Math.max(a.start,f.start),e=Math.min(o.count,Math.min(a.start+a.count,f.start+f.count));t<e;t+=3){const s=o.getX(t),p=o.getX(t+1),f=o.getX(t+2);(i=ke(this,m,n,Ee,l,h,c,u,d,s,p,f))&&(i.faceIndex=Math.floor(t/3),i.face.materialIndex=a.materialIndex,r.push(i))}}else for(let t=Math.max(0,f.start),e=Math.min(o.count,f.start+f.count);t<e;t+=3){const a=o.getX(t),p=o.getX(t+1),f=o.getX(t+2);(i=ke(this,s,n,Ee,l,h,c,u,d,a,p,f))&&(i.faceIndex=Math.floor(t/3),r.push(i))}else if(void 0!==l)if(Array.isArray(s))for(let t=0,e=p.length;t<e;t++){const a=p[t],o=s[a.materialIndex];for(let t=Math.max(a.start,f.start),e=Math.min(l.count,Math.min(a.start+a.count,f.start+f.count));t<e;t+=3)(i=ke(this,o,n,Ee,l,h,c,u,d,t,t+1,t+2))&&(i.faceIndex=Math.floor(t/3),i.face.materialIndex=a.materialIndex,r.push(i))}else for(let t=Math.max(0,f.start),e=Math.min(l.count,f.start+f.count);t<e;t+=3)(i=ke(this,s,n,Ee,l,h,c,u,d,t,t+1,t+2))&&(i.faceIndex=Math.floor(t/3),r.push(i))}}}function ke(t,i,n,e,r,s,a,o,l,h,c,u){be.fromBufferAttribute(r,h),Ie.fromBufferAttribute(r,c),Ce.fromBufferAttribute(r,u);var d=t.morphTargetInfluences;if(s&&d){Te.set(0,0,0),Re.set(0,0,0),De.set(0,0,0);for(let t=0,e=s.length;t<e;t++){const i=d[t],n=s[t];0!==i&&(Se.fromBufferAttribute(n,h),Me.fromBufferAttribute(n,c),Be.fromBufferAttribute(n,u),a?(Te.addScaledVector(Se,i),Re.addScaledVector(Me,i),De.addScaledVector(Be,i)):(Te.addScaledVector(Se.sub(be),i),Re.addScaledVector(Me.sub(Ie),i),De.addScaledVector(Be.sub(Ce),i)))}be.add(Te),Ie.add(Re),Ce.add(De)}t.isSkinnedMesh&&(t.boneTransform(h,be),t.boneTransform(c,Ie),t.boneTransform(u,Ce));const p=function(t,e,i,n,r,s,a,o){if(null===(1===e.side?n.intersectTriangle(a,s,r,!0,o):n.intersectTriangle(r,s,a,2!==e.side,o)))return null;Ue.copy(o),Ue.applyMatrix4(t.matrixWorld);n=i.ray.origin.distanceTo(Ue);return n<i.near||n>i.far?null:{distance:n,point:Ue.clone(),object:t}}(t,i,n,e,be,Ie,Ce,Fe);if(p){o&&(Le.fromBufferAttribute(o,h),Qe.fromBufferAttribute(o,c),Pe.fromBufferAttribute(o,u),p.uv=ne.getUV(Fe,be,Ie,Ce,Le,Qe,Pe,new v)),l&&(Le.fromBufferAttribute(l,h),Qe.fromBufferAttribute(l,c),Pe.fromBufferAttribute(l,u),p.uv2=ne.getUV(Fe,be,Ie,Ce,Le,Qe,Pe,new v));const t={a:h,b:c,c:u,normal:new V,materialIndex:0};ne.getNormal(be,Ie,Ce,t.normal),p.face=t}return p}class Oe extends xe{constructor(t=1,e=1,i=1,n=1,r=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:s};const b=this,x=(n=Math.floor(n),r=Math.floor(r),s=Math.floor(s),[]),S=[],w=[],E=[];let C=0,T=0;function a(i,n,r,s,a,o,t,l,h,c,e){var u=o/h,d=t/c,p=o/2,f=t/2,m=l/2,g=h+1,A=c+1;let v=0,y=0;const _=new V;for(let e=0;e<A;e++){const b=e*d-f;for(let t=0;t<g;t++){const C=t*u-p;_[i]=C*s,_[n]=b*a,_[r]=m,S.push(_.x,_.y,_.z),_[i]=0,_[n]=0,_[r]=0<l?1:-1,w.push(_.x,_.y,_.z),E.push(t/h),E.push(1-e/c),v+=1}}for(let e=0;e<c;e++)for(let t=0;t<h;t++){const r=C+t+g*e,s=C+t+g*(e+1),a=C+(t+1)+g*(e+1),o=C+(t+1)+g*e;x.push(r,s,o),x.push(s,a,o),y+=6}b.addGroup(T,y,e),T+=y,C+=v}a("z","y","x",-1,-1,i,e,t,s,r,0),a("z","y","x",1,-1,i,e,-t,s,r,1),a("x","z","y",1,1,t,i,e,n,s,2),a("x","z","y",1,-1,t,i,-e,n,s,3),a("x","y","z",1,-1,t,e,i,n,r,4),a("x","y","z",-1,-1,t,e,-i,n,r,5),this.setIndex(x),this.setAttribute("position",new de(S,3)),this.setAttribute("normal",new de(w,3)),this.setAttribute("uv",new de(E,2))}static fromJSON(t){return new Oe(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Ge(t){const e={};for(const i in t){e[i]={};for(const n in t[i]){const r=t[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[i][n]=r.clone():Array.isArray(r)?e[i][n]=r.slice():e[i][n]=r}}return e}function He(e){const i={};for(let t=0;t<e.length;t++){var n=Ge(e[t]);for(const e in n)i[e]=n[e]}return i}const ze={clone:Ge,merge:He};class Ve extends re{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ge(t.uniforms),this.uniformsGroups=function(e){const i=[];for(let t=0;t<e.length;t++)i.push(e[t].clone());return i}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?e.uniforms[i]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?e.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?e.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?e.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?e.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?e.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?e.uniforms[i]={type:"m4",value:n.toArray()}:e.uniforms[i]={value:n}}0<Object.keys(this.defines).length&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const i={};for(const t in this.extensions)!0===this.extensions[t]&&(i[t]=!0);return 0<Object.keys(i).length&&(e.extensions=i),e}}class We extends qt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new _t,this.projectionMatrix=new _t,this.projectionMatrixInverse=new _t}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class qe extends We{constructor(t=50,e=1,i=.1,n=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){t=.5*this.getFilmHeight()/t;this.fov=2*o*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){var t=Math.tan(.5*a*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*o*Math.atan(Math.tan(.5*a*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,i,n,r,s){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*a*this.fov)/this.zoom,i=2*e,n=this.aspect*i,r=-.5*n;var s=this.view;if(null!==this.view&&this.view.enabled){const t=s.fullWidth,a=s.fullHeight;r+=s.offsetX*n/t,e-=s.offsetY*i/a,n*=s.width/t,i*=s.height/a}s=this.filmOffset;0!==s&&(r+=t*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,e,e-i,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}class je extends qt{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i;const n=new qe(90,1,t,e),r=(n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new V(1,0,0)),this.add(n),new qe(90,1,t,e)),s=(r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new V(-1,0,0)),this.add(r),new qe(90,1,t,e)),a=(s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new V(0,1,0)),this.add(s),new qe(90,1,t,e)),o=(a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new V(0,-1,0)),this.add(a),new qe(90,1,t,e)),l=(o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new V(0,0,1)),this.add(o),new qe(90,1,t,e));l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new V(0,0,-1)),this.add(l)}update(t,e){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[n,r,s,a,o,l]=this.children,h=t.getRenderTarget(),c=t.toneMapping,u=t.xr.enabled;t.toneMapping=0,t.xr.enabled=!1;var d=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,n),t.setRenderTarget(i,1),t.render(e,r),t.setRenderTarget(i,2),t.render(e,s),t.setRenderTarget(i,3),t.render(e,a),t.setRenderTarget(i,4),t.render(e,o),i.texture.generateMipmaps=d,t.setRenderTarget(i,5),t.render(e,l),t.setRenderTarget(h),t.toneMapping=c,t.xr.enabled=u,i.texture.needsPMREMUpdate=!0}}class Ye extends N{constructor(t,e,i,n,r,s,a,o,l,h){super(t=void 0!==t?t:[],e=void 0!==e?e:301,i,n,r,s,a,o,l,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Je extends O{constructor(t,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;t={width:t,height:t,depth:1},t=[t,t,t,t,t,t];this.texture=new Ye(t,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:1006}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const i={tEquirect:{value:null}},n="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",s=new Oe(5,5,5),a=new Ve({name:"CubemapFromEquirect",uniforms:Ge(i),vertexShader:n,fragmentShader:r,side:1,blending:0}),o=(a.uniforms.tEquirect.value=e,new Ne(s,a)),l=e.minFilter;return 1008===e.minFilter&&(e.minFilter=1006),new je(1,10,this).update(t,o),e.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,i,n,r){var t=e.getRenderTarget();for(let t=0;t<6;t++)e.setRenderTarget(this,t),e.clear(i,n,r);e.setRenderTarget(t)}}const Xe=new V,Ke=new V,$e=new y;class Ze{constructor(t=new V(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){i=Xe.subVectors(i,e).cross(Ke.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){var i=t.delta(Xe),n=this.normal.dot(i);if(0===n)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;n=-(t.start.dot(this.normal)+this.constant)/n;return n<0||1<n?null:e.copy(i).multiplyScalar(n).add(t.start)}intersectsLine(t){var e=this.distanceToPoint(t.start),t=this.distanceToPoint(t.end);return e<0&&0<t||t<0&&0<e}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||$e.getNormalMatrix(t),n=this.coplanarPoint(Xe).applyMatrix4(t),r=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const ti=new dt,ei=new V;class ii{constructor(t=new Ze,e=new Ze,i=new Ze,n=new Ze,r=new Ze,s=new Ze){this.planes=[t,e,i,n,r,s]}set(t,e,i,n,r,s){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(i),a[3].copy(n),a[4].copy(r),a[5].copy(s),this}copy(e){const i=this.planes;for(let t=0;t<6;t++)i[t].copy(e.planes[t]);return this}setFromProjectionMatrix(t){const e=this.planes,i=t.elements,n=i[0],r=i[1],s=i[2],a=i[3],o=i[4],l=i[5],h=i[6],c=i[7],u=i[8],d=i[9],p=i[10],f=i[11],m=i[12],g=i[13],A=i[14],v=i[15];return e[0].setComponents(a-n,c-o,f-u,v-m).normalize(),e[1].setComponents(a+n,c+o,f+u,v+m).normalize(),e[2].setComponents(a+r,c+l,f+d,v+g).normalize(),e[3].setComponents(a-r,c-l,f-d,v-g).normalize(),e[4].setComponents(a-s,c-h,f-p,v-A).normalize(),e[5].setComponents(a+s,c+h,f+p,v+A).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),ti.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(ti)}intersectsSprite(t){return ti.center.set(0,0,0),ti.radius=.7071067811865476,ti.applyMatrix4(t.matrixWorld),this.intersectsSphere(ti)}intersectsSphere(t){const e=this.planes,i=t.center,n=-t.radius;for(let t=0;t<6;t++)if(e[t].distanceToPoint(i)<n)return!1;return!0}intersectsBox(e){var i=this.planes;for(let t=0;t<6;t++){const n=i[t];if(ei.x=(0<n.normal.x?e.max:e.min).x,ei.y=(0<n.normal.y?e.max:e.min).y,ei.z=(0<n.normal.z?e.max:e.min).z,n.distanceToPoint(ei)<0)return!1}return!0}containsPoint(e){const i=this.planes;for(let t=0;t<6;t++)if(i[t].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function ni(){let i=null,t=!1,n=null,r=null;function s(t,e){n(t,e),r=i.requestAnimationFrame(s)}return{start:function(){!0!==t&&null!==n&&(r=i.requestAnimationFrame(s),t=!0)},stop:function(){i.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(t){n=t},setContext:function(t){i=t}}}function si(o,t){const l=t.isWebGL2,h=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),h.get(t)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var e=h.get(t);e&&(o.deleteBuffer(e.buffer),h.delete(t))},update:function(t,e){if(t.isGLBufferAttribute){const o=h.get(t);void((!o||o.version<t.version)&&h.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}else{t.isInterleavedBufferAttribute&&(t=t.data);const r=h.get(t);if(void 0===r)h.set(t,function(t,e){var i=t.array,n=t.usage,r=o.createBuffer();let s;if(o.bindBuffer(e,r),o.bufferData(e,i,n),t.onUploadCallback(),i instanceof Float32Array)s=5126;else if(i instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!l)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");s=5131}else s=5123;else if(i instanceof Int16Array)s=5122;else if(i instanceof Uint32Array)s=5125;else if(i instanceof Int32Array)s=5124;else if(i instanceof Int8Array)s=5120;else if(i instanceof Uint8Array)s=5121;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);s=5121}return{buffer:r,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,e));else if(r.version<t.version){{var i=r.buffer,n=t;const s=n.array,a=n.updateRange;o.bindBuffer(e,i),-1===a.count?o.bufferSubData(e,0,s):(l?o.bufferSubData(e,a.offset*s.BYTES_PER_ELEMENT,s,a.offset,a.count):o.bufferSubData(e,a.offset*s.BYTES_PER_ELEMENT,s.subarray(a.offset,a.offset+a.count)),a.count=-1)}r.version=t.version}}}}}class ri extends xe{constructor(t=1,i=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:i,widthSegments:n,heightSegments:r};const s=t/2,a=i/2,o=Math.floor(n),l=Math.floor(r),h=o+1,c=l+1,u=t/o,d=i/l,p=[],f=[],m=[],g=[];for(let e=0;e<c;e++){const i=e*d-a;for(let t=0;t<h;t++){const r=t*u-s;f.push(r,-i,0),m.push(0,0,1),g.push(t/o),g.push(1-e/l)}}for(let e=0;e<l;e++)for(let t=0;t<o;t++){const n=t+h*e,r=t+h*(e+1),s=t+1+h*(e+1),a=t+1+h*e;p.push(n,r,a),p.push(r,s,a)}this.setIndex(p),this.setAttribute("position",new de(f,3)),this.setAttribute("normal",new de(m,3)),this.setAttribute("uv",new de(g,2))}static fromJSON(t){return new ri(t.width,t.height,t.widthSegments,t.heightSegments)}}const ai={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},oi={common:{diffuse:{value:new D(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new y},uv2Transform:{value:new y},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new v(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new D(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new D(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new y}},sprite:{diffuse:{value:new D(16777215)},opacity:{value:1},center:{value:new v(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new y}}},li={basic:{uniforms:He([oi.common,oi.specularmap,oi.envmap,oi.aomap,oi.lightmap,oi.fog]),vertexShader:ai.meshbasic_vert,fragmentShader:ai.meshbasic_frag},lambert:{uniforms:He([oi.common,oi.specularmap,oi.envmap,oi.aomap,oi.lightmap,oi.emissivemap,oi.bumpmap,oi.normalmap,oi.displacementmap,oi.fog,oi.lights,{emissive:{value:new D(0)}}]),vertexShader:ai.meshlambert_vert,fragmentShader:ai.meshlambert_frag},phong:{uniforms:He([oi.common,oi.specularmap,oi.envmap,oi.aomap,oi.lightmap,oi.emissivemap,oi.bumpmap,oi.normalmap,oi.displacementmap,oi.fog,oi.lights,{emissive:{value:new D(0)},specular:{value:new D(1118481)},shininess:{value:30}}]),vertexShader:ai.meshphong_vert,fragmentShader:ai.meshphong_frag},standard:{uniforms:He([oi.common,oi.envmap,oi.aomap,oi.lightmap,oi.emissivemap,oi.bumpmap,oi.normalmap,oi.displacementmap,oi.roughnessmap,oi.metalnessmap,oi.fog,oi.lights,{emissive:{value:new D(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ai.meshphysical_vert,fragmentShader:ai.meshphysical_frag},toon:{uniforms:He([oi.common,oi.aomap,oi.lightmap,oi.emissivemap,oi.bumpmap,oi.normalmap,oi.displacementmap,oi.gradientmap,oi.fog,oi.lights,{emissive:{value:new D(0)}}]),vertexShader:ai.meshtoon_vert,fragmentShader:ai.meshtoon_frag},matcap:{uniforms:He([oi.common,oi.bumpmap,oi.normalmap,oi.displacementmap,oi.fog,{matcap:{value:null}}]),vertexShader:ai.meshmatcap_vert,fragmentShader:ai.meshmatcap_frag},points:{uniforms:He([oi.points,oi.fog]),vertexShader:ai.points_vert,fragmentShader:ai.points_frag},dashed:{uniforms:He([oi.common,oi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ai.linedashed_vert,fragmentShader:ai.linedashed_frag},depth:{uniforms:He([oi.common,oi.displacementmap]),vertexShader:ai.depth_vert,fragmentShader:ai.depth_frag},normal:{uniforms:He([oi.common,oi.bumpmap,oi.normalmap,oi.displacementmap,{opacity:{value:1}}]),vertexShader:ai.meshnormal_vert,fragmentShader:ai.meshnormal_frag},sprite:{uniforms:He([oi.sprite,oi.fog]),vertexShader:ai.sprite_vert,fragmentShader:ai.sprite_frag},background:{uniforms:{uvTransform:{value:new y},t2D:{value:null}},vertexShader:ai.background_vert,fragmentShader:ai.background_frag},cube:{uniforms:He([oi.envmap,{opacity:{value:1}}]),vertexShader:ai.cube_vert,fragmentShader:ai.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ai.equirect_vert,fragmentShader:ai.equirect_frag},distanceRGBA:{uniforms:He([oi.common,oi.displacementmap,{referencePosition:{value:new V},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ai.distanceRGBA_vert,fragmentShader:ai.distanceRGBA_frag},shadow:{uniforms:He([oi.lights,oi.fog,{color:{value:new D(0)},opacity:{value:1}}]),vertexShader:ai.shadow_vert,fragmentShader:ai.shadow_frag}};function ci(a,o,i,l,t,n){const h=new D(0);let c,u,d=!0===t?0:1,p=null,f=0,m=null;function g(t,e){i.buffers.color.setClear(t.r,t.g,t.b,e,n)}return{getClearColor:function(){return h},setClearColor:function(t,e=1){h.set(t),d=e,g(h,d)},getClearAlpha:function(){return d},setClearAlpha:function(t){d=t,g(h,d)},render:function(t,e){let i=!1,n=!0===e.isScene?e.background:null;n&&n.isTexture&&(n=o.get(n));const r=a.xr,s=r.getSession&&r.getSession();null===(n=s&&"additive"===s.environmentBlendMode?null:n)?g(h,d):n&&n.isColor&&(g(n,1),i=!0),(a.autoClear||i)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil),n&&(n.isCubeTexture||306===n.mapping)?(void 0===u&&((u=new Ne(new Oe(1,1,1),new Ve({name:"BackgroundCubeMaterial",uniforms:Ge(li.cube.uniforms),vertexShader:li.cube.vertexShader,fragmentShader:li.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(t,e,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),l.update(u)),u.material.uniforms.envMap.value=n,u.material.uniforms.flipEnvMap.value=n.isCubeTexture&&!1===n.isRenderTargetTexture?-1:1,p===n&&f===n.version&&m===a.toneMapping||(u.material.needsUpdate=!0,p=n,f=n.version,m=a.toneMapping),u.layers.enableAll(),t.unshift(u,u.geometry,u.material,0,0,null)):n&&n.isTexture&&(void 0===c&&((c=new Ne(new ri(2,2),new Ve({name:"BackgroundMaterial",uniforms:Ge(li.background.uniforms),vertexShader:li.background.vertexShader,fragmentShader:li.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),l.update(c)),!0===(c.material.uniforms.t2D.value=n).matrixAutoUpdate&&n.updateMatrix(),c.material.uniforms.uvTransform.value.copy(n.matrix),p===n&&f===n.version&&m===a.toneMapping||(c.material.needsUpdate=!0,p=n,f=n.version,m=a.toneMapping),c.layers.enableAll(),t.unshift(c,c.geometry,c.material,0,0,null))}}}function hi(b,x,S,w){const r=b.getParameter(34921),E=w.isWebGL2?null:x.get("OES_vertex_array_object"),C=w.isWebGL2||null!==E,T={},t=D(null);let M=t,I=!1;function B(t){w.isWebGL2?b.bindVertexArray(t):E.bindVertexArrayOES(t)}function s(t){w.isWebGL2?b.deleteVertexArray(t):E.deleteVertexArrayOES(t)}function D(t){const e=[],i=[],n=[];for(let t=0;t<r;t++)e[t]=0,i[t]=0,n[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:i,attributeDivisors:n,object:t,attributes:{},index:null}}function P(){const i=M.newAttributes;for(let t=0,e=i.length;t<e;t++)i[t]=0}function L(t){R(t,0)}function R(t,e){const i=M.newAttributes,n=M.enabledAttributes,r=M.attributeDivisors;i[t]=1,0===n[t]&&(b.enableVertexAttribArray(t),n[t]=1),r[t]!==e&&((w.isWebGL2?b:x.get("ANGLE_instanced_arrays"))[w.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](t,e),r[t]=e)}function k(){const i=M.newAttributes,n=M.enabledAttributes;for(let t=0,e=n.length;t<e;t++)n[t]!==i[t]&&(b.disableVertexAttribArray(t),n[t]=0)}function N(t,e,i,n,r,s){!0!==w.isWebGL2||5124!==i&&5125!==i?b.vertexAttribPointer(t,e,i,n,r,s):b.vertexAttribIPointer(t,e,i,r,s)}function a(){e(),I=!0,M!==t&&B((M=t).object)}function e(){t.geometry=null,t.program=null,t.wireframe=!1}return{setup:function(t,a,i,n,r){let e=!1;if(C){const x=function(t,e){var i=!0===a.wireframe;let n=T[t.id],r=(void 0===n&&(n={},T[t.id]=n),n[e.id]),s=(void 0===r&&(r={},n[e.id]=r),r[i]);return void 0===s&&(s=D(w.isWebGL2?b.createVertexArray():E.createVertexArrayOES()),r[i]=s),s}(n,i);if(M!==x&&B((M=x).object),e=function(e,i,n,t){var r=M.attributes,s=i.attributes;let a=0;var o=n.getAttributes();for(const i in o)if(0<=o[i].location){const n=r[i];let t=s[i];if(void 0===t&&("instanceMatrix"===i&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===i&&e.instanceColor&&(t=e.instanceColor)),void 0===n)return!0;if(n.attribute!==t)return!0;if(t&&n.data!==t.data)return!0;a++}return M.attributesNum!==a||M.index!==t}(t,n,i,r)){var s=t;var o=n;var l=i;var h=r;const f={},m=o.attributes;let e=0;var c=l.getAttributes();for(const o in c)if(0<=c[o].location){let t=m[o];void 0===t&&("instanceMatrix"===o&&s.instanceMatrix&&(t=s.instanceMatrix),"instanceColor"===o&&s.instanceColor&&(t=s.instanceColor));const h={};(h.attribute=t)&&t.data&&(h.data=t.data),f[o]=h,e++}M.attributes=f,M.attributesNum=e,M.index=h}}else{const b=!0===a.wireframe;M.geometry===n.id&&M.program===i.id&&M.wireframe===b||(M.geometry=n.id,M.program=i.id,M.wireframe=b,e=!0)}if(null!==r&&S.update(r,34963),e||I){I=!1;var u=t,o=a,d=i,p=n;if(!1!==w.isWebGL2||!u.isInstancedMesh&&!p.isInstancedBufferGeometry||null!==x.get("ANGLE_instanced_arrays")){P();const g=p.attributes,A=d.getAttributes(),v=o.defaultAttributeValues;for(const x in A){const w=A[x];if(0<=w.location){let e=g[x];if(void 0===e&&("instanceMatrix"===x&&u.instanceMatrix&&(e=u.instanceMatrix),"instanceColor"===x&&u.instanceColor&&(e=u.instanceColor)),void 0!==e){const x=e.normalized,d=e.itemSize,g=S.get(e);if(void 0!==g){const A=g.buffer,v=g.type,y=g.bytesPerElement;if(e.isInterleavedBufferAttribute){const S=e.data,g=S.stride,_=e.offset;if(S.isInstancedInterleavedBuffer){for(let t=0;t<w.locationSize;t++)R(w.location+t,S.meshPerAttribute);!0!==u.isInstancedMesh&&void 0===p._maxInstanceCount&&(p._maxInstanceCount=S.meshPerAttribute*S.count)}else for(let t=0;t<w.locationSize;t++)L(w.location+t);b.bindBuffer(34962,A);for(let t=0;t<w.locationSize;t++)N(w.location+t,d/w.locationSize,v,x,g*y,(_+d/w.locationSize*t)*y)}else{if(e.isInstancedBufferAttribute){for(let t=0;t<w.locationSize;t++)R(w.location+t,e.meshPerAttribute);!0!==u.isInstancedMesh&&void 0===p._maxInstanceCount&&(p._maxInstanceCount=e.meshPerAttribute*e.count)}else for(let t=0;t<w.locationSize;t++)L(w.location+t);b.bindBuffer(34962,A);for(let t=0;t<w.locationSize;t++)N(w.location+t,d/w.locationSize,v,x,d*y,d/w.locationSize*t*y)}}}else if(void 0!==v){const S=v[x];if(void 0!==S)switch(S.length){case 2:b.vertexAttrib2fv(w.location,S);break;case 3:b.vertexAttrib3fv(w.location,S);break;case 4:b.vertexAttrib4fv(w.location,S);break;default:b.vertexAttrib1fv(w.location,S)}}}}k()}null!==r&&b.bindBuffer(34963,S.get(r).buffer)}},reset:a,resetDefaultState:e,dispose:function(){a();for(const t in T){const e=T[t];for(const i in e){const n=e[i];for(const r in n)s(n[r].object),delete n[r];delete e[i]}delete T[t]}},releaseStatesOfGeometry:function(t){if(void 0!==T[t.id]){const e=T[t.id];for(const t in e){const i=e[t];for(const t in i)s(i[t].object),delete i[t];delete e[t]}delete T[t.id]}},releaseStatesOfProgram:function(t){for(const e in T){const i=T[e];if(void 0!==i[t.id]){const n=i[t.id];for(const t in n)s(n[t].object),delete n[t];delete i[t.id]}}},initAttributes:P,enableAttribute:L,disableUnusedAttributes:k}}function ui(s,a,o,t){const l=t.isWebGL2;let h;this.setMode=function(t){h=t},this.render=function(t,e){s.drawArrays(h,t,e),o.update(e,h,1)},this.renderInstances=function(i,n,r){if(0!==r){let t,e;if(l)t=s,e="drawArraysInstanced";else if(t=a.get("ANGLE_instanced_arrays"),e="drawArraysInstancedANGLE",null===t)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");t[e](h,i,n,r),o.update(n,h,r)}}}function di(e,i,t){let n;function r(t){if("highp"===t){if(0<e.getShaderPrecisionFormat(35633,36338).precision&&0<e.getShaderPrecisionFormat(35632,36338).precision)return"highp";t="mediump"}return"mediump"===t&&0<e.getShaderPrecisionFormat(35633,36337).precision&&0<e.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var s="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let a=void 0!==t.precision?t.precision:"highp";var o=r(a),o=(o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o),s||i.has("WEBGL_draw_buffers")),t=!0===t.logarithmicDepthBuffer,l=e.getParameter(34930),h=e.getParameter(35660),c=e.getParameter(3379),u=e.getParameter(34076),d=e.getParameter(34921),p=e.getParameter(36347),f=e.getParameter(36348),m=e.getParameter(36349),g=0<h,A=s||i.has("OES_texture_float");return{isWebGL2:s,drawBuffers:o,getMaxAnisotropy:function(){return void 0!==n?n:n=!0===i.has("EXT_texture_filter_anisotropic")?(t=i.get("EXT_texture_filter_anisotropic"),e.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT)):0;var t},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:t,maxTextures:l,maxVertexTextures:h,maxTextureSize:c,maxCubemapSize:u,maxAttributes:d,maxVertexUniforms:p,maxVaryings:f,maxFragmentUniforms:m,vertexTextures:g,floatFragmentTextures:A,floatVertexTextures:g&&A,maxSamples:s?e.getParameter(36183):0}}function Ai(o){const e=this;let l=null,h=0,c=!1,u=!1;const d=new Ze,p=new y,f={value:null,needsUpdate:!1};function m(){f.value!==l&&(f.value=l,f.needsUpdate=0<h),e.numPlanes=h,e.numIntersection=0}function g(i,t,n,r){var s=null!==i?i.length:0;let a=null;if(0!==s){if(a=f.value,!0!==r||null===a){const e=n+4*s,r=t.matrixWorldInverse;p.getNormalMatrix(r),(null===a||a.length<e)&&(a=new Float32Array(e));for(let t=0,e=n;t!==s;++t,e+=4)d.copy(i[t]).applyMatrix4(r,p),d.normal.toArray(a,e),a[e+3]=d.constant}f.value=a,f.needsUpdate=!0}return e.numPlanes=s,e.numIntersection=0,a}this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,i){var n=0!==t.length||e||0!==h||c;return c=e,l=g(t,i,0),h=t.length,n},this.beginShadows=function(){u=!0,g(null)},this.endShadows=function(){u=!1,m()},this.setState=function(i,t,n){const r=i.clippingPlanes,s=i.clipIntersection,e=i.clipShadows,a=o.get(i);if(!c||null===r||0===r.length||u&&!e)u?g(null):m();else{const o=u?0:h,i=4*o;let e=a.clippingState||null;f.value=e,e=g(r,t,i,n);for(let t=0;t!==i;++t)e[t]=l[t];a.clippingState=e,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=o}}}function pi(n){let r=new WeakMap;function s(t,e){return 303===e?t.mapping=301:304===e&&(t.mapping=302),t}function a(t){const e=t.target,i=(e.removeEventListener("dispose",a),r.get(e));void 0!==i&&(r.delete(e),i.dispose())}return{get:function(t){if(t&&t.isTexture&&!1===t.isRenderTargetTexture){var e=t.mapping;if(303===e||304===e){if(r.has(t))return s(r.get(t).texture,t.mapping);e=t.image;if(e&&0<e.height){const i=new Je(e.height/2);return i.fromEquirectangularTexture(n,t),r.set(t,i),t.addEventListener("dispose",a),s(i.texture,t.mapping)}return null}}return t},dispose:function(){r=new WeakMap}}}li.physical={uniforms:He([li.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new v(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new D(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new v},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new D(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new D(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ai.meshphysical_vert,fragmentShader:ai.meshphysical_frag};class gi extends We{constructor(t=-1,e=1,i=1,n=-1,r=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=n,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,i,n,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let r=i-t,s=i+t,a=n+e,o=n-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=t*this.view.offsetX,s=r+t*this.view.width,a-=e*this.view.offsetY,o=a-e*this.view.height}this.projectionMatrix.makeOrthographic(r,s,a,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const mi=[.125,.215,.35,.446,.526,.582],fi=new gi,vi=new D;let yi=null;const xi=(1+Math.sqrt(5))/2,_i=1/xi,Ei=[new V(1,1,1),new V(-1,1,1),new V(1,1,-1),new V(-1,1,-1),new V(0,xi,_i),new V(0,xi,-_i),new V(_i,0,xi),new V(-_i,0,xi),new V(xi,_i,0),new V(-xi,_i,0)];class wi{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,n=100){yi=this._renderer.getRenderTarget(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(t,i,n,r),0<e&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Si(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Ci(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(yi),t.scissorTest=!1,Ii(t,0,0,t.width,t.height)}_fromTexture(t,e){301===t.mapping||302===t.mapping?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),yi=this._renderer.getRenderTarget();e=e||this._allocateTargets();return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:1006,minFilter:1006,generateMipmaps:!1,type:1016,format:1023,encoding:3e3,depthBuffer:!1},n=bi(t,e,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=bi(t,e,i);const n=this["_lodMax"];({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(i){const n=[],r=[],s=[];let a=i;const o=i-4+1+mi.length;for(let e=0;e<o;e++){const o=Math.pow(2,a);r.push(o);let t=1/o;e>i-4?t=mi[e-i+4-1]:0===e&&(t=0),s.push(t);const l=1/(o-2),h=-l,c=1+l,u=[h,h,c,h,c,c,h,h,c,c,h,c],d=new Float32Array(108),p=new Float32Array(72),f=new Float32Array(36);for(let t=0;t<6;t++){const n=t%3*2/3-1,r=2<t?0:-1,s=[n,r,0,n+2/3,r,0,n+2/3,1+r,0,n,r,0,n+2/3,1+r,0,n,1+r,0],a=(d.set(s,18*t),p.set(u,12*t),[t,t,t,t,t,t]);f.set(a,6*t)}const m=new xe;m.setAttribute("position",new ce(d,3)),m.setAttribute("uv",new ce(p,2)),m.setAttribute("faceIndex",new ce(f,1)),n.push(m),4<a&&a--}return{lodPlanes:n,sizeLods:r,sigmas:s}}(n)),this._blurMaterial=(r=n,s=t,a=e,o=new Float32Array(20),l=new V(0,1,0),new Ve({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/s,CUBEUV_TEXEL_HEIGHT:1/a,CUBEUV_MAX_MIP:r+".0"},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:o},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:l}},vertexShader:Mi(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1}))}var r,s,a,o,l;return n}_compileMaterial(t){t=new Ne(this._lodPlanes[0],t);this._renderer.compile(t,fi)}_sceneToCubeUV(e,t,i,n){const r=new qe(90,1,t,i),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,h=o.toneMapping,c=(o.getClearColor(vi),o.toneMapping=0,o.autoClear=!1,new ae({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1})),u=new Ne(new Oe,c);let d=!1;t=e.background;t?t.isColor&&(c.color.copy(t),e.background=null,d=!0):(c.color.copy(vi),d=!0);for(let t=0;t<6;t++){const i=t%3,l=(0==i?(r.up.set(0,s[t],0),r.lookAt(a[t],0,0)):1==i?(r.up.set(0,0,s[t]),r.lookAt(0,a[t],0)):(r.up.set(0,s[t],0),r.lookAt(0,0,a[t])),this._cubeSize);Ii(n,i*l,2<t?l:0,l,l),o.setRenderTarget(n),d&&o.render(u,r),o.render(e,r)}u.geometry.dispose(),u.material.dispose(),o.toneMapping=h,o.autoClear=l,e.background=t}_textureToCubeUV(t,e){const i=this._renderer,n=301===t.mapping||302===t.mapping,r=(n?(null===this._cubemapMaterial&&(this._cubemapMaterial=Si()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Ci()),n?this._cubemapMaterial:this._equirectMaterial),s=new Ne(this._lodPlanes[0],r);r.uniforms.envMap.value=t;t=this._cubeSize;Ii(e,0,0,3*t,2*t),i.setRenderTarget(e),i.render(s,fi)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let t=1;t<this._lodPlanes.length;t++){const i=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),n=Ei[(t-1)%Ei.length];this._blur(e,t-1,t,i,n)}t.autoClear=i}_blur(t,e,i,n,r){var s=this._pingPongRenderTarget;this._halfBlur(t,s,e,i,n,"latitudinal",r),this._halfBlur(s,t,i,i,n,"longitudinal",r)}_halfBlur(t,e,i,n,r,s,a){const o=this._renderer,l=this._blurMaterial,h=("latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!"),new Ne(this._lodPlanes[n],l)),c=l.uniforms,u=this._sizeLods[i]-1,d=isFinite(r)?Math.PI/(2*u):2*Math.PI/39,p=r/d,f=isFinite(r)?1+Math.floor(3*p):20,m=(20<f&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`),[]);let g=0;for(let t=0;t<20;++t){const e=t/p,i=Math.exp(-e*e/2);m.push(i),0===t?g+=i:t<f&&(g+=2*i)}for(let t=0;t<m.length;t++)m[t]=m[t]/g;c.envMap.value=t.texture,c.samples.value=f,c.weights.value=m,c.latitudinal.value="latitudinal"===s,a&&(c.poleAxis.value=a);r=this._lodMax,c.dTheta.value=d,c.mipInt.value=r-i,t=this._sizeLods[n];Ii(e,3*t*(r-4<n?n-r+4:0),4*(this._cubeSize-t),3*t,2*t),o.setRenderTarget(e),o.render(h,fi)}}function bi(t,e,i){const n=new O(t,e,i);return n.texture.mapping=306,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Ii(t,e,i,n,r){t.viewport.set(e,i,n,r),t.scissor.set(e,i,n,r)}function Ci(){return new Ve({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Mi(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Si(){return new Ve({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Mi(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Mi(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Bi(r){let s=new WeakMap,a=null;function o(t){const e=t.target,i=(e.removeEventListener("dispose",o),s.get(e));void 0!==i&&(s.delete(e),i.dispose())}return{get:function(e){if(e&&e.isTexture){var t=e.mapping,i=303===t||304===t,t=301===t||302===t;if(i||t){if(e.isRenderTargetTexture&&!0===e.needsPMREMUpdate){e.needsPMREMUpdate=!1;let t=s.get(e);return null===a&&(a=new wi(r)),t=i?a.fromEquirectangular(e,t):a.fromCubemap(e,t),s.set(e,t),t.texture}if(s.has(e))return s.get(e).texture;var n=e.image;return i&&n&&0<n.height||t&&n&&function(e){let i=0;for(let t=0;t<6;t++)void 0!==e[t]&&i++;return 6===i}(n)?(null===a&&(a=new wi(r)),t=i?a.fromEquirectangular(e):a.fromCubemap(e),s.set(e,t),e.addEventListener("dispose",o),t.texture):null}}return e},dispose:function(){s=new WeakMap,null!==a&&(a.dispose(),a=null)}}}function Ti(i){const n={};function r(t){if(void 0!==n[t])return n[t];let e;switch(t){case"WEBGL_depth_texture":e=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":e=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":e=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":e=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:e=i.getExtension(t)}return n[t]=e}return{has:function(t){return null!==r(t)},init:function(t){t.isWebGL2?r("EXT_color_buffer_float"):(r("WEBGL_depth_texture"),r("OES_texture_float"),r("OES_texture_half_float"),r("OES_texture_half_float_linear"),r("OES_standard_derivatives"),r("OES_element_index_uint"),r("OES_vertex_array_object"),r("ANGLE_instanced_arrays")),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture")},get:function(t){var e=r(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function Ri(t,o,i,n){const r={},l=new WeakMap;function s(t){const e=t.target;null!==e.index&&o.remove(e.index);for(const t in e.attributes)o.remove(e.attributes[t]);e.removeEventListener("dispose",s),delete r[e.id];t=l.get(e);t&&(o.remove(t),l.delete(e)),n.releaseStatesOfGeometry(e),!0===e.isInstancedBufferGeometry&&delete e._maxInstanceCount,i.memory.geometries--}function a(i){const n=[],r=i.index,s=i.attributes.position;let t=0;if(null!==r){const i=r.array;t=r.version;for(let t=0,e=i.length;t<e;t+=3){const r=i[t+0],s=i[t+1],l=i[t+2];n.push(r,s,s,l,l,r)}}else{const i=s.array;t=s.version;for(let t=0,e=i.length/3-1;t<e;t+=3){const i=t+0,r=t+1,s=t+2;n.push(i,r,r,s,s,i)}}const e=new(x(n)?ue:he)(n,1);e.version=t;var a=l.get(i);a&&o.remove(a),l.set(i,e)}return{get:function(t,e){return!0!==r[e.id]&&(e.addEventListener("dispose",s),r[e.id]=!0,i.memory.geometries++),e},update:function(t){const i=t.attributes;for(const t in i)o.update(i[t],34962);var e=t.morphAttributes;for(const t in e){const i=e[t];for(let t=0,e=i.length;t<e;t++)o.update(i[t],34962)}},getWireframeAttribute:function(t){var e,i=l.get(t);return(!i||null!==(e=t.index)&&i.version<e.version)&&a(t),l.get(t)}}}function Di(s,a,o,t){const l=t.isWebGL2;let h,c,u;this.setMode=function(t){h=t},this.setIndex=function(t){c=t.type,u=t.bytesPerElement},this.render=function(t,e){s.drawElements(h,e,c,t*u),o.update(e,h,1)},this.renderInstances=function(i,n,r){if(0!==r){let t,e;if(l)t=s,e="drawElementsInstanced";else if(t=a.get("ANGLE_instanced_arrays"),e="drawElementsInstancedANGLE",null===t)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");t[e](h,n,c,i*u,r),o.update(n,h,r)}}}function Li(t){const n={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:n,programs:null,autoReset:!0,reset:function(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0},update:function(t,e,i){switch(n.calls++,e){case 4:n.triangles+=i*(t/3);break;case 1:n.lines+=i*(t/2);break;case 3:n.lines+=i*(t-1);break;case 2:n.lines+=i*t;break;case 0:n.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",e)}}}}function Qi(t,e){return t[0]-e[0]}function Pi(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Fi(d,p,f){const m={},g=new Float32Array(8),A=new WeakMap,y=new k,_=[];for(let t=0;t<8;t++)_[t]=[t,0];return{update:function(r,s,a,o){var l=r.morphTargetInfluences;if(!0===p.isWebGL2){const m=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,g=void 0!==m?m.length:0;let n=A.get(s);if(void 0===n||n.count!==g){void 0!==n&&n.texture.dispose();const d=void 0!==s.morphAttributes.position,f=void 0!==s.morphAttributes.normal,m=void 0!==s.morphAttributes.color,r=s.morphAttributes.position||[],a=s.morphAttributes.normal||[],o=s.morphAttributes.color||[];let t=0,e=(!0==d&&(t=1),!0==f&&(t=2),!0==m&&(t=3),s.attributes.position.count*t),i=1;e>p.maxTextureSize&&(i=Math.ceil(e/p.maxTextureSize),e=p.maxTextureSize);const c=new Float32Array(e*i*4*g),u=new G(c,e,i,g);u.type=1015,u.needsUpdate=!0;var h=4*t;for(let t=0;t<g;t++){const g=r[t],A=a[t],_=o[t],s=e*i*4*t;for(let t=0;t<g.count;t++){const r=t*h;!0==d&&(y.fromBufferAttribute(g,t),c[s+r]=y.x,c[s+r+1]=y.y,c[s+r+2]=y.z,c[s+r+3]=0),!0==f&&(y.fromBufferAttribute(A,t),c[s+r+4]=y.x,c[s+r+5]=y.y,c[s+r+6]=y.z,c[s+r+7]=0),!0==m&&(y.fromBufferAttribute(_,t),c[s+r+8]=y.x,c[s+r+9]=y.y,c[s+r+10]=y.z,c[s+r+11]=4===_.itemSize?y.w:1)}}n={count:g,texture:u,size:new v(e,i)},A.set(s,n),s.addEventListener("dispose",function t(){u.dispose(),A.delete(s),s.removeEventListener("dispose",t)})}let e=0;for(let t=0;t<l.length;t++)e+=l[t];const a=s.morphTargetsRelative?1:1-e;o.getUniforms().setValue(d,"morphTargetBaseInfluence",a),o.getUniforms().setValue(d,"morphTargetInfluences",l),o.getUniforms().setValue(d,"morphTargetsTexture",n.texture,f),o.getUniforms().setValue(d,"morphTargetsTextureSize",n.size)}else{const p=void 0===l?0:l.length;let e=m[s.id];if(void 0===e||e.length!==p){e=[];for(let t=0;t<p;t++)e[t]=[t,0];m[s.id]=e}for(let t=0;t<p;t++){const p=e[t];p[0]=t,p[1]=l[t]}e.sort(Pi);for(let t=0;t<8;t++)t<p&&e[t][1]?(_[t][0]=e[t][0],_[t][1]=e[t][1]):(_[t][0]=Number.MAX_SAFE_INTEGER,_[t][1]=0);_.sort(Qi);const A=s.morphAttributes.position,y=s.morphAttributes.normal;let i=0;for(let t=0;t<8;t++){const p=_[t],f=p[0],m=p[1];f!==Number.MAX_SAFE_INTEGER&&m?(A&&s.getAttribute("morphTarget"+t)!==A[f]&&s.setAttribute("morphTarget"+t,A[f]),y&&s.getAttribute("morphNormal"+t)!==y[f]&&s.setAttribute("morphNormal"+t,y[f]),g[t]=m,i+=m):(A&&!0===s.hasAttribute("morphTarget"+t)&&s.deleteAttribute("morphTarget"+t),y&&!0===s.hasAttribute("morphNormal"+t)&&s.deleteAttribute("morphNormal"+t),g[t]=0)}const a=s.morphTargetsRelative?1:1-i;o.getUniforms().setValue(d,"morphTargetBaseInfluence",a),o.getUniforms().setValue(d,"morphTargetInfluences",g)}}}}function Ui(t,n,r,s){let a=new WeakMap;function o(t){const e=t.target;e.removeEventListener("dispose",o),r.remove(e.instanceMatrix),null!==e.instanceColor&&r.remove(e.instanceColor)}return{update:function(t){var e=s.render.frame,i=t.geometry,i=n.get(t,i);return a.get(i)!==e&&(n.update(i),a.set(i,e)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",o)&&t.addEventListener("dispose",o),r.update(t.instanceMatrix,34962),null!==t.instanceColor&&r.update(t.instanceColor,34962)),i},dispose:function(){a=new WeakMap}}}const Ni=new N,ki=new G,Oi=new H,Gi=new Ye,Hi=[],zi=[],Vi=new Float32Array(16),Wi=new Float32Array(9),qi=new Float32Array(4);function ji(i,n,r){const t=i[0];if(t<=0||0<t)return i;var e=n*r;let s=Hi[e];if(void 0===s&&(s=new Float32Array(e),Hi[e]=s),0!==n){t.toArray(s,0);for(let t=1,e=0;t!==n;++t)e+=r,i[t].toArray(s,e)}return s}function Yi(i,n){if(i.length!==n.length)return!1;for(let t=0,e=i.length;t<e;t++)if(i[t]!==n[t])return!1;return!0}function Ji(i,n){for(let t=0,e=n.length;t<e;t++)i[t]=n[t]}function Xi(e,i){let n=zi[i];void 0===n&&(n=new Int32Array(i),zi[i]=n);for(let t=0;t!==i;++t)n[t]=e.allocateTextureUnit();return n}function Ki(t,e){const i=this.cache;i[0]!==e&&(t.uniform1f(this.addr,e),i[0]=e)}function $i(t,e){const i=this.cache;void 0!==e.x?i[0]===e.x&&i[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y):Yi(i,e)||(t.uniform2fv(this.addr,e),Ji(i,e))}function Zi(t,e){const i=this.cache;void 0!==e.x?i[0]===e.x&&i[1]===e.y&&i[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z):void 0!==e.r?i[0]===e.r&&i[1]===e.g&&i[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b):Yi(i,e)||(t.uniform3fv(this.addr,e),Ji(i,e))}function tn(t,e){const i=this.cache;void 0!==e.x?i[0]===e.x&&i[1]===e.y&&i[2]===e.z&&i[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w):Yi(i,e)||(t.uniform4fv(this.addr,e),Ji(i,e))}function en(t,e){var i=this.cache,n=e.elements;void 0===n?Yi(i,e)||(t.uniformMatrix2fv(this.addr,!1,e),Ji(i,e)):Yi(i,n)||(qi.set(n),t.uniformMatrix2fv(this.addr,!1,qi),Ji(i,n))}function nn(t,e){var i=this.cache,n=e.elements;void 0===n?Yi(i,e)||(t.uniformMatrix3fv(this.addr,!1,e),Ji(i,e)):Yi(i,n)||(Wi.set(n),t.uniformMatrix3fv(this.addr,!1,Wi),Ji(i,n))}function sn(t,e){var i=this.cache,n=e.elements;void 0===n?Yi(i,e)||(t.uniformMatrix4fv(this.addr,!1,e),Ji(i,e)):Yi(i,n)||(Vi.set(n),t.uniformMatrix4fv(this.addr,!1,Vi),Ji(i,n))}function rn(t,e){const i=this.cache;i[0]!==e&&(t.uniform1i(this.addr,e),i[0]=e)}function an(t,e){var i=this.cache;Yi(i,e)||(t.uniform2iv(this.addr,e),Ji(i,e))}function on(t,e){var i=this.cache;Yi(i,e)||(t.uniform3iv(this.addr,e),Ji(i,e))}function ln(t,e){var i=this.cache;Yi(i,e)||(t.uniform4iv(this.addr,e),Ji(i,e))}function cn(t,e){const i=this.cache;i[0]!==e&&(t.uniform1ui(this.addr,e),i[0]=e)}function hn(t,e){var i=this.cache;Yi(i,e)||(t.uniform2uiv(this.addr,e),Ji(i,e))}function un(t,e){var i=this.cache;Yi(i,e)||(t.uniform3uiv(this.addr,e),Ji(i,e))}function dn(t,e){var i=this.cache;Yi(i,e)||(t.uniform4uiv(this.addr,e),Ji(i,e))}function An(t,e,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture2D(e||Ni,r)}function pn(t,e,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(e||Oi,r)}function gn(t,e,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTextureCube(e||Gi,r)}function mn(t,e,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture2DArray(e||ki,r)}function fn(t,e){t.uniform1fv(this.addr,e)}function vn(t,e){e=ji(e,this.size,2);t.uniform2fv(this.addr,e)}function yn(t,e){e=ji(e,this.size,3);t.uniform3fv(this.addr,e)}function xn(t,e){e=ji(e,this.size,4);t.uniform4fv(this.addr,e)}function _n(t,e){e=ji(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,e)}function En(t,e){e=ji(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,e)}function wn(t,e){e=ji(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,e)}function bn(t,e){t.uniform1iv(this.addr,e)}function In(t,e){t.uniform2iv(this.addr,e)}function Cn(t,e){t.uniform3iv(this.addr,e)}function Sn(t,e){t.uniform4iv(this.addr,e)}function Mn(t,e){t.uniform1uiv(this.addr,e)}function Bn(t,e){t.uniform2uiv(this.addr,e)}function Tn(t,e){t.uniform3uiv(this.addr,e)}function Rn(t,e){t.uniform4uiv(this.addr,e)}function Dn(t,e,i){var n=e.length,r=Xi(i,n);t.uniform1iv(this.addr,r);for(let t=0;t!==n;++t)i.setTexture2D(e[t]||Ni,r[t])}function Ln(t,e,i){var n=e.length,r=Xi(i,n);t.uniform1iv(this.addr,r);for(let t=0;t!==n;++t)i.setTexture3D(e[t]||Oi,r[t])}function Qn(t,e,i){var n=e.length,r=Xi(i,n);t.uniform1iv(this.addr,r);for(let t=0;t!==n;++t)i.setTextureCube(e[t]||Gi,r[t])}function Pn(t,e,i){var n=e.length,r=Xi(i,n);t.uniform1iv(this.addr,r);for(let t=0;t!==n;++t)i.setTexture2DArray(e[t]||ki,r[t])}class Fn{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.setValue=function(){switch(e.type){case 5126:return Ki;case 35664:return $i;case 35665:return Zi;case 35666:return tn;case 35674:return en;case 35675:return nn;case 35676:return sn;case 5124:case 35670:return rn;case 35667:case 35671:return an;case 35668:case 35672:return on;case 35669:case 35673:return ln;case 5125:return cn;case 36294:return hn;case 36295:return un;case 36296:return dn;case 35678:case 36198:case 36298:case 36306:case 35682:return An;case 35679:case 36299:case 36307:return pn;case 35680:case 36300:case 36308:case 36293:return gn;case 36289:case 36303:case 36311:case 36292:return mn}}()}}class Un{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.size=e.size,this.setValue=function(){switch(e.type){case 5126:return fn;case 35664:return vn;case 35665:return yn;case 35666:return xn;case 35674:return _n;case 35675:return En;case 35676:return wn;case 5124:case 35670:return bn;case 35667:case 35671:return In;case 35668:case 35672:return Cn;case 35669:case 35673:return Sn;case 5125:return Mn;case 36294:return Bn;case 36295:return Tn;case 36296:return Rn;case 35678:case 36198:case 36298:case 36306:case 35682:return Dn;case 35679:case 36299:case 36307:return Ln;case 35680:case 36300:case 36308:case 36293:return Qn;case 36289:case 36303:case 36311:case 36292:return Pn}}()}}class Nn{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(i,n,r){var s=this.seq;for(let t=0,e=s.length;t!==e;++t){const a=s[t];a.setValue(i,n[a.id],r)}}}const kn=/(\w+)(\])?(\[|\.)?/g;function On(t,e){t.seq.push(e),t.map[e.id]=e}function Gn(t,i,n){var r=t.name,s=r.length;for(kn.lastIndex=0;;){var a=kn.exec(r),o=kn.lastIndex;let e=a[1];var l="]"===a[2],a=a[3];if(l&&(e|=0),void 0===a||"["===a&&o+2===s){On(n,new(void 0===a?Fn:Un)(e,t,i));break}{let t=n.map[e];void 0===t&&On(n,t=new Nn(e)),n=t}}}class Hn{constructor(e,i){this.seq=[],this.map={};const n=e.getProgramParameter(i,35718);for(let t=0;t<n;++t){const n=e.getActiveUniform(i,t);Gn(n,e.getUniformLocation(i,n.name),this)}}setValue(t,e,i,n){const r=this.map[e];void 0!==r&&r.setValue(t,i,n)}setOptional(t,e,i){e=e[i];void 0!==e&&this.setValue(t,i,e)}static upload(i,n,r,s){for(let t=0,e=n.length;t!==e;++t){const a=n[t],o=r[a.id];!1!==o.needsUpdate&&a.setValue(i,o.value,s)}}static seqWithValue(i,n){const r=[];for(let t=0,e=i.length;t!==e;++t){var s=i[t];s.id in n&&r.push(s)}return r}}function zn(t,e,i){e=t.createShader(e);return t.shaderSource(e,i),t.compileShader(e),e}let Vn=0;function Wn(t,e,i){const n=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();if(n&&""===r)return"";var s=/ERROR: 0:(\d+)/.exec(r);if(s){const n=parseInt(s[1]);return i.toUpperCase()+"\n\n"+r+"\n\n"+function(t,e){const i=t.split("\n"),n=[],r=Math.max(e-6,0),s=Math.min(e+6,i.length);for(let t=r;t<s;t++){const r=t+1;n.push(`${r===e?">":" "} ${r}: `+i[t])}return n.join("\n")}(t.getShaderSource(e),n)}return r}function qn(t,e){e=function(t){switch(t){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function jn(t,e){let i;switch(e){case 1:i="Linear";break;case 2:i="Reinhard";break;case 3:i="OptimizedCineon";break;case 4:i="ACESFilmic";break;case 5:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),i="Linear"}return"vec3 "+t+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function Yn(t){return""!==t}function Jn(t,e){var i=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Xn(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Kn=/^[ \t]*#include +<([\w\d./]+)>/gm;function $n(t){return t.replace(Kn,Zn)}function Zn(t,e){var i=ai[e];if(void 0===i)throw new Error("Can not resolve #include <"+e+">");return $n(i)}const ts=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function es(t){return t.replace(ts,is)}function is(t,e,i,n){let r="";for(let t=parseInt(e);t<parseInt(i);t++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return r}function ns(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function ss(i,n,r,t){const s=i.getContext(),e=r.defines;var a=r.vertexShader,o=r.fragmentShader;const l=function(){let t="SHADOWMAP_TYPE_BASIC";return 1===r.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===r.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===r.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(),h=function(){let t="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:t="ENVMAP_TYPE_CUBE_UV"}return t}(),c=function(){let t="ENVMAP_MODE_REFLECTION";return t=r.envMap&&302===r.envMapMode?"ENVMAP_MODE_REFRACTION":t}(),u=function(){let t="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(),d=function(){var t=r.envMapCubeUVHeight;if(null===t)return null;var e=Math.log2(t)-2,t=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:t,maxMip:e}}(),p=r.isWebGL2?"":[r.extensionDerivatives||r.envMapCubeUVHeight||r.bumpMap||r.tangentSpaceNormalMap||r.clearcoatNormalMap||r.flatShading||"physical"===r.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Yn).join("\n"),f=function(t){const e=[];for(const n in t){var i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(e),m=s.createProgram();let g,A,v=r.glslVersion?"#version "+r.glslVersion+"\n":"";r.isRawShaderMaterial?(0<(g=[f].filter(Yn).join("\n")).length&&(g+="\n"),0<(A=[p,f].filter(Yn).join("\n")).length&&(A+="\n")):(g=[ns(r),"#define SHADER_NAME "+r.shaderName,f,r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+c:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.morphColors&&r.isWebGL2?"#define USE_MORPHCOLORS":"",0<r.morphTargetsCount&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",0<r.morphTargetsCount&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",0<r.morphTargetsCount&&r.isWebGL2?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Yn).join("\n"),A=[p,ns(r),"#define SHADER_NAME "+r.shaderName,f,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.envMap?"#define "+c:"",r.envMap?"#define "+u:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==r.toneMapping?"#define TONE_MAPPING":"",0!==r.toneMapping?ai.tonemapping_pars_fragment:"",0!==r.toneMapping?jn("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",ai.encodings_pars_fragment,qn("linearToOutputTexel",r.outputEncoding),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(Yn).join("\n")),a=Xn(Jn($n(a),r),r),o=Xn(Jn($n(o),r),r),a=es(a),o=es(o),r.isWebGL2&&!0!==r.isRawShaderMaterial&&(v="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,A=["#define varying in","300 es"===r.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===r.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+A);o=v+A+o,a=zn(s,35633,v+g+a),o=zn(s,35632,o);if(s.attachShader(m,a),s.attachShader(m,o),void 0!==r.index0AttributeName?s.bindAttribLocation(m,0,r.index0AttributeName):!0===r.morphTargets&&s.bindAttribLocation(m,0,"position"),s.linkProgram(m),i.debug.checkShaderErrors){const i=s.getProgramInfoLog(m).trim(),n=s.getShaderInfoLog(a).trim(),r=s.getShaderInfoLog(o).trim();let t=!0,e=!0;if(!1===s.getProgramParameter(m,35714)){t=!1;const n=Wn(s,a,"vertex"),r=Wn(s,o,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+i+"\n"+n+"\n"+r)}else""!==i?console.warn("THREE.WebGLProgram: Program Info Log:",i):""!==n&&""!==r||(e=!1);e&&(this.diagnostics={runnable:t,programLog:i,vertexShader:{log:n,prefix:g},fragmentShader:{log:r,prefix:A}})}let y,_;return s.deleteShader(a),s.deleteShader(o),this.getUniforms=function(){return y=void 0===y?new Hn(s,m):y},this.getAttributes=function(){return _=void 0===_?function(i,n){const r={},s=i.getProgramParameter(n,35721);for(let e=0;e<s;e++){const s=i.getActiveAttrib(n,e),a=s.name;let t=1;35674===s.type&&(t=2),35675===s.type&&(t=3),35676===s.type&&(t=4),r[a]={type:s.type,location:i.getAttribLocation(n,a),locationSize:t}}return r}(s,m):_},this.destroy=function(){t.releaseStatesOfProgram(this),s.deleteProgram(m),this.program=void 0},this.name=r.shaderName,this.id=Vn++,this.cacheKey=n,this.usedTimes=1,this.program=m,this.vertexShader=a,this.fragmentShader=o,this}let rs=0;class as{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,i=t.fragmentShader,n=this._getShaderStage(e),r=this._getShaderStage(i),s=this._getShaderCacheForMaterial(t);return!1===s.has(n)&&(s.add(n),n.usedTimes++),!1===s.has(r)&&(s.add(r),r.usedTimes++),this}remove(t){var e=this.materialCache.get(t);for(const t of e)t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let i=e.get(t);return void 0===i&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){const e=this.shaderCache;let i=e.get(t);return void 0===i&&(i=new os(t),e.set(t,i)),i}}class os{constructor(t){this.id=rs++,this.code=t,this.usedTimes=0}}function ls(y,_,b,x,S,t,w){const r=new Dt,E=new as,s=[],C=S.isWebGL2,T=S.logarithmicDepthBuffer,M=S.vertexTextures;let I=S.precision;const B={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(t,e,i,n,r){var s=n.fog,a=r.geometry,n=t.isMeshStandardMaterial?n.environment:null,n=(t.isMeshStandardMaterial?b:_).get(t.envMap||n),o=n&&306===n.mapping?n.image.height:null,l=B[t.type],h=(null!==t.precision&&((I=S.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",I,"instead.")),a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color),h=void 0!==h?h.length:0;let c,u,d,p,f=0;if(void 0!==a.morphAttributes.position&&(f=1),void 0!==a.morphAttributes.normal&&(f=2),void 0!==a.morphAttributes.color&&(f=3),l){const y=li[l];c=y.vertexShader,u=y.fragmentShader}else c=t.vertexShader,u=t.fragmentShader,E.update(t),d=E.getVertexShaderID(t),p=E.getFragmentShaderID(t);var m=y.getRenderTarget(),g=0<t.alphaTest,A=0<t.clearcoat,v=0<t.iridescence;return{isWebGL2:C,shaderID:l,shaderName:t.type,vertexShader:c,fragmentShader:u,defines:t.defines,customVertexShaderID:d,customFragmentShaderID:p,isRawShaderMaterial:!0===t.isRawShaderMaterial,glslVersion:t.glslVersion,precision:I,instancing:!0===r.isInstancedMesh,instancingColor:!0===r.isInstancedMesh&&null!==r.instanceColor,supportsVertexTextures:M,outputEncoding:null===m?y.outputEncoding:!0===m.isXRRenderTarget?m.texture.encoding:3e3,map:!!t.map,matcap:!!t.matcap,envMap:!!n,envMapMode:n&&n.mapping,envMapCubeUVHeight:o,lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:1===t.normalMapType,tangentSpaceNormalMap:0===t.normalMapType,decodeVideoTexture:!!t.map&&!0===t.map.isVideoTexture&&3001===t.map.encoding,clearcoat:A,clearcoatMap:A&&!!t.clearcoatMap,clearcoatRoughnessMap:A&&!!t.clearcoatRoughnessMap,clearcoatNormalMap:A&&!!t.clearcoatNormalMap,iridescence:v,iridescenceMap:v&&!!t.iridescenceMap,iridescenceThicknessMap:v&&!!t.iridescenceThicknessMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,specularIntensityMap:!!t.specularIntensityMap,specularColorMap:!!t.specularColorMap,opaque:!1===t.transparent&&1===t.blending,alphaMap:!!t.alphaMap,alphaTest:g,gradientMap:!!t.gradientMap,sheen:0<t.sheen,sheenColorMap:!!t.sheenColorMap,sheenRoughnessMap:!!t.sheenRoughnessMap,transmission:0<t.transmission,transmissionMap:!!t.transmissionMap,thicknessMap:!!t.thicknessMap,combine:t.combine,vertexTangents:!!t.normalMap&&!!a.attributes.tangent,vertexColors:t.vertexColors,vertexAlphas:!0===t.vertexColors&&!!a.attributes.color&&4===a.attributes.color.itemSize,vertexUvs:!!(t.map||t.bumpMap||t.normalMap||t.specularMap||t.alphaMap||t.emissiveMap||t.roughnessMap||t.metalnessMap||t.clearcoatMap||t.clearcoatRoughnessMap||t.clearcoatNormalMap||t.iridescenceMap||t.iridescenceThicknessMap||t.displacementMap||t.transmissionMap||t.thicknessMap||t.specularIntensityMap||t.specularColorMap||t.sheenColorMap||t.sheenRoughnessMap),uvsVertexOnly:!(t.map||t.bumpMap||t.normalMap||t.specularMap||t.alphaMap||t.emissiveMap||t.roughnessMap||t.metalnessMap||t.clearcoatNormalMap||t.iridescenceMap||t.iridescenceThicknessMap||0<t.transmission||t.transmissionMap||t.thicknessMap||t.specularIntensityMap||t.specularColorMap||0<t.sheen||t.sheenColorMap||t.sheenRoughnessMap||!t.displacementMap),fog:!!s,useFog:!0===t.fog,fogExp2:s&&s.isFogExp2,flatShading:!!t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:T,skinning:!0===r.isSkinnedMesh,morphTargets:void 0!==a.morphAttributes.position,morphNormals:void 0!==a.morphAttributes.normal,morphColors:void 0!==a.morphAttributes.color,morphTargetsCount:h,morphTextureStride:f,numDirLights:e.directional.length,numPointLights:e.point.length,numSpotLights:e.spot.length,numSpotLightMaps:e.spotLightMap.length,numRectAreaLights:e.rectArea.length,numHemiLights:e.hemi.length,numDirLightShadows:e.directionalShadowMap.length,numPointLightShadows:e.pointShadowMap.length,numSpotLightShadows:e.spotShadowMap.length,numSpotLightShadowsWithMaps:e.numSpotLightShadowsWithMaps,numClippingPlanes:w.numPlanes,numClipIntersection:w.numIntersection,dithering:t.dithering,shadowMapEnabled:y.shadowMap.enabled&&0<i.length,shadowMapType:y.shadowMap.type,toneMapping:t.toneMapped?y.toneMapping:0,physicallyCorrectLights:y.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,doubleSided:2===t.side,flipSided:1===t.side,useDepthPacking:!!t.depthPacking,depthPacking:t.depthPacking||0,index0AttributeName:t.index0AttributeName,extensionDerivatives:t.extensions&&t.extensions.derivatives,extensionFragDepth:t.extensions&&t.extensions.fragDepth,extensionDrawBuffers:t.extensions&&t.extensions.drawBuffers,extensionShaderTextureLOD:t.extensions&&t.extensions.shaderTextureLOD,rendererExtensionFragDepth:C||x.has("EXT_frag_depth"),rendererExtensionDrawBuffers:C||x.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:C||x.has("EXT_shader_texture_lod"),customProgramCacheKey:t.customProgramCacheKey()}},getProgramCacheKey:function(t){const e=[];if(t.shaderID?e.push(t.shaderID):(e.push(t.customVertexShaderID),e.push(t.customFragmentShaderID)),void 0!==t.defines)for(const y in t.defines)e.push(y),e.push(t.defines[y]);return!1===t.isRawShaderMaterial&&(i=e,n=t,i.push(n.precision),i.push(n.outputEncoding),i.push(n.envMapMode),i.push(n.envMapCubeUVHeight),i.push(n.combine),i.push(n.vertexUvs),i.push(n.fogExp2),i.push(n.sizeAttenuation),i.push(n.morphTargetsCount),i.push(n.morphAttributeCount),i.push(n.numDirLights),i.push(n.numPointLights),i.push(n.numSpotLights),i.push(n.numSpotLightMaps),i.push(n.numHemiLights),i.push(n.numRectAreaLights),i.push(n.numDirLightShadows),i.push(n.numPointLightShadows),i.push(n.numSpotLightShadows),i.push(n.numSpotLightShadowsWithMaps),i.push(n.shadowMapType),i.push(n.toneMapping),i.push(n.numClippingPlanes),i.push(n.numClipIntersection),i.push(n.depthPacking),i=e,n=t,r.disableAll(),n.isWebGL2&&r.enable(0),n.supportsVertexTextures&&r.enable(1),n.instancing&&r.enable(2),n.instancingColor&&r.enable(3),n.map&&r.enable(4),n.matcap&&r.enable(5),n.envMap&&r.enable(6),n.lightMap&&r.enable(7),n.aoMap&&r.enable(8),n.emissiveMap&&r.enable(9),n.bumpMap&&r.enable(10),n.normalMap&&r.enable(11),n.objectSpaceNormalMap&&r.enable(12),n.tangentSpaceNormalMap&&r.enable(13),n.clearcoat&&r.enable(14),n.clearcoatMap&&r.enable(15),n.clearcoatRoughnessMap&&r.enable(16),n.clearcoatNormalMap&&r.enable(17),n.iridescence&&r.enable(18),n.iridescenceMap&&r.enable(19),n.iridescenceThicknessMap&&r.enable(20),n.displacementMap&&r.enable(21),n.specularMap&&r.enable(22),n.roughnessMap&&r.enable(23),n.metalnessMap&&r.enable(24),n.gradientMap&&r.enable(25),n.alphaMap&&r.enable(26),n.alphaTest&&r.enable(27),n.vertexColors&&r.enable(28),n.vertexAlphas&&r.enable(29),n.vertexUvs&&r.enable(30),n.vertexTangents&&r.enable(31),n.uvsVertexOnly&&r.enable(32),i.push(r.mask),r.disableAll(),n.fog&&r.enable(0),n.useFog&&r.enable(1),n.flatShading&&r.enable(2),n.logarithmicDepthBuffer&&r.enable(3),n.skinning&&r.enable(4),n.morphTargets&&r.enable(5),n.morphNormals&&r.enable(6),n.morphColors&&r.enable(7),n.premultipliedAlpha&&r.enable(8),n.shadowMapEnabled&&r.enable(9),n.physicallyCorrectLights&&r.enable(10),n.doubleSided&&r.enable(11),n.flipSided&&r.enable(12),n.useDepthPacking&&r.enable(13),n.dithering&&r.enable(14),n.specularIntensityMap&&r.enable(15),n.specularColorMap&&r.enable(16),n.transmission&&r.enable(17),n.transmissionMap&&r.enable(18),n.thicknessMap&&r.enable(19),n.sheen&&r.enable(20),n.sheenColorMap&&r.enable(21),n.sheenRoughnessMap&&r.enable(22),n.decodeVideoTexture&&r.enable(23),n.opaque&&r.enable(24),i.push(r.mask),e.push(y.outputEncoding)),e.push(t.customProgramCacheKey),e.join();var i,n},getUniforms:function(t){var e=B[t.type];let i;if(e){const t=li[e];i=ze.clone(t.uniforms)}else i=t.uniforms;return i},acquireProgram:function(i,n){let r;for(let t=0,e=s.length;t<e;t++){const i=s[t];if(i.cacheKey===n){++(r=i).usedTimes;break}}return void 0===r&&(r=new ss(y,n,i,t),s.push(r)),r},releaseProgram:function(t){var e;0==--t.usedTimes&&(e=s.indexOf(t),s[e]=s[s.length-1],s.pop(),t.destroy())},releaseShaderCache:function(t){E.remove(t)},programs:s,dispose:function(){E.dispose()}}}function cs(){let n=new WeakMap;return{get:function(t){let e=n.get(t);return void 0===e&&(e={},n.set(t,e)),e},remove:function(t){n.delete(t)},update:function(t,e,i){n.get(t)[e]=i},dispose:function(){n=new WeakMap}}}function hs(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function us(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function ds(){const o=[];let l=0;const a=[],h=[],c=[];function u(t,e,i,n,r,s){let a=o[l];return void 0===a?(a={id:t.id,object:t,geometry:e,material:i,groupOrder:n,renderOrder:t.renderOrder,z:r,group:s},o[l]=a):(a.id=t.id,a.object=t,a.geometry=e,a.material=i,a.groupOrder=n,a.renderOrder=t.renderOrder,a.z=r,a.group=s),l++,a}return{opaque:a,transmissive:h,transparent:c,init:function(){l=0,a.length=0,h.length=0,c.length=0},push:function(t,e,i,n,r,s){t=u(t,e,i,n,r,s);(0<i.transmission?h:!0===i.transparent?c:a).push(t)},unshift:function(t,e,i,n,r,s){t=u(t,e,i,n,r,s);(0<i.transmission?h:!0===i.transparent?c:a).unshift(t)},finish:function(){for(let t=l,e=o.length;t<e;t++){const l=o[t];if(null===l.id)break;l.id=null,l.object=null,l.geometry=null,l.material=null,l.group=null}},sort:function(t,e){1<a.length&&a.sort(t||hs),1<h.length&&h.sort(e||us),1<c.length&&c.sort(e||us)}}}function As(){let r=new WeakMap;return{get:function(t,e){const i=r.get(t);let n;return void 0===i?(n=new ds,r.set(t,[n])):e>=i.length?(n=new ds,i.push(n)):n=i[e],n},dispose:function(){r=new WeakMap}}}function ps(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new V,color:new D};break;case"SpotLight":e={position:new V,direction:new V,color:new D,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new V,color:new D,distance:0,decay:0};break;case"HemisphereLight":e={direction:new V,skyColor:new D,groundColor:new D};break;case"RectAreaLight":e={color:new D,position:new V,halfWidth:new V,halfHeight:new V}}return i[t.id]=e}}}let gs=0;function ms(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function fs(b,x){const S=new ps,w=function(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new v};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new v,shadowCameraNear:1,shadowCameraFar:1e3}}return i[t.id]=e}}}(),E={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let t=0;t<9;t++)E.probe.push(new V);const c=new V,u=new _t,d=new _t;return{setup:function(i,n){let r=0,s=0,a=0;for(let t=0;t<9;t++)E.probe[t].set(0,0,0);let o=0,l=0,h=0,c=0,u=0,d=0,p=0,f=0,m=0,g=0;i.sort(ms);var A=!0!==n?Math.PI:1;for(let t=0,e=i.length;t<e;t++){const x=i[t],n=x.color,v=x.intensity,y=x.distance,_=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight)r+=n.r*v*A,s+=n.g*v*A,a+=n.b*v*A;else if(x.isLightProbe)for(let t=0;t<9;t++)E.probe[t].addScaledVector(x.sh.coefficients[t],v);else if(x.isDirectionalLight){const b=S.get(x);if(b.color.copy(x.color).multiplyScalar(x.intensity*A),x.castShadow){const b=x.shadow,S=w.get(x);S.shadowBias=b.bias,S.shadowNormalBias=b.normalBias,S.shadowRadius=b.radius,S.shadowMapSize=b.mapSize,E.directionalShadow[o]=S,E.directionalShadowMap[o]=_,E.directionalShadowMatrix[o]=x.shadow.matrix,d++}E.directional[o]=b,o++}else if(x.isSpotLight){const b=S.get(x),i=(b.position.setFromMatrixPosition(x.matrixWorld),b.color.copy(n).multiplyScalar(v*A),b.distance=y,b.coneCos=Math.cos(x.angle),b.penumbraCos=Math.cos(x.angle*(1-x.penumbra)),b.decay=x.decay,E.spot[h]=b,x.shadow);if(x.map&&(E.spotLightMap[m]=x.map,m++,i.updateMatrices(x),x.castShadow&&g++),E.spotLightMatrix[h]=i.matrix,x.castShadow){const b=w.get(x);b.shadowBias=i.bias,b.shadowNormalBias=i.normalBias,b.shadowRadius=i.radius,b.shadowMapSize=i.mapSize,E.spotShadow[h]=b,E.spotShadowMap[h]=_,f++}h++}else if(x.isRectAreaLight){const b=S.get(x);b.color.copy(n).multiplyScalar(v),b.halfWidth.set(.5*x.width,0,0),b.halfHeight.set(0,.5*x.height,0),E.rectArea[c]=b,c++}else if(x.isPointLight){const b=S.get(x);if(b.color.copy(x.color).multiplyScalar(x.intensity*A),b.distance=x.distance,b.decay=x.decay,x.castShadow){const b=x.shadow,S=w.get(x);S.shadowBias=b.bias,S.shadowNormalBias=b.normalBias,S.shadowRadius=b.radius,S.shadowMapSize=b.mapSize,S.shadowCameraNear=b.camera.near,S.shadowCameraFar=b.camera.far,E.pointShadow[l]=S,E.pointShadowMap[l]=_,E.pointShadowMatrix[l]=x.shadow.matrix,p++}E.point[l]=b,l++}else if(x.isHemisphereLight){const b=S.get(x);b.skyColor.copy(x.color).multiplyScalar(v*A),b.groundColor.copy(x.groundColor).multiplyScalar(v*A),E.hemi[u]=b,u++}}0<c&&(x.isWebGL2||!0===b.has("OES_texture_float_linear")?(E.rectAreaLTC1=oi.LTC_FLOAT_1,E.rectAreaLTC2=oi.LTC_FLOAT_2):!0===b.has("OES_texture_half_float_linear")?(E.rectAreaLTC1=oi.LTC_HALF_1,E.rectAreaLTC2=oi.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),E.ambient[0]=r,E.ambient[1]=s,E.ambient[2]=a;const v=E.hash;v.directionalLength===o&&v.pointLength===l&&v.spotLength===h&&v.rectAreaLength===c&&v.hemiLength===u&&v.numDirectionalShadows===d&&v.numPointShadows===p&&v.numSpotShadows===f&&v.numSpotMaps===m||(E.directional.length=o,E.spot.length=h,E.rectArea.length=c,E.point.length=l,E.hemi.length=u,E.directionalShadow.length=d,E.directionalShadowMap.length=d,E.pointShadow.length=p,E.pointShadowMap.length=p,E.spotShadow.length=f,E.spotShadowMap.length=f,E.directionalShadowMatrix.length=d,E.pointShadowMatrix.length=p,E.spotLightMatrix.length=f+m-g,E.spotLightMap.length=m,E.numSpotLightShadowsWithMaps=g,v.directionalLength=o,v.pointLength=l,v.spotLength=h,v.rectAreaLength=c,v.hemiLength=u,v.numDirectionalShadows=d,v.numPointShadows=p,v.numSpotShadows=f,v.numSpotMaps=m,E.version=gs++)},setupView:function(i,t){let n=0,r=0,s=0,a=0,o=0;var l=t.matrixWorldInverse;for(let t=0,e=i.length;t<e;t++){var h=i[t];if(h.isDirectionalLight){const i=E.directional[n];i.direction.setFromMatrixPosition(h.matrixWorld),c.setFromMatrixPosition(h.target.matrixWorld),i.direction.sub(c),i.direction.transformDirection(l),n++}else if(h.isSpotLight){const i=E.spot[s];i.position.setFromMatrixPosition(h.matrixWorld),i.position.applyMatrix4(l),i.direction.setFromMatrixPosition(h.matrixWorld),c.setFromMatrixPosition(h.target.matrixWorld),i.direction.sub(c),i.direction.transformDirection(l),s++}else if(h.isRectAreaLight){const i=E.rectArea[a];i.position.setFromMatrixPosition(h.matrixWorld),i.position.applyMatrix4(l),d.identity(),u.copy(h.matrixWorld),u.premultiply(l),d.extractRotation(u),i.halfWidth.set(.5*h.width,0,0),i.halfHeight.set(0,.5*h.height,0),i.halfWidth.applyMatrix4(d),i.halfHeight.applyMatrix4(d),a++}else if(h.isPointLight){const i=E.point[r];i.position.setFromMatrixPosition(h.matrixWorld),i.position.applyMatrix4(l),r++}else if(h.isHemisphereLight){const i=E.hemi[o];i.direction.setFromMatrixPosition(h.matrixWorld),i.direction.transformDirection(l),o++}}},state:E}}function vs(t,e){const i=new fs(t,e),n=[],r=[];return{init:function(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:i},setupLights:function(t){i.setup(n,t)},setupLightsView:function(t){i.setupView(n,t)},pushLight:function(t){n.push(t)},pushShadow:function(t){r.push(t)}}}function ys(r,s){let a=new WeakMap;return{get:function(t,e=0){const i=a.get(t);let n;return void 0===i?(n=new vs(r,s),a.set(t,[n])):e>=i.length?(n=new vs(r,s),i.push(n)):n=i[e],n},dispose:function(){a=new WeakMap}}}class xs extends re{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class _s extends re{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new V,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function Es(d,p,t){let f=new ii;const m=new v,g=new v,A=new k,o=new xs({depthPacking:3201}),l=new _s,h={},y=t.maxTextureSize,c={0:1,1:0,2:2},_=new Ve({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new v},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),b=_.clone(),e=(b.defines.HORIZONTAL_PASS=1,new xe),x=(e.setAttribute("position",new ce(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3)),new Ne(e,_)),S=this;function w(i,n,t,e,r,s){let a=null;i=!0===t.isPointLight?i.customDistanceMaterial:i.customDepthMaterial;if(a=void 0!==i?i:!0===t.isPointLight?l:o,d.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&0<n.alphaTest){const d=a.uuid,i=n.uuid;let t=h[d],e=(void 0===t&&(t={},h[d]=t),t[i]);void 0===e&&(e=a.clone(),t[i]=e),a=e}return a.visible=n.visible,a.wireframe=n.wireframe,a.side=3===s?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:c[n.side],a.alphaMap=n.alphaMap,a.alphaTest=n.alphaTest,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===t.isPointLight&&!0===a.isMeshDistanceMaterial&&(a.referencePosition.setFromMatrixPosition(t.matrixWorld),a.nearDistance=e,a.farDistance=r),a}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(i,n,r){if(!1!==S.enabled&&(!1!==S.autoUpdate||!1!==S.needsUpdate)&&0!==i.length){const t=d.getRenderTarget(),h=d.getActiveCubeFace(),c=d.getActiveMipmapLevel(),u=d.state;u.setBlending(0),u.buffers.color.setClear(1,1,1,1),u.buffers.depth.setTest(!0),u.setScissorTest(!1);for(let t=0,e=i.length;t<e;t++){const h=i[t],c=h.shadow;if(void 0===c)console.warn("THREE.WebGLShadowMap:",h,"has no shadow.");else if(!1!==c.autoUpdate||!1!==c.needsUpdate){m.copy(c.mapSize);var s=c.getFrameExtents();if(m.multiply(s),g.copy(c.mapSize),(m.x>y||m.y>y)&&(m.x>y&&(g.x=Math.floor(y/s.x),m.x=g.x*s.x,c.mapSize.x=g.x),m.y>y&&(g.y=Math.floor(y/s.y),m.y=g.y*s.y,c.mapSize.y=g.y)),null===c.map){const d=3!==this.type?{minFilter:1003,magFilter:1003}:{};c.map=new O(m.x,m.y,d),c.map.texture.name=h.name+".shadowMap",c.camera.updateProjectionMatrix()}d.setRenderTarget(c.map),d.clear();var a=c.getViewportCount();for(let t=0;t<a;t++){const i=c.getViewport(t);A.set(g.x*i.x,g.y*i.y,g.x*i.z,g.y*i.w),u.viewport(A),c.updateMatrices(h,t),f=c.getFrustum(),function i(n,r,s,a,o){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===o)&&(!n.frustumCulled||f.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const f=p.update(n),r=n.material;if(Array.isArray(r)){const p=f.groups;for(let t=0,e=p.length;t<e;t++){var l=p[t],h=r[l.materialIndex];if(h&&h.visible){const p=w(n,h,a,s.near,s.far,o);d.renderBufferDirect(s,null,f,p,n,l)}}}else if(r.visible){const p=w(n,r,a,s.near,s.far,o);d.renderBufferDirect(s,null,f,p,n,null)}}var c=n.children;for(let t=0,e=c.length;t<e;t++)i(c[t],r,s,a,o)}}(n,r,c.camera,h,this.type)}!0!==c.isPointLightShadow&&3===this.type&&(s=c,o=r,l=void 0,l=p.update(x),_.defines.VSM_SAMPLES!==s.blurSamples&&(_.defines.VSM_SAMPLES=s.blurSamples,b.defines.VSM_SAMPLES=s.blurSamples,_.needsUpdate=!0,b.needsUpdate=!0),null===s.mapPass&&(s.mapPass=new O(m.x,m.y)),_.uniforms.shadow_pass.value=s.map.texture,_.uniforms.resolution.value=s.mapSize,_.uniforms.radius.value=s.radius,d.setRenderTarget(s.mapPass),d.clear(),d.renderBufferDirect(o,null,l,_,x,null),b.uniforms.shadow_pass.value=s.mapPass.texture,b.uniforms.resolution.value=s.mapSize,b.uniforms.radius.value=s.radius,d.setRenderTarget(s.map),d.clear(),d.renderBufferDirect(o,null,l,b,x,null)),c.needsUpdate=!1}}var o,l;S.needsUpdate=!1,d.setRenderTarget(t,h,c)}}}function ws(c,Q,F){const i=F.isWebGL2,n=new function(){let e=!1;const s=new k;let i=null;const a=new k(0,0,0,0);return{setMask:function(t){i===t||e||(c.colorMask(t,t,t,t),i=t)},setLocked:function(t){e=t},setClear:function(t,e,i,n,r){!0===r&&(t*=n,e*=n,i*=n),s.set(t,e,i,n),!1===a.equals(s)&&(c.clearColor(t,e,i,n),a.copy(s))},reset:function(){e=!1,i=null,a.set(-1,0,0,0)}}},r=new function(){let e=!1,i=null,n=null,r=null;return{setTest:function(t){(t?D:P)(2929)},setMask:function(t){i===t||e||(c.depthMask(t),i=t)},setFunc:function(t){if(n!==t){if(t)switch(t){case 0:c.depthFunc(512);break;case 1:c.depthFunc(519);break;case 2:c.depthFunc(513);break;case 3:default:c.depthFunc(515);break;case 4:c.depthFunc(514);break;case 5:c.depthFunc(518);break;case 6:c.depthFunc(516);break;case 7:c.depthFunc(517)}else c.depthFunc(515);n=t}},setLocked:function(t){e=t},setClear:function(t){r!==t&&(c.clearDepth(t),r=t)},reset:function(){e=!1,i=null,n=null,r=null}}},s=new function(){let e=!1,i=null,n=null,r=null,s=null,a=null,o=null,l=null,h=null;return{setTest:function(t){e||(t?D:P)(2960)},setMask:function(t){i===t||e||(c.stencilMask(t),i=t)},setFunc:function(t,e,i){n===t&&r===e&&s===i||(c.stencilFunc(t,e,i),n=t,r=e,s=i)},setOp:function(t,e,i){a===t&&o===e&&l===i||(c.stencilOp(t,e,i),a=t,o=e,l=i)},setLocked:function(t){e=t},setClear:function(t){h!==t&&(c.clearStencil(t),h=t)},reset:function(){e=!1,i=null,n=null,r=null,s=null,a=null,o=null,l=null,h=null}}},O=new WeakMap,a=new WeakMap;let e={},o={},l=new WeakMap,G=[],h=null,u=!1,d=null,p=null,f=null,m=null,g=null,A=null,v=null,y=!1,_=null,b=null,x=null,S=null,w=null;const U=c.getParameter(35661);let E=!1,t=0;const C=c.getParameter(7938);-1!==C.indexOf("WebGL")?(t=parseFloat(/^WebGL (\d)/.exec(C)[1]),E=1<=t):-1!==C.indexOf("OpenGL ES")&&(t=parseFloat(/^OpenGL ES (\d)/.exec(C)[1]),E=2<=t);let T=null,M={};const H=c.getParameter(3088),V=c.getParameter(2978),I=(new k).fromArray(H),B=(new k).fromArray(V);function z(t,e,i){var n=new Uint8Array(4),r=c.createTexture();c.bindTexture(t,r),c.texParameteri(t,10241,9728),c.texParameteri(t,10240,9728);for(let t=0;t<i;t++)c.texImage2D(e+t,0,6408,1,1,0,6408,5121,n);return r}const W={};function D(t){!0!==e[t]&&(c.enable(t),e[t]=!0)}function P(t){!1!==e[t]&&(c.disable(t),e[t]=!1)}W[3553]=z(3553,3553,1),W[34067]=z(34067,34069,6),n.setClear(0,0,0,1),r.setClear(1),s.setClear(0),D(2929),r.setFunc(3),q(!1),j(1),D(2884),N(0);const L={100:32774,101:32778,102:32779};if(i)L[103]=32775,L[104]=32776;else{const c=Q.get("EXT_blend_minmax");null!==c&&(L[103]=c.MIN_EXT,L[104]=c.MAX_EXT)}const R={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function N(t,e,i,n,r,s,a,o){if(0!==t){if(!1===u&&(D(3042),u=!0),5===t)r=r||e,s=s||i,a=a||n,e===p&&r===g||(c.blendEquationSeparate(L[e],L[r]),p=e,g=r),i===f&&n===m&&s===A&&a===v||(c.blendFuncSeparate(R[i],R[n],R[s],R[a]),f=i,m=n,A=s,v=a),d=t,y=null;else if(t!==d||o!==y){if(100===p&&100===g||(c.blendEquation(32774),p=100,g=100),o)switch(t){case 1:c.blendFuncSeparate(1,771,1,771);break;case 2:c.blendFunc(1,1);break;case 3:c.blendFuncSeparate(0,769,0,1);break;case 4:c.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:c.blendFuncSeparate(770,771,1,771);break;case 2:c.blendFunc(770,1);break;case 3:c.blendFuncSeparate(0,769,0,1);break;case 4:c.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}f=null,m=null,A=null,v=null,d=t,y=o}}else!0===u&&(P(3042),u=!1)}function q(t){_!==t&&(t?c.frontFace(2304):c.frontFace(2305),_=t)}function j(t){0!==t?(D(2884),t!==b&&(1===t?c.cullFace(1029):2===t?c.cullFace(1028):c.cullFace(1032))):P(2884),b=t}function X(t,e,i){t?(D(32823),S===e&&w===i||(c.polygonOffset(e,i),S=e,w=i)):P(32823)}function Y(t){void 0===t&&(t=33984+U-1),T!==t&&(c.activeTexture(t),T=t)}return{buffers:{color:n,depth:r,stencil:s},enable:D,disable:P,bindFramebuffer:function(t,e){return o[t]!==e&&(c.bindFramebuffer(t,e),o[t]=e,i&&(36009===t&&(o[36160]=e),36160===t&&(o[36009]=e)),!0)},drawBuffers:function(t,e){let i=G,n=!1;if(t)if(void 0===(i=l.get(e))&&(i=[],l.set(e,i)),t.isWebGLMultipleRenderTargets){const c=t.texture;if(i.length!==c.length||36064!==i[0]){for(let t=0,e=c.length;t<e;t++)i[t]=36064+t;i.length=c.length,n=!0}}else 36064!==i[0]&&(i[0]=36064,n=!0);else 1029!==i[0]&&(i[0]=1029,n=!0);n&&(F.isWebGL2?c.drawBuffers(i):Q.get("WEBGL_draw_buffers").drawBuffersWEBGL(i))},useProgram:function(t){return h!==t&&(c.useProgram(t),h=t,!0)},setBlending:N,setMaterial:function(t,e){(2===t.side?P:D)(2884);let i=1===t.side;q(i=e?!i:i),1===t.blending&&!1===t.transparent?N(0):N(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),r.setFunc(t.depthFunc),r.setTest(t.depthTest),r.setMask(t.depthWrite),n.setMask(t.colorWrite);e=t.stencilWrite;s.setTest(e),e&&(s.setMask(t.stencilWriteMask),s.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),s.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),X(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),(!0===t.alphaToCoverage?D:P)(32926)},setFlipSided:q,setCullFace:j,setLineWidth:function(t){t!==x&&(E&&c.lineWidth(t),x=t)},setPolygonOffset:X,setScissorTest:function(t){(t?D:P)(3089)},activeTexture:Y,bindTexture:function(t,e){null===T&&Y();let i=M[T];void 0===i&&(i={type:void 0,texture:void 0},M[T]=i),i.type===t&&i.texture===e||(c.bindTexture(t,e||W[t]),i.type=t,i.texture=e)},unbindTexture:function(){const t=M[T];void 0!==t&&void 0!==t.type&&(c.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{c.compressedTexImage2D.apply(c,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{c.texImage2D.apply(c,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{c.texImage3D.apply(c,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,e){let i=a.get(e);void 0===i&&(i=new WeakMap,a.set(e,i)),void 0===i.get(t)&&(e=c.getUniformBlockIndex(e,t.name),i.set(t,e))},uniformBlockBinding:function(t,e){var i=a.get(e).get(t);O.get(t)!==i&&(c.uniformBlockBinding(e,i,t.__bindingPointIndex),O.set(t,i))},texStorage2D:function(){try{c.texStorage2D.apply(c,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{c.texStorage3D.apply(c,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{c.texSubImage2D.apply(c,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{c.texSubImage3D.apply(c,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{c.compressedTexSubImage2D.apply(c,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===I.equals(t)&&(c.scissor(t.x,t.y,t.z,t.w),I.copy(t))},viewport:function(t){!1===B.equals(t)&&(c.viewport(t.x,t.y,t.z,t.w),B.copy(t))},reset:function(){c.disable(3042),c.disable(2884),c.disable(2929),c.disable(32823),c.disable(3089),c.disable(2960),c.disable(32926),c.blendEquation(32774),c.blendFunc(1,0),c.blendFuncSeparate(1,0,1,0),c.colorMask(!0,!0,!0,!0),c.clearColor(0,0,0,0),c.depthMask(!0),c.depthFunc(513),c.clearDepth(1),c.stencilMask(4294967295),c.stencilFunc(519,0,4294967295),c.stencilOp(7680,7680,7680),c.clearStencil(0),c.cullFace(1029),c.frontFace(2305),c.polygonOffset(0,0),c.activeTexture(33984),c.bindFramebuffer(36160,null),!0===i&&(c.bindFramebuffer(36009,null),c.bindFramebuffer(36008,null)),c.useProgram(null),c.lineWidth(1),c.scissor(0,0,c.canvas.width,c.canvas.height),c.viewport(0,0,c.canvas.width,c.canvas.height),e={},T=null,M={},o={},l=new WeakMap,G=[],h=null,u=!1,d=null,p=null,f=null,m=null,g=null,A=null,v=null,y=!1,_=null,b=null,x=null,S=null,w=null,I.set(0,0,c.canvas.width,c.canvas.height),B.set(0,0,c.canvas.width,c.canvas.height),n.reset(),r.reset(),s.reset()}}}function bs(m,a,g,A,o,v,l){const y=o.isWebGL2,e=o.maxTextures,U=o.maxCubemapSize,H=o.maxTextureSize,V=o.maxSamples,h=a.has("WEBGL_multisampled_render_to_texture")?a.get("WEBGL_multisampled_render_to_texture"):null,z=/OculusBrowser/g.test(navigator.userAgent),s=new WeakMap;let c;const u=new WeakMap;let i=!1;try{i="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(m){}function f(t,e){return i?new OffscreenCanvas(t,e):_("canvas")}function b(t,e,i,n){let r=1;if((r=t.width>n||t.height>n?n/Math.max(t.width,t.height):r)<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const n=e?p:Math.floor,s=n(r*t.width),a=n(r*t.height),o=(void 0===c&&(c=f(s,a)),i?f(s,a):c);return o.width=s,o.height=a,o.getContext("2d").drawImage(t,0,0,s,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+s+"x"+a+")."),o}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function x(t){return d(t.width)&&d(t.height)}function S(t,e){return t.generateMipmaps&&e&&1003!==t.minFilter&&1006!==t.minFilter}function w(t){m.generateMipmap(t)}function E(t,e,i,n,r=!1){if(!1===y)return e;if(null!==t){if(void 0!==m[t])return m[t];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+t+"'")}let s=e;return 6403===e&&(5126===i&&(s=33326),5131===i&&(s=33325),5121===i&&(s=33321)),33319===e&&(5126===i&&(s=33328),5131===i&&(s=33327),5121===i&&(s=33323)),6408===e&&(5126===i&&(s=34836),5131===i&&(s=34842),5121===i&&(s=3001===n&&!1===r?35907:32856),32819===i&&(s=32854),32820===i&&(s=32855)),33325!==s&&33326!==s&&33327!==s&&33328!==s&&34842!==s&&34836!==s||a.get("EXT_color_buffer_float"),s}function C(t,e,i){return!0===S(t,i)||t.isFramebufferTexture&&1003!==t.minFilter&&1006!==t.minFilter?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&0<t.mipmaps.length?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function n(t){return 1003===t||1004===t||1005===t?9728:9729}function T(t){const e=t.target;e.removeEventListener("dispose",T);var t=e,i=A.get(t);if(void 0!==i.__webglInit){var n=t.source,r=u.get(n);if(r){const A=r[i.__cacheKey];A.usedTimes--,0===A.usedTimes&&I(t),0===Object.keys(r).length&&u.delete(n)}A.remove(t)}e.isVideoTexture&&s.delete(e)}function M(t){const e=t.target;e.removeEventListener("dispose",M);{const i=(t=e).texture,n=A.get(t),r=A.get(i);if(void 0!==r.__webglTexture&&(m.deleteTexture(r.__webglTexture),l.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)m.deleteFramebuffer(n.__webglFramebuffer[t]),n.__webglDepthbuffer&&m.deleteRenderbuffer(n.__webglDepthbuffer[t]);else{if(m.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&m.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&m.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&m.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&m.deleteRenderbuffer(n.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let t=0,e=i.length;t<e;t++){const n=A.get(i[t]);n.__webglTexture&&(m.deleteTexture(n.__webglTexture),l.memory.textures--),A.remove(i[t])}return A.remove(i),void A.remove(t)}}function I(t){var e=A.get(t),t=(m.deleteTexture(e.__webglTexture),t.source);delete u.get(t)[e.__cacheKey],l.memory.textures--}let r=0;function B(t,e){var i,n,r=A.get(t);if(t.isVideoTexture&&(i=t,n=l.render.frame,s.get(i)!==n&&(s.set(i,n),i.update())),!1===t.isRenderTargetTexture&&0<t.version&&r.__version!==t.version){const g=t.image;if(null===g)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==g.complete)return void R(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}g.activeTexture(33984+e),g.bindTexture(3553,r.__webglTexture)}const D={1e3:10497,1001:33071,1002:33648},P={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987};function L(t,e,i){if(i?(m.texParameteri(t,10242,D[e.wrapS]),m.texParameteri(t,10243,D[e.wrapT]),32879!==t&&35866!==t||m.texParameteri(t,32882,D[e.wrapR]),m.texParameteri(t,10240,P[e.magFilter]),m.texParameteri(t,10241,P[e.minFilter])):(m.texParameteri(t,10242,33071),m.texParameteri(t,10243,33071),32879!==t&&35866!==t||m.texParameteri(t,32882,33071),1001===e.wrapS&&1001===e.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),m.texParameteri(t,10240,n(e.magFilter)),m.texParameteri(t,10241,n(e.minFilter)),1003!==e.minFilter&&1006!==e.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===a.has("EXT_texture_filter_anisotropic")){const i=a.get("EXT_texture_filter_anisotropic");1015===e.type&&!1===a.has("OES_texture_float_linear")||!1===y&&1016===e.type&&!1===a.has("OES_texture_half_float_linear")||(1<e.anisotropy||A.get(e).__currentAnisotropy)&&(m.texParameterf(t,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(e.anisotropy,o.getMaxAnisotropy())),A.get(e).__currentAnisotropy=e.anisotropy)}}function W(t,e){let i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,e.addEventListener("dispose",T));const n=e.source;let r=u.get(n);void 0===r&&(r={},u.set(n,r));var s=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.encoding),e.join()}(e);if(s!==t.__cacheKey){void 0===r[s]&&(r[s]={texture:m.createTexture(),usedTimes:0},l.memory.textures++,i=!0),r[s].usedTimes++;const n=r[t.__cacheKey];void 0!==n&&(r[t.__cacheKey].usedTimes--,0===n.usedTimes&&I(e)),t.__cacheKey=s,t.__webglTexture=r[s].texture}return i}function R(t,s,a){let e=3553;s.isDataArrayTexture&&(e=35866),s.isData3DTexture&&(e=32879);const o=W(t,s),l=s.source;if(g.activeTexture(33984+a),g.bindTexture(e,t.__webglTexture),l.version!==l.__currentVersion||!0===o){m.pixelStorei(37440,s.flipY),m.pixelStorei(37441,s.premultiplyAlpha),m.pixelStorei(3317,s.unpackAlignment),m.pixelStorei(37443,0);a=s;const t=!y&&(1001!==a.wrapS||1001!==a.wrapT||1003!==a.minFilter&&1006!==a.minFilter)&&!1===x(s.image);var h=x(a=q(s,b(s.image,t,!1,H)))||y,c=v.convert(s.format,s.encoding);let i,n=v.convert(s.type),r=E(s.internalFormat,c,n,s.encoding,s.isVideoTexture);L(e,s,h);var u=s.mipmaps,d=y&&!0!==s.isVideoTexture,p=void 0===l.__currentVersion||!0===o,f=C(s,a,h);if(s.isDepthTexture)r=6402,y?r=1015===s.type?36012:1014===s.type?33190:1020===s.type?35056:33189:1015===s.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===s.format&&6402===r&&1012!==s.type&&1014!==s.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),s.type=1014,n=v.convert(s.type)),1027===s.format&&6402===r&&(r=34041,1020!==s.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),s.type=1020,n=v.convert(s.type))),p&&(d?g.texStorage2D(3553,1,r,a.width,a.height):g.texImage2D(3553,0,r,a.width,a.height,0,c,n,null));else if(s.isDataTexture)if(0<u.length&&h){d&&p&&g.texStorage2D(3553,f,r,u[0].width,u[0].height);for(let t=0,e=u.length;t<e;t++)i=u[t],d?g.texSubImage2D(3553,t,0,0,i.width,i.height,c,n,i.data):g.texImage2D(3553,t,r,i.width,i.height,0,c,n,i.data);s.generateMipmaps=!1}else d?(p&&g.texStorage2D(3553,f,r,a.width,a.height),g.texSubImage2D(3553,0,0,0,a.width,a.height,c,n,a.data)):g.texImage2D(3553,0,r,a.width,a.height,0,c,n,a.data);else if(s.isCompressedTexture){d&&p&&g.texStorage2D(3553,f,r,u[0].width,u[0].height);for(let t=0,e=u.length;t<e;t++)i=u[t],1023!==s.format?null!==c?d?g.compressedTexSubImage2D(3553,t,0,0,i.width,i.height,c,i.data):g.compressedTexImage2D(3553,t,r,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):d?g.texSubImage2D(3553,t,0,0,i.width,i.height,c,n,i.data):g.texImage2D(3553,t,r,i.width,i.height,0,c,n,i.data)}else if(s.isDataArrayTexture)d?(p&&g.texStorage3D(35866,f,r,a.width,a.height,a.depth),g.texSubImage3D(35866,0,0,0,0,a.width,a.height,a.depth,c,n,a.data)):g.texImage3D(35866,0,r,a.width,a.height,a.depth,0,c,n,a.data);else if(s.isData3DTexture)d?(p&&g.texStorage3D(32879,f,r,a.width,a.height,a.depth),g.texSubImage3D(32879,0,0,0,0,a.width,a.height,a.depth,c,n,a.data)):g.texImage3D(32879,0,r,a.width,a.height,a.depth,0,c,n,a.data);else if(s.isFramebufferTexture){if(p)if(d)g.texStorage2D(3553,f,r,a.width,a.height);else{let e=a.width,i=a.height;for(let t=0;t<f;t++)g.texImage2D(3553,t,r,e,i,0,c,n,null),e>>=1,i>>=1}}else if(0<u.length&&h){d&&p&&g.texStorage2D(3553,f,r,u[0].width,u[0].height);for(let t=0,e=u.length;t<e;t++)i=u[t],d?g.texSubImage2D(3553,t,0,0,c,n,i):g.texImage2D(3553,t,r,c,n,i);s.generateMipmaps=!1}else d?(p&&g.texStorage2D(3553,f,r,a.width,a.height),g.texSubImage2D(3553,0,0,0,c,n,a)):g.texImage2D(3553,0,r,c,n,a);S(s,h)&&w(e),l.__currentVersion=l.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}function k(t,e,i,n,r){var s=v.convert(i.format,i.encoding),a=v.convert(i.type),o=E(i.internalFormat,s,a,i.encoding);A.get(e).__hasExternalTextures||(32879===r||35866===r?g.texImage3D(r,0,o,e.width,e.height,e.depth,0,s,a,null):g.texImage2D(r,0,o,e.width,e.height,0,s,a,null)),g.bindFramebuffer(36160,t),G(e)?h.framebufferTexture2DMultisampleEXT(36160,n,r,A.get(i).__webglTexture,0,O(e)):m.framebufferTexture2D(36160,n,r,A.get(i).__webglTexture,0),g.bindFramebuffer(36160,null)}function N(e,i,n){if(m.bindRenderbuffer(36161,e),i.depthBuffer&&!i.stencilBuffer){let t=33189;if(n||G(i)){const e=i.depthTexture,n=(e&&e.isDepthTexture&&(1015===e.type?t=36012:1014===e.type&&(t=33190)),O(i));G(i)?h.renderbufferStorageMultisampleEXT(36161,n,t,i.width,i.height):m.renderbufferStorageMultisample(36161,n,t,i.width,i.height)}else m.renderbufferStorage(36161,t,i.width,i.height);m.framebufferRenderbuffer(36160,36096,36161,e)}else if(i.depthBuffer&&i.stencilBuffer){var t=O(i);n&&!1===G(i)?m.renderbufferStorageMultisample(36161,t,35056,i.width,i.height):G(i)?h.renderbufferStorageMultisampleEXT(36161,t,35056,i.width,i.height):m.renderbufferStorage(36161,34041,i.width,i.height),m.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=!0===i.isWebGLMultipleRenderTargets?i.texture:[i.texture];for(let t=0;t<e.length;t++){var r=e[t],s=v.convert(r.format,r.encoding),a=v.convert(r.type),s=E(r.internalFormat,s,a,r.encoding),a=O(i);n&&!1===G(i)?m.renderbufferStorageMultisample(36161,a,s,i.width,i.height):G(i)?h.renderbufferStorageMultisampleEXT(36161,a,s,i.width,i.height):m.renderbufferStorage(36161,s,i.width,i.height)}}m.bindRenderbuffer(36161,null)}function F(e){const i=A.get(e),t=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!i.__autoAllocateDepthBuffer){if(t)throw new Error("target.depthTexture not supported in Cube render targets");var n=i.__webglFramebuffer,r=e;if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(g.bindFramebuffer(36160,n),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");A.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),B(r.depthTexture,0);var n=A.get(r.depthTexture).__webglTexture,s=O(r);if(1026===r.depthTexture.format)G(r)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,n,0,s):m.framebufferTexture2D(36160,36096,3553,n,0);else{if(1027!==r.depthTexture.format)throw new Error("Unknown depthTexture format");G(r)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,n,0,s):m.framebufferTexture2D(36160,33306,3553,n,0)}}else if(t){i.__webglDepthbuffer=[];for(let t=0;t<6;t++)g.bindFramebuffer(36160,i.__webglFramebuffer[t]),i.__webglDepthbuffer[t]=m.createRenderbuffer(),N(i.__webglDepthbuffer[t],e,!1)}else g.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=m.createRenderbuffer(),N(i.__webglDepthbuffer,e,!1);g.bindFramebuffer(36160,null)}function O(t){return Math.min(V,t.samples)}function G(t){var e=A.get(t);return y&&0<t.samples&&!0===a.has("WEBGL_multisampled_render_to_texture")&&!1!==e.__useRenderToTexture}function q(t,e){var i=t.encoding,n=t.format,r=t.type;return!0!==t.isCompressedTexture&&!0!==t.isVideoTexture&&1035!==t.format&&3e3!==i&&(3001===i?!1===y?!0===a.has("EXT_sRGB")&&1023===n?(t.format=1035,t.minFilter=1006,t.generateMipmaps=!1):e=Q.sRGBToLinear(e):1023===n&&1009===r||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",i)),e}this.allocateTextureUnit=function(){var t=r;return t>=e&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+e),r+=1,t},this.resetTextureUnits=function(){r=0},this.setTexture2D=B,this.setTexture2DArray=function(t,e){var i=A.get(t);0<t.version&&i.__version!==t.version?R(i,t,e):(g.activeTexture(33984+e),g.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(t,e){var i=A.get(t);0<t.version&&i.__version!==t.version?R(i,t,e):(g.activeTexture(33984+e),g.bindTexture(32879,i.__webglTexture))},this.setTextureCube=function(e,t){var i=A.get(e);if(0<e.version&&i.__version!==e.version){var n=i,r=e,s=t;if(6===r.image.length){const d=W(n,r),p=r.source;if(g.activeTexture(33984+s),g.bindTexture(34067,n.__webglTexture),p.version!==p.__currentVersion||!0===d){m.pixelStorei(37440,r.flipY),m.pixelStorei(37441,r.premultiplyAlpha),m.pixelStorei(3317,r.unpackAlignment),m.pixelStorei(37443,0);const n=r.isCompressedTexture||r.image[0].isCompressedTexture,s=r.image[0]&&r.image[0].isDataTexture,f=[];for(let t=0;t<6;t++)f[t]=n||s?s?r.image[t].image:r.image[t]:b(r.image[t],!1,!0,U),f[t]=q(r,f[t]);var e=f[0],a=x(e)||y,o=v.convert(r.format,r.encoding),l=v.convert(r.type),h=E(r.internalFormat,o,l,r.encoding),c=y&&!0!==r.isVideoTexture,u=void 0===p.__currentVersion||!0===d;let i,t=C(r,e,a);if(L(34067,r,a),n){c&&u&&g.texStorage2D(34067,t,h,e.width,e.height);for(let e=0;e<6;e++){i=f[e].mipmaps;for(let t=0;t<i.length;t++){const s=i[t];1023!==r.format?null!==o?c?g.compressedTexSubImage2D(34069+e,t,0,0,s.width,s.height,o,s.data):g.compressedTexImage2D(34069+e,t,h,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):c?g.texSubImage2D(34069+e,t,0,0,s.width,s.height,o,l,s.data):g.texImage2D(34069+e,t,h,s.width,s.height,0,o,l,s.data)}}}else{i=r.mipmaps,c&&u&&(0<i.length&&t++,g.texStorage2D(34067,t,h,f[0].width,f[0].height));for(let e=0;e<6;e++)if(s){c?g.texSubImage2D(34069+e,0,0,0,f[e].width,f[e].height,o,l,f[e].data):g.texImage2D(34069+e,0,h,f[e].width,f[e].height,0,o,l,f[e].data);for(let t=0;t<i.length;t++){const r=i[t].image[e].image;c?g.texSubImage2D(34069+e,t+1,0,0,r.width,r.height,o,l,r.data):g.texImage2D(34069+e,t+1,h,r.width,r.height,0,o,l,r.data)}}else{c?g.texSubImage2D(34069+e,0,0,0,o,l,f[e]):g.texImage2D(34069+e,0,h,o,l,f[e]);for(let t=0;t<i.length;t++){const r=i[t];c?g.texSubImage2D(34069+e,t+1,0,0,o,l,r.image[e]):g.texImage2D(34069+e,t+1,h,o,l,r.image[e])}}}S(r,a)&&w(34067),p.__currentVersion=p.version,r.onUpdate&&r.onUpdate(r)}n.__version=r.version}}else g.activeTexture(33984+t),void g.bindTexture(34067,i.__webglTexture)},this.rebindTextures=function(t,e,i){var n=A.get(t);void 0!==e&&k(n.__webglFramebuffer,t,t.texture,36064,3553),void 0!==i&&F(t)},this.setupRenderTarget=function(i){const e=i.texture,n=A.get(i),r=A.get(e);i.addEventListener("dispose",M),!0!==i.isWebGLMultipleRenderTargets&&(void 0===r.__webglTexture&&(r.__webglTexture=m.createTexture()),r.__version=e.version,l.memory.textures++);var t=!0===i.isWebGLCubeRenderTarget,s=!0===i.isWebGLMultipleRenderTargets,a=x(i)||y;if(t){n.__webglFramebuffer=[];for(let t=0;t<6;t++)n.__webglFramebuffer[t]=m.createFramebuffer()}else{if(n.__webglFramebuffer=m.createFramebuffer(),s)if(o.drawBuffers){const g=i.texture;for(let t=0,e=g.length;t<e;t++){const o=A.get(g[t]);void 0===o.__webglTexture&&(o.__webglTexture=m.createTexture(),l.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(y&&0<i.samples&&!1===G(i)){const A=s?e:[e];n.__webglMultisampledFramebuffer=m.createFramebuffer(),n.__webglColorRenderbuffer=[],g.bindFramebuffer(36160,n.__webglMultisampledFramebuffer);for(let t=0;t<A.length;t++){const o=A[t],l=(n.__webglColorRenderbuffer[t]=m.createRenderbuffer(),m.bindRenderbuffer(36161,n.__webglColorRenderbuffer[t]),v.convert(o.format,o.encoding)),y=v.convert(o.type),e=E(o.internalFormat,l,y,o.encoding),r=O(i);m.renderbufferStorageMultisample(36161,r,e,i.width,i.height),m.framebufferRenderbuffer(36160,36064+t,36161,n.__webglColorRenderbuffer[t])}m.bindRenderbuffer(36161,null),i.depthBuffer&&(n.__webglDepthRenderbuffer=m.createRenderbuffer(),N(n.__webglDepthRenderbuffer,i,!0)),g.bindFramebuffer(36160,null)}}if(t){g.bindTexture(34067,r.__webglTexture),L(34067,e,a);for(let t=0;t<6;t++)k(n.__webglFramebuffer[t],i,e,36064,34069+t);S(e,a)&&w(34067),g.unbindTexture()}else if(s){const m=i.texture;for(let t=0,e=m.length;t<e;t++){const v=m[t],l=A.get(v);g.bindTexture(3553,l.__webglTexture),L(3553,v,a),k(n.__webglFramebuffer,i,v,36064+t,3553),S(v,a)&&w(3553)}g.unbindTexture()}else{let t=3553;(i.isWebGL3DRenderTarget||i.isWebGLArrayRenderTarget)&&(y?t=i.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),g.bindTexture(t,r.__webglTexture),L(t,e,a),k(n.__webglFramebuffer,i,e,36064,t),S(e,a)&&w(t),g.unbindTexture()}i.depthBuffer&&F(i)},this.updateRenderTargetMipmap=function(i){const n=x(i)||y,r=!0===i.isWebGLMultipleRenderTargets?i.texture:[i.texture];for(let t=0,e=r.length;t<e;t++){var s=r[t];if(S(s,n)){const n=i.isWebGLCubeRenderTarget?34067:3553,r=A.get(s).__webglTexture;g.bindTexture(n,r),w(n),g.unbindTexture()}}},this.updateMultisampleRenderTarget=function(i){if(y&&0<i.samples&&!1===G(i)){var n=i.isWebGLMultipleRenderTargets?i.texture:[i.texture],r=i.width,s=i.height;let e=16384;const l=[],h=i.stencilBuffer?33306:36096,c=A.get(i),u=!0===i.isWebGLMultipleRenderTargets;if(u)for(let t=0;t<n.length;t++)g.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),m.framebufferRenderbuffer(36160,36064+t,36161,null),g.bindFramebuffer(36160,c.__webglFramebuffer),m.framebufferTexture2D(36009,36064+t,3553,null,0);g.bindFramebuffer(36008,c.__webglMultisampledFramebuffer),g.bindFramebuffer(36009,c.__webglFramebuffer);for(let t=0;t<n.length;t++){l.push(36064+t),i.depthBuffer&&l.push(h);var a=void 0!==c.__ignoreDepthValues&&c.__ignoreDepthValues;if(!1===a&&(i.depthBuffer&&(e|=256),i.stencilBuffer&&(e|=1024)),u&&m.framebufferRenderbuffer(36008,36064,36161,c.__webglColorRenderbuffer[t]),!0===a&&(m.invalidateFramebuffer(36008,[h]),m.invalidateFramebuffer(36009,[h])),u){const i=A.get(n[t]).__webglTexture;m.framebufferTexture2D(36009,36064,3553,i,0)}m.blitFramebuffer(0,0,r,s,0,0,r,s,e,9728),z&&m.invalidateFramebuffer(36008,l)}if(g.bindFramebuffer(36008,null),g.bindFramebuffer(36009,null),u)for(let t=0;t<n.length;t++){g.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),m.framebufferRenderbuffer(36160,36064+t,36161,c.__webglColorRenderbuffer[t]);var o=A.get(n[t]).__webglTexture;g.bindFramebuffer(36160,c.__webglFramebuffer),m.framebufferTexture2D(36009,36064+t,3553,o,0)}g.bindFramebuffer(36009,c.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=F,this.setupFrameBufferTexture=k,this.useMultisampledRTT=G}function Is(n,r,t){const s=t.isWebGL2;return{convert:function(t,e=null){let i;if(1009===t)return 5121;if(1017===t)return 32819;if(1018===t)return 32820;if(1010===t)return 5120;if(1011===t)return 5122;if(1012===t)return 5123;if(1013===t)return 5124;if(1014===t)return 5125;if(1015===t)return 5126;if(1016===t)return s?5131:null!==(i=r.get("OES_texture_half_float"))?i.HALF_FLOAT_OES:null;if(1021===t)return 6406;if(1023===t)return 6408;if(1024===t)return 6409;if(1025===t)return 6410;if(1026===t)return 6402;if(1027===t)return 34041;if(1028===t)return 6403;if(1022===t)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===t)return null!==(i=r.get("EXT_sRGB"))?i.SRGB_ALPHA_EXT:null;if(1029===t)return 36244;if(1030===t)return 33319;if(1031===t)return 33320;if(1033===t)return 36249;if(33776===t||33777===t||33778===t||33779===t)if(3001===e){if(null===(i=r.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(33776===t)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===t)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===t)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===t)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(i=r.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===t)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===t)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===t)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===t)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===t||35841===t||35842===t||35843===t){if(null===(i=r.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===t)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===t)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===t)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===t)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===t)return null!==(i=r.get("WEBGL_compressed_texture_etc1"))?i.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===t||37496===t){if(null===(i=r.get("WEBGL_compressed_texture_etc")))return null;if(37492===t)return 3001===e?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(37496===t)return 3001===e?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t){if(null===(i=r.get("WEBGL_compressed_texture_astc")))return null;if(37808===t)return 3001===e?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===t)return 3001===e?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===t)return 3001===e?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===t)return 3001===e?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===t)return 3001===e?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===t)return 3001===e?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===t)return 3001===e?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===t)return 3001===e?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===t)return 3001===e?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===t)return 3001===e?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===t)return 3001===e?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===t)return 3001===e?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===t)return 3001===e?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===t)return 3001===e?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===t){if(null===(i=r.get("EXT_texture_compression_bptc")))return null;if(36492===t)return 3001===e?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT}return 1020===t?s?34042:null!==(i=r.get("WEBGL_depth_texture"))?i.UNSIGNED_INT_24_8_WEBGL:null:void 0!==n[t]?n[t]:null}}}class Cs extends qe{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class Ss extends qt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Ms={type:"move"};class Bs{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Ss,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ss,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new V,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new V),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Ss,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new V,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new V),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,i){let n=null,r=null,s=null;const a=this._targetRay,o=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(l&&t.hand){s=!0;for(const n of t.hand.values()){const t=e.getJointPose(n,i);if(void 0===l.joints[n.jointName]){const t=new Ss;t.matrixAutoUpdate=!1,t.visible=!1,l.joints[n.jointName]=t,l.add(t)}const r=l.joints[n.jointName];null!==t&&(r.matrix.fromArray(t.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=t.radius),r.visible=null!==t}const n=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],a=n.position.distanceTo(r.position),o=.02;l.inputState.pinching&&.025<a?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&a<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==o&&t.gripSpace&&(null!==(r=e.getPose(t.gripSpace,i))&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));null!==a&&(null!==(n=null===(n=e.getPose(t.targetRaySpace,i))&&null!==r?r:n)&&(a.matrix.fromArray(n.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),n.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(n.linearVelocity)):a.hasLinearVelocity=!1,n.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(n.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Ms)))}return null!==a&&(a.visible=null!==n),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==s),this}}class Ts extends N{constructor(t,e,i,n,r,s,a,o,l,h){if(1026!==(h=void 0!==h?h:1026)&&1027!==h)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,n,r,s,a,o,h,i=void 0===(i=void 0===i&&1026===h?1014:i)&&1027===h?1020:i,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==a?a:1003,this.minFilter=void 0!==o?o:1003,this.flipY=!1,this.generateMipmaps=!1}}class Rs extends n{constructor(a,n){super();const i=this;let f=null,r=1,o=null,e="local-floor",l=null,t,h=null,c=null,u=null,d=null;const s=n.getContextAttributes();let p=null,m=null;const g=[],A=[],v=new qe,y=(v.layers.enable(1),v.viewport=new k,new qe),_=(y.layers.enable(2),y.viewport=new k,[v,y]),b=new Cs;b.layers.enable(1),b.layers.enable(2);let x=null,S=null;function w(t){var e=A.indexOf(t.inputSource);if(-1!==e){const i=g[e];void 0!==i&&i.dispatchEvent({type:t.type,data:t.inputSource})}}function E(){f.removeEventListener("select",w),f.removeEventListener("selectstart",w),f.removeEventListener("selectend",w),f.removeEventListener("squeeze",w),f.removeEventListener("squeezestart",w),f.removeEventListener("squeezeend",w),f.removeEventListener("end",E),f.removeEventListener("inputsourceschange",C);for(let t=0;t<g.length;t++){var e=A[t];null!==e&&(A[t]=null,g[t].disconnect(e))}x=null,S=null,a.setRenderTarget(p),u=null,c=null,h=null,f=null,m=null,D.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function C(i){for(let t=0;t<i.removed.length;t++){var e=i.removed[t],n=A.indexOf(e);0<=n&&(A[n]=null,g[n].dispatchEvent({type:"disconnected",data:e}))}for(let t=0;t<i.added.length;t++){var r=i.added[t];let e=A.indexOf(r);if(-1===e){for(let t=0;t<g.length;t++){if(t>=A.length){A.push(r),e=t;break}if(null===A[t]){A[t]=r,e=t;break}}if(-1===e)break}const s=g[e];s&&s.dispatchEvent({type:"connected",data:r})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=g[t];return void 0===e&&(e=new Bs,g[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=g[t];return void 0===e&&(e=new Bs,g[t]=e),e.getGripSpace()},this.getHand=function(t){let e=g[t];return void 0===e&&(e=new Bs,g[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){r=t,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){e=t,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(t){l=t},this.getBaseLayer=function(){return null!==c?c:u},this.getBinding=function(){return h},this.getFrame=function(){return d},this.getSession=function(){return f},this.setSession=async function(t){if(null!==(f=t)){if(p=a.getRenderTarget(),f.addEventListener("select",w),f.addEventListener("selectstart",w),f.addEventListener("selectend",w),f.addEventListener("squeeze",w),f.addEventListener("squeezestart",w),f.addEventListener("squeezeend",w),f.addEventListener("end",E),f.addEventListener("inputsourceschange",C),!0!==s.xrCompatible&&await n.makeXRCompatible(),void 0===f.renderState.layers||!1===a.capabilities.isWebGL2){const i={antialias:void 0!==f.renderState.layers||s.antialias,alpha:s.alpha,depth:s.depth,stencil:s.stencil,framebufferScaleFactor:r};u=new XRWebGLLayer(f,n,i),f.updateRenderState({baseLayer:u}),m=new O(u.framebufferWidth,u.framebufferHeight,{format:1023,type:1009,encoding:a.outputEncoding,stencilBuffer:s.stencil})}else{let t=null,e=null,i=null;s.depth&&(i=s.stencil?35056:33190,t=s.stencil?1027:1026,e=s.stencil?1020:1014);const l={colorFormat:32856,depthFormat:i,scaleFactor:r};h=new XRWebGLBinding(f,n),c=h.createProjectionLayer(l),f.updateRenderState({layers:[c]}),m=new O(c.textureWidth,c.textureHeight,{format:1023,type:1009,depthTexture:new Ts(c.textureWidth,c.textureHeight,e,void 0,void 0,void 0,void 0,void 0,void 0,t),stencilBuffer:s.stencil,encoding:a.outputEncoding,samples:s.antialias?4:0}),a.properties.get(m).__ignoreDepthValues=c.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),l=null,o=await f.requestReferenceSpace(e),D.setContext(f),D.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};const T=new V,M=new V;function I(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null!==f){b.near=y.near=v.near=t.near,b.far=y.far=v.far=t.far,x===b.near&&S===b.far||(f.updateRenderState({depthNear:b.near,depthFar:b.far}),x=b.near,S=b.far);var e,i,n,r,s,a,o,l,h,c,u=t.parent,d=b.cameras;I(b,u);for(let t=0;t<d.length;t++)I(d[t],u);b.matrixWorld.decompose(b.position,b.quaternion,b.scale),t.matrix.copy(b.matrix),t.matrix.decompose(t.position,t.quaternion,t.scale);const p=t.children;for(let t=0,e=p.length;t<e;t++)p[t].updateMatrixWorld(!0);2===d.length?(t=b,e=v,i=y,T.setFromMatrixPosition(e.matrixWorld),M.setFromMatrixPosition(i.matrixWorld),n=T.distanceTo(M),r=e.projectionMatrix.elements,i=i.projectionMatrix.elements,s=r[14]/(r[10]-1),a=r[14]/(r[10]+1),o=(r[9]+1)/r[5],l=(r[9]-1)/r[5],r=(r[8]-1)/r[0],i=(i[8]+1)/i[0],h=s*r,c=s*i,r=(i=n/(i-r))*-r,e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(r),t.translateZ(i),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert(),e=s+i,s=a+i,t.projectionMatrix.makePerspective(h-r,n-r+c,o*a/s*e,l*a/s*e,e,s)):b.projectionMatrix.copy(v.projectionMatrix)}},this.getCamera=function(){return b},this.getFoveation=function(){return null!==c?c.fixedFoveation:null!==u?u.fixedFoveation:void 0},this.setFoveation=function(t){null!==c&&(c.fixedFoveation=t),null!==u&&void 0!==u.fixedFoveation&&(u.fixedFoveation=t)};let B=null;const D=new ni;D.setAnimationLoop(function(r,e){if(t=e.getViewerPose(l||o),d=e,null!==t){const r=t.views;null!==u&&(a.setRenderTargetFramebuffer(m,u.framebuffer),a.setRenderTarget(m));let n=!1;r.length!==b.cameras.length&&(b.cameras.length=0,n=!0);for(let i=0;i<r.length;i++){var s=r[i];let t=null;if(null!==u)t=u.getViewport(s);else{const r=h.getViewSubImage(c,s);t=r.viewport,0===i&&(a.setRenderTargetTextures(m,r.colorTexture,c.ignoreDepthValues?void 0:r.depthStencilTexture),a.setRenderTarget(m))}let e=_[i];void 0===e&&((e=new qe).layers.enable(i),e.viewport=new k,_[i]=e),e.matrix.fromArray(s.transform.matrix),e.projectionMatrix.fromArray(s.projectionMatrix),e.viewport.set(t.x,t.y,t.width,t.height),0===i&&b.matrix.copy(e.matrix),!0===n&&b.cameras.push(e)}}for(let t=0;t<g.length;t++){const r=A[t],i=g[t];null!==r&&void 0!==i&&i.update(r,e,l||o)}B&&B(r,e),d=null}),this.setAnimationLoop=function(t){B=t},this.dispose=function(){}}}function Ds(s,c){function u(t,e){t.opacity.value=e.opacity,e.color&&t.diffuse.value.copy(e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.specularMap&&(t.specularMap.value=e.specularMap),0<e.alphaTest&&(t.alphaTest.value=e.alphaTest);var i=c.get(e).envMap;if(i&&(t.envMap.value=i,t.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,t.reflectivity.value=e.reflectivity,t.ior.value=e.ior,t.refractionRatio.value=e.refractionRatio),e.lightMap){t.lightMap.value=e.lightMap;const c=!0!==s.physicallyCorrectLights?Math.PI:1;t.lightMapIntensity.value=e.lightMapIntensity*c}let n,r;e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap?n=e.emissiveMap:e.clearcoatMap?n=e.clearcoatMap:e.clearcoatNormalMap?n=e.clearcoatNormalMap:e.clearcoatRoughnessMap?n=e.clearcoatRoughnessMap:e.iridescenceMap?n=e.iridescenceMap:e.iridescenceThicknessMap?n=e.iridescenceThicknessMap:e.specularIntensityMap?n=e.specularIntensityMap:e.specularColorMap?n=e.specularColorMap:e.transmissionMap?n=e.transmissionMap:e.thicknessMap?n=e.thicknessMap:e.sheenColorMap?n=e.sheenColorMap:e.sheenRoughnessMap&&(n=e.sheenRoughnessMap),void 0!==n&&(!0===(n=n.isWebGLRenderTarget?n.texture:n).matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix)),e.aoMap?r=e.aoMap:e.lightMap&&(r=e.lightMap),void 0!==r&&(!0===(r=r.isWebGLRenderTarget?r.texture:r).matrixAutoUpdate&&r.updateMatrix(),t.uv2Transform.value.copy(r.matrix))}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(e,i,n,r,s){if(i.isMeshBasicMaterial||i.isMeshLambertMaterial)u(e,i);else if(i.isMeshToonMaterial)u(e,i),h=e,i.gradientMap&&(h.gradientMap.value=i.gradientMap);else if(i.isMeshPhongMaterial)u(e,i),h=i,(l=e).specular.value.copy(h.specular),l.shininess.value=Math.max(h.shininess,1e-4);else if(i.isMeshStandardMaterial)u(e,i),l=i,(o=e).roughness.value=l.roughness,o.metalness.value=l.metalness,l.roughnessMap&&(o.roughnessMap.value=l.roughnessMap),l.metalnessMap&&(o.metalnessMap.value=l.metalnessMap),c.get(l).envMap&&(o.envMapIntensity.value=l.envMapIntensity),i.isMeshPhysicalMaterial&&(o=i,s=s,(t=e).ior.value=o.ior,0<o.sheen&&(t.sheenColor.value.copy(o.sheenColor).multiplyScalar(o.sheen),t.sheenRoughness.value=o.sheenRoughness,o.sheenColorMap&&(t.sheenColorMap.value=o.sheenColorMap),o.sheenRoughnessMap&&(t.sheenRoughnessMap.value=o.sheenRoughnessMap)),0<o.clearcoat&&(t.clearcoat.value=o.clearcoat,t.clearcoatRoughness.value=o.clearcoatRoughness,o.clearcoatMap&&(t.clearcoatMap.value=o.clearcoatMap),o.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=o.clearcoatRoughnessMap),o.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(o.clearcoatNormalScale),t.clearcoatNormalMap.value=o.clearcoatNormalMap,1===o.side&&t.clearcoatNormalScale.value.negate())),0<o.iridescence&&(t.iridescence.value=o.iridescence,t.iridescenceIOR.value=o.iridescenceIOR,t.iridescenceThicknessMinimum.value=o.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=o.iridescenceThicknessRange[1],o.iridescenceMap&&(t.iridescenceMap.value=o.iridescenceMap),o.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=o.iridescenceThicknessMap)),0<o.transmission&&(t.transmission.value=o.transmission,t.transmissionSamplerMap.value=s.texture,t.transmissionSamplerSize.value.set(s.width,s.height),o.transmissionMap&&(t.transmissionMap.value=o.transmissionMap),t.thickness.value=o.thickness,o.thicknessMap&&(t.thicknessMap.value=o.thicknessMap),t.attenuationDistance.value=o.attenuationDistance,t.attenuationColor.value.copy(o.attenuationColor)),t.specularIntensity.value=o.specularIntensity,t.specularColor.value.copy(o.specularColor),o.specularIntensityMap&&(t.specularIntensityMap.value=o.specularIntensityMap),o.specularColorMap&&(t.specularColorMap.value=o.specularColorMap));else if(i.isMeshMatcapMaterial)u(e,i),s=e,i.matcap&&(s.matcap.value=i.matcap);else if(i.isMeshDepthMaterial)u(e,i);else if(i.isMeshDistanceMaterial)u(e,i),t=i,(o=e).referencePosition.value.copy(t.referencePosition),o.nearDistance.value=t.nearDistance,o.farDistance.value=t.farDistance;else if(i.isMeshNormalMaterial)u(e,i);else if(i.isLineBasicMaterial)s=i,(a=e).diffuse.value.copy(s.color),a.opacity.value=s.opacity,i.isLineDashedMaterial&&(a=i,(s=e).dashSize.value=a.dashSize,s.totalSize.value=a.dashSize+a.gapSize,s.scale.value=a.scale);else if(i.isPointsMaterial){a=i,(s=e).diffuse.value.copy(a.color),s.opacity.value=a.opacity,s.size.value=a.size*n,s.scale.value=.5*r,a.map&&(s.map.value=a.map),a.alphaMap&&(s.alphaMap.value=a.alphaMap),0<a.alphaTest&&(s.alphaTest.value=a.alphaTest);let t;a.map?t=a.map:a.alphaMap&&(t=a.alphaMap),void 0!==t&&(!0===t.matrixAutoUpdate&&t.updateMatrix(),s.uvTransform.value.copy(t.matrix))}else if(i.isSpriteMaterial){(n=e).diffuse.value.copy((r=i).color),n.opacity.value=r.opacity,n.rotation.value=r.rotation,r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),0<r.alphaTest&&(n.alphaTest.value=r.alphaTest);let t;r.map?t=r.map:r.alphaMap&&(t=r.alphaMap),void 0!==t&&(!0===t.matrixAutoUpdate&&t.updateMatrix(),n.uvTransform.value.copy(t.matrix))}else i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1);var a,t,o,l,h}}}function Ls(f,m,t,g){let A={},v={},y=[];const _=t.isWebGL2?f.getParameter(35375):0;function b(t){const e=t.target;e.removeEventListener("dispose",b);t=y.indexOf(e.__bindingPointIndex);y.splice(t,1),f.deleteBuffer(A[e.id]),delete A[e.id],delete v[e.id]}return{bind:function(t,e){e=e.program;g.uniformBlockBinding(t,e)},update:function(t,e){var i,n,r=A[t.id];if(void 0===r){{var s=t,a=s.uniforms;let i=0,n=0;for(let t=0,e=a.length;t<e;t++){const h=a[t],c=function(t){const e=t.value,i={boundary:0,storage:0};return"number"==typeof e?(i.boundary=4,i.storage=4):e.isVector2?(i.boundary=8,i.storage=8):e.isVector3||e.isColor?(i.boundary=16,i.storage=12):e.isVector4?(i.boundary=16,i.storage=16):e.isMatrix3?(i.boundary=48,i.storage=48):e.isMatrix4?(i.boundary=64,i.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),i}(h);if(h.__data=new Float32Array(c.storage/Float32Array.BYTES_PER_ELEMENT),h.__offset=i,0<t){const s=16-(n=i%16);0!==n&&s-c.boundary<0&&(i+=16-n,h.__offset=i)}i+=c.storage}0<(n=i%16)&&(i+=16-n),s.__size=i,s.__cache={}}s=t,i=function(){for(let t=0;t<_;t++)if(-1===y.indexOf(t))return y.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}(),s.__bindingPointIndex=i,n=f.createBuffer(),o=s.__size,s=s.usage,f.bindBuffer(35345,n),f.bufferData(35345,o,s),f.bindBuffer(35345,null),f.bindBufferBase(35345,i,n),r=n,A[t.id]=r,t.addEventListener("dispose",b)}var o=e.program,s=(g.updateUBOMapping(t,o),m.render.frame);if(v[t.id]!==s){{var l=t;const u=A[l.id],d=l.uniforms,p=l.__cache;f.bindBuffer(35345,u);for(let t=0,e=d.length;t<e;t++){const u=d[t];if(!0===function(t,e,i){const n=t.value;if(void 0===i[e])return i[e]="number"==typeof n?n:n.clone(),!0;if("number"==typeof n){if(i[e]!==n)return i[e]=n,!0}else{const t=i[e];if(!1===t.equals(n))return t.copy(n),!0}return!1}(u,t,p)){const l=u.value,d=u.__offset;"number"==typeof l?u.__data[0]=l:u.value.isMatrix3?(u.__data[0]=u.value.elements[0],u.__data[1]=u.value.elements[1],u.__data[2]=u.value.elements[2],u.__data[3]=u.value.elements[0],u.__data[4]=u.value.elements[3],u.__data[5]=u.value.elements[4],u.__data[6]=u.value.elements[5],u.__data[7]=u.value.elements[0],u.__data[8]=u.value.elements[6],u.__data[9]=u.value.elements[7],u.__data[10]=u.value.elements[8],u.__data[11]=u.value.elements[0]):l.toArray(u.__data),f.bufferSubData(35345,d,u.__data)}}f.bindBuffer(35345,null)}v[t.id]=s}},dispose:function(){for(const t in A)f.deleteBuffer(A[t]);y=[],A={},v={}}}}function Qs(t={}){this.isWebGLRenderer=!0;const r=void 0!==t.canvas?t.canvas:function(){const t=_("canvas");return t.style.display="block",t}(),S=void 0!==t.context?t.context:null,w=void 0===t.depth||t.depth,E=void 0===t.stencil||t.stencil,W=void 0!==t.antialias&&t.antialias,q=void 0===t.premultipliedAlpha||t.premultipliedAlpha,j=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,X=void 0!==t.powerPreference?t.powerPreference:"default",Y=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let K,c=(K=null!==S?S.getContextAttributes().alpha:void 0!==t.alpha&&t.alpha,null),C=null;const e=[],s=[],T=(this.domElement=r,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),this);let J=!1,$=0,Z=0,M=null,I=-1,B=null;const u=new k,tt=new k;let et=null,n=r.width,D=r.height,P=1,it=null,nt=null;const o=new k(0,0,n,D),l=new k(0,0,n,D);let rt=!1;const st=new ii;let at=!1,ot=!1,L=null;const lt=new _t,d=new v,R=new V,ht={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ct(){return null===M?P:1}let f,N,Q,m,F,G,U,ut,dt,pt,g,A,ft,mt,gt,H,a,h,At,vt,yt,y,b,bt,z=S;function xt(e,i){for(let t=0;t<e.length;t++){var n=e[t],n=r.getContext(n,i);if(null!==n)return n}return null}try{const t={alpha:!0,depth:w,stencil:E,antialias:W,premultipliedAlpha:q,preserveDrawingBuffer:j,powerPreference:X,failIfMajorPerformanceCaveat:Y};if("setAttribute"in r&&r.setAttribute("data-engine","three.js r144"),r.addEventListener("webglcontextlost",wt,!1),r.addEventListener("webglcontextrestored",Et,!1),r.addEventListener("webglcontextcreationerror",Ct,!1),null===z){const r=["webgl2","webgl","experimental-webgl"];if(!0===T.isWebGL1Renderer&&r.shift(),null===(z=xt(r,t)))throw xt(r)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===z.getShaderPrecisionFormat&&(z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function St(){f=new Ti(z),N=new di(z,f,t),f.init(N),y=new Is(z,f,N),Q=new ws(z,f,N),m=new Li,F=new cs,G=new bs(z,f,Q,F,N,y,m),U=new pi(T),ut=new Bi(T),dt=new si(z,N),b=new hi(z,f,dt,N),pt=new Ri(z,dt,m,b),g=new Ui(z,pt,dt,m),At=new Fi(z,N,G),H=new Ai(F),A=new ls(T,U,ut,f,N,b,H),ft=new Ds(T,F),mt=new As,gt=new ys(f,N),h=new ci(T,U,Q,g,K,q),a=new Es(T,g,N),bt=new Ls(z,m,N,Q),vt=new ui(z,f,m,N),yt=new Di(z,f,m,N),m.programs=A.programs,T.capabilities=N,T.extensions=f,T.properties=F,T.renderLists=mt,T.shadowMap=a,T.state=Q,T.info=m}St();const x=new Rs(T,z);function wt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),J=!0}function Et(){console.log("THREE.WebGLRenderer: Context Restored."),J=!1;var t=m.autoReset,e=a.enabled,i=a.autoUpdate,n=a.needsUpdate,r=a.type;St(),m.autoReset=t,a.enabled=e,a.autoUpdate=i,a.needsUpdate=n,a.type=r}function Ct(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function Tt(t){const e=t.target;e.removeEventListener("dispose",Tt);t=e;{var i=t;const n=F.get(i).programs;void 0!==n&&(n.forEach(function(t){A.releaseProgram(t)}),i.isShaderMaterial&&A.releaseShaderCache(i))}F.remove(t)}this.xr=x,this.getContext=function(){return z},this.getContextAttributes=function(){return z.getContextAttributes()},this.forceContextLoss=function(){const t=f.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=f.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(t){void 0!==t&&(P=t,this.setSize(n,D,!1))},this.getSize=function(t){return t.set(n,D)},this.setSize=function(t,e,i){x.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(n=t,D=e,r.width=Math.floor(t*P),r.height=Math.floor(e*P),!1!==i&&(r.style.width=t+"px",r.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(t){return t.set(n*P,D*P).floor()},this.setDrawingBufferSize=function(t,e,i){n=t,D=e,P=i,r.width=Math.floor(t*i),r.height=Math.floor(e*i),this.setViewport(0,0,t,e)},this.getCurrentViewport=function(t){return t.copy(u)},this.getViewport=function(t){return t.copy(o)},this.setViewport=function(t,e,i,n){t.isVector4?o.set(t.x,t.y,t.z,t.w):o.set(t,e,i,n),Q.viewport(u.copy(o).multiplyScalar(P).floor())},this.getScissor=function(t){return t.copy(l)},this.setScissor=function(t,e,i,n){t.isVector4?l.set(t.x,t.y,t.z,t.w):l.set(t,e,i,n),Q.scissor(tt.copy(l).multiplyScalar(P).floor())},this.getScissorTest=function(){return rt},this.setScissorTest=function(t){Q.setScissorTest(rt=t)},this.setOpaqueSort=function(t){it=t},this.setTransparentSort=function(t){nt=t},this.getClearColor=function(t){return t.copy(h.getClearColor())},this.setClearColor=function(){h.setClearColor.apply(h,arguments)},this.getClearAlpha=function(){return h.getClearAlpha()},this.setClearAlpha=function(){h.setClearAlpha.apply(h,arguments)},this.clear=function(t=!0,e=!0,i=!0){let n=0;t&&(n|=16384),e&&(n|=256),i&&(n|=1024),z.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",wt,!1),r.removeEventListener("webglcontextrestored",Et,!1),r.removeEventListener("webglcontextcreationerror",Ct,!1),mt.dispose(),gt.dispose(),F.dispose(),U.dispose(),ut.dispose(),g.dispose(),b.dispose(),bt.dispose(),A.dispose(),x.dispose(),x.removeEventListener("sessionstart",It),x.removeEventListener("sessionend",Bt),L&&(L.dispose(),L=null),i.stop()},this.renderBufferDirect=function(t,e,i,n,r,s){null===e&&(e=ht);var a=r.isMesh&&r.matrixWorld.determinant()<0,t=function(i,t,n,e,r){!0!==t.isScene&&(t=ht),G.resetTextureUnits();const s=t.fog,a=e.isMeshStandardMaterial?t.environment:null,o=null===M?T.outputEncoding:!0===M.isXRRenderTarget?M.texture.encoding:3e3,l=(e.isMeshStandardMaterial?ut:U).get(e.envMap||a),h=!0===e.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!e.normalMap&&!!n.attributes.tangent,u=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,f=e.toneMapped?T.toneMapping:0,m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,g=void 0!==m?m.length:0,A=F.get(e),v=C.state.lights;if(!0===at&&(!0===ot||i!==B)){const t=i===B&&e.id===I;H.setState(e,i,t)}let y=!1,_=(e.version===A.__version?(A.needsLights&&A.lightsStateVersion!==v.state.version||A.outputEncoding!==o||r.isInstancedMesh&&!1===A.instancing||!r.isInstancedMesh&&!0===A.instancing||r.isSkinnedMesh&&!1===A.skinning||!r.isSkinnedMesh&&!0===A.skinning||A.envMap!==l||!0===e.fog&&A.fog!==s||void 0!==A.numClippingPlanes&&(A.numClippingPlanes!==H.numPlanes||A.numIntersection!==H.numIntersection)||A.vertexAlphas!==h||A.vertexTangents!==c||A.morphTargets!==u||A.morphNormals!==d||A.morphColors!==p||A.toneMapping!==f||!0===N.isWebGL2&&A.morphTargetsCount!==g)&&(y=!0):(y=!0,A.__version=e.version),A.currentProgram),b=!1,x=!1,S=!1;const w=(_=!0===y?Lt(e,t,r):_).getUniforms(),E=A.uniforms;if(Q.useProgram(_.program)&&(b=!0,x=!0,S=!0),e.id!==I&&(I=e.id,x=!0),b||B!==i){if(w.setValue(z,"projectionMatrix",i.projectionMatrix),N.logarithmicDepthBuffer&&w.setValue(z,"logDepthBufFC",2/(Math.log(i.far+1)/Math.LN2)),B!==i&&(B=i,x=!0,S=!0),e.isShaderMaterial||e.isMeshPhongMaterial||e.isMeshToonMaterial||e.isMeshStandardMaterial||e.envMap){const t=w.map.cameraPosition;void 0!==t&&t.setValue(z,R.setFromMatrixPosition(i.matrixWorld))}(e.isMeshPhongMaterial||e.isMeshToonMaterial||e.isMeshLambertMaterial||e.isMeshBasicMaterial||e.isMeshStandardMaterial||e.isShaderMaterial)&&w.setValue(z,"isOrthographic",!0===i.isOrthographicCamera),(e.isMeshPhongMaterial||e.isMeshToonMaterial||e.isMeshLambertMaterial||e.isMeshBasicMaterial||e.isMeshStandardMaterial||e.isShaderMaterial||e.isShadowMaterial||r.isSkinnedMesh)&&w.setValue(z,"viewMatrix",i.matrixWorldInverse)}if(r.isSkinnedMesh){w.setOptional(z,r,"bindMatrix"),w.setOptional(z,r,"bindMatrixInverse");const i=r.skeleton;i&&(N.floatVertexTextures?(null===i.boneTexture&&i.computeBoneTexture(),w.setValue(z,"boneTexture",i.boneTexture,G),w.setValue(z,"boneTextureSize",i.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}var t=n.morphAttributes;if((void 0!==t.position||void 0!==t.normal||void 0!==t.color&&!0===N.isWebGL2)&&At.update(r,n,e,_),!x&&A.receiveShadow===r.receiveShadow||(A.receiveShadow=r.receiveShadow,w.setValue(z,"receiveShadow",r.receiveShadow)),e.isMeshGouraudMaterial&&null!==e.envMap&&(E.envMap.value=l,E.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),x&&(w.setValue(z,"toneMappingExposure",T.toneMappingExposure),A.needsLights&&(i=S,(t=E).ambientLightColor.needsUpdate=i,t.lightProbe.needsUpdate=i,t.directionalLights.needsUpdate=i,t.directionalLightShadows.needsUpdate=i,t.pointLights.needsUpdate=i,t.pointLightShadows.needsUpdate=i,t.spotLights.needsUpdate=i,t.spotLightShadows.needsUpdate=i,t.rectAreaLights.needsUpdate=i,t.hemisphereLights.needsUpdate=i),s&&!0===e.fog&&ft.refreshFogUniforms(E,s),ft.refreshMaterialUniforms(E,e,P,D,L),Hn.upload(z,A.uniformsList,E,G)),e.isShaderMaterial&&!0===e.uniformsNeedUpdate&&(Hn.upload(z,A.uniformsList,E,G),e.uniformsNeedUpdate=!1),e.isSpriteMaterial&&w.setValue(z,"center",r.center),w.setValue(z,"modelViewMatrix",r.modelViewMatrix),w.setValue(z,"normalMatrix",r.normalMatrix),w.setValue(z,"modelMatrix",r.matrixWorld),e.isShaderMaterial||e.isRawShaderMaterial){const i=e.uniformsGroups;for(let t=0,e=i.length;t<e;t++)if(N.isWebGL2){const n=i[t];bt.update(n,_),bt.bind(n,_)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return _}(t,e,i,n,r);Q.setMaterial(n,a);let o=i.index;e=i.attributes.position;if(null===o){if(void 0===e||0===e.count)return}else if(0===o.count)return;let l,h=1,c=(!0===n.wireframe&&(o=pt.getWireframeAttribute(i),h=2),b.setup(r,n,t,i,o),vt);null!==o&&(l=dt.get(o),(c=yt).setIndex(l));var a=(null!==o?o:e).count,t=i.drawRange.start*h,e=i.drawRange.count*h,u=null!==s?s.start*h:0,s=null!==s?s.count*h:1/0,d=Math.max(t,u),a=Math.min(a,t+e,u+s)-1,e=Math.max(0,a-d+1);if(0!==e){if(r.isMesh)!0===n.wireframe?(Q.setLineWidth(n.wireframeLinewidth*ct()),c.setMode(1)):c.setMode(4);else if(r.isLine){let t=n.linewidth;void 0===t&&(t=1),Q.setLineWidth(t*ct()),r.isLineSegments?c.setMode(1):r.isLineLoop?c.setMode(2):c.setMode(3)}else r.isPoints?c.setMode(0):r.isSprite&&c.setMode(4);if(r.isInstancedMesh)c.renderInstances(d,e,r.count);else if(i.isInstancedBufferGeometry){const t=Math.min(i.instanceCount,i._maxInstanceCount);c.renderInstances(d,e,t)}else c.render(d,e)}},this.compile=function(n,e){function r(t,e,i){!0===t.transparent&&2===t.side?(t.side=1,t.needsUpdate=!0,Lt(t,e,i),t.side=0,t.needsUpdate=!0,Lt(t,e,i),t.side=2):Lt(t,e,i)}(C=gt.get(n)).init(),s.push(C),n.traverseVisible(function(t){t.isLight&&t.layers.test(e.layers)&&(C.pushLight(t),t.castShadow&&C.pushShadow(t))}),C.setupLights(T.physicallyCorrectLights),n.traverse(function(e){var i=e.material;if(i)if(Array.isArray(i))for(let t=0;t<i.length;t++)r(i[t],n,e);else r(i,n,e)}),s.pop(),C=null};let Mt=null;function It(){i.stop()}function Bt(){i.start()}const i=new ni;function Dt(t,e,i,n){var r,s,a,o,l,h=t.opaque,c=t.transmissive,t=t.transparent;C.setupLightsView(i),0<c.length&&(r=h,s=e,a=i,o=N.isWebGL2,null===L&&(L=new O(1,1,{generateMipmaps:!0,type:f.has("EXT_color_buffer_half_float")?1016:1009,minFilter:1008,samples:o&&!0===W?4:0})),T.getDrawingBufferSize(d),o?L.setSize(d.x,d.y):L.setSize(p(d.x),p(d.y)),o=T.getRenderTarget(),T.setRenderTarget(L),T.clear(),l=T.toneMapping,T.toneMapping=0,Pt(r,s,a),T.toneMapping=l,G.updateMultisampleRenderTarget(L),G.updateRenderTargetMipmap(L),T.setRenderTarget(o)),n&&Q.viewport(u.copy(n)),0<h.length&&Pt(h,e,i),0<c.length&&Pt(c,e,i),0<t.length&&Pt(t,e,i),Q.buffers.depth.setTest(!0),Q.buffers.depth.setMask(!0),Q.buffers.color.setMask(!0),Q.setPolygonOffset(!1)}function Pt(i,n,r){var s,a,o,l,h,c,u=!0===n.isScene?n.overrideMaterial:null;for(let t=0,e=i.length;t<e;t++){const d=i[t],p=d.object,f=d.geometry,m=null===u?d.material:u,g=d.group;p.layers.test(r.layers)&&(s=p,a=n,o=r,l=f,h=m,c=g,s.onBeforeRender(T,a,o,l,h,c),s.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,s.matrixWorld),s.normalMatrix.getNormalMatrix(s.modelViewMatrix),h.onBeforeRender(T,a,o,l,s,c),!0===h.transparent&&2===h.side?(h.side=1,h.needsUpdate=!0,T.renderBufferDirect(o,a,l,h,s,c),h.side=0,h.needsUpdate=!0,T.renderBufferDirect(o,a,l,h,s,c),h.side=2):T.renderBufferDirect(o,a,l,h,s,c),s.onAfterRender(T,a,o,l,h,c))}}function Lt(t,e,i){!0!==e.isScene&&(e=ht);const n=F.get(t),r=C.state.lights,s=C.state.shadowsArray,a=r.state.version,o=A.getParameters(t,r.state,s,e,i),l=A.getProgramCacheKey(o);let h=n.programs,c=(n.environment=t.isMeshStandardMaterial?e.environment:null,n.fog=e.fog,n.envMap=(t.isMeshStandardMaterial?ut:U).get(t.envMap||n.environment),void 0===h&&(t.addEventListener("dispose",Tt),h=new Map,n.programs=h),h.get(l));if(void 0!==c){if(n.currentProgram===c&&n.lightsStateVersion===a)return Rt(t,o),c}else o.uniforms=A.getUniforms(t),t.onBuild(i,o,T),t.onBeforeCompile(o,T),c=A.acquireProgram(o,l),h.set(l,c),n.uniforms=o.uniforms;const u=n.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(u.clippingPlanes=H.uniform),Rt(t,o),n.needsLights=t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights,n.lightsStateVersion=a,n.needsLights&&(u.ambientLightColor.value=r.state.ambient,u.lightProbe.value=r.state.probe,u.directionalLights.value=r.state.directional,u.directionalLightShadows.value=r.state.directionalShadow,u.spotLights.value=r.state.spot,u.spotLightShadows.value=r.state.spotShadow,u.rectAreaLights.value=r.state.rectArea,u.ltc_1.value=r.state.rectAreaLTC1,u.ltc_2.value=r.state.rectAreaLTC2,u.pointLights.value=r.state.point,u.pointLightShadows.value=r.state.pointShadow,u.hemisphereLights.value=r.state.hemi,u.directionalShadowMap.value=r.state.directionalShadowMap,u.directionalShadowMatrix.value=r.state.directionalShadowMatrix,u.spotShadowMap.value=r.state.spotShadowMap,u.spotLightMatrix.value=r.state.spotLightMatrix,u.spotLightMap.value=r.state.spotLightMap,u.pointShadowMap.value=r.state.pointShadowMap,u.pointShadowMatrix.value=r.state.pointShadowMatrix);e=c.getUniforms(),i=Hn.seqWithValue(e.seq,u);return n.currentProgram=c,n.uniformsList=i,c}function Rt(t,e){const i=F.get(t);i.outputEncoding=e.outputEncoding,i.instancing=e.instancing,i.skinning=e.skinning,i.morphTargets=e.morphTargets,i.morphNormals=e.morphNormals,i.morphColors=e.morphColors,i.morphTargetsCount=e.morphTargetsCount,i.numClippingPlanes=e.numClippingPlanes,i.numIntersection=e.numClipIntersection,i.vertexAlphas=e.vertexAlphas,i.vertexTangents=e.vertexTangents,i.toneMapping=e.toneMapping}i.setAnimationLoop(function(t){Mt&&Mt(t)}),"undefined"!=typeof self&&i.setContext(self),this.setAnimationLoop=function(t){Mt=t,x.setAnimationLoop(t),null===t?i.stop():i.start()},x.addEventListener("sessionstart",It),x.addEventListener("sessionend",Bt),this.render=function(i,t){if(void 0!==t&&!0!==t.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else if(!0!==J){!0===i.matrixWorldAutoUpdate&&i.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===x.enabled&&!0===x.isPresenting&&(!0===x.cameraAutoUpdate&&x.updateCamera(t),t=x.getCamera()),!0===i.isScene&&i.onBeforeRender(T,i,t,M),(C=gt.get(i,s.length)).init(),s.push(C),lt.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),st.setFromProjectionMatrix(lt),ot=this.localClippingEnabled,at=H.init(this.clippingPlanes,ot,t),(c=mt.get(i,e.length)).init(),e.push(c),function i(n,r,s,a){if(!1!==n.visible){if(n.layers.test(r.layers))if(n.isGroup)s=n.renderOrder;else if(n.isLOD)!0===n.autoUpdate&&n.update(r);else if(n.isLight)C.pushLight(n),n.castShadow&&C.pushShadow(n);else if(n.isSprite){if(!n.frustumCulled||st.intersectsSprite(n)){a&&R.setFromMatrixPosition(n.matrixWorld).applyMatrix4(lt);const r=g.update(n),h=n.material;h.visible&&c.push(n,r,h,s,R.z,null)}}else if((n.isMesh||n.isLine||n.isPoints)&&(n.isSkinnedMesh&&n.skeleton.frame!==m.render.frame&&(n.skeleton.update(),n.skeleton.frame=m.render.frame),!n.frustumCulled||st.intersectsObject(n))){a&&R.setFromMatrixPosition(n.matrixWorld).applyMatrix4(lt);const r=g.update(n),h=n.material;if(Array.isArray(h)){const a=r.groups;for(let t=0,e=a.length;t<e;t++){var o=a[t],l=h[o.materialIndex];l&&l.visible&&c.push(n,r,l,s,R.z,o)}}else h.visible&&c.push(n,r,h,s,R.z,null)}const h=n.children;for(let t=0,e=h.length;t<e;t++)i(h[t],r,s,a)}}(i,t,0,T.sortObjects),c.finish(),!0===T.sortObjects&&c.sort(it,nt),!0===at&&H.beginShadows();const r=C.state.shadowsArray;if(a.render(r,i,t),!0===at&&H.endShadows(),!0===this.info.autoReset&&this.info.reset(),h.render(c,i),C.setupLights(T.physicallyCorrectLights),t.isArrayCamera){const r=t.cameras;for(let t=0,e=r.length;t<e;t++){var n=r[t];Dt(c,i,n,n.viewport)}}else Dt(c,i,t);null!==M&&(G.updateMultisampleRenderTarget(M),G.updateRenderTargetMipmap(M)),!0===i.isScene&&i.onAfterRender(T,i,t),b.resetDefaultState(),I=-1,B=null,s.pop(),C=0<s.length?s[s.length-1]:null,e.pop(),c=0<e.length?e[e.length-1]:null}},this.getActiveCubeFace=function(){return $},this.getActiveMipmapLevel=function(){return Z},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(t,e,i){F.get(t.texture).__webglTexture=e,F.get(t.depthTexture).__webglTexture=i;const n=F.get(t);n.__hasExternalTextures=!0,n.__hasExternalTextures&&(n.__autoAllocateDepthBuffer=void 0===i,n.__autoAllocateDepthBuffer||!0===f.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),n.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const i=F.get(t);i.__webglFramebuffer=e,i.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,i=0){M=t,$=e,Z=i;let n=!0;if(t){const e=F.get(t);void 0!==e.__useDefaultFramebuffer?(Q.bindFramebuffer(36160,null),n=!1):void 0===e.__webglFramebuffer?G.setupRenderTarget(t):e.__hasExternalTextures&&G.rebindTextures(t,F.get(t.texture).__webglTexture,F.get(t.depthTexture).__webglTexture)}let r=null,s=!1,a=!1;if(t){const i=t.texture,n=((i.isData3DTexture||i.isDataArrayTexture)&&(a=!0),F.get(t).__webglFramebuffer);t.isWebGLCubeRenderTarget?(r=n[e],s=!0):r=N.isWebGL2&&0<t.samples&&!1===G.useMultisampledRTT(t)?F.get(t).__webglMultisampledFramebuffer:n,u.copy(t.viewport),tt.copy(t.scissor),et=t.scissorTest}else u.copy(o).multiplyScalar(P).floor(),tt.copy(l).multiplyScalar(P).floor(),et=rt;if(Q.bindFramebuffer(36160,r)&&N.drawBuffers&&n&&Q.drawBuffers(t,r),Q.viewport(u),Q.scissor(tt),Q.setScissorTest(et),s){const n=F.get(t.texture);z.framebufferTexture2D(36160,36064,34069+e,n.__webglTexture,i)}else if(a){const n=F.get(t.texture),r=e||0;z.framebufferTextureLayer(36160,36064,n.__webglTexture,i||0,r)}I=-1},this.readRenderTargetPixels=function(e,i,n,r,s,a,o){if(e&&e.isWebGLRenderTarget){let t=F.get(e).__webglFramebuffer;if(t=e.isWebGLCubeRenderTarget&&void 0!==o?t[o]:t){Q.bindFramebuffer(36160,t);try{const o=e.texture,t=o.format,h=o.type;if(1023!==t&&y.convert(t)!==z.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var l=1016===h&&(f.has("EXT_color_buffer_half_float")||N.isWebGL2&&f.has("EXT_color_buffer_float"));if(!(1009===h||y.convert(h)===z.getParameter(35738)||1015===h&&(N.isWebGL2||f.has("OES_texture_float")||f.has("WEBGL_color_buffer_float"))||l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");0<=i&&i<=e.width-r&&0<=n&&n<=e.height-s&&z.readPixels(i,n,r,s,y.convert(t),y.convert(h),a)}finally{const e=null!==M?F.get(M).__webglFramebuffer:null;Q.bindFramebuffer(36160,e)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,i=0){var n=Math.pow(2,-i),r=Math.floor(e.image.width*n),n=Math.floor(e.image.height*n);G.setTexture2D(e,0),z.copyTexSubImage2D(3553,i,0,0,t.x,t.y,r,n),Q.unbindTexture()},this.copyTextureToTexture=function(t,e,i,n=0){var r=e.image.width,s=e.image.height,a=y.convert(i.format),o=y.convert(i.type);G.setTexture2D(i,0),z.pixelStorei(37440,i.flipY),z.pixelStorei(37441,i.premultiplyAlpha),z.pixelStorei(3317,i.unpackAlignment),e.isDataTexture?z.texSubImage2D(3553,n,t.x,t.y,r,s,a,o,e.image.data):e.isCompressedTexture?z.compressedTexSubImage2D(3553,n,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):z.texSubImage2D(3553,n,t.x,t.y,a,o,e.image),0===n&&i.generateMipmaps&&z.generateMipmap(3553),Q.unbindTexture()},this.copyTextureToTexture3D=function(e,i,n,r,s=0){if(T.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var a=e.max.x-e.min.x+1,o=e.max.y-e.min.y+1,l=e.max.z-e.min.z+1,h=y.convert(r.format),c=y.convert(r.type);let t;if(r.isData3DTexture)G.setTexture3D(r,0),t=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");G.setTexture2DArray(r,0),t=35866}z.pixelStorei(37440,r.flipY),z.pixelStorei(37441,r.premultiplyAlpha),z.pixelStorei(3317,r.unpackAlignment);var u=z.getParameter(3314),d=z.getParameter(32878),p=z.getParameter(3316),f=z.getParameter(3315),m=z.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;z.pixelStorei(3314,g.width),z.pixelStorei(32878,g.height),z.pixelStorei(3316,e.min.x),z.pixelStorei(3315,e.min.y),z.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?z.texSubImage3D(t,s,i.x,i.y,i.z,a,o,l,h,c,g.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),z.compressedTexSubImage3D(t,s,i.x,i.y,i.z,a,o,l,h,g.data)):z.texSubImage3D(t,s,i.x,i.y,i.z,a,o,l,h,c,g),z.pixelStorei(3314,u),z.pixelStorei(32878,d),z.pixelStorei(3316,p),z.pixelStorei(3315,f),z.pixelStorei(32877,m),0===s&&r.generateMipmaps&&z.generateMipmap(t),Q.unbindTexture()}},this.initTexture=function(t){t.isCubeTexture?G.setTextureCube(t,0):t.isData3DTexture?G.setTexture3D(t,0):t.isDataArrayTexture?G.setTexture2DArray(t,0):G.setTexture2D(t,0),Q.unbindTexture()},this.resetState=function(){$=0,Z=0,M=null,Q.reset(),b.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class extends Qs{}).prototype.isWebGL1Renderer=!0;class Ps extends qt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}class Fs{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=l()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(i,n,r){i*=this.stride,r*=n.stride;for(let t=0,e=this.stride;t<e;t++)this.array[i+t]=n.array[r+t];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=l()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=l()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Us=new V;class Ns{constructor(t,e,i,n=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=!0===n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(i){for(let t=0,e=this.data.count;t<e;t++)Us.fromBufferAttribute(this,t),Us.applyMatrix4(i),this.setXYZ(t,Us.x,Us.y,Us.z);return this}applyNormalMatrix(i){for(let t=0,e=this.count;t<e;t++)Us.fromBufferAttribute(this,t),Us.applyNormalMatrix(i),this.setXYZ(t,Us.x,Us.y,Us.z);return this}transformDirection(i){for(let t=0,e=this.count;t<e;t++)Us.fromBufferAttribute(this,t),Us.transformDirection(i),this.setXYZ(t,Us.x,Us.y,Us.z);return this}setX(t,e){return this.normalized&&(e=m(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=m(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=m(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=m(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return e=this.normalized?g(e,this.array):e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return e=this.normalized?g(e,this.array):e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return e=this.normalized?g(e,this.array):e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return e=this.normalized?g(e,this.array):e}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=m(e,this.array),i=m(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=m(e,this.array),i=m(i,this.array),n=m(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this}setXYZW(t,e,i,n,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=m(e,this.array),i=m(i,this.array),n=m(n,this.array),r=m(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this.data.array[t+3]=r,this}clone(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ns(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized);{console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){var i=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[i+t])}return new ce(new this.array.constructor(e),this.itemSize,this.normalized)}}toJSON(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized};{console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){var i=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[i+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}}}const ks=new V,Os=new k,Gs=new k,Hs=new V,zs=new _t;class Vs extends Ne{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new _t,this.bindMatrixInverse=new _t}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const i=new k,n=this.geometry.attributes.skinWeight;for(let t=0,e=n.count;t<e;t++){i.fromBufferAttribute(n,t);var r=1/i.manhattanLength();r!=1/0?i.multiplyScalar(r):i.set(1,0,0,0),n.setXYZW(t,i.x,i.y,i.z,i.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const i=this.skeleton,n=this.geometry;Os.fromBufferAttribute(n.attributes.skinIndex,t),Gs.fromBufferAttribute(n.attributes.skinWeight,t),ks.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let t=0;t<4;t++){const n=Gs.getComponent(t);var r;0!==n&&(r=Os.getComponent(t),zs.multiplyMatrices(i.bones[r].matrixWorld,i.boneInverses[r]),e.addScaledVector(Hs.copy(ks).applyMatrix4(zs),n))}return e.applyMatrix4(this.bindMatrixInverse)}}class Ws extends qt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class qs extends N{constructor(t=null,e=1,i=1,n,r,s,a,o,l=1003,h=1003,c,u){super(null,s,a,o,l,h,n,r,c,u),this.isDataTexture=!0,this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const js=new _t,Ys=new _t;class Js{constructor(t=[],e=[]){this.uuid=l(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){var t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new _t)}}calculateInverses(){for(let t=this.boneInverses.length=0,e=this.bones.length;t<e;t++){const i=new _t;this.bones[t]&&i.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&i.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const i=this.bones,n=this.boneInverses,r=this.boneMatrices,t=this.boneTexture;for(let t=0,e=i.length;t<e;t++){var s=i[t]?i[t].matrixWorld:Ys;js.multiplyMatrices(s,n[t]),js.toArray(r,16*t)}null!==t&&(t.needsUpdate=!0)}clone(){return new Js(this.bones,this.boneInverses)}computeBoneTexture(){var t=A(Math.sqrt(4*this.bones.length));t=Math.max(t,4);const e=new Float32Array(t*t*4),i=(e.set(this.boneMatrices),new qs(e,t,t,1023,1015));return i.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=i,this.boneTextureSize=t,this}getBoneByName(i){for(let t=0,e=this.bones.length;t<e;t++){var n=this.bones[t];if(n.name===i)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(i,n){this.uuid=i.uuid;for(let e=0,t=i.bones.length;e<t;e++){var r=i.bones[e];let t=n[r];void 0===t&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),t=new Ws),this.bones.push(t),this.boneInverses.push((new _t).fromArray(i.boneInverses[e]))}return this.init(),this}toJSON(){const i={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};i.uuid=this.uuid;var n=this.bones,r=this.boneInverses;for(let t=0,e=n.length;t<e;t++){var s=n[t];i.bones.push(s.uuid);const a=r[t];i.boneInverses.push(a.toArray())}return i}}class Xs extends re{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new D(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const Ks=new V,$s=new V,Zs=new _t,tr=new xt,er=new dt;class ir extends qt{constructor(t=new xe,e=new Xs){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const i=t.attributes.position,n=[0];for(let t=1,e=i.count;t<e;t++)Ks.fromBufferAttribute(i,t-1),$s.fromBufferAttribute(i,t),n[t]=n[t-1],n[t]+=Ks.distanceTo($s);t.setAttribute("lineDistance",new de(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(i,n){const t=this.geometry,r=this.matrixWorld,s=i.params.Line.threshold,a=t.drawRange;if(null===t.boundingSphere&&t.computeBoundingSphere(),er.copy(t.boundingSphere),er.applyMatrix4(r),er.radius+=s,!1!==i.ray.intersectsSphere(er)){Zs.copy(r).invert(),tr.copy(i.ray).applyMatrix4(Zs);const e=s/((this.scale.x+this.scale.y+this.scale.z)/3),o=e*e,l=new V,h=new V,c=new V,u=new V,d=this.isLineSegments?2:1,p=t.index,f=t.attributes.position;if(null!==p)for(let t=Math.max(0,a.start),e=Math.min(p.count,a.start+a.count)-1;t<e;t+=d){const r=p.getX(t),s=p.getX(t+1);if(l.fromBufferAttribute(f,r),h.fromBufferAttribute(f,s),!(tr.distanceSqToSegment(l,h,u,c)>o)){u.applyMatrix4(this.matrixWorld);const a=i.ray.origin.distanceTo(u);a<i.near||a>i.far||n.push({distance:a,point:c.clone().applyMatrix4(this.matrixWorld),index:t,face:null,faceIndex:null,object:this})}}else for(let t=Math.max(0,a.start),e=Math.min(f.count,a.start+a.count)-1;t<e;t+=d)if(l.fromBufferAttribute(f,t),h.fromBufferAttribute(f,t+1),!(tr.distanceSqToSegment(l,h,u,c)>o)){u.applyMatrix4(this.matrixWorld);const r=i.ray.origin.distanceTo(u);r<i.near||r>i.far||n.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:t,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(0<i.length){var n=t[i[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const i=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}}}}const nr=new V,sr=new V;class rr extends ir{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const i=t.attributes.position,n=[];for(let t=0,e=i.count;t<e;t+=2)nr.fromBufferAttribute(i,t),sr.fromBufferAttribute(i,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+nr.distanceTo(sr);t.setAttribute("lineDistance",new de(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ar extends ir{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class or extends re{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new D(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const lr=new _t,cr=new xt,hr=new dt,ur=new V;class dr extends qt{constructor(t=new xe,e=new or){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}raycast(i,n){const t=this.geometry,r=this.matrixWorld,s=i.params.Points.threshold,a=t.drawRange;if(null===t.boundingSphere&&t.computeBoundingSphere(),hr.copy(t.boundingSphere),hr.applyMatrix4(r),hr.radius+=s,!1!==i.ray.intersectsSphere(hr)){lr.copy(r).invert(),cr.copy(i.ray).applyMatrix4(lr);const e=s/((this.scale.x+this.scale.y+this.scale.z)/3),o=e*e,l=t.index,h=t.attributes.position;if(null!==l)for(let t=Math.max(0,a.start),e=Math.min(l.count,a.start+a.count);t<e;t++){const s=l.getX(t);ur.fromBufferAttribute(h,s),Ar(ur,s,o,r,i,n,this)}else for(let t=Math.max(0,a.start),e=Math.min(h.count,a.start+a.count);t<e;t++)ur.fromBufferAttribute(h,t),Ar(ur,t,o,r,i,n,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(0<i.length){var n=t[i[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const i=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}}}}function Ar(t,e,i,n,r,s,a){var o=cr.distanceSqToPoint(t);if(o<i){const i=new V;cr.closestPointToPoint(t,i),i.applyMatrix4(n);t=r.ray.origin.distanceTo(i);t<r.near||t>r.far||s.push({distance:t,distanceToRay:Math.sqrt(o),point:i,index:e,face:null,object:a})}}class pr extends N{constructor(t,e,i,n,r,s,a,o,l,h,c,u){super(null,s,a,o,l,h,n,r,c,u),this.isCompressedTexture=!0,this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class gr extends re{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new D(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new D(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new v(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class mr extends gr{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new v(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return c(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new D(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new D(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new D(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){0<this._sheen!=0<t&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){0<this._clearcoat!=0<t&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){0<this._iridescence!=0<t&&this.version++,this._iridescence=t}get transmission(){return this._transmission}set transmission(t){0<this._transmission!=0<t&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}function fr(t,e,i){return yr(t)?new t.constructor(t.subarray(e,void 0!==i?i:t.length)):t.slice(e,i)}function vr(t,e,i){return!t||!i&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function yr(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function xr(i){const e=i.length,n=new Array(e);for(let t=0;t!==e;++t)n[t]=t;return n.sort(function(t,e){return i[t]-i[e]}),n}function _r(i,n,r){const s=i.length,a=new i.constructor(s);for(let t=0,e=0;e!==s;++t){const s=r[t]*n;for(let t=0;t!==n;++t)a[e++]=i[s+t]}return a}function Er(e,i,n,r){let s=1,a=e[0];for(;void 0!==a&&void 0===a[r];)a=e[s++];if(void 0!==a){let t=a[r];if(void 0!==t)if(Array.isArray(t))for(;void 0!==(t=a[r])&&(i.push(a.time),n.push.apply(n,t)),void 0!==(a=e[s++]););else if(void 0!==t.toArray)for(;void 0!==(t=a[r])&&(i.push(a.time),t.toArray(n,n.length)),void 0!==(a=e[s++]););else for(;void 0!==(t=a[r])&&(i.push(a.time),n.push(t)),void 0!==(a=e[s++]););}}class wr{constructor(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){var i=this.parameterPositions;let n=this._cachedIndex,r=i[n],s=i[n-1];t:{e:{let t;i:{n:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<s)break n;return n=i.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(s=r,e<(r=i[++n]))break e}t=i.length;break i}if(e>=s)break t;var o=i[1];e<o&&(n=2,s=o);for(var l=n-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=s,e>=(s=i[--n-1]))break e}t=n,n=0}for(;n<t;){const r=n+t>>>1;e<i[r]?t=r:n=1+r}if(r=i[n],void 0===(s=i[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=i.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=t*n;for(let t=0;t!==n;++t)e[t]=i[r+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class br extends wr{constructor(t,e,i,n){super(t,e,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,e,i){var n=this.parameterPositions;let r=t-2,s=t+1,a=n[r],o=n[s];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:r=t,a=2*e-i;break;case 2402:r=n.length-2,a=e+n[r]-n[r+1];break;default:r=t,a=i}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:s=t,o=2*i-e;break;case 2402:s=1,o=i+n[1]-n[0];break;default:s=t-1,o=e}var l=.5*(i-e),h=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(o-i),this._offsetPrev=r*h,this._offsetNext=s*h}interpolate_(t,e,i,n){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=t*a,l=o-a,h=this._offsetPrev,c=this._offsetNext,u=this._weightPrev,d=this._weightNext,p=(i-e)/(n-e),f=p*p,m=f*p,g=-u*m+2*u*f-u*p,A=(1+u)*m+(-1.5-2*u)*f+(-.5+u)*p+1,v=(-1-d)*m+(1.5+d)*f+.5*p,y=d*m-d*f;for(let t=0;t!==a;++t)r[t]=g*s[h+t]+A*s[l+t]+v*s[o+t]+y*s[c+t];return r}}class Ir extends wr{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t,e,i,n){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=t*a,l=o-a,h=(i-e)/(n-e),c=1-h;for(let t=0;t!==a;++t)r[t]=s[l+t]*c+s[o+t]*h;return r}}class Cr extends wr{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t){return this.copySampleValue_(t-1)}}class Sr{constructor(t,e,i,n){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=vr(e,this.TimeBufferType),this.values=vr(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:vr(t.times,Array),values:vr(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(i.interpolation=e)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new Cr(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Ir(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new br(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0!==e)return this.createInterpolant=e,this;{const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(i){if(0!==i){const n=this.times;for(let t=0,e=n.length;t!==e;++t)n[t]+=i}return this}scale(i){if(1!==i){const n=this.times;for(let t=0,e=n.length;t!==e;++t)n[t]*=i}return this}trim(t,e){var i=this.times,n=i.length;let r=0,s=n-1;for(;r!==n&&i[r]<t;)++r;for(;-1!==s&&i[s]>e;)--s;if(++s,0!==r||s!==n){r>=s&&(s=Math.max(s,1),r=s-1);const t=this.getValueSize();this.times=fr(i,r,s),this.values=fr(this.values,r*t,s*t)}return this}validate(){let i=!0;var t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),i=!1);const n=this.times,r=this.values,e=n.length;0===e&&(console.error("THREE.KeyframeTrack: Track is empty.",this),i=!1);let s=null;for(let t=0;t!==e;t++){const r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),i=!1;break}if(null!==s&&s>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,s),i=!1;break}s=r}if(void 0!==r&&yr(r))for(let t=0,e=r.length;t!==e;++t){const n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),i=!1;break}}return i}optimize(){const i=fr(this.times),n=fr(this.values),r=this.getValueSize(),s=2302===this.getInterpolation(),a=i.length-1;let o=1;for(let t=1;t<a;++t){let e=!1;var l=i[t];if(l!==i[t+1]&&(1!==t||l!==i[0]))if(s)e=!0;else{const i=t*r,s=i-r,o=i+r;for(let t=0;t!==r;++t){const r=n[i+t];if(r!==n[s+t]||r!==n[o+t]){e=!0;break}}}if(e){if(t!==o){i[o]=i[t];const s=t*r,a=o*r;for(let t=0;t!==r;++t)n[a+t]=n[s+t]}++o}}if(0<a){i[o]=i[a];for(let t=a*r,e=o*r,i=0;i!==r;++i)n[e+i]=n[t+i];++o}return o!==i.length?(this.times=fr(i,0,o),this.values=fr(n,0,o*r)):(this.times=i,this.values=n),this}clone(){const t=fr(this.times,0),e=fr(this.values,0),i=new this.constructor(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}}Sr.prototype.TimeBufferType=Float32Array,Sr.prototype.ValueBufferType=Float32Array,Sr.prototype.DefaultInterpolation=2301;class Mr extends Sr{}Mr.prototype.ValueTypeName="bool",Mr.prototype.ValueBufferType=Array,Mr.prototype.DefaultInterpolation=2300,Mr.prototype.InterpolantFactoryMethodLinear=void 0,Mr.prototype.InterpolantFactoryMethodSmooth=void 0;class Br extends Sr{}Br.prototype.ValueTypeName="color";class Tr extends Sr{}Tr.prototype.ValueTypeName="number";class Rr extends wr{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t,e,i,n){var r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(i-e)/(n-e);let l=t*a;for(var h=l+a;l!==h;l+=4)z.slerpFlat(r,0,s,l-a,s,l,o);return r}}class Dr extends Sr{InterpolantFactoryMethodLinear(t){return new Rr(this.times,this.values,this.getValueSize(),t)}}Dr.prototype.ValueTypeName="quaternion",Dr.prototype.DefaultInterpolation=2301,Dr.prototype.InterpolantFactoryMethodSmooth=void 0;class Lr extends Sr{}Lr.prototype.ValueTypeName="string",Lr.prototype.ValueBufferType=Array,Lr.prototype.DefaultInterpolation=2300,Lr.prototype.InterpolantFactoryMethodLinear=void 0,Lr.prototype.InterpolantFactoryMethodSmooth=void 0;class Qr extends Sr{}Qr.prototype.ValueTypeName="vector";class Pr{constructor(t,e=-1,i,n=2500){this.name=t,this.tracks=i,this.duration=e,this.blendMode=n,this.uuid=l(),this.duration<0&&this.resetDuration()}static parse(t){const i=[],n=t.tracks,r=1/(t.fps||1);for(let t=0,e=n.length;t!==e;++t)i.push(Fr(n[t]).scale(r));const e=new this(t.name,t.duration,i,t.blendMode);return e.uuid=t.uuid,e}static toJSON(t){const i=[],n=t.tracks,e={name:t.name,duration:t.duration,tracks:i,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,e=n.length;t!==e;++t)i.push(Sr.toJSON(n[t]));return e}static CreateFromMorphTargetSequence(t,n,r,s){const a=n.length,o=[];for(let i=0;i<a;i++){let t=[],e=[];t.push((i+a-1)%a,i,(i+1)%a),e.push(0,1,0);var l=xr(t);t=_r(t,1,l),e=_r(e,1,l),s||0!==t[0]||(t.push(a),e.push(e[0])),o.push(new Tr(".morphTargetInfluences["+n[i].name+"]",t,e).scale(1/r))}return new this(t,-1,o)}static findByName(t,e){let i=t;if(!Array.isArray(t)){const e=t;i=e.geometry&&e.geometry.animations||e.animations}for(let t=0;t<i.length;t++)if(i[t].name===e)return i[t];return null}static CreateClipsFromMorphTargetSequences(i,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let t=0,e=i.length;t<e;t++){const n=i[t],a=n.name.match(s);if(a&&1<a.length){const i=a[1];let t=r[i];t||(r[i]=t=[]),t.push(n)}}const a=[];for(const i in r)a.push(this.CreateFromMorphTargetSequence(i,r[i],t,n));return a}static parseAnimation(i,e){if(!i)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,i,n,r){var s;0!==i.length&&(Er(i,i=[],s=[],n),0!==i.length&&r.push(new t(e,i,s)))},r=[],s=i.name||"default",a=i.fps||30,t=i.blendMode;let o=i.length||-1;var l=i.hierarchy||[];for(let t=0;t<l.length;t++){const s=l[t].keys;if(s&&0!==s.length)if(s[0].morphTargets){const i={};let e;for(e=0;e<s.length;e++)if(s[e].morphTargets)for(let t=0;t<s[e].morphTargets.length;t++)i[s[e].morphTargets[t]]=-1;for(const n in i){const i=[],a=[];for(let t=0;t!==s[e].morphTargets.length;++t){const r=s[e];i.push(r.time),a.push(r.morphTarget===n?1:0)}r.push(new Tr(".morphTargetInfluence["+n+"]",i,a))}o=i.length*a}else{const a=".bones["+e[t].name+"]";n(Qr,a+".position",s,"pos",r),n(Dr,a+".quaternion",s,"rot",r),n(Qr,a+".scale",s,"scl",r)}}return 0===r.length?null:new this(s,o,r,t)}resetDuration(){let i=0;for(let t=0,e=this.tracks.length;t!==e;++t){var n=this.tracks[t];i=Math.max(i,n.times[n.times.length-1])}return this.duration=i,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Fr(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Tr;case"vector":case"vector2":case"vector3":case"vector4":return Qr;case"color":return Br;case"quaternion":return Dr;case"bool":case"boolean":return Mr;case"string":return Lr}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],i=[];Er(t.keys,e,i,"value"),t.times=e,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Ur={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Nr{constructor(t,e,i){const n=this;let r,s=!1,a=0,o=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){o++,!1===s&&void 0!==n.onStart&&n.onStart(t,a,o),s=!0},this.itemEnd=function(t){a++,void 0!==n.onProgress&&n.onProgress(t,a,o),a===o&&(s=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(t){void 0!==n.onError&&n.onError(t)},this.resolveURL=function(t){return r?r(t):t},this.setURLModifier=function(t){return r=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){t=l.indexOf(t);return-1!==t&&l.splice(t,2),this},this.getHandler=function(i){for(let t=0,e=l.length;t<e;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(i))return r}return null}}}const kr=new Nr;class Or{constructor(t){this.manager=void 0!==t?t:kr,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(i,n){const r=this;return new Promise(function(t,e){r.load(i,t,n,e)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const Gr={};class Hr extends Error{constructor(t,e){super(t),this.response=e}}class zr extends Or{constructor(t){super(t)}load(l,t,e,i){void 0===l&&(l=""),void 0!==this.path&&(l=this.path+l),l=this.manager.resolveURL(l);const n=Ur.get(l);if(void 0!==n)return this.manager.itemStart(l),setTimeout(()=>{t&&t(n),this.manager.itemEnd(l)},0),n;if(void 0!==Gr[l])Gr[l].push({onLoad:t,onProgress:e,onError:i});else{Gr[l]=[],Gr[l].push({onLoad:t,onProgress:e,onError:i});const r=new Request(l,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,a=this.responseType;fetch(r).then(t=>{if(200!==t.status&&0!==t.status)throw new Hr(`fetch for "${t.url}" responded with ${t.status}: `+t.statusText,t);{if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const s=Gr[l],i=t.body.getReader(),e=t.headers.get("Content-Length"),a=e?parseInt(e):0,o=0!==a;let r=0;t=new ReadableStream({start(e){!function n(){i.read().then(({done:i,value:t})=>{if(i)e.close();else{r+=t.byteLength;const i=new ProgressEvent("progress",{lengthComputable:o,loaded:r,total:a});for(let t=0,e=s.length;t<e;t++){const n=s[t];n.onProgress&&n.onProgress(i)}e.enqueue(t),n()}})}()}});return new Response(t)}}).then(t=>{switch(a){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then(t=>(new DOMParser).parseFromString(t,s));case"json":return t.json();default:if(void 0===s)return t.text();{const e=/charset="?([^;"\s]*)"?/i.exec(s),i=e&&e[1]?e[1].toLowerCase():void 0,n=new TextDecoder(i);return t.arrayBuffer().then(t=>n.decode(t))}}}).then(i=>{Ur.add(l,i);var n=Gr[l];delete Gr[l];for(let t=0,e=n.length;t<e;t++){const r=n[t];r.onLoad&&r.onLoad(i)}}).catch(i=>{var n=Gr[l];if(void 0===n)throw this.manager.itemError(l),i;delete Gr[l];for(let t=0,e=n.length;t<e;t++){const r=n[t];r.onError&&r.onError(i)}this.manager.itemError(l)}).finally(()=>{this.manager.itemEnd(l)}),this.manager.itemStart(l)}}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Vr extends Or{constructor(t){super(t)}load(e,t,i,n){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,s=Ur.get(e);if(void 0!==s)return r.manager.itemStart(e),setTimeout(function(){t&&t(s),r.manager.itemEnd(e)},0),s;const a=_("img");function o(){h(),Ur.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){h(),n&&n(t),r.manager.itemError(e),r.manager.itemEnd(e)}function h(){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",o,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a}}class Wr extends Or{constructor(t){super(t)}load(t,e,i,n){const r=this,s=new qs,a=new zr(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(r.withCredentials),a.load(t,function(t){t=r.parse(t);t&&(void 0!==t.image?s.image=t.image:void 0!==t.data&&(s.image.width=t.width,s.image.height=t.height,s.image.data=t.data),s.wrapS=void 0!==t.wrapS?t.wrapS:1001,s.wrapT=void 0!==t.wrapT?t.wrapT:1001,s.magFilter=void 0!==t.magFilter?t.magFilter:1006,s.minFilter=void 0!==t.minFilter?t.minFilter:1006,s.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.encoding&&(s.encoding=t.encoding),void 0!==t.flipY&&(s.flipY=t.flipY),void 0!==t.format&&(s.format=t.format),void 0!==t.type&&(s.type=t.type),void 0!==t.mipmaps&&(s.mipmaps=t.mipmaps,s.minFilter=1008),1===t.mipmapCount&&(s.minFilter=1006),void 0!==t.generateMipmaps&&(s.generateMipmaps=t.generateMipmaps),s.needsUpdate=!0,e&&e(s,t))},i,n),s}}class qr extends Or{constructor(t){super(t)}load(t,e,i,n){const r=new N,s=new Vr(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,function(t){r.image=t,r.needsUpdate=!0,void 0!==e&&e(r)},i,n),r}}class jr extends qt{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new D(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}const Yr=new _t,Jr=new V,Xr=new V;class Kr{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new v(512,512),this.map=null,this.mapPass=null,this.matrix=new _t,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ii,this._frameExtents=new v(1,1),this._viewportCount=1,this._viewports=[new k(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,i=this.matrix;Jr.setFromMatrixPosition(t.matrixWorld),e.position.copy(Jr),Xr.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Xr),e.updateMatrixWorld(),Yr.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Yr),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(e.projectionMatrix),i.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class $r extends Kr{constructor(){super(new qe(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,i=2*o*t.angle*this.focus,n=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;i===e.fov&&n===e.aspect&&r===e.far||(e.fov=i,e.aspect=n,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class Zr extends jr{constructor(t,e,i=0,n=Math.PI/3,r=0,s=1){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(qt.DefaultUp),this.updateMatrix(),this.target=new qt,this.distance=i,this.angle=n,this.penumbra=r,this.decay=s,this.map=null,this.shadow=new $r}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const ta=new _t,ea=new V,ia=new V;class na extends Kr{constructor(){super(new qe(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new v(4,2),this._viewportCount=6,this._viewports=[new k(2,1,1,1),new k(0,1,1,1),new k(3,1,1,1),new k(1,1,1,1),new k(3,0,1,1),new k(1,0,1,1)],this._cubeDirections=[new V(1,0,0),new V(-1,0,0),new V(0,0,1),new V(0,0,-1),new V(0,1,0),new V(0,-1,0)],this._cubeUps=[new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,0,1),new V(0,0,-1)]}updateMatrices(t,e=0){const i=this.camera,n=this.matrix,r=t.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),ea.setFromMatrixPosition(t.matrixWorld),i.position.copy(ea),ia.copy(i.position),ia.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(ia),i.updateMatrixWorld(),n.makeTranslation(-ea.x,-ea.y,-ea.z),ta.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ta)}}class sa extends jr{constructor(t,e,i=0,n=1){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=n,this.shadow=new na}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class ra extends Kr{constructor(){super(new gi(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class aa extends jr{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(qt.DefaultUp),this.updateMatrix(),this.target=new qt,this.shadow=new ra}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class oa{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new V)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){var i=t.x,n=t.y,t=t.z,r=this.coefficients;return e.copy(r[0]).multiplyScalar(.282095),e.addScaledVector(r[1],.488603*n),e.addScaledVector(r[2],.488603*t),e.addScaledVector(r[3],.488603*i),e.addScaledVector(r[4],i*n*1.092548),e.addScaledVector(r[5],n*t*1.092548),e.addScaledVector(r[6],.315392*(3*t*t-1)),e.addScaledVector(r[7],i*t*1.092548),e.addScaledVector(r[8],.546274*(i*i-n*n)),e}getIrradianceAt(t,e){var i=t.x,n=t.y,t=t.z,r=this.coefficients;return e.copy(r[0]).multiplyScalar(.886227),e.addScaledVector(r[1],1.023328*n),e.addScaledVector(r[2],1.023328*t),e.addScaledVector(r[3],1.023328*i),e.addScaledVector(r[4],.858086*i*n),e.addScaledVector(r[5],.858086*n*t),e.addScaledVector(r[6],.743125*t*t-.247708),e.addScaledVector(r[7],.858086*i*t),e.addScaledVector(r[8],.429043*(i*i-n*n)),e}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,i){for(let t=0;t<9;t++)this.coefficients[t].addScaledVector(e.coefficients[t],i);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,i){for(let t=0;t<9;t++)this.coefficients[t].lerp(e.coefficients[t],i);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,i=0){const n=this.coefficients;for(let t=0;t<9;t++)n[t].fromArray(e,i+3*t);return this}toArray(e=[],i=0){const n=this.coefficients;for(let t=0;t<9;t++)n[t].toArray(e,i+3*t);return e}static getBasisAt(t,e){var i=t.x,n=t.y,t=t.z;e[0]=.282095,e[1]=.488603*n,e[2]=.488603*t,e[3]=.488603*i,e[4]=1.092548*i*n,e[5]=1.092548*n*t,e[6]=.315392*(3*t*t-1),e[7]=1.092548*i*t,e[8]=.546274*(i*i-n*n)}}class la extends jr{constructor(t=new oa,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class ca{static decodeText(i){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(i);let n="";for(let t=0,e=i.length;t<e;t++)n+=String.fromCharCode(i[t]);try{return decodeURIComponent(escape(n))}catch(i){return n}}static extractUrlBase(t){var e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class ha extends Or{constructor(t){super(t),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(e,i,t,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,s=Ur.get(e);if(void 0!==s)return r.manager.itemStart(e),setTimeout(function(){i&&i(s),r.manager.itemEnd(e)},0),s;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(t){Ur.add(e,t),i&&i(t),r.manager.itemEnd(e)}).catch(function(t){n&&n(t),r.manager.itemError(e),r.manager.itemEnd(e)}),r.manager.itemStart(e)}}class ua{constructor(t,e,i){let n,r,s;switch(this.binding=t,this.valueSize=i,e){case"quaternion":n=this._slerp,r=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":n=this._select,r=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:n=this._lerp,r=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=r,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const i=this.buffer,n=this.valueSize,r=t*n+n;let s=this.cumulativeWeight;if(0===s){for(let t=0;t!==n;++t)i[r+t]=i[t];s=e}else{const t=e/(s+=e);this._mixBufferRegion(i,r,0,t,n)}this.cumulativeWeight=s}accumulateAdditive(t){var e=this.buffer,i=this.valueSize,n=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,n,0,t,i),this.cumulativeWeightAdditive+=t}apply(t){const i=this.valueSize,n=this.buffer,r=t*i+i,e=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,e<1){const t=i*this._origIndex;this._mixBufferRegion(n,r,t,1-e,i)}0<s&&this._mixBufferRegionAdditive(n,r,this._addIndex*i,1,i);for(let t=i,e=i+i;t!==e;++t)if(n[t]!==n[t+i]){a.setValue(n,r);break}}saveOriginalState(){const t=this.binding,i=this.buffer,n=this.valueSize,r=n*this._origIndex;t.getValue(i,r);for(let t=n,e=r;t!==e;++t)i[t]=i[r+t%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){var e=this._addIndex*this.valueSize,i=e+this.valueSize;for(let t=e;t<i;t++)this.buffer[t]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){var e=this._origIndex*this.valueSize,i=this._addIndex*this.valueSize;for(let t=0;t<this.valueSize;t++)this.buffer[i+t]=this.buffer[e+t]}_select(e,i,n,t,r){if(.5<=t)for(let t=0;t!==r;++t)e[i+t]=e[n+t]}_slerp(t,e,i,n){z.slerpFlat(t,e,t,e,t,i,n)}_slerpAdditive(t,e,i,n,r){r=this._workIndex*r;z.multiplyQuaternionsFlat(t,r,t,e,t,i),z.slerpFlat(t,e,t,e,t,r,n)}_lerp(e,i,n,r,s){var a=1-r;for(let t=0;t!==s;++t){const s=i+t;e[s]=e[s]*a+e[n+t]*r}}_lerpAdditive(e,i,n,r,s){for(let t=0;t!==s;++t){const s=i+t;e[s]=e[s]+e[n+t]*r}}}const da=new RegExp("[\\[\\]\\.:\\/]","g"),Aa="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",pa=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]")+/(WCOD+)?/.source.replace("WCOD",Aa)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]")+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]")+"$"),ga=["material","materials","bones","map"];class ma{constructor(t,e,i){this.path=e,this.parsedPath=i||ma.parseTrackName(e),this.node=ma.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,i){return new(t&&t.isAnimationObjectGroup?ma.Composite:ma)(t,e,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(da,"")}static parseTrackName(t){var e=pa.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){const t=i.nodeName.substring(n+1);-1!==ga.indexOf(t)&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=t)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,n){if(void 0===n||""===n||"."===n||-1===n||n===t.name||n===t.uuid)return t;if(t.skeleton){var e=t.skeleton.getBoneByName(n);if(void 0!==e)return e}if(t.children){const r=function(e){for(let t=0;t<e.length;t++){var i=e[t];if(i.name===n||i.uuid===n)return i;i=r(i.children);if(i)return i}return null},i=r(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(i,n){var r=this.resolvedProperty;for(let t=0,e=r.length;t!==e;++t)i[n++]=r[t]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(i,n){const r=this.resolvedProperty;for(let t=0,e=r.length;t!==e;++t)r[t]=i[n++]}_setValue_array_setNeedsUpdate(i,n){const r=this.resolvedProperty;for(let t=0,e=r.length;t!==e;++t)r[t]=i[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(i,n){const r=this.resolvedProperty;for(let t=0,e=r.length;t!==e;++t)r[t]=i[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let i=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(i||(i=ma.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=i),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,i){if(n){let e=t.objectIndex;switch(n){case"materials":if(!i.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!i.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);i=i.material.materials;break;case"bones":if(!i.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);i=i.skeleton.bones;for(let t=0;t<i.length;t++)if(i[t].name===e){e=t;break}break;case"map":if(!i.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!i.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);i=i.material.map;break;default:if(void 0===i[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);i=i[n]}if(void 0!==e){if(void 0===i[e])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,i);i=i[e]}}var a=i[r];if(void 0===a){const n=t.nodeName;void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",i)}else{let t=this.Versioning.None,e=(void 0!==(this.targetObject=i).needsUpdate?t=this.Versioning.NeedsUpdate:void 0!==i.matrixWorldNeedsUpdate&&(t=this.Versioning.MatrixWorldNeedsUpdate),this.BindingType.Direct);if(void 0!==s){if("morphTargetInfluences"===r){if(!i.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!i.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==i.morphTargetDictionary[s]&&(s=i.morphTargetDictionary[s])}e=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else void 0!==a.fromArray&&void 0!==a.toArray?(e=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(e=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[e],this.setValue=this.SetterByBindingTypeAndVersioning[e][t]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ma.Composite=class{constructor(t,e,i){i=i||ma.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}getValue(t,e){this.bind();const i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(t,e)}setValue(i,n){const r=this._bindings;for(let t=this._targetGroup.nCachedObjects_,e=r.length;t!==e;++t)r[t].setValue(i,n)}bind(){const i=this._bindings;for(let t=this._targetGroup.nCachedObjects_,e=i.length;t!==e;++t)i[t].bind()}unbind(){const i=this._bindings;for(let t=this._targetGroup.nCachedObjects_,e=i.length;t!==e;++t)i[t].unbind()}},ma.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ma.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ma.prototype.GetterByBindingType=[ma.prototype._getValue_direct,ma.prototype._getValue_array,ma.prototype._getValue_arrayElement,ma.prototype._getValue_toArray],ma.prototype.SetterByBindingTypeAndVersioning=[[ma.prototype._setValue_direct,ma.prototype._setValue_direct_setNeedsUpdate,ma.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ma.prototype._setValue_array,ma.prototype._setValue_array_setNeedsUpdate,ma.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ma.prototype._setValue_arrayElement,ma.prototype._setValue_arrayElement_setNeedsUpdate,ma.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ma.prototype._setValue_fromArray,ma.prototype._setValue_fromArray_setNeedsUpdate,ma.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class fa{constructor(t,e,i=null,n=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=i,this.blendMode=n;const r=e.tracks,s=r.length,a=new Array(s),o={endingStart:2400,endingEnd:2400};for(let t=0;t!==s;++t){const e=r[t].createInterpolant(null);(a[t]=e).settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){const i=this._clip.duration,n=t._clip.duration,r=n/i,s=i/n;t.warp(1,r,e),this.warp(s,1,e)}return this}crossFadeTo(t,e,i){return t.crossFadeFrom(this,e,i)}stopFading(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,i){const n=this._mixer,r=n.time,s=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=n._lendControlInterpolant(),this._timeScaleInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=r,o[1]=r+i,l[0]=t/s,l[1]=e/s,this}stopWarping(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(i,n,t,r){if(this.enabled){var e=this._startTime;if(null!==e){const r=(i-e)*t;n=r<0||0===t?0:(this._startTime=null,t*r)}n*=this._updateTimeScale(i);var s=this._updateTime(n),a=this._updateWeight(i);if(0<a){const i=this._interpolants,n=this._propertyBindings;if(2501===this.blendMode)for(let t=0,e=i.length;t!==e;++t)i[t].evaluate(s),n[t].accumulateAdditive(a);else for(let t=0,e=i.length;t!==e;++t)i[t].evaluate(s),n[t].accumulate(r,a)}}else this._updateWeight(i)}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;var i;null!==n&&(i=n.evaluate(t)[0],e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1)))}return this._effectiveWeight=e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const i=this._timeScaleInterpolant;null!==i&&(e*=i.evaluate(t)[0],t>i.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e}_updateTime(t){const e=this._clip.duration,i=this.loop;let n=this.time+t,r=this._loopCount;var s=2202===i;if(0===t)return-1!==r&&s&&1==(1&r)?e-n:n;if(2200===i){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(n>=e)n=e;else{if(!(n<0)){this.time=n;break t}n=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(0<=t?(r=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),n>=e||n<0){const i=Math.floor(n/e);n-=e*i,r+=Math.abs(i);var a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,n=0<t?e:0,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<t?1:-1});else{if(1==a){const e=t<0;this._setEndings(e,!e,s)}else this._setEndings(!1,!1,s);this._loopCount=r,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:i})}}else this.time=n;if(s&&1==(1&r))return e-n}return n}_setEndings(t,e,i){const n=this._interpolantSettings;i?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,n.endingEnd=e?this.zeroSlopeAtEnd?2401:2400:2402)}_scheduleFading(t,e,i){const n=this._mixer,r=n.time;let s=this._weightInterpolant;null===s&&(s=n._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,o=s.sampleValues;return a[0]=r,o[0]=e,a[1]=r+t,o[1]=i,this}}const va=new Float32Array(1);class ya extends n{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,i){const n=t._localRoot||this._root,r=t._clip.tracks,s=r.length,a=t._propertyBindings,o=t._interpolants,l=n.uuid,h=this._bindingsByRootAndName;let c=h[l];void 0===c&&(c={},h[l]=c);for(let e=0;e!==s;++e){const s=r[e],h=s.name;let t=c[h];if(void 0!==t)++t.referenceCount,a[e]=t;else{if(void 0!==(t=a[e])){null===t._cacheIndex&&(++t.referenceCount,this._addInactiveBinding(t,l,h));continue}const r=i&&i._propertyBindings[e].binding.parsedPath;++(t=new ua(ma.create(n,h,r),s.ValueTypeName,s.getValueSize())).referenceCount,this._addInactiveBinding(t,l,h),a[e]=t}o[e].resultBuffer=t.buffer}}_activateAction(t){if(!this._isActiveAction(t)){null===t._cacheIndex&&(e=(t._localRoot||this._root).uuid,i=t._clip.uuid,n=this._actionsByClip[i],this._bindAction(t,n&&n.knownActions[0]),this._addInactiveAction(t,i,e));var e,i,n,r=t._propertyBindings;for(let t=0,e=r.length;t!==e;++t){const s=r[t];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){var i=t._propertyBindings;for(let t=0,e=i.length;t!==e;++t){const n=i[t];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){t=t._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(t,e,i){const n=this._actions,r=this._actionsByClip;let s=r[e];if(void 0===s)s={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=s;else{const e=s.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=n.length,n.push(t),s.actionByRoot[i]=t}_removeInactiveAction(t){const e=this._actions,i=e[e.length-1],n=t._cacheIndex,r=(i._cacheIndex=n,e[n]=i,e.pop(),t._cacheIndex=null,t._clip.uuid),s=this._actionsByClip,a=s[r],o=a.knownActions,l=o[o.length-1],h=t._byClipCacheIndex;l._byClipCacheIndex=h,o[h]=l,o.pop(),t._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===o.length&&delete s[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){var i=t._propertyBindings;for(let t=0,e=i.length;t!==e;++t){const n=i[t];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(t){const e=this._actions,i=t._cacheIndex,n=this._nActiveActions++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r}_takeBackAction(t){const e=this._actions,i=t._cacheIndex,n=--this._nActiveActions,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r}_addInactiveBinding(t,e,i){const n=this._bindingsByRootAndName,r=this._bindings;let s=n[e];void 0===s&&(s={},n[e]=s),(s[i]=t)._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,i=t.binding,n=i.rootNode.uuid,r=i.path,s=this._bindingsByRootAndName,a=s[n],o=e[e.length-1],l=t._cacheIndex;o._cacheIndex=l,e[l]=o,e.pop(),delete a[r],0===Object.keys(a).length&&delete s[n]}_lendBinding(t){const e=this._bindings,i=t._cacheIndex,n=this._nActiveBindings++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r}_takeBackBinding(t){const e=this._bindings,i=t._cacheIndex,n=--this._nActiveBindings,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let i=t[e];return void 0===i&&((i=new Ir(new Float32Array(2),new Float32Array(2),1,va)).__cacheIndex=e,t[e]=i),i}_takeBackControlInterpolant(t){const e=this._controlInterpolants,i=t.__cacheIndex,n=--this._nActiveControlInterpolants,r=e[n];t.__cacheIndex=n,e[n]=t,r.__cacheIndex=i,e[i]=r}clipAction(t,e,i){var n=e||this._root,r=n.uuid;let s="string"==typeof t?Pr.findByName(n,t):t;var n=null!==s?s.uuid:t,a=this._actionsByClip[n];let o=null;if(void 0===i&&(i=null!==s?s.blendMode:2500),void 0!==a){const t=a.actionByRoot[r];if(void 0!==t&&t.blendMode===i)return t;o=a.knownActions[0],null===s&&(s=o._clip)}if(null===s)return null;t=new fa(this,s,e,i);return this._bindAction(t,o),this._addInactiveAction(t,n,r),t}existingAction(t,e){var e=e||this._root,i=e.uuid,e="string"==typeof t?Pr.findByName(e,t):t,e=e?e.uuid:t,t=this._actionsByClip[e];return void 0!==t&&t.actionByRoot[i]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;0<=t;--t)e[t].stop();return this}update(e){e*=this.timeScale;const i=this._actions,n=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let t=0;t!==n;++t)i[t]._update(r,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let t=0;t!==l;++t)o[t].apply(a);return this}setTime(t){for(let t=this.time=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(i){const n=this._actions,t=i.uuid,r=this._actionsByClip,s=r[t];if(void 0!==s){const i=s.knownActions;for(let t=0,e=i.length;t!==e;++t){const r=i[t],s=(this._deactivateAction(r),r._cacheIndex),a=n[n.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,a._cacheIndex=s,n[s]=a,n.pop(),this._removeInactiveBindingsForAction(r)}delete r[t]}}uncacheRoot(t){const e=t.uuid,i=this._actionsByClip;for(const t in i){const n=i[t].actionByRoot[e];void 0!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}const n=this._bindingsByRootAndName[e];if(void 0!==n)for(const t in n){const e=n[t];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(t,e){t=this.existingAction(t,e);null!==t&&(this._deactivateAction(t),this._removeInactiveAction(t))}}function xa(t,e){return t.distance-e.distance}function _a(t,i,n,r){if(t.layers.test(i.layers)&&t.raycast(i,n),!0===r){const r=t.children;for(let t=0,e=r.length;t<e;t++)_a(r[t],i,n,!0)}}class Ea{constructor(t=1,e=0,i=0){return this.radius=t,this.phi=e,this.theta=i,this}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(c(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const wa=ba();function ba(){const t=new ArrayBuffer(4),e=new Float32Array(t),i=new Uint32Array(t),n=new Uint32Array(512),r=new Uint32Array(512);for(let t=0;t<256;++t){const e=t-127;e<-27?(n[t]=0,n[256|t]=32768,r[t]=24,r[256|t]=24):e<-14?(n[t]=1024>>-e-14,n[256|t]=1024>>-e-14|32768,r[t]=-e-1,r[256|t]=-e-1):e<=15?(n[t]=15+e<<10,n[256|t]=15+e<<10|32768,r[t]=13,r[256|t]=13):e<128?(n[t]=31744,n[256|t]=64512,r[t]=24,r[256|t]=24):(n[t]=31744,n[256|t]=64512,r[t]=13,r[256|t]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let i=1;i<1024;++i){let t=i<<13,e=0;for(;0==(8388608&t);)t<<=1,e-=8388608;t&=-8388609,e+=947912704,s[i]=t|e}for(let t=1024;t<2048;++t)s[t]=939524096+(t-1024<<13);for(let t=1;t<31;++t)a[t]=t<<23;a[31]=1199570944,a[32]=2147483648;for(let t=33;t<63;++t)a[t]=2147483648+(t-32<<23);a[63]=3347054592;for(let t=1;t<64;++t)32!==t&&(o[t]=1024);return{floatView:e,uint32View:i,baseTable:n,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}var Da,Ga,bo,Io,Ia=Object.freeze({__proto__:null,toHalfFloat:function(t){65504<Math.abs(t)&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=c(t,-65504,65504),wa.floatView[0]=t;var t=wa.uint32View[0],e=t>>23&511;return wa.baseTable[e]+((8388607&t)>>wa.shiftTable[e])},fromHalfFloat:function(t){var e=t>>10;return wa.uint32View[0]=wa.mantissaTable[wa.offsetTable[e]+(1023&t)]+wa.exponentTable[e],wa.floatView[0]}});"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"144"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="144");const Ca=window,Sa=Ca.ShadowRoot&&(void 0===Ca.ShadyCSS||Ca.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Ma=Symbol(),Ba=new WeakMap;class Ta{constructor(t,e,i){if(this._$cssResult$=!0,i!==Ma)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;var e,i=this.t;return Sa&&void 0===t&&(e=void 0!==i&&1===i.length,void 0===(t=e?Ba.get(i):t)&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&Ba.set(i,t))),t}toString(){return this.cssText}}const Ra=Sa?t=>t:e=>{if(!(e instanceof CSSStyleSheet))return e;{let t="";for(const i of e.cssRules)t+=i.cssText;return e=t,new Ta("string"==typeof e?e:e+"",void 0,Ma)}},La=window,Qa=La.trustedTypes,Pa=Qa?Qa.emptyScript:"",Fa=La.reactiveElementPolyfillSupport,Ua={toAttribute(t,e){switch(e){case Boolean:t=t?Pa:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},Na=(t,e)=>e!==t&&(e==e||t==t),ka={attribute:!0,type:String,converter:Ua,reflect:!1,hasChanged:Na};class Oa extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(t){null==this.h&&(this.h=[]),this.h.push(t)}static get observedAttributes(){this.finalize();const i=[];return this.elementProperties.forEach((t,e)=>{t=this._$Ep(e,t);void 0!==t&&(this._$Ev.set(t,e),i.push(t))}),i}static createProperty(t,e=ka){var i;e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),e.noAccessor||this.prototype.hasOwnProperty(t)||(i="symbol"==typeof t?Symbol():"__"+t,void 0!==(i=this.getPropertyDescriptor(t,i,e))&&Object.defineProperty(this.prototype,t,i))}static getPropertyDescriptor(i,n,r){return{get(){return this[n]},set(t){var e=this[i];this[n]=t,this.requestUpdate(i,e,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||ka}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const i of e)this.createProperty(i,t[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){var i=new Set(t.flat(1/0).reverse());for(const t of i)e.unshift(Ra(t))}else void 0!==t&&e.push(Ra(t));return e}static _$Ep(t,e){e=e.attribute;return!1===e?void 0:"string"==typeof e?e:"string"==typeof t?t.toLowerCase():void 0}u(){var t;this._$E_=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null!=(t=this.constructor.h)&&t.forEach(t=>t(this))}addController(t){var e;(null!=(e=this._$ES)?e:this._$ES=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&null!=(e=t.hostConnected)&&e.call(t)}removeController(t){var e;null!=(e=this._$ES)&&e.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((t,e)=>{this.hasOwnProperty(e)&&(this._$Ei.set(e,this[e]),delete this[e])})}createRenderRoot(){var n,t,e=null!=(e=this.shadowRoot)?e:this.attachShadow(this.constructor.shadowRootOptions);return n=e,t=this.constructor.elementStyles,Sa?n.adoptedStyleSheets=t.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet):t.forEach(t=>{const e=document.createElement("style"),i=Ca.litNonce;void 0!==i&&e.setAttribute("nonce",i),e.textContent=t.cssText,n.appendChild(e)}),e}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null!=(t=this._$ES)&&t.forEach(t=>{var e;return null==(e=t.hostConnected)?void 0:e.call(t)})}enableUpdating(t){}disconnectedCallback(){var t;null!=(t=this._$ES)&&t.forEach(t=>{var e;return null==(e=t.hostDisconnected)?void 0:e.call(t)})}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$EO(t,e,i=ka){var n,r=this.constructor._$Ep(t,i);void 0!==r&&!0===i.reflect&&(n=(void 0!==(null==(n=i.converter)?void 0:n.toAttribute)?i.converter:Ua).toAttribute(e,i.type),this._$El=t,null==n?this.removeAttribute(r):this.setAttribute(r,n),this._$El=null)}_$AK(t,e){var i;const n=this.constructor,r=n._$Ev.get(t);if(void 0!==r&&this._$El!==r){const t=n.getPropertyOptions(r),s="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==(null==(i=t.converter)?void 0:i.fromAttribute)?t.converter:Ua;this._$El=r,this[r]=s.fromAttribute(e,t.type),this._$El=null}}requestUpdate(t,e,i){let n=!0;void 0!==t&&(((i=i||this.constructor.getPropertyOptions(t)).hasChanged||Na)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===i.reflect&&this._$El!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,i))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}var t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(this.isUpdatePending){this.hasUpdated,this._$Ei&&(this._$Ei.forEach((t,e)=>this[e]=t),this._$Ei=void 0);let t=!1;var i=this._$AL;try{(t=this.shouldUpdate(i))?(this.willUpdate(i),null!=(e=this._$ES)&&e.forEach(t=>{var e;return null==(e=t.hostUpdate)?void 0:e.call(t)}),this.update(i)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(i)}}willUpdate(t){}_$AE(t){var e;null!=(e=this._$ES)&&e.forEach(t=>{var e;return null==(e=t.hostUpdated)?void 0:e.call(t)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach((t,e)=>this._$EO(e,this[e],t)),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}}Oa.finalized=!0,Oa.elementProperties=new Map,Oa.elementStyles=[],Oa.shadowRootOptions={mode:"open"},null!=Fa&&Fa({ReactiveElement:Oa}),(null!=(Da=La.reactiveElementVersions)?Da:La.reactiveElementVersions=[]).push("1.4.1");const Ha=window,za=Ha.trustedTypes,Va=za?za.createPolicy("lit-html",{createHTML:t=>t}):void 0,Wa=`lit$${(Math.random()+"").slice(9)}$`,qa="?"+Wa,ja=`<${qa}>`,Ya=document,Ja=(t="")=>Ya.createComment(t),Xa=t=>null===t||"object"!=typeof t&&"function"!=typeof t,Ka=Array.isArray,$a=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Za=/-->/g,to=/>/g,eo=RegExp(">|[ \t\n\f\r](?:([^\\s\"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)","g"),io=/'/g,no=/"/g,so=/^(?:script|style|textarea|title)$/i,ro=(t,...e)=>({_$litType$:1,strings:t,values:e}),ao=Symbol.for("lit-noChange"),oo=Symbol.for("lit-nothing"),lo=new WeakMap,co=(t,e,i)=>{var n;const r=null!=(n=null==i?void 0:i.renderBefore)?n:e;let s=r._$litPart$;if(void 0===s){const t=null!=(n=null==i?void 0:i.renderBefore)?n:null;r._$litPart$=s=new mo(e.insertBefore(Ja(),t),t,void 0,null!=i?i:{})}return s._$AI(t),s},ho=Ya.createTreeWalker(Ya,129,null,!1),uo=(s,t)=>{const a=s.length-1,o=[];let l,h=2===t?"<svg>":"",c=$a;for(let r=0;r<a;r++){const a=s[r];let t,e,i=-1,n=0;for(;n<a.length&&(c.lastIndex=n,null!==(e=c.exec(a)));)n=c.lastIndex,c===$a?"!--"===e[1]?c=Za:void 0!==e[1]?c=to:void 0!==e[2]?(so.test(e[2])&&(l=RegExp("</"+e[2],"g")),c=eo):void 0!==e[3]&&(c=eo):c===eo?">"===e[0]?(c=null!=l?l:$a,i=-1):void 0===e[1]?i=-2:(i=c.lastIndex-e[2].length,t=e[1],c=void 0===e[3]?eo:'"'===e[3]?no:io):c===no||c===io?c=eo:c===Za||c===to?c=$a:(c=eo,l=void 0);var u=c===eo&&s[r+1].startsWith("/>")?" ":"";h+=c===$a?a+ja:0<=i?(o.push(t),a.slice(0,i)+"$lit$"+a.slice(i)+Wa+u):a+Wa+(-2===i?(o.push(void 0),r):u)}t=h+(s[a]||"<?>")+(2===t?"</svg>":"");if(Array.isArray(s)&&s.hasOwnProperty("raw"))return[void 0!==Va?Va.createHTML(t):t,o];throw Error("invalid template strings array")};class Ao{constructor({strings:e,_$litType$:i},t){let n,r=(this.parts=[],0),s=0;const a=e.length-1,o=this.parts,[l,h]=uo(e,i);if(this.el=Ao.createElement(l,t),ho.currentNode=this.el.content,2===i){const e=this.el.content,i=e.firstChild;i.remove(),e.append(...i.childNodes)}for(;null!==(n=ho.nextNode())&&o.length<a;){if(1===n.nodeType){if(n.hasAttributes()){const e=[];for(const i of n.getAttributeNames())if(i.endsWith("$lit$")||i.startsWith(Wa)){const t=h[s++];if(e.push(i),void 0!==t){const e=n.getAttribute(t.toLowerCase()+"$lit$").split(Wa),i=/([.?@])?(.*)/.exec(t);o.push({type:1,index:r,name:i[2],strings:e,ctor:"."===i[1]?vo:"?"===i[1]?xo:"@"===i[1]?_o:fo})}else o.push({type:6,index:r})}for(const i of e)n.removeAttribute(i)}if(so.test(n.tagName)){const e=n.textContent.split(Wa),i=e.length-1;if(0<i){n.textContent=za?za.emptyScript:"";for(let t=0;t<i;t++)n.append(e[t],Ja()),ho.nextNode(),o.push({type:2,index:++r});n.append(e[i],Ja())}}}else if(8===n.nodeType)if(n.data===qa)o.push({type:2,index:r});else{let t=-1;for(;-1!==(t=n.data.indexOf(Wa,t+1));)o.push({type:7,index:r}),t+=Wa.length-1}r++}}static createElement(t,e){const i=Ya.createElement("template");return i.innerHTML=t,i}}function po(t,e,i=t,n){var r;if(e===ao)return e;let s=void 0!==n?null==(r=i._$Cl)?void 0:r[n]:i._$Cu;const a=Xa(e)?void 0:e._$litDirective$;return(null==s?void 0:s.constructor)!==a&&(null!=(r=null==s?void 0:s._$AO)&&r.call(s,!1),void 0===a?s=void 0:(s=new a(t))._$AT(t,i,n),void 0!==n?(null!=(r=i._$Cl)?r:i._$Cl=[])[n]=s:i._$Cu=s),e=void 0!==s?po(t,s._$AS(t,e.values),s,n):e}class go{constructor(t,e){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(e){var{el:{content:t},parts:i}=this._$AD,n=(null!=(n=null==e?void 0:e.creationScope)?n:Ya).importNode(t,!0);ho.currentNode=n;let r=ho.nextNode(),s=0,a=0,o=i[0];for(;void 0!==o;){if(s===o.index){let t;2===o.type?t=new mo(r,r.nextSibling,this,e):1===o.type?t=new o.ctor(r,o.name,o.strings,this,e):6===o.type&&(t=new Eo(r,this,e)),this.v.push(t),o=i[++a]}s!==(null==o?void 0:o.index)&&(r=ho.nextNode(),s++)}return n}m(t){let e=0;for(const i of this.v)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class mo{constructor(t,e,i,n){this.type=2,this._$AH=oo,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=n,this._$C_=null==(t=null==n?void 0:n.isConnected)||t}get _$AU(){var t;return null!=(t=null==(t=this._$AM)?void 0:t._$AU)?t:this._$C_}get parentNode(){let t=this._$AA.parentNode;var e=this._$AM;return t=void 0!==e&&11===t.nodeType?e.parentNode:t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=po(this,t,e),Xa(t)?t===oo||null==t||""===t?(this._$AH!==oo&&this._$AR(),this._$AH=oo):t!==this._$AH&&t!==ao&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.k(t):(e=t,Ka(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator])?this.O(t):this.$(t))}S(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}$(t){this._$AH!==oo&&Xa(this._$AH)?this._$AA.nextSibling.data=t:this.k(Ya.createTextNode(t)),this._$AH=t}T(t){var e;const{values:i,_$litType$:n}=t,r="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=Ao.createElement(n.h,this.options)),n);if((null==(e=this._$AH)?void 0:e._$AD)===r)this._$AH.m(i);else{const t=new go(r,this),e=t.p(this.options);t.m(i),this.k(e),this._$AH=t}}_$AC(t){let e=lo.get(t.strings);return void 0===e&&lo.set(t.strings,e=new Ao(t)),e}O(t){Ka(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let i,n=0;for(const r of t)n===e.length?e.push(i=new mo(this.S(Ja()),this.S(Ja()),this,this.options)):i=e[n],i._$AI(r),n++;n<e.length&&(this._$AR(i&&i._$AB.nextSibling,n),e.length=n)}_$AR(t=this._$AA.nextSibling,e){var i;for(null!=(i=this._$AP)&&i.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$C_=t,null!=(e=this._$AP)&&e.call(this,t))}}class fo{constructor(t,e,i,n,r){this.type=1,this._$AH=oo,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=r,2<i.length||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=oo}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(i,n=this,r,s){var a=this.strings;let o=!1;if(void 0===a)i=po(this,i,n,0),(o=!Xa(i)||i!==this._$AH&&i!==ao)&&(this._$AH=i);else{const s=i;let t,e;for(i=a[0],t=0;t<a.length-1;t++)(e=po(this,s[r+t],n,t))===ao&&(e=this._$AH[t]),o=o||!Xa(e)||e!==this._$AH[t],e===oo?i=oo:i!==oo&&(i+=(null!=e?e:"")+a[t+1]),this._$AH[t]=e}o&&!s&&this.P(i)}P(t){t===oo?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class vo extends fo{constructor(){super(...arguments),this.type=3}P(t){this.element[this.name]=t===oo?void 0:t}}const yo=za?za.emptyScript:"";class xo extends fo{constructor(){super(...arguments),this.type=4}P(t){t&&t!==oo?this.element.setAttribute(this.name,yo):this.element.removeAttribute(this.name)}}class _o extends fo{constructor(t,e,i,n,r){super(t,e,i,n,r),this.type=5}_$AI(t,e=this){var i,n;(t=null!=(e=po(this,t,e,0))?e:oo)!==ao&&(e=this._$AH,i=t===oo&&e!==oo||t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive,n=t!==oo&&(e===oo||i),i&&this.element.removeEventListener(this.name,this,e),n&&this.element.addEventListener(this.name,this,t),this._$AH=t)}handleEvent(t){var e;"function"==typeof this._$AH?this._$AH.call(null!=(e=null==(e=this.options)?void 0:e.host)?e:this.element,t):this._$AH.handleEvent(t)}}class Eo{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){po(this,t)}}const wo=Ha.litHtmlPolyfillSupport;null!=wo&&wo(Ao,mo),(null!=(Ga=Ha.litHtmlVersions)?Ga:Ha.litHtmlVersions=[]).push("2.3.1");class Co extends Oa{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,e=super.createRenderRoot();return null==(t=this.renderOptions).renderBefore&&(t.renderBefore=e.firstChild),e}update(t){var e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=co(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null!=(t=this._$Do)&&t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null!=(t=this._$Do)&&t.setConnected(!1)}render(){return ao}}Co.finalized=!0,Co._$litElement$=!0,null!=(bo=globalThis.litElementHydrateSupport)&&bo.call(globalThis,{LitElement:Co});const So=globalThis.litElementPolyfillSupport,Mo=(null!=So&&So({LitElement:Co}),(null!=(Io=globalThis.litElementVersions)?Io:globalThis.litElementVersions=[]).push("3.2.2"),null!=navigator.xr&&null!=self.XRSession&&null!=navigator.xr.isSessionSupported),Bo=Mo&&null!=self.XRSession.prototype.requestHitTestSource,To=null!=self.ResizeObserver,Ro=null!=self.IntersectionObserver,Do=Bo,Lo=((()=>{const t=navigator.userAgent||navigator.vendor||self.opera;/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))})(),/\bCrOS\b/.test(navigator.userAgent),/android/i.test(navigator.userAgent)),Qo=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints,Po=(/Safari\//.test(navigator.userAgent),/firefox/i.test(navigator.userAgent)),Fo=/OculusBrowser/.test(navigator.userAgent),Uo=(Qo&&/CriOS\//.test(navigator.userAgent),Lo&&!Po&&!Fo),No=Boolean(window.webkit&&window.webkit.messageHandlers),ko=(()=>{if(Qo){if(No)return Boolean(/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent));{const t=document.createElement("a");return Boolean(t.relList&&t.relList.supports&&t.relList.supports("ar"))}}return!1})(),Oo=t=>t&&"null"!==t?Ho(t):null,Go=()=>{if(!Do){const t=[];throw Mo||t.push("WebXR Device API"),Bo||t.push("WebXR Hit Test API"),new Error("The following APIs are required for AR, but are missing in this browser: "+t.join(", "))}},Ho=t=>new URL(t,window.location.toString()).toString(),zo=(e,i)=>{let n=null;return(...t)=>{null!=n&&self.clearTimeout(n),n=self.setTimeout(()=>{n=null,e(...t)},i)}},Vo=(t,e,i)=>Math.max(e,Math.min(i,t)),Wo=(()=>{const t=(()=>{var t;if(null!=(t=document.documentElement.getAttribute("itemtype"))&&t.includes("schema.org/SearchResultsPage"))return!0;for(const t of null!=document.head?Array.from(document.head.querySelectorAll("meta")):[])if("viewport"===t.name)return!0;return!1})();return t||console.warn('No <meta name="viewport"> detected; <model-viewer> will cap pixel density at 1.'),()=>t?window.devicePixelRatio:1})(),qo=(()=>{const t=new RegExp("[?&]model-viewer-debug-mode(&|$)");return()=>self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(t)})();var _c,Ec,Rc,Dc,jo=function(t,e,i,n){for(var r,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n,o=t.length-1;0<=o;o--)(r=t[o])&&(a=(s<3?r(a):3<s?r(e,i,a):r(e,i))||a);return 3<s&&a&&Object.defineProperty(e,i,a),a};const Yo=Symbol("currentEnvironmentMap"),Jo=Symbol("currentBackground"),Xo=Symbol("updateEnvironment"),Ko=Symbol("cancelEnvironmentUpdate"),$o=ro`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

/* NOTE: This rule set is our integration surface area with the
 * :focus-visible polyfill.
 *
 * @see https://github.com/WICG/focus-visible/pull/196 */
:host([data-js-focus-visible]:focus:not(.focus-visible)),
:host([data-js-focus-visible]) :focus:not(.focus-visible) {
  outline: none;
}

.container {
  position: relative;
  overflow: hidden;
}

.userInput {
  width: 100%;
  height: 100%;
  display: none;
  position: relative;
}

canvas {
  position: absolute;
  display: none;
  pointer-events: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  left: 0;
  top: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
  pointer-events: none;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  display: none;
  background-color: inherit;
}

.slot.poster.show {
  display: inherit;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: #fff0;
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar.hide {
  transition: opacity 0.3s 1s;
  opacity: 0;
}

.centered {
  align-items: center;
  justify-content: center;
}

.cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  overflow: hidden;
  opacity: 0;
  will-change: opacity;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.animated-container {
  will-change: transform, opacity;
  opacity: 0;
  transition: opacity 0.3s;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled) {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  transform: scale(var(--ar-button-scale, 1));
  transform-origin: bottom right;
}

.slot.pan-target {
  display: block;
  position: absolute;
  width: 0;
  height: 0;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
  background-color: transparent;
  opacity: 0;
  transition: opacity 0.3s;
}

#default-pan-target {
  width: 6px;
  height: 6px;
  border-radius: 6px;
  border: 1px solid white;
  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);
}

.slot.default {
  pointer-events: none;
}

.slot.progress-bar {
  pointer-events: none;
}

.slot.exit-webxr-ar-button {
  pointer-events: none;
}

.slot.exit-webxr-ar-button:not(.enabled) {
  display: none;
}

#default-exit-webxr-ar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: env(safe-area-inset-top, 16px);
  right: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-webxr-ar-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <div class="userInput" tabindex="0" role="img"
      aria-label="3D model">
      <div class="slot canvas">
        <slot name="canvas">
          <canvas></canvas>
        </slot>
      </div>

  </div>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" part="default-ar-button" class="fab"
          tabindex="2"
          aria-label="View in your space">
        ${ro`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`}
      </a>
    </slot>
  </div>

  <div class="slot pan-target">
    <slot name="pan-target">
      <div id="default-pan-target">
      </div>
    </slot>
  </div>

  <div class="slot interaction-prompt cover centered">
    <div id="prompt" class="animated-container">
      <slot name="interaction-prompt" aria-hidden="true">
        ${ro`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`}
      </slot>
    </div>
  </div>

  <div id="finger0" class="animated-container cover">
    <slot name="finger0" aria-hidden="true">
    </slot>
  </div>
  <div id="finger1" class="animated-container cover">
    <slot name="finger1" aria-hidden="true">
    </slot>
  </div>

  <div class="slot default">
    <slot></slot>

    <div class="slot progress-bar">
      <slot name="progress-bar">
        <div id="default-progress-bar" aria-hidden="true">
          <div class="bar" part="default-progress-bar"></div>
        </div>
      </slot>
    </div>

    <div class="slot exit-webxr-ar-button">
      <slot name="exit-webxr-ar-button">
        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"
            tabindex="3"
            aria-label="Exit AR"
            aria-hidden="true">
          ${ro`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`}
        </a>
      </slot>
    </div>
  </div>
</div>
<div class="screen-reader-only" role="region" aria-label="Live announcements">
  <span id="status" role="status"></span>
</div>`,Zo=new WeakMap;function tl(){let t,e;onmessage=function(r){const s=r.data;switch(s.type){case"init":t=s.decoderConfig,e=new Promise(function(e){t.onModuleLoaded=function(t){e({draco:t})},DracoDecoderModule(t)});break;case"decode":const r=s.buffer,a=s.taskConfig;e.then(t=>{const e=t.draco,i=new e.Decoder,n=new e.DecoderBuffer;n.Init(new Int8Array(r),r.byteLength);try{const t=function(i,n,r,s){var a=s.attributeIDs,o=s.attributeTypes;let l,h;var c,u,d,p,f,m,g,A,v,y,_,t,e,b,x,S=n.GetEncodedGeometryType(r);if(S===i.TRIANGULAR_MESH)l=new i.Mesh,h=n.DecodeBufferToMesh(r,l);else{if(S!==i.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");l=new i.PointCloud,h=n.DecodeBufferToPointCloud(r,l)}if(!h.ok()||0===l.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+h.error_msg());const w={index:null,attributes:[]};for(const r in a){const h=self[o[r]];let t,e;if(s.useUniqueIDs)e=a[r],t=n.GetAttributeByUniqueId(l,e);else{if(-1===(e=n.GetAttributeId(l,i[a[r]])))continue;t=n.GetAttribute(l,e)}w.attributes.push((c=i,u=n,d=l,p=r,f=h,m=t,_=y=v=A=g=void 0,g=m.num_components(),A=d.num_points()*g,v=A*f.BYTES_PER_ELEMENT,y=function(t){switch(f){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32}}(c),_=c._malloc(v),u.GetAttributeDataArrayForAllPoints(d,m,y,v,_),u=new f(c.HEAPF32.buffer,_,A).slice(),c._free(_),{name:p,array:u,itemSize:g}))}return S===i.TRIANGULAR_MESH&&(w.index=(r=i,S=n,t=l,e=3*t.num_faces(),b=4*e,x=r._malloc(b),S.GetTrianglesUInt32Array(t,b,x),S=new Uint32Array(r.HEAPF32.buffer,x,e).slice(),r._free(x),{array:S,itemSize:1})),i.destroy(l),w}(e,i,n,a),r=t.attributes.map(t=>t.array.buffer);t.index&&r.push(t.index.array.buffer),self.postMessage({type:"decode",id:s.id,geometry:t},r)}catch(t){console.error(t),self.postMessage({type:"error",id:s.id,error:t.message})}finally{e.destroy(n),e.destroy(i)}})}}}class el extends Or{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new ol(t)}),this.register(function(t){return new pl(t)}),this.register(function(t){return new gl(t)}),this.register(function(t){return new cl(t)}),this.register(function(t){return new hl(t)}),this.register(function(t){return new ul(t)}),this.register(function(t){return new dl(t)}),this.register(function(t){return new al(t)}),this.register(function(t){return new Al(t)}),this.register(function(t){return new ll(t)}),this.register(function(t){return new sl(t)}),this.register(function(t){return new ml(t)})}load(e,i,t,n){const r=this;let s;s=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:ca.extractUrlBase(e),this.manager.itemStart(e);function a(t){n?n(t):console.error(t),r.manager.itemError(e),r.manager.itemEnd(e)}const o=new zr(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(t){try{r.parse(t,s,function(t){i(t),r.manager.itemEnd(e)},a)}catch(t){a(t)}},t,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,i,n){let r;const s={},a={};if("string"==typeof t)r=t;else if(ca.decodeText(new Uint8Array(t,0,4))===fl){try{s[nl.KHR_BINARY_GLTF]=new xl(t)}catch(t){return void(n&&n(t))}r=s[nl.KHR_BINARY_GLTF].content}else r=ca.decodeText(new Uint8Array(t));var o=JSON.parse(r);if(void 0===o.asset||o.asset.version[0]<2)n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{const l=new Zl(o,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let t=0;t<this.pluginCallbacks.length;t++){const e=this.pluginCallbacks[t](l);a[e.name]=e,s[e.name]=!0}if(o.extensionsUsed)for(let t=0;t<o.extensionsUsed.length;++t){const e=o.extensionsUsed[t],i=o.extensionsRequired||[];switch(e){case nl.KHR_MATERIALS_UNLIT:s[e]=new rl;break;case nl.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:s[e]=new bl;break;case nl.KHR_DRACO_MESH_COMPRESSION:s[e]=new _l(o,this.dracoLoader);break;case nl.KHR_TEXTURE_TRANSFORM:s[e]=new El;break;case nl.KHR_MESH_QUANTIZATION:s[e]=new Il;break;default:0<=i.indexOf(e)&&void 0===a[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}l.setExtensions(s),l.setPlugins(a),l.parse(i,n)}}parseAsync(i,n){const r=this;return new Promise(function(t,e){r.parse(i,n,t,e)})}}function il(){let i={};return{get:function(t){return i[t]},add:function(t,e){i[t]=e},remove:function(t){delete i[t]},removeAll:function(){i={}}}}const nl={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class sl{constructor(t){this.parser=t,this.name=nl.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const i=this.parser,n=this.parser.json.nodes||[];for(let t=0,e=n.length;t<e;t++){var r=n[t];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&i._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(t){const e=this.parser,i="light:"+t;let n=e.cache.get(i);if(n)return n;const r=e.json,s=((r.extensions&&r.extensions[this.name]||{}).lights||[])[t];let a;const o=new D(16777215);void 0!==s.color&&o.fromArray(s.color);var l=void 0!==s.range?s.range:0;switch(s.type){case"directional":(a=new aa(o)).target.position.set(0,0,-1),a.add(a.target);break;case"point":(a=new sa(o)).distance=l;break;case"spot":(a=new Zr(o)).distance=l,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,a.angle=s.spot.outerConeAngle,a.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+s.type)}return a.position.set(0,0,0),a.decay=2,void 0!==s.intensity&&(a.intensity=s.intensity),a.name=e.createUniqueName(s.name||"light_"+t),n=Promise.resolve(a),e.cache.add(i,n),n}createNodeAttachment(t){const e=this,i=this.parser,n=i.json.nodes[t],r=(n.extensions&&n.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then(function(t){return i._getNodeRef(e.cache,r,t)})}}class rl{constructor(){this.name=nl.KHR_MATERIALS_UNLIT}getMaterialType(){return ae}extendParams(t,e,i){const n=[];t.color=new D(1,1,1),t.opacity=1;var r=e.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const e=r.baseColorFactor;t.color.fromArray(e),t.opacity=e[3]}void 0!==r.baseColorTexture&&n.push(i.assignTexture(t,"map",r.baseColorTexture,3001))}return Promise.all(n)}}class al{constructor(t){this.parser=t,this.name=nl.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){t=this.parser.json.materials[t];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();t=t.extensions[this.name].emissiveStrength;return void 0!==t&&(e.emissiveIntensity=t),Promise.resolve()}}class ol{constructor(t){this.parser=t,this.name=nl.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){t=this.parser.json.materials[t];return t.extensions&&t.extensions[this.name]?mr:null}extendMaterialParams(t,e){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],s=n.extensions[this.name];if(void 0!==s.clearcoatFactor&&(e.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&r.push(i.assignTexture(e,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(e.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&r.push(i.assignTexture(e,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(r.push(i.assignTexture(e,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){const t=s.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new v(t,t)}return Promise.all(r)}}class ll{constructor(t){this.parser=t,this.name=nl.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){t=this.parser.json.materials[t];return t.extensions&&t.extensions[this.name]?mr:null}extendMaterialParams(t,e){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],s=n.extensions[this.name];return void 0!==s.iridescenceFactor&&(e.iridescence=s.iridescenceFactor),void 0!==s.iridescenceTexture&&r.push(i.assignTexture(e,"iridescenceMap",s.iridescenceTexture)),void 0!==s.iridescenceIor&&(e.iridescenceIOR=s.iridescenceIor),void 0===e.iridescenceThicknessRange&&(e.iridescenceThicknessRange=[100,400]),void 0!==s.iridescenceThicknessMinimum&&(e.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),void 0!==s.iridescenceThicknessMaximum&&(e.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),void 0!==s.iridescenceThicknessTexture&&r.push(i.assignTexture(e,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(r)}}class cl{constructor(t){this.parser=t,this.name=nl.KHR_MATERIALS_SHEEN}getMaterialType(t){t=this.parser.json.materials[t];return t.extensions&&t.extensions[this.name]?mr:null}extendMaterialParams(t,e){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[];e.sheenColor=new D(0,0,0),e.sheenRoughness=0,e.sheen=1;t=n.extensions[this.name];return void 0!==t.sheenColorFactor&&e.sheenColor.fromArray(t.sheenColorFactor),void 0!==t.sheenRoughnessFactor&&(e.sheenRoughness=t.sheenRoughnessFactor),void 0!==t.sheenColorTexture&&r.push(i.assignTexture(e,"sheenColorMap",t.sheenColorTexture,3001)),void 0!==t.sheenRoughnessTexture&&r.push(i.assignTexture(e,"sheenRoughnessMap",t.sheenRoughnessTexture)),Promise.all(r)}}class hl{constructor(t){this.parser=t,this.name=nl.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){t=this.parser.json.materials[t];return t.extensions&&t.extensions[this.name]?mr:null}extendMaterialParams(t,e){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],s=n.extensions[this.name];return void 0!==s.transmissionFactor&&(e.transmission=s.transmissionFactor),void 0!==s.transmissionTexture&&r.push(i.assignTexture(e,"transmissionMap",s.transmissionTexture)),Promise.all(r)}}class ul{constructor(t){this.parser=t,this.name=nl.KHR_MATERIALS_VOLUME}getMaterialType(t){t=this.parser.json.materials[t];return t.extensions&&t.extensions[this.name]?mr:null}extendMaterialParams(t,e){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],s=n.extensions[this.name];e.thickness=void 0!==s.thicknessFactor?s.thicknessFactor:0,void 0!==s.thicknessTexture&&r.push(i.assignTexture(e,"thicknessMap",s.thicknessTexture)),e.attenuationDistance=s.attenuationDistance||0;t=s.attenuationColor||[1,1,1];return e.attenuationColor=new D(t[0],t[1],t[2]),Promise.all(r)}}class dl{constructor(t){this.parser=t,this.name=nl.KHR_MATERIALS_IOR}getMaterialType(t){t=this.parser.json.materials[t];return t.extensions&&t.extensions[this.name]?mr:null}extendMaterialParams(t,e){t=this.parser.json.materials[t];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();t=t.extensions[this.name];return e.ior=void 0!==t.ior?t.ior:1.5,Promise.resolve()}}class Al{constructor(t){this.parser=t,this.name=nl.KHR_MATERIALS_SPECULAR}getMaterialType(t){t=this.parser.json.materials[t];return t.extensions&&t.extensions[this.name]?mr:null}extendMaterialParams(t,e){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],s=n.extensions[this.name];e.specularIntensity=void 0!==s.specularFactor?s.specularFactor:1,void 0!==s.specularTexture&&r.push(i.assignTexture(e,"specularIntensityMap",s.specularTexture));t=s.specularColorFactor||[1,1,1];return e.specularColor=new D(t[0],t[1],t[2]),void 0!==s.specularColorTexture&&r.push(i.assignTexture(e,"specularColorMap",s.specularColorTexture,3001)),Promise.all(r)}}class pl{constructor(t){this.parser=t,this.name=nl.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,i=e.json,n=i.textures[t];if(!n.extensions||!n.extensions[this.name])return null;var r=n.extensions[this.name],s=e.options.ktx2Loader;if(s)return e.loadTextureImage(t,r.source,s);if(i.extensionsRequired&&0<=i.extensionsRequired.indexOf(this.name))throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}}class gl{constructor(t){this.parser=t,this.name=nl.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const i=this.name,n=this.parser,r=n.json,t=r.textures[e];if(!t.extensions||!t.extensions[i])return null;const s=t.extensions[i],a=r.images[s.source];let o=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(o=e)}return this.detectSupport().then(function(t){if(t)return n.loadTextureImage(e,s.source,o);if(r.extensionsRequired&&0<=r.extensionsRequired.indexOf(i))throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}})),this.isSupported}}class ml{constructor(t){this.name=nl.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(a){const t=this.parser.json,e=t.bufferViews[a];if(e.extensions&&e.extensions[this.name]){const a=e.extensions[this.name],i=this.parser.getDependency("buffer",a.buffer),o=this.parser.options.meshoptDecoder;if(o&&o.supported)return i.then(function(t){const e=a.byteOffset||0,i=a.byteLength||0,n=a.count,r=a.byteStride,s=new Uint8Array(t,e,i);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(n,r,s,a.mode,a.filter).then(function(t){return t.buffer}):o.ready.then(function(){var t=new ArrayBuffer(n*r);return o.decodeGltfBuffer(new Uint8Array(t),n,r,s,a.mode,a.filter),t})});if(t.extensionsRequired&&0<=t.extensionsRequired.indexOf(this.name))throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return null}}const fl="glTF",vl=1313821514,yl=5130562;class xl{constructor(t){this.name=nl.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12);if(this.header={magic:ca.decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==fl)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-12,n=new DataView(t,12);let r=0;for(;r<i;){const e=n.getUint32(r,!0),i=(r+=4,n.getUint32(r,!0));if(r+=4,i===vl){const i=new Uint8Array(t,12+r,e);this.content=ca.decodeText(i)}else if(i===yl){const i=12+r;this.body=t.slice(i,i+e)}r+=e}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class _l{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=nl.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const i=this.json,r=this.dracoLoader,n=t.extensions[this.name].bufferView,s=t.extensions[this.name].attributes,a={},o={},l={};for(const t in s){const e=Ol[t]||t.toLowerCase();a[e]=s[t]}for(const e in t.attributes){const r=Ol[e]||e.toLowerCase();if(void 0!==s[e]){const n=i.accessors[t.attributes[e]],s=Fl[n.componentType];l[r]=s.name,o[r]=!0===n.normalized}}return e.getDependency("bufferView",n).then(function(t){return new Promise(function(n){r.decodeDracoFile(t,function(t){for(const n in t.attributes){const e=t.attributes[n],i=o[n];void 0!==i&&(e.normalized=i)}n(t)},a,l)})})}}class El{constructor(){this.name=nl.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===e.offset&&void 0===e.rotation&&void 0===e.scale||(t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class wl extends gr{constructor(t){super(),this.isGLTFSpecularGlossinessMaterial=!0;const e=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),i=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),n=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),r=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),s=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new D).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(t){for(const e in a)t.uniforms[e]=a[e];t.fragmentShader=t.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",e).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",n).replace("#include <metalnessmap_fragment>",r).replace("#include <lights_physical_fragment>",s)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(t){a.specular.value=t}},specularMap:{get:function(){return a.specularMap.value},set:function(t){(a.specularMap.value=t)?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(t){a.glossiness.value=t}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(t){(a.glossinessMap.value=t)?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}copy(t){return super.copy(t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class bl{constructor(){this.name=nl.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return wl}extendParams(t,e,i){var n=e.extensions[this.name];t.color=new D(1,1,1),t.opacity=1;const r=[];if(Array.isArray(n.diffuseFactor)){const e=n.diffuseFactor;t.color.fromArray(e),t.opacity=e[3]}if(void 0!==n.diffuseTexture&&r.push(i.assignTexture(t,"map",n.diffuseTexture,3001)),t.emissive=new D(0,0,0),t.glossiness=void 0!==n.glossinessFactor?n.glossinessFactor:1,t.specular=new D(1,1,1),Array.isArray(n.specularFactor)&&t.specular.fromArray(n.specularFactor),void 0!==n.specularGlossinessTexture){const e=n.specularGlossinessTexture;r.push(i.assignTexture(t,"glossinessMap",e)),r.push(i.assignTexture(t,"specularMap",e,3001))}return Promise.all(r)}createMaterial(t){const e=new wl(t);return e.fog=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=void 0===t.emissiveIntensity?1:t.emissiveIntensity,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,e.normalMapType=0,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e}}class Il{constructor(){this.name=nl.KHR_MESH_QUANTIZATION}}class Cl extends wr{constructor(t,e,i,n){super(t,e,i,n)}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=t*n*3+n;for(let t=0;t!==n;t++)e[t]=i[r+t];return e}interpolate_(t,e,i,n){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=2*a,l=3*a,h=n-e,c=(i-e)/h,u=c*c,d=u*c,p=t*l,f=p-l,m=-2*d+3*u,g=d-u,A=1-m,v=g-u+c;for(let t=0;t!==a;t++){const e=s[f+t+a],i=s[f+t+o]*h,n=s[p+t+a],l=s[p+t]*h;r[t]=A*e+v*i+m*n+g*l}return r}}const Sl=new z;class Ml extends Cl{interpolate_(t,e,i,n){t=super.interpolate_(t,e,i,n);return Sl.fromArray(t).normalize().toArray(t),t}}const Bl=0,Tl=1,Rl=2,Dl=3,Ll=4,Ql=5,Pl=6,Fl={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Ul={9728:1003,9729:1006,9984:1004,9985:1007,9986:1005,9987:1008},Nl={33071:1001,33648:1002,10497:1e3},kl={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Ol={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Gl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Hl={CUBICSPLINE:void 0,LINEAR:2301,STEP:2300},zl="OPAQUE",Vl="MASK",Wl="BLEND";function ql(t){return void 0===t.DefaultMaterial&&(t.DefaultMaterial=new gr({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),t.DefaultMaterial}function jl(t,e,i){for(const n in i.extensions)void 0===t[n]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=i.extensions[n])}function Yl(t,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Jl(i,n){if(i.updateMorphTargets(),void 0!==n.weights)for(let t=0,e=n.weights.length;t<e;t++)i.morphTargetInfluences[t]=n.weights[t];if(n.extras&&Array.isArray(n.extras.targetNames)){var r=n.extras.targetNames;if(i.morphTargetInfluences.length===r.length){i.morphTargetDictionary={};for(let t=0,e=r.length;t<e;t++)i.morphTargetDictionary[r[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Xl(t){var e=t.extensions&&t.extensions[nl.KHR_DRACO_MESH_COMPRESSION];return e?"draco:"+e.bufferView+":"+e.indices+":"+Kl(e.attributes):t.indices+":"+Kl(t.attributes)+":"+t.mode}function Kl(i){let n="";var r=Object.keys(i).sort();for(let t=0,e=r.length;t<e;t++)n+=r[t]+":"+i[r[t]]+";";return n}function $l(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class Zl{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new il,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};var t=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),e=-1<navigator.userAgent.indexOf("Firefox"),i=e?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;"undefined"==typeof createImageBitmap||t||e&&i<98?this.textureLoader=new qr(this.options.manager):this.textureLoader=new ha(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new zr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(i,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(t){return t._markDefs&&t._markDefs()}),Promise.all(this._invokeAll(function(t){return t.beforeRoot&&t.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(t){const e={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};jl(s,e,r),Yl(e,r),Promise.all(n._invokeAll(function(t){return t.afterRoot&&t.afterRoot(e)})).then(function(){i(e)})}).catch(t)}_markDefs(){const i=this.json.nodes||[],n=this.json.skins||[],r=this.json.meshes||[];for(let t=0,e=n.length;t<e;t++){var s=n[t].joints;for(let t=0,e=s.length;t<e;t++)i[s[t]].isBone=!0}for(let t=0,e=i.length;t<e;t++){var a=i[t];void 0!==a.mesh&&(this._addNodeRef(this.meshCache,a.mesh),void 0!==a.skin&&(r[a.mesh].isSkinnedMesh=!0)),void 0!==a.camera&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,i){if(t.refs[e]<=1)return i;const n=i.clone(),r=(t,e)=>{const i=this.associations.get(t);null!=i&&this.associations.set(e,i);for(const[i,n]of t.children.entries())r(n,e.children[i])};return r(i,n),n.name+="_instance_"+t.uses[e]++,n}_invokeOne(e){const i=Object.values(this.plugins);i.push(this);for(let t=0;t<i.length;t++){var n=e(i[t]);if(n)return n}return null}_invokeAll(e){const i=Object.values(this.plugins),n=(i.unshift(this),[]);for(let t=0;t<i.length;t++){var r=e(i[t]);r&&n.push(r)}return n}getDependency(t,e){var i=t+":"+e;let n=this.cache.get(i);if(!n){switch(t){case"scene":n=this.loadScene(e);break;case"node":n=this.loadNode(e);break;case"mesh":n=this._invokeOne(function(t){return t.loadMesh&&t.loadMesh(e)});break;case"accessor":n=this.loadAccessor(e);break;case"bufferView":n=this._invokeOne(function(t){return t.loadBufferView&&t.loadBufferView(e)});break;case"buffer":n=this.loadBuffer(e);break;case"material":n=this._invokeOne(function(t){return t.loadMaterial&&t.loadMaterial(e)});break;case"texture":n=this._invokeOne(function(t){return t.loadTexture&&t.loadTexture(e)});break;case"skin":n=this.loadSkin(e);break;case"animation":n=this._invokeOne(function(t){return t.loadAnimation&&t.loadAnimation(e)});break;case"camera":n=this.loadCamera(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(i,n)}return n}getDependencies(i){let t=this.cache.get(i);if(!t){const n=this,e=this.json[i+("mesh"===i?"es":"s")]||[];t=Promise.all(e.map(function(t,e){return n.getDependency(i,e)})),this.cache.add(i,t)}return t}loadBuffer(t){const i=this.json.buffers[t],n=this.fileLoader;if(i.type&&"arraybuffer"!==i.type)throw new Error("THREE.GLTFLoader: "+i.type+" buffer type is not supported.");if(void 0===i.uri&&0===t)return Promise.resolve(this.extensions[nl.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(t,e){n.load(ca.resolveURL(i.uri,r.path),t,void 0,function(){e(new Error('THREE.GLTFLoader: Failed to load buffer "'+i.uri+'".'))})})}loadBufferView(t){const n=this.json.bufferViews[t];return this.getDependency("buffer",n.buffer).then(function(t){var e=n.byteLength||0,i=n.byteOffset||0;return t.slice(i,i+e)})}loadAccessor(t){const u=this,d=this.json,p=this.json.accessors[t];if(void 0===p.bufferView&&void 0===p.sparse)return Promise.resolve(null);const e=[];return void 0!==p.bufferView?e.push(this.getDependency("bufferView",p.bufferView)):e.push(null),void 0!==p.sparse&&(e.push(this.getDependency("bufferView",p.sparse.indices.bufferView)),e.push(this.getDependency("bufferView",p.sparse.values.bufferView))),Promise.all(e).then(function(e){const i=e[0],n=kl[p.type],r=Fl[p.componentType],s=r.BYTES_PER_ELEMENT,t=s*n,a=p.byteOffset||0,o=void 0!==p.bufferView?d.bufferViews[p.bufferView].byteStride:void 0,l=!0===p.normalized;let h,c;if(o&&o!==t){const e=Math.floor(a/o),d="InterleavedBuffer:"+p.bufferView+":"+p.componentType+":"+e+":"+p.count;let t=u.cache.get(d);t||(h=new r(i,e*o,p.count*o/s),t=new Fs(h,o/s),u.cache.add(d,t)),c=new Ns(t,n,a%o/s,l)}else h=null===i?new r(p.count*n):new r(i,a,p.count*n),c=new ce(h,n,l);if(void 0!==p.sparse){const u=kl.SCALAR,d=Fl[p.sparse.indices.componentType],s=p.sparse.indices.byteOffset||0,t=p.sparse.values.byteOffset||0,a=new d(e[1],s,p.sparse.count*u),o=new r(e[2],t,p.sparse.count*n);null!==i&&(c=new ce(c.array.slice(),c.itemSize,c.normalized));for(let t=0,e=a.length;t<e;t++){const u=a[t];if(c.setX(u,o[t*n]),2<=n&&c.setY(u,o[t*n+1]),3<=n&&c.setZ(u,o[t*n+2]),4<=n&&c.setW(u,o[t*n+3]),5<=n)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return c})}loadTexture(t){const e=this.json,i=this.options,n=e.textures[t].source,r=e.images[n];let s=this.textureLoader;if(r.uri){const t=i.manager.getHandler(r.uri);null!==t&&(s=t)}return this.loadTextureImage(t,n,s)}loadTextureImage(i,t,e){const n=this,r=this.json,s=r.textures[i],a=r.images[t],o=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[o])return this.textureCache[o];t=this.loadImageSource(t,e).then(function(t){t.flipY=!1,s.name&&(t.name=s.name);var e=(r.samplers||{})[s.sampler]||{};return t.magFilter=Ul[e.magFilter]||1006,t.minFilter=Ul[e.minFilter]||1008,t.wrapS=Nl[e.wrapS]||1e3,t.wrapT=Nl[e.wrapT]||1e3,n.associations.set(t,{textures:i}),t}).catch(function(){return null});return this.textureCache[o]=t}loadImageSource(t,r){const e=this.json,s=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then(t=>t.clone());const i=e.images[t],n=self.URL||self.webkitURL;let a=i.uri||"",o=!1;if(void 0!==i.bufferView)a=this.getDependency("bufferView",i.bufferView).then(function(t){o=!0;t=new Blob([t],{type:i.mimeType});return a=n.createObjectURL(t)});else if(void 0===i.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");var l=Promise.resolve(a).then(function(n){return new Promise(function(i,t){let e=i;!0===r.isImageBitmapLoader&&(e=function(t){const e=new N(t);e.needsUpdate=!0,i(e)}),r.load(ca.resolveURL(n,s.path),e,void 0,t)})}).then(function(t){var e;return!0===o&&n.revokeObjectURL(a),t.userData.mimeType=i.mimeType||(0<(e=i.uri).search(/\.jpe?g($|\?)/i)||0===e.search(/^data\:image\/jpeg/)?"image/jpeg":0<e.search(/\.webp($|\?)/i)||0===e.search(/^data\:image\/webp/)?"image/webp":"image/png"),t}).catch(function(t){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),t});return this.sourceCache[t]=l}assignTexture(e,i,n,r){const s=this;return this.getDependency("texture",n.index).then(function(t){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===i&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+i+" not yet supported."),s.extensions[nl.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[nl.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const i=s.associations.get(t);t=s.extensions[nl.KHR_TEXTURE_TRANSFORM].extendTexture(t,e),s.associations.set(t,i)}}return void 0!==r&&(t.encoding=r),e[i]=t})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;var n=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,s=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+i.uuid;let t=this.cache.get(e);t||(t=new or,re.prototype.copy.call(t,i),t.color.copy(i.color),t.map=i.map,t.sizeAttenuation=!1,this.cache.add(e,t)),i=t}else if(e.isLine){const e="LineBasicMaterial:"+i.uuid;let t=this.cache.get(e);t||(t=new Xs,re.prototype.copy.call(t,i),t.color.copy(i.color),this.cache.add(e,t)),i=t}if(n||r||s){let t="ClonedMaterial:"+i.uuid+":",e=(i.isGLTFSpecularGlossinessMaterial&&(t+="specular-glossiness:"),n&&(t+="derivative-tangents:"),r&&(t+="vertex-colors:"),s&&(t+="flat-shading:"),this.cache.get(t));e||(e=i.clone(),r&&(e.vertexColors=!0),s&&(e.flatShading=!0),n&&(e.normalScale&&(e.normalScale.y*=-1),e.clearcoatNormalScale&&(e.clearcoatNormalScale.y*=-1)),this.cache.add(t,e),this.associations.set(e,this.associations.get(i))),i=e}i.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=i}getMaterialType(){return gr}loadMaterial(e){const i=this,t=this.json,n=this.extensions,r=t.materials[e];let s;const a={},o=r.extensions||{},l=[];if(o[nl.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const e=n[nl.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];s=e.getMaterialType(),l.push(e.extendParams(a,r,i))}else if(o[nl.KHR_MATERIALS_UNLIT]){const e=n[nl.KHR_MATERIALS_UNLIT];s=e.getMaterialType(),l.push(e.extendParams(a,r,i))}else{const t=r.pbrMetallicRoughness||{};if(a.color=new D(1,1,1),a.opacity=1,Array.isArray(t.baseColorFactor)){const e=t.baseColorFactor;a.color.fromArray(e),a.opacity=e[3]}void 0!==t.baseColorTexture&&l.push(i.assignTexture(a,"map",t.baseColorTexture,3001)),a.metalness=void 0!==t.metallicFactor?t.metallicFactor:1,a.roughness=void 0!==t.roughnessFactor?t.roughnessFactor:1,void 0!==t.metallicRoughnessTexture&&(l.push(i.assignTexture(a,"metalnessMap",t.metallicRoughnessTexture)),l.push(i.assignTexture(a,"roughnessMap",t.metallicRoughnessTexture))),s=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)})))}!0===r.doubleSided&&(a.side=2);var h=r.alphaMode||zl;if(h===Wl?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===Vl&&(a.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&s!==ae&&(l.push(i.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new v(1,1),void 0!==r.normalTexture.scale)){const e=r.normalTexture.scale;a.normalScale.set(e,e)}return void 0!==r.occlusionTexture&&s!==ae&&(l.push(i.assignTexture(a,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(a.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&s!==ae&&(a.emissive=(new D).fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&s!==ae&&l.push(i.assignTexture(a,"emissiveMap",r.emissiveTexture,3001)),Promise.all(l).then(function(){let t;return t=s===wl?n[nl.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new s(a),r.name&&(t.name=r.name),Yl(t,r),i.associations.set(t,{materials:e}),r.extensions&&jl(n,t,r),t})}createUniqueName(t){var e=ma.sanitizeNodeName(t||"");let i=e;for(let t=1;this.nodeNamesUsed[i];++t)i=e+"_"+t;return this.nodeNamesUsed[i]=!0,i}loadGeometries(i){const n=this,r=this.extensions,s=this.primitiveCache;const a=[];for(let t=0,e=i.length;t<e;t++){var o=i[t],l=Xl(o),h=s[l];h?a.push(h.promise):(h=o.extensions&&o.extensions[nl.KHR_DRACO_MESH_COMPRESSION]?function(e){return r[nl.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,n).then(function(t){return ec(t,e,n)})}(o):ec(new xe,o,n),s[l]={primitive:o,promise:h},a.push(h))}return Promise.all(a)}loadMesh(l){const h=this,t=this.json,c=this.extensions,u=t.meshes[l],d=u.primitives,i=[];for(let t=0,e=d.length;t<e;t++){const h=void 0===d[t].material?ql(this.cache):this.getDependency("material",d[t].material);i.push(h)}return i.push(h.loadGeometries(d)),Promise.all(i).then(function(t){const i=t.slice(0,t.length-1),n=t[t.length-1],r=[];for(let e=0,t=n.length;e<t;e++){const a=n[e],o=d[e];let t;var s=i[e];if(o.mode===Ll||o.mode===Ql||o.mode===Pl||void 0===o.mode)!0!==(t=new(!0===u.isSkinnedMesh?Vs:Ne)(a,s)).isSkinnedMesh||t.geometry.attributes.skinWeight.normalized||t.normalizeSkinWeights(),o.mode===Ql?t.geometry=ic(t.geometry,1):o.mode===Pl&&(t.geometry=ic(t.geometry,2));else if(o.mode===Tl)t=new rr(a,s);else if(o.mode===Dl)t=new ir(a,s);else if(o.mode===Rl)t=new ar(a,s);else{if(o.mode!==Bl)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+o.mode);t=new dr(a,s)}0<Object.keys(t.geometry.morphAttributes).length&&Jl(t,u),t.name=h.createUniqueName(u.name||"mesh_"+l),Yl(t,u),o.extensions&&jl(c,t,o),h.assignFinalMaterial(t),r.push(t)}for(let t=0,e=r.length;t<e;t++)h.associations.set(r[t],{meshes:l,primitives:t});if(1===r.length)return r[0];const a=new Ss;h.associations.set(a,{meshes:l});for(let t=0,e=r.length;t<e;t++)a.add(r[t]);return a})}loadCamera(t){let e;var t=this.json.cameras[t],i=t[t.type];if(i)return"perspective"===t.type?e=new qe(f.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===t.type&&(e=new gi(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),t.name&&(e.name=this.createUniqueName(t.name)),Yl(e,t),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const e=this.json.skins[t],i={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(i):this.getDependency("accessor",e.inverseBindMatrices).then(function(t){return i.inverseBindMatrices=t,i})}loadAnimation(m){const g=this.json.animations[m],i=[],n=[],r=[],s=[],a=[];for(let t=0,e=g.channels.length;t<e;t++){var o=g.channels[t],l=g.samplers[o.sampler],o=o.target,h=o.node,c=void 0!==g.parameters?g.parameters[l.input]:l.input,u=void 0!==g.parameters?g.parameters[l.output]:l.output;i.push(this.getDependency("node",h)),n.push(this.getDependency("accessor",c)),r.push(this.getDependency("accessor",u)),s.push(l),a.push(o)}return Promise.all([Promise.all(i),Promise.all(n),Promise.all(r),Promise.all(s),Promise.all(a)]).then(function(r){const i=r[0],n=r[1],s=r[2],a=r[3],o=r[4],l=[];for(let t=0,e=i.length;t<e;t++){const g=i[t],r=n[t],h=s[t],c=a[t],u=o[t];if(void 0!==g){let i;switch(g.updateMatrix(),Gl[u.path]){case Gl.weights:i=Tr;break;case Gl.rotation:i=Dr;break;default:i=Qr}const d=g.name||g.uuid,p=void 0!==c.interpolation?Hl[c.interpolation]:2301,f=[];Gl[u.path]===Gl.weights?g.traverse(function(t){t.morphTargetInfluences&&f.push(t.name||t.uuid)}):f.push(d);let n=h.array;if(h.normalized){const m=$l(n.constructor),g=new Float32Array(n.length);for(let t=0,e=n.length;t<e;t++)g[t]=n[t]*m;n=g}for(let t=0,e=f.length;t<e;t++){const g=new i(f[t]+"."+Gl[u.path],r.array,n,p);"CUBICSPLINE"===c.interpolation&&(g.createInterpolant=function(t){return new(this instanceof Dr?Ml:Cl)(this.times,this.values,this.getValueSize()/3,t)},g.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(g)}}}const h=g.name||"animation_"+m;return new Pr(h,void 0,l)})}createNodeMesh(t){const e=this.json,i=this,n=e.nodes[t];return void 0===n.mesh?null:i.getDependency("mesh",n.mesh).then(function(t){const e=i._getNodeRef(i.meshCache,n.mesh,t);return void 0!==n.weights&&e.traverse(function(i){if(i.isMesh)for(let t=0,e=n.weights.length;t<e;t++)i.morphTargetInfluences[t]=n.weights[t]}),e})}loadNode(r){const t=this.json,e=this.extensions,s=this,a=t.nodes[r],o=a.name?s.createUniqueName(a.name):"";return function(){const e=[],t=s._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(r)});return t&&e.push(t),void 0!==a.camera&&e.push(s.getDependency("camera",a.camera).then(function(t){return s._getNodeRef(s.cameraCache,a.camera,t)})),s._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(r)}).forEach(function(t){e.push(t)}),Promise.all(e)}().then(function(i){let n;if((n=!0===a.isBone?new Ws:1<i.length?new Ss:1===i.length?i[0]:new qt)!==i[0])for(let t=0,e=i.length;t<e;t++)n.add(i[t]);if(a.name&&(n.userData.name=a.name,n.name=o),Yl(n,a),a.extensions&&jl(e,n,a),void 0!==a.matrix){const r=new _t;r.fromArray(a.matrix),n.applyMatrix4(r)}else void 0!==a.translation&&n.position.fromArray(a.translation),void 0!==a.rotation&&n.quaternion.fromArray(a.rotation),void 0!==a.scale&&n.scale.fromArray(a.scale);return s.associations.has(n)||s.associations.set(n,{}),s.associations.get(n).nodes=r,n})}loadScene(t){const i=this.json,e=this.extensions,n=this.json.scenes[t],r=this,s=new Ss,a=(n.name&&(s.name=r.createUniqueName(n.name)),Yl(s,n),n.extensions&&jl(e,s,n),n.nodes||[]),o=[];for(let t=0,e=a.length;t<e;t++)o.push(tc(a[t],s,i,r));return Promise.all(o).then(function(){return r.associations=(t=>{const i=new Map;for(const[t,e]of r.associations)(t instanceof re||t instanceof N)&&i.set(t,e);return t.traverse(t=>{var e=r.associations.get(t);null!=e&&i.set(t,e)}),i})(s),s})}}function tc(t,s,a,o){const e=a.nodes[t];return o.getDependency("node",t).then(function(t){if(void 0===e.skin)return t;let a;return o.getDependency("skin",e.skin).then(function(i){const n=[];for(let t=0,e=(a=i).joints.length;t<e;t++)n.push(o.getDependency("node",a.joints[t]));return Promise.all(n)}).then(function(s){return t.traverse(function(t){if(t.isMesh){const n=[],r=[];for(let t=0,e=s.length;t<e;t++){var i=s[t];if(i){n.push(i);const s=new _t;void 0!==a.inverseBindMatrices&&s.fromArray(a.inverseBindMatrices.array,16*t),r.push(s)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',a.joints[t])}t.bind(new Js(n,r),t.matrixWorld)}}),t})}).then(function(i){s.add(i);const n=[];if(e.children){const s=e.children;for(let t=0,e=s.length;t<e;t++){var r=s[t];n.push(tc(r,i,a,o))}}return Promise.all(n)})}function ec(d,t,p){const e=t.attributes,i=[];function n(t,e){return p.getDependency("accessor",t).then(function(t){d.setAttribute(e,t)})}for(const t in e){const p=Ol[t]||t.toLowerCase();p in d.attributes||i.push(n(e[t],p))}if(void 0!==t.indices&&!d.index){const e=p.getDependency("accessor",t.indices).then(function(t){d.setIndex(t)});i.push(e)}return Yl(d,t),function(i,n,r){const s=n.attributes,a=new j;if(void 0!==s.POSITION){{const i=r.json.accessors[s.POSITION],n=i.min,o=i.max;if(void 0===n||void 0===o)return console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(a.set(new V(n[0],n[1],n[2]),new V(o[0],o[1],o[2])),i.normalized){const n=$l(Fl[i.componentType]);a.min.multiplyScalar(n),a.max.multiplyScalar(n)}}const o=n.targets;if(void 0!==o){const i=new V,n=new V;for(let t=0,e=o.length;t<e;t++){const a=o[t];if(void 0!==a.POSITION){const s=r.json.accessors[a.POSITION],o=s.min,l=s.max;if(void 0!==o&&void 0!==l){if(n.setX(Math.max(Math.abs(o[0]),Math.abs(l[0]))),n.setY(Math.max(Math.abs(o[1]),Math.abs(l[1]))),n.setZ(Math.max(Math.abs(o[2]),Math.abs(l[2]))),s.normalized){const i=$l(Fl[s.componentType]);n.multiplyScalar(i)}i.max(n)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(i)}i.boundingBox=a;const l=new dt;a.getCenter(l.center),l.radius=a.min.distanceTo(a.max)/2,i.boundingSphere=l}}(d,t,p),Promise.all(i).then(function(){if(void 0===t.targets)return d;{var a=d,i=t.targets,o=p;let n=!1,r=!1,s=!1;for(let t=0,e=i.length;t<e;t++){const o=i[t];if(void 0!==o.POSITION&&(n=!0),void 0!==o.NORMAL&&(r=!0),void 0!==o.COLOR_0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(a);const h=[],c=[],u=[];for(let t=0,e=i.length;t<e;t++){var l=i[t];if(n){const i=void 0!==l.POSITION?o.getDependency("accessor",l.POSITION):a.attributes.position;h.push(i)}if(r){const i=void 0!==l.NORMAL?o.getDependency("accessor",l.NORMAL):a.attributes.normal;c.push(i)}if(s){const i=void 0!==l.COLOR_0?o.getDependency("accessor",l.COLOR_0):a.attributes.color;u.push(i)}}return Promise.all([Promise.all(h),Promise.all(c),Promise.all(u)]).then(function(t){var e=t[0],i=t[1],t=t[2];return n&&(a.morphAttributes.position=e),r&&(a.morphAttributes.normal=i),s&&(a.morphAttributes.color=t),a.morphTargetsRelative=!0,a})}})}function ic(t,e){let i=t.getIndex();if(null===i){const e=[],n=t.getAttribute("position");if(void 0===n)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t;for(let t=0;t<n.count;t++)e.push(t);t.setIndex(e),i=t.getIndex()}const n=i.count-2,r=[];if(2===e)for(let t=1;t<=n;t++)r.push(i.getX(0)),r.push(i.getX(t)),r.push(i.getX(t+1));else for(let t=0;t<n;t++)t%2==0?(r.push(i.getX(t)),r.push(i.getX(t+1)),r.push(i.getX(t+2))):(r.push(i.getX(t+2)),r.push(i.getX(t+1)),r.push(i.getX(t)));r.length/3!==n&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=t.clone();return s.setIndex(r),s}class nc{constructor(t=4){this.pool=t,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(t){if(!this.workers[t]){const e=this.workerCreator();e.addEventListener("message",this._onMessage.bind(this,t)),this.workers[t]=e}}_getIdleWorker(){for(let t=0;t<this.pool;t++)if(!(this.workerStatus&1<<t))return t;return-1}_onMessage(t,e){const i=this.workersResolve[t];if(i&&i(e),this.queue.length){const{resolve:e,msg:i,transfer:n}=this.queue.shift();this.workersResolve[t]=e,this.workers[t].postMessage(i,n)}else this.workerStatus^=1<<t}setWorkerCreator(t){this.workerCreator=t}setWorkerLimit(t){this.pool=t}postMessage(i,n){return new Promise(t=>{var e=this._getIdleWorker();-1!==e?(this._initWorker(e),this.workerStatus|=1<<e,this.workersResolve[e]=t,this.workers[e].postMessage(i,n)):this.queue.push({resolve:t,msg:i,transfer:n})})}dispose(){this.workers.forEach(t=>t.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}class sc{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class rc{constructor(t,e,i,n){this._dataView=new DataView(t.buffer,t.byteOffset+e,i),this._littleEndian=n,this._offset=0}_nextUint8(){var t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){var t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){var t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){var t=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}_nextInt32(){var t=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,t}_skip(t){return this._offset+=t,this}_scan(t,e=0){var i=this._offset;let n=0;for(;this._dataView.getUint8(this._offset)!==e&&n<t;)n++,this._offset++;return n<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+i,n)}}const ac=[171,75,84,88,32,50,48,187,13,10,26,10];function oc(t){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(t):Buffer.from(t).toString("utf8")}let lc,cc,hc;const uc={env:{emscripten_notify_memory_growth:function(t){hc=new Uint8Array(cc.exports.memory.buffer)}}};class dc{init(){return lc||(lc=("undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+Ac).then(t=>t.arrayBuffer()).then(t=>WebAssembly.instantiate(t,uc)):WebAssembly.instantiate(Buffer.from(Ac,"base64"),uc)).then(this._init))}_init(t){cc=t.instance,uc.env.emscripten_notify_memory_growth(0)}decode(t,e=0){if(!cc)throw new Error("ZSTDDecoder: Await .init() before decoding.");var i=t.byteLength,n=cc.exports.malloc(i),t=(hc.set(t,n),e=e||Number(cc.exports.ZSTD_findDecompressedSize(n,i)),cc.exports.malloc(e)),e=cc.exports.ZSTD_decompress(t,e,n,i),i=hc.slice(t,t+e);return cc.exports.free(n),cc.exports.free(t),i}}const Ac="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",pc=new WeakMap;let gc,mc=0;class fc extends Or{constructor(t){super(t),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new nc,this.workerSourceURL="",this.workerConfig=null,"undefined"!=typeof MSC_TRANSCODER&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(t){return this.transcoderPath=t,this}setWorkerLimit(t){return this.workerPool.setWorkerLimit(t),this}detectSupport(t){return this.workerConfig={astcSupported:t.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:t.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:t.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:t.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:t.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:t.extensions.has("WEBGL_compressed_texture_pvrtc")||t.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},t.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const e=new zr(this.manager),i=(e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials),e.loadAsync("basis_transcoder.js")),n=new zr(this.manager);n.setPath(this.transcoderPath),n.setResponseType("arraybuffer"),n.setWithCredentials(this.withCredentials);var t=n.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([i,t]).then(([t,e])=>{const i=fc.BasisWorker.toString(),n=["/* constants */","let _EngineFormat = "+JSON.stringify(fc.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(fc.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(fc.BasisFormat),"/* basis_transcoder.js */",t,"/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([n])),this.transcoderBinary=e,this.workerPool.setWorkerCreator(()=>{const t=new Worker(this.workerSourceURL),e=this.transcoderBinary.slice(0);return t.postMessage({type:"init",config:this.workerConfig,transcoderBinary:e},[e]),t})}),0<mc&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),mc++}return this.transcoderPending}load(t,e,i,n){if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const r=new zr(this.manager);r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials),r.load(t,t=>{if(pc.has(t))return pc.get(t).promise.then(e).catch(n);this._createTexture(t).then(t=>e?e(t):null).catch(n)},i,n)}_createTextureFrom(t){var{mipmaps:t,width:e,height:i,format:n,type:r,error:s,dfdTransferFn:a,dfdFlags:o}=t;if("error"===r)return Promise.reject(s);const l=new pr(t,e,i,n,1009);return l.minFilter=1===t.length?1006:1008,l.magFilter=1006,l.generateMipmaps=!1,l.needsUpdate=!0,l.encoding=2===a?3001:3e3,l.premultiplyAlpha=!!(1&o),l}_createTexture(t,e={}){var i=function(e){const i=new Uint8Array(e.buffer,e.byteOffset,ac.length);if(i[0]!==ac[0]||i[1]!==ac[1]||i[2]!==ac[2]||i[3]!==ac[3]||i[4]!==ac[4]||i[5]!==ac[5]||i[6]!==ac[6]||i[7]!==ac[7]||i[8]!==ac[8]||i[9]!==ac[9]||i[10]!==ac[10]||i[11]!==ac[11])throw new Error("Missing KTX 2.0 identifier.");const n=new sc,t=17*Uint32Array.BYTES_PER_ELEMENT,r=new rc(e,ac.length,t,!0);n.vkFormat=r._nextUint32(),n.typeSize=r._nextUint32(),n.pixelWidth=r._nextUint32(),n.pixelHeight=r._nextUint32(),n.pixelDepth=r._nextUint32(),n.layerCount=r._nextUint32(),n.faceCount=r._nextUint32();var s=r._nextUint32();n.supercompressionScheme=r._nextUint32();const a=r._nextUint32(),o=r._nextUint32(),l=r._nextUint32(),h=r._nextUint32(),c=r._nextUint64(),u=r._nextUint64(),d=new rc(e,ac.length+t,3*s*8,!0);for(let t=0;t<s;t++)n.levels.push({levelData:new Uint8Array(e.buffer,e.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});const p=new rc(e,a,o,!0),f={vendorId:p._skip(4)._nextUint16(),descriptorType:p._nextUint16(),versionNumber:p._nextUint16(),descriptorBlockSize:p._nextUint16(),colorModel:p._nextUint8(),colorPrimaries:p._nextUint8(),transferFunction:p._nextUint8(),flags:p._nextUint8(),texelBlockDimension:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],bytesPlane:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],samples:[]},m=(f.descriptorBlockSize/4-6)/4;for(let t=0;t<m;t++){const i={bitOffset:p._nextUint16(),bitLength:p._nextUint8(),channelType:p._nextUint8(),samplePosition:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&i.channelType?(i.sampleLower=p._nextInt32(),i.sampleUpper=p._nextInt32()):(i.sampleLower=p._nextUint32(),i.sampleUpper=p._nextUint32()),f.samples[t]=i}n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(f);const g=new rc(e,l,h,!0);for(;g._offset<h;){const e=g._nextUint32(),i=g._scan(e),t=oc(i),r=g._scan(e-i.byteLength);n.keyValue[t]=t.match(/^ktx/i)?oc(r):r,g._offset%4&&g._skip(4-g._offset%4)}if(u<=0)return n;const A=new rc(e,c,u,!0),v=A._nextUint16(),y=A._nextUint16(),_=A._nextUint32(),b=A._nextUint32(),x=A._nextUint32(),S=A._nextUint32(),w=[];for(let t=0;t<s;t++)w.push({imageFlags:A._nextUint32(),rgbSliceByteOffset:A._nextUint32(),rgbSliceByteLength:A._nextUint32(),alphaSliceByteOffset:A._nextUint32(),alphaSliceByteLength:A._nextUint32()});var E=c+A._offset,C=E+_,T=C+b,M=T+x,E=new Uint8Array(e.buffer,e.byteOffset+E,_),C=new Uint8Array(e.buffer,e.byteOffset+C,b),T=new Uint8Array(e.buffer,e.byteOffset+T,x),M=new Uint8Array(e.buffer,e.byteOffset+M,S);return n.globalData={endpointCount:v,selectorCount:y,imageDescs:w,endpointsData:E,selectorsData:C,tablesData:T,extendedData:M},n}(new Uint8Array(t));if(0!==i.vkFormat)return async function(t){var{vkFormat:e,pixelWidth:i,pixelHeight:n,pixelDepth:r}=t;if(void 0===vc[e])throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");var s=t.levels[0];let a,o;if(0===t.supercompressionScheme)a=s.levelData;else{if(2!==t.supercompressionScheme)throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");gc=gc||new Promise(async t=>{const e=new dc;await e.init(),t(e)}),a=(await gc).decode(s.levelData,s.uncompressedByteLength)}o=1015===yc[e]?new Float32Array(a.buffer,a.byteOffset,a.byteLength/Float32Array.BYTES_PER_ELEMENT):1016===yc[e]?new Uint16Array(a.buffer,a.byteOffset,a.byteLength/Uint16Array.BYTES_PER_ELEMENT):a;const l=0===r?new qs(o,i,n):new H(o,i,n,r);return l.type=yc[e],l.format=vc[e],l.encoding=xc[e]||3e3,l.needsUpdate=!0,Promise.resolve(l)}(i);const n=e,r=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:t,taskConfig:n},[t])).then(t=>this._createTextureFrom(t.data));return pc.set(t,{promise:r}),r}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),mc--,this}}fc.BasisFormat={ETC1S:0,UASTC_4x4:1},fc.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},fc.EngineFormat={RGBAFormat:1023,RGBA_ASTC_4x4_Format:37808,RGBA_BPTC_Format:36492,RGBA_ETC2_EAC_Format:37496,RGBA_PVRTC_4BPPV1_Format:35842,RGBA_S3TC_DXT5_Format:33779,RGB_ETC1_Format:36196,RGB_ETC2_Format:37492,RGB_PVRTC_4BPPV1_Format:35840,RGB_S3TC_DXT1_Format:33776},fc.BasisWorker=function(){let u,i,d;const p=_EngineFormat,f=_TranscoderFormat,m=_BasisFormat,t=(self.addEventListener("message",function(t){const l=t.data;switch(l.type){case"init":u=l.config,e=l.transcoderBinary,i=new Promise(t=>{d={wasmBinary:e,onRuntimeInitialized:t},BASIS(d)}).then(()=>{d.initializeBasis(),void 0===d.KTX2File&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")});break;case"transcode":i.then(()=>{try{const{width:t,height:e,hasAlpha:i,mipmaps:n,format:r,dfdTransferFn:s,dfdFlags:a}=function(e){const i=new d.KTX2File(new Uint8Array(e));function n(){i.close(),i.delete()}if(!i.isValid())throw n(),new Error("THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file");var e=i.isUASTC()?m.UASTC_4x4:m.ETC1S,t=i.getWidth(),r=i.getHeight(),s=i.getLevels(),a=i.getHasAlpha(),o=i.getDFDTransferFunc(),l=i.getDFDFlags(),{transcoderFormat:h,engineFormat:e}=function(e,i,n,r){let s,a;var o=e===m.ETC1S?g:A;for(let t=0;t<o.length;t++){const f=o[t];if(u[f.if]&&f.basisFormat.includes(e)&&!(r&&f.transcoderFormat.length<2)&&(!f.needsPowerOfTwo||v(i)&&v(n)))return s=f.transcoderFormat[r?1:0],a=f.engineFormat[r?1:0],{transcoderFormat:s,engineFormat:a}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),s=f.RGBA32,a=p.RGBAFormat,{transcoderFormat:s,engineFormat:a}}(e,t,r,a);if(!t||!r||!s)throw n(),new Error("THREE.KTX2Loader:\tInvalid texture");if(!i.startTranscoding())throw n(),new Error("THREE.KTX2Loader: .startTranscoding failed");const c=[];for(let t=0;t<s;t++){const e=i.getImageLevelInfo(t,0,0),d=e.origWidth,p=e.origHeight,f=new Uint8Array(i.getImageTranscodedSizeInBytes(t,0,0,h));if(!i.transcodeImage(f,t,0,0,h,0,-1,-1))throw n(),new Error("THREE.KTX2Loader: .transcodeImage failed.");c.push({data:f,width:d,height:p})}return n(),{width:t,height:r,hasAlpha:a,mipmaps:c,format:e,dfdTransferFn:o,dfdFlags:l}}(l.buffer),o=[];for(let t=0;t<n.length;++t)o.push(n[t].data.buffer);self.postMessage({type:"transcode",id:l.id,width:t,height:e,hasAlpha:i,mipmaps:n,format:r,dfdTransferFn:s,dfdFlags:a},o)}catch(t){console.error(t),self.postMessage({type:"error",id:l.id,error:t.message})}})}var e}),[{if:"astcSupported",basisFormat:[m.UASTC_4x4],transcoderFormat:[f.ASTC_4x4,f.ASTC_4x4],engineFormat:[p.RGBA_ASTC_4x4_Format,p.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[m.ETC1S,m.UASTC_4x4],transcoderFormat:[f.BC7_M5,f.BC7_M5],engineFormat:[p.RGBA_BPTC_Format,p.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[m.ETC1S,m.UASTC_4x4],transcoderFormat:[f.BC1,f.BC3],engineFormat:[p.RGB_S3TC_DXT1_Format,p.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[m.ETC1S,m.UASTC_4x4],transcoderFormat:[f.ETC1,f.ETC2],engineFormat:[p.RGB_ETC2_Format,p.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[m.ETC1S,m.UASTC_4x4],transcoderFormat:[f.ETC1],engineFormat:[p.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[m.ETC1S,m.UASTC_4x4],transcoderFormat:[f.PVRTC1_4_RGB,f.PVRTC1_4_RGBA],engineFormat:[p.RGB_PVRTC_4BPPV1_Format,p.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}]),g=t.sort(function(t,e){return t.priorityETC1S-e.priorityETC1S}),A=t.sort(function(t,e){return t.priorityUASTC-e.priorityUASTC});function v(t){return t<=2||0==(t&t-1)&&0!==t}};const vc={109:1023,97:1023,37:1023,43:1023,103:1030,83:1030,16:1030,22:1030,100:1028,76:1028,15:1028,9:1028},yc={109:1015,97:1016,37:1009,43:1009,103:1015,83:1016,16:1009,22:1009,100:1015,76:1016,15:1009,9:1009},xc={43:3001,22:3001,15:3001},wc=Symbol("retainerCount"),bc=Symbol("recentlyUsed"),Ic=Symbol("evict"),Cc=Symbol("evictionThreshold"),Sc=Symbol("cache");class Mc{constructor(t,e=5){this[_c]=new Map,this[Ec]=[],this[Sc]=t,this[Cc]=e}set evictionThreshold(t){this[Cc]=t,this[Ic]()}get evictionThreshold(){return this[Cc]}get cache(){return this[Sc]}retainerCount(t){return this[wc].get(t)||0}reset(){this[wc].clear(),this[bc]=[]}retain(t){this[wc].has(t)||this[wc].set(t,0),this[wc].set(t,this[wc].get(t)+1);var e=this[bc].indexOf(t);-1!==e&&this[bc].splice(e,1),this[bc].unshift(t),this[Ic]()}release(t){this[wc].has(t)&&this[wc].set(t,Math.max(this[wc].get(t)-1,0)),this[Ic]()}[(_c=wc,Ec=bc,Ic)](){if(!(this[bc].length<this[Cc]))for(let t=this[bc].length-1;t>=this[Cc];--t){var e=this[bc][t];0===this[wc].get(e)&&(this[Sc].delete(e),this[bc].splice(t,1))}}}const Bc=t=>{const e=new Map;for(const i of t.mappings)for(const t of i.variants)e.set(t,{material:null,gltfMaterialIndex:i.material});return e};class Tc{constructor(t){this.parser=t,this.name="KHR_materials_variants"}afterRoot(t){const i=this.parser,n=i.json;if(void 0===n.extensions||void 0===n.extensions[this.name])return null;const e=(t=>{const i=[],n=new Set;for(const r of t){let t=r,e=0;for(;n.has(t);)t=r+"."+ ++e;n.add(t),i.push(t)}return i})((n.extensions[this.name].variants||[]).map(t=>t.name));for(const e of t.scenes)e.traverse(t=>{const e=t;!e.isMesh||null!=(t=i.associations.get(e))&&null!=t.meshes&&null!=t.primitives&&(t=n.meshes[t.meshes].primitives[t.primitives].extensions)&&t[this.name]&&(e.userData.variantMaterials=Bc(t[this.name]))});return t.userData.variants=e,Promise.resolve()}}const Lc=new Map,Qc=new Map;let Pc;const Fc=new class extends Or{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,i,n){const r=new zr(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,t=>{this.decodeDracoFile(t,e).catch(n)},i,n)}decodeDracoFile(t,e,i,n){n={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!i};return this.decodeGeometry(t,n).then(e)}decodeGeometry(i,n){var t=JSON.stringify(n);if(Zo.has(i)){const n=Zo.get(i);if(n.key===t)return n.promise;if(0===i.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,e=i.byteLength,a=this._getWorker(s,e).then(t=>(r=t,new Promise((t,e)=>{r._callbacks[s]={resolve:t,reject:e},r.postMessage({type:"decode",id:s,taskConfig:n,buffer:i},[i])}))).then(t=>this._createGeometry(t.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),Zo.set(i,{key:t,promise:a}),a}_createGeometry(e){const i=new xe;e.index&&i.setIndex(new ce(e.index.array,1));for(let t=0;t<e.attributes.length;t++){var n=e.attributes[t],r=n.name,s=n.array,n=n.itemSize;i.setAttribute(r,new ce(s,n))}return i}_loadLibrary(i,t){const n=new zr(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((t,e)=>{n.load(i,t,void 0,e)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const r="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return r?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{const e=t[0],i=(r||(this.decoderConfig.wasmBinary=t[1]),tl.toString()),n=["/* draco decoder */",e,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([n]))}),this.decoderPending}_getWorker(i,e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(t){var e=t.data;switch(e.type){case"decode":i._callbacks[e.id].resolve(e);break;case"error":i._callbacks[e.id].reject(e);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+e.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(t,e){return t._taskLoad>e._taskLoad?-1:1});const t=this.workerPool[this.workerPool.length-1];return t._taskCosts[i]=e,t._taskLoad+=e,t})}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}};let Uc;const Nc=new fc;let kc,Oc;const Gc=Symbol("loader"),Hc=Symbol("evictionPolicy"),zc=Symbol("GLTFInstance");class Vc extends n{constructor(t){super(),this[Dc]=(new el).register(t=>new Tc(t)),this[zc]=t,this[Gc].setDRACOLoader(Fc),this[Gc].setKTX2Loader(Nc)}static setDRACODecoderLocation(t){Pc=t,Fc.setDecoderPath(t)}static getDRACODecoderLocation(){return Pc}static setKTX2TranscoderLocation(t){Uc=t,Nc.setTranscoderPath(t)}static getKTX2TranscoderLocation(){return Uc}static setMeshoptDecoderLocation(t){var n;kc!==t&&(kc=t,Oc=(n=t,new Promise((t,e)=>{const i=document.createElement("script");document.body.appendChild(i),i.onload=t,i.onerror=e,i.async=!0,i.src=n}).then(()=>MeshoptDecoder.ready).then(()=>MeshoptDecoder)))}static getMeshoptDecoderLocation(){return kc}static initializeKTX2Loader(t){Nc.detectSupport(t)}static get cache(){return Lc}static clearCache(){Lc.forEach((t,e)=>{this.delete(e)}),this[Hc].reset()}static has(t){return Lc.has(t)}static async delete(t){var e;this.has(t)&&(e=Lc.get(t),Qc.delete(t),Lc.delete(t),(await e).dispose())}static hasFinishedLoading(t){return!!Qc.get(t)}get[(Rc=Hc,Dc=Gc,Hc)](){return this.constructor[Hc]}async preload(t,e,s=()=>{}){if(this[Gc].setWithCredentials(Vc.withCredentials),this.dispatchEvent({type:"preload",element:e,src:t}),!Lc.has(t)){null!=Oc&&this[Gc].setMeshoptDecoder(await Oc);const e=((i,n)=>{const r=t=>{var t=t.loaded/t.total;t=Math.max(0,Math.min(1,isFinite(t)?t:1)),s(.8*t)};return new Promise((t,e)=>{n.load(i,t,r,e)})})(t,this[Gc]),i=this[zc],n=e.then(t=>i.prepare(t)).then(t=>(s(.9),new i(t))).catch(t=>(console.error(t),new i));Lc.set(t,n)}await Lc.get(t),Qc.set(t,!0),s&&s(1)}async load(t,e,i=()=>{}){await this.preload(t,e,i);const n=await Lc.get(t),r=await n.clone();return this[Hc].retain(t),r.dispose=()=>{this[Hc].release(t)},r}}Vc[Rc]=new Mc(Vc);class Wc extends qt{constructor(t=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=t,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof Element&&null!==t.element.parentNode&&t.element.parentNode.removeChild(t.element)})})}copy(t,e){return super.copy(t,e),this.element=t.element.cloneNode(!0),this}}const qc=new V,jc=new _t,Yc=new _t,Jc=new V,Xc=new V;class Kc{constructor(t={}){const s=this;let i,n,a,o;const l={objects:new WeakMap},h=void 0!==t.element?t.element:document.createElement("div");function c(i,n,r){if(i.isCSS2DObject){qc.setFromMatrixPosition(i.matrixWorld),qc.applyMatrix4(Yc);const c=!0===i.visible&&-1<=qc.z&&qc.z<=1&&!0===i.layers.test(r.layers);if(i.element.style.display=!0==c?"":"none",!0==c){i.onBeforeRender(s,n,r);const l=i.element;l.style.transform="translate(-50%,-50%) translate("+(qc.x*a+a)+"px,"+(-qc.y*o+o)+"px)",l.parentNode!==h&&h.appendChild(l),i.onAfterRender(s,n,r)}t={distanceToCameraSquared:(t=r,e=i,Jc.setFromMatrixPosition(t.matrixWorld),Xc.setFromMatrixPosition(e.matrixWorld),Jc.distanceToSquared(Xc))};l.objects.set(i,t)}var t,e;for(let t=0,e=i.children.length;t<e;t++)c(i.children[t],n,r)}h.style.overflow="hidden",this.domElement=h,this.getSize=function(){return{width:i,height:n}},this.render=function(t,e){!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),jc.copy(e.matrixWorldInverse),Yc.multiplyMatrices(e.projectionMatrix,jc),c(t,t,e);{var i=t;const n=function(){const e=[];return i.traverse(function(t){t.isCSS2DObject&&e.push(t)}),e}().sort(function(t,e){return t.renderOrder!==e.renderOrder?e.renderOrder-t.renderOrder:l.objects.get(t).distanceToCameraSquared-l.objects.get(e).distanceToCameraSquared}),r=n.length;for(let t=0,e=n.length;t<e;t++)n[t].element.style.zIndex=r-t;return}},this.setSize=function(t,e){i=t,n=e,a=i/2,o=n/2,h.style.width=t+"px",h.style.height=e+"px"}}}const $c=(t,e)=>({type:"number",number:t,unit:e}),Zc=(()=>{const r={};return t=>{const e=t;if(e in r)return r[e];const i=[];let n=0;for(;t;){if(1e3<++n){t="";break}const r=th(t),e=r.nodes[0];if(null==e||0===e.terms.length)break;i.push(e),t=r.remainingInput}return r[e]=i}})(),th=(()=>{const i=/^(\-\-|[a-z\u0240-\uffff])/i,n=/^([\*\+\/]|[\-]\s)/i,r=/^[\),]/;return t=>{const e=[];for(;t.length&&(t=t.trim(),!r.test(t));)if("("===t[0]){const{nodes:i,remainingInput:n}=sh(t);t=n,e.push({type:"function",name:{type:"ident",value:"calc"},arguments:i})}else if(i.test(t)){const i=eh(t),n=i.nodes[0];if("("===(t=i.remainingInput)[0]){const{nodes:i,remainingInput:r}=sh(t);e.push({type:"function",name:n,arguments:i}),t=r}else e.push(n)}else if(n.test(t))e.push({type:"operator",value:t[0]}),t=t.slice(1);else{const{nodes:i,remainingInput:n}=("#"===t[0]?nh:ih)(t);if(0===i.length)break;e.push(i[0]),t=n}return{nodes:[{type:"expression",terms:e}],remainingInput:t}}})(),eh=(()=>{const i=/[^a-z0-9_\-\u0240-\uffff]/i;return t=>{var e=t.match(i);return{nodes:[{type:"ident",value:null==e?t:t.substr(0,e.index)}],remainingInput:null==e?"":t.substr(e.index)}}})(),ih=(()=>{const r=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,s=/^[a-z%]+/i,a=/^(m|mm|cm|rad|deg|[%])$/;return t=>{var e=t.match(r),e=null==e?"0":e[0],i=(t=null==e?t:t.slice(e.length)).match(s);let n=null!=i&&""!==i[0]?i[0]:null;i=null==i?t:t.slice(n.length);return null==n||a.test(n)||(n=null),{nodes:[{type:"number",number:parseFloat(e)||0,unit:n}],remainingInput:i}}})(),nh=(()=>{const i=/^[a-f0-9]*/i;return t=>{var e=(t=t.slice(1).trim()).match(i);return{nodes:null==e?[]:[{type:"hex",value:e[0]}],remainingInput:null==e?t:t.slice(e[0].length)}}})(),sh=t=>{const e=[];for(t=t.slice(1).trim();t.length;){const i=th(t);if(e.push(i.nodes[0]),","===(t=i.remainingInput.trim())[0])t=t.slice(1).trim();else if(")"===t[0]){t=t.slice(1);break}}return{nodes:e,remainingInput:t}},rh=Symbol("visitedTypes");class ah{constructor(t){this[rh]=t}walk(t,e){const i=t.slice();for(;i.length;){const t=i.shift();switch(-1<this[rh].indexOf(t.type)&&e(t),t.type){case"expression":i.unshift(...t.terms);break;case"function":i.unshift(t.name,...t.arguments)}}}}const oh=Object.freeze({type:"number",number:0,unit:null}),lh=(t,e=0)=>{let{number:i,unit:n}=t;if(isFinite(i)){if("rad"===t.unit||null==t.unit)return t}else i=e,n="rad";return{type:"number",number:("deg"===n&&null!=i?i:0)*Math.PI/180,unit:"rad"}},ch=(t,e=0)=>{let i,{number:n,unit:r}=t;if(isFinite(n)){if("m"===t.unit)return t}else n=e,r="m";switch(r){default:i=1;break;case"cm":i=.01;break;case"mm":i=.001}return{type:"number",number:i*n,unit:"m"}},hh=(()=>{const t=t=>t,r={rad:t,deg:lh,m:t,mm:ch,cm:ch};return(t,e=oh)=>{isFinite(t.number)||(t.number=e.number,t.unit=e.unit);var i=t["unit"];if(null==i)return t;const n=r[i];return null==n?e:n(t)}})();class uh{constructor(t=50){this.velocity=0,this.naturalFrequency=0,this.setDecayTime(t)}setDecayTime(t){this.naturalFrequency=1/Math.max(.001,t)}update(t,e,i,n){var r=2e-4*this.naturalFrequency;if(null==t||0===n)return e;if(t===e&&0===this.velocity)return e;if(i<0)return t;var t=t-e,s=this.velocity+this.naturalFrequency*t,a=t+i*s,i=Math.exp(-this.naturalFrequency*i),o=(s-this.naturalFrequency*a)*i,s=-this.naturalFrequency*(o+s*i);return Math.abs(o)<r*Math.abs(n)&&0<=s*t?(this.velocity=0,e):(this.velocity=o,e+a*i)}}class dh extends Wc{constructor(t){super(document.createElement("div")),this.normal=new V(0,1,0),this.initialized=!1,this.referenceCount=1,this.pivot=document.createElement("div"),this.slot=document.createElement("slot"),this.element.classList.add("annotation-wrapper"),this.slot.name=t.name,this.element.appendChild(this.pivot),this.pivot.appendChild(this.slot),this.updatePosition(t.position),this.updateNormal(t.normal)}get facingCamera(){return!this.element.classList.contains("hide")}show(){this.facingCamera&&this.initialized||this.updateVisibility(!0)}hide(){!this.facingCamera&&this.initialized||this.updateVisibility(!1)}increment(){this.referenceCount++}decrement(){return 0<this.referenceCount&&--this.referenceCount,0===this.referenceCount}updatePosition(t){if(null!=t){var e=Zc(t)[0].terms;for(let t=0;t<3;++t)this.position.setComponent(t,hh(e[t]).number);this.updateMatrixWorld()}}updateNormal(t){if(null!=t){var e=Zc(t)[0].terms;for(let t=0;t<3;++t)this.normal.setComponent(t,hh(e[t]).number)}}orient(t){this.pivot.style.transform=`rotate(${t}rad)`}updateVisibility(n){n?this.element.classList.remove("hide"):this.element.classList.add("hide"),this.slot.assignedNodes().forEach(t=>{if(t.nodeType===Node.ELEMENT_NODE){const e=t,i=e.dataset.visibilityAttribute;if(null!=i){const t="data-"+i;n?e.setAttribute(t,""):e.removeAttribute(t)}e.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:n}}))}}),this.initialized=!0}}const Ah=(t,a,e)=>{let o=e;const l=new V;return t.traverseVisible(t=>{let e,i;t.updateWorldMatrix(!1,!1);var n=t.geometry;if(void 0!==n)if(n.isGeometry){var r=n.vertices;for(e=0,i=r.length;e<i;e++)l.copy(r[e]),t.isSkinnedMesh?t.boneTransform(e,l):l.applyMatrix4(t.matrixWorld),o=a(o,l)}else if(n.isBufferGeometry){var s=n.attributes["position"];if(void 0!==s)for(e=0,i=s.count;e<i;e++)l.fromBufferAttribute(s,e),t.isSkinnedMesh?t.boneTransform(e,l):l.applyMatrix4(t.matrixWorld),o=a(o,l)}}),o},ph={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float h;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 sum = vec4( 0.0 );\n\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}"},gh={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float v;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 sum = vec4( 0.0 );\n\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}"};function mh(t,e,i){return(1-i)*t+i*e}class fh extends qt{constructor(t,e,i){super(),this.camera=new gi,this.renderTarget=null,this.renderTargetBlur=null,this.depthMaterial=new xs,this.horizontalBlurMaterial=new Ve(ph),this.verticalBlurMaterial=new Ve(gh),this.intensity=0,this.softness=1,this.boundingBox=new j,this.size=new V,this.maxDimension=0,this.isAnimated=!1,this.needsUpdate=!1;const n=this["camera"];n.rotation.x=Math.PI/2,n.left=-.5,n.right=.5,n.bottom=-.5,n.top=.5,this.add(n);var r=new ri,s=new ae({opacity:1,transparent:!0,side:1});this.floor=new Ne(r,s),this.floor.userData.shadow=!0,n.add(this.floor),this.blurPlane=new Ne(r),this.blurPlane.visible=!1,n.add(this.blurPlane),t.target.add(this),this.depthMaterial.onBeforeCompile=function(t){t.fragmentShader=t.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this.horizontalBlurMaterial.depthTest=!1,this.verticalBlurMaterial.depthTest=!1,this.setScene(t,e,i)}setScene(t,e,i){const{boundingBox:n,size:r,rotation:s,position:a}=this;if(this.isAnimated=0<t.animationNames.length,this.boundingBox.copy(t.boundingBox),this.size.copy(t.size),this.maxDimension=Math.max(r.x,r.y,r.z)*(this.isAnimated?2:1),this.boundingBox.getCenter(a),"back"===i){const{min:t,max:e}=n;[t.y,t.z]=[t.z,t.y],[e.y,e.z]=[e.z,e.y],[r.y,r.z]=[r.z,r.y],s.x=Math.PI/2,s.y=Math.PI}else s.x=0,s.y=0;if(this.isAnimated){const t=n.min.y,e=n.max.y;r.y=this.maxDimension,n.expandByVector(r.subScalar(this.maxDimension).multiplyScalar(-.5)),n.min.y=t,n.max.y=e,r.set(this.maxDimension,e-t,this.maxDimension)}"bottom"===i?a.y=n.min.y:a.z=n.min.y,this.setSoftness(e)}setSoftness(t){this.softness=t;const{size:e,camera:i}=this,n=this.isAnimated?2:1,r=n*Math.pow(2,9-3*t);this.setMapSize(r);var s=e.y/2,a=e.y*n;i.near=0,i.far=mh(a,s,t),this.depthMaterial.opacity=1/t,i.updateProjectionMatrix(),this.setIntensity(this.intensity),this.setOffset(0)}setMapSize(t){var e=this["size"],i=(this.isAnimated&&(t*=2),Math.floor(e.x>e.z?t:t*e.x/e.z)),t=Math.floor(e.x>e.z?t*e.z/e.x:t),n=10+i,r=10+t;if(null==this.renderTarget||this.renderTarget.width===n&&this.renderTarget.height===r||(this.renderTarget.dispose(),this.renderTarget=null,this.renderTargetBlur.dispose(),this.renderTargetBlur=null),null==this.renderTarget){const t={format:1023};this.renderTarget=new O(n,r,t),this.renderTargetBlur=new O(n,r,t),this.floor.material.map=this.renderTarget.texture}this.camera.scale.set(e.x*(1+10/i),e.z*(1+10/t),1),this.needsUpdate=!0}setIntensity(t){0<(this.intensity=t)?(this.visible=!0,this.floor.visible=!0,this.floor.material.opacity=t*mh(.3,1,this.softness*this.softness)):(this.visible=!1,this.floor.visible=!1)}getIntensity(){return this.intensity}setOffset(t){this.floor.position.z=-t+.001*this.maxDimension}render(t,e){e.overrideMaterial=this.depthMaterial;var i=t.getClearAlpha(),n=(t.setClearAlpha(0),this.floor.visible=!1,t.xr.enabled),r=(t.xr.enabled=!1,t.getRenderTarget());t.setRenderTarget(this.renderTarget),t.render(e,this.camera),e.overrideMaterial=null,this.floor.visible=!0,this.blurShadow(t),t.xr.enabled=n,t.setRenderTarget(r),t.setClearAlpha(i)}blurShadow(t){const{camera:e,horizontalBlurMaterial:i,verticalBlurMaterial:n,renderTarget:r,renderTargetBlur:s,blurPlane:a}=this;a.visible=!0,(a.material=i).uniforms.h.value=1/this.renderTarget.width,i.uniforms.tDiffuse.value=this.renderTarget.texture,t.setRenderTarget(s),t.render(a,e),(a.material=n).uniforms.v.value=1/this.renderTarget.height,n.uniforms.tDiffuse.value=this.renderTargetBlur.texture,t.setRenderTarget(r),t.render(a,e),a.visible=!1}}const vh=new V,yh=new V,xh=new V,_h=new class{constructor(t,e,i=0,n=1/0){this.ray=new xt(t,e),this.near=i,this.far=n,this.camera=null,this.layers=new Dt,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,i=[]){return _a(t,this,i,e),i.sort(xa),i}intersectObjects(i,n=!0,r=[]){for(let t=0,e=i.length;t<e;t++)_a(i[t],this,r,n);return r.sort(xa),r}},Eh=new V,wh=new v;class bh extends Ps{constructor({canvas:t,element:e,width:i,height:n}){super(),this.context=null,this.annotationRenderer=new Kc,this.schemaElement=document.createElement("script"),this.width=1,this.height=1,this.aspect=1,this.scaleStep=0,this.renderCount=0,this.externalRenderer=null,this.camera=new qe(45,1,.1,100),this.xrCamera=null,this.url=null,this.target=new qt,this.animationNames=[],this.boundingBox=new j,this.boundingSphere=new dt,this.size=new V,this.idealAspect=0,this.framedFoVDeg=0,this.shadow=null,this.shadowIntensity=0,this.shadowSoftness=1,this.bakedShadows=new Set,this.exposure=1,this.canScale=!0,this.isDirty=!1,this.goalTarget=new V,this.targetDamperX=new uh,this.targetDamperY=new uh,this.targetDamperZ=new uh,this._currentGLTF=null,this._model=null,this.cancelPendingSourceChange=null,this.animationsByName=new Map,this.currentAnimationAction=null,this.name="ModelScene",this.element=e,this.canvas=t,this.camera=new qe(45,1,.1,100),this.camera.name="MainCamera",this.add(this.target),this.setSize(i,n),this.target.name="Target",this.mixer=new ya(this.target);const r=this.annotationRenderer["domElement"],s=r["style"];s.display="none",s.pointerEvents="none",s.position="absolute",s.top="0",this.element.shadowRoot.querySelector(".default").appendChild(r),this.schemaElement.setAttribute("type","application/ld+json")}createContext(){this.context=this.canvas.getContext("2d")}getCamera(){return null!=this.xrCamera?this.xrCamera:this.camera}queueRender(){this.isDirty=!0}shouldRender(){return this.isDirty}hasRendered(){this.isDirty=!1}forceRescale(){this.scaleStep=-1,this.queueRender()}async setObject(t){this.reset(),this._model=t,this.target.add(t),await this.setupScene()}async setSource(i,n=()=>{}){if(i&&i!==this.url){if(this.reset(),this.url=i,null!=this.externalRenderer){const i=await this.externalRenderer.load(n);return this.boundingSphere.radius=i.framedRadius,void(this.idealAspect=i.fieldOfViewAspect)}let t;null!=this.cancelPendingSourceChange&&(this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null);try{t=await new Promise(async(t,e)=>{this.cancelPendingSourceChange=()=>e();try{t(await this.element[ad].loader.load(i,this.element,n))}catch(t){e(t)}})}catch(i){if(null==i)return;throw i}this.reset(),this.url=i,null!=(this._currentGLTF=t)&&(this._model=t.scene,this.target.add(t.scene));const e=t["animations"],r=new Map,s=[];for(const i of e)r.set(i.name,i),s.push(i.name);this.animations=e,this.animationsByName=r,this.animationNames=s,await this.setupScene()}else n(1)}async setupScene(){this.applyTransform(),this.updateBoundingBox(),await this.updateFraming(),this.updateShadow(),this.setShadowIntensity(this.shadowIntensity)}reset(){this.url=null,this.queueRender(),null!=this.shadow&&this.shadow.setIntensity(0),this.bakedShadows.clear();const t=this["_model"],e=(null!=t&&(t.removeFromParent(),this._model=null),this._currentGLTF);null!=e&&(e.dispose(),this._currentGLTF=null),null!=this.currentAnimationAction&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}get currentGLTF(){return this._currentGLTF}setSize(t,e){var i;this.width===t&&this.height===e||(this.width=Math.max(t,1),this.height=Math.max(e,1),this.annotationRenderer.setSize(t,e),this.aspect=this.width/this.height,null!=this.externalRenderer&&(i=Wo(),this.externalRenderer.resize(t*i,e*i)),this.queueRender())}markBakedShadow(t){t.userData.shadow=!0,this.bakedShadows.add(t)}unmarkBakedShadow(t){t.userData.shadow=!1,t.visible=!0,this.bakedShadows.delete(t),this.boundingBox.expandByObject(t)}findBakedShadows(t){const n=new j;t.traverse(t=>{var e,i;t.isMesh&&t.material.transparent&&(n.setFromObject(t),e=n.getSize(Eh),i=Math.min(e.x,e.y,e.z),Math.max(e.x,e.y,e.z)<100*i||this.markBakedShadow(t))})}checkBakedShadows(){const{min:t,max:e}=this.boundingBox,i=new j;this.boundingBox.getSize(this.size);for(const n of this.bakedShadows)i.setFromObject(n),i.min.y<t.y+this.size.y/100&&i.min.x<=t.x&&i.max.x>=e.x&&i.min.z<=t.z&&i.max.z>=e.z||i.min.z<t.z+this.size.z/100&&i.min.x<=t.x&&i.max.x>=e.x&&i.min.y<=t.y&&i.max.y>=e.y||this.unmarkBakedShadow(n)}applyTransform(){const t=this["model"];var e,i,n;null!=t&&(i=Zc(this.element.orientation)[0].terms,e=hh(i[0]).number,n=hh(i[1]).number,i=hh(i[2]).number,t.quaternion.setFromEuler(new Rt(n,i,e,"YXZ")),n=Zc(this.element.scale)[0].terms,t.scale.set(n[0].number,n[1].number,n[2].number))}updateBoundingBox(){var t,e=this["model"];null!=e&&(this.target.remove(e),this.findBakedShadows(e),this.setBakedShadowVisibility(!(t=(t,e)=>t.expandByPoint(e))),this.boundingBox=Ah(e,t,new j),this.boundingBox.isEmpty()&&(this.setBakedShadowVisibility(!0),this.bakedShadows.forEach(t=>this.unmarkBakedShadow(t)),this.boundingBox=Ah(e,t,new j)),this.checkBakedShadows(),this.setBakedShadowVisibility(),this.boundingBox.getSize(this.size),this.target.add(e))}async updateFraming(){var t=this["model"];if(null!=t){this.target.remove(t),this.setBakedShadowVisibility(!1);const n=this.boundingSphere["center"];this.element.requestUpdate("cameraTarget"),await this.element.updateComplete,n.copy(this.getTarget()),this.boundingSphere.radius=Math.sqrt(Ah(t,(t,e)=>Math.max(t,n.distanceToSquared(e)),0)),this.idealAspect=Ah(t,(t,e)=>{e.sub(n);var i=Math.sqrt(e.x*e.x+e.z*e.z);return Math.max(t,i/(this.idealCameraDistance()-Math.abs(e.y)))},0)/Math.tan(this.framedFoVDeg/2*Math.PI/180),this.setBakedShadowVisibility(),this.target.add(t)}}setBakedShadowVisibility(t=this.shadowIntensity<=0){for(const e of this.bakedShadows)e.visible=t}idealCameraDistance(){var t=this.framedFoVDeg/2*Math.PI/180;return this.boundingSphere.radius/Math.sin(t)}adjustedFoV(t){t=Math.tan(t/2*Math.PI/180)*Math.max(1,this.idealAspect/this.aspect);return 2*Math.atan(t)*180/Math.PI}getNDC(t,e){var i;return null!=this.xrCamera?wh.set(t/window.screen.width,e/window.screen.height):(i=this.element.getBoundingClientRect(),wh.set((t-i.x)/this.width,(e-i.y)/this.height)),wh.multiplyScalar(2).subScalar(1),wh.y*=-1,wh}getSize(){return{width:this.width,height:this.height}}setEnvironmentAndSkybox(t,e){this.element[ad].arRenderer.presentedScene!==this&&(this.environment=t,this.background=e,this.queueRender())}setTarget(t,e,i){this.goalTarget.set(-t,-e,-i)}setTargetDamperDecayTime(t){this.targetDamperX.setDecayTime(t),this.targetDamperY.setDecayTime(t),this.targetDamperZ.setDecayTime(t)}getTarget(){return this.goalTarget.clone().multiplyScalar(-1)}jumpToGoal(){this.updateTarget(1e4)}updateTarget(t){const e=this.goalTarget,i=this.target.position;if(e.equals(i))return!1;var n=this.boundingSphere.radius/10,{x:r,y:s,z:a}=i,r=this.targetDamperX.update(r,e.x,t,n),s=this.targetDamperY.update(s,e.y,t,n),a=this.targetDamperZ.update(a,e.z,t,n);return this.target.position.set(r,s,a),this.target.updateMatrixWorld(),this.queueRender(),!0}pointTowards(t,e){var{x:i,z:n}=this.position;this.yaw=Math.atan2(t-i,e-n)}get model(){return this._model}set yaw(t){this.rotation.y=t,this.queueRender()}get yaw(){return this.rotation.y}set animationTime(t){this.mixer.setTime(t),this.queueShadowRender()}get animationTime(){var t;return null!=this.currentAnimationAction?(t=Math.max(this.currentAnimationAction._loopCount,0),2202===this.currentAnimationAction.loop&&1==(1&t)?this.duration-this.currentAnimationAction.time:this.currentAnimationAction.time):0}set animationTimeScale(t){this.mixer.timeScale=t}get animationTimeScale(){return this.mixer.timeScale}get duration(){return null!=this.currentAnimationAction&&this.currentAnimationAction.getClip()?this.currentAnimationAction.getClip().duration:0}get hasActiveAnimation(){return null!=this.currentAnimationAction}playAnimation(e=null,i=0,n=2201,r=1/0){if(null!=this._currentGLTF){const s=this["animations"];if(null==s||0===s.length)console.warn("Cannot play animation (model does not have any animations)");else{let t=null;if(null!=e&&null==(t=this.animationsByName.get(e))){const i=parseInt(e);!isNaN(i)&&0<=i&&i<s.length&&(t=s[i])}null==t&&(t=s[0]);try{const e=this["currentAnimationAction"],s=this.mixer.clipAction(t,this);this.currentAnimationAction=s,this.element.paused?this.mixer.stopAllAction():(s.paused=!1,null!=e&&s!==e?s.crossFadeFrom(e,i,!1):0<this.animationTimeScale&&this.animationTime==this.duration&&(this.animationTime=0)),s.setLoop(n,r),s.enabled=!0,s.clampWhenFinished=!0,s.play()}catch(e){console.error(e)}}}}stopAnimation(){this.currentAnimationAction=null,this.mixer.stopAllAction()}updateAnimation(t){this.mixer.update(t),this.queueShadowRender()}subscribeMixerEvent(t,e){this.mixer.addEventListener(t,e)}updateShadow(){const t=this.shadow;var e;null!=t&&(e="wall"===this.element.arPlacement?"back":"bottom",t.setScene(this,this.shadowSoftness,e),t.needsUpdate=!0)}renderShadow(t){const e=this.shadow;null!=e&&1==e.needsUpdate&&(e.render(t,this),e.needsUpdate=!1)}queueShadowRender(){null!=this.shadow&&(this.shadow.needsUpdate=!0)}setShadowIntensity(t){if(this.shadowIntensity=t,null!=this._currentGLTF&&(this.setBakedShadowVisibility(),!(t<=0&&null==this.shadow))){if(null==this.shadow){const t="wall"===this.element.arPlacement?"back":"bottom";this.shadow=new fh(this,this.shadowSoftness,t)}this.shadow.setIntensity(t)}}setShadowSoftness(t){this.shadowSoftness=t;const e=this.shadow;null!=e&&e.setSoftness(t)}setShadowOffset(t){const e=this.shadow;null!=e&&e.setOffset(t)}get raycaster(){return _h}positionAndNormalFromPoint(t,e=this){this.raycaster.setFromCamera(t,this.getCamera());const i=this.raycaster.intersectObject(e,!0).find(t=>t.object.visible&&!t.object.userData.shadow);return null==i||null==i.face?null:null==i.uv?{position:i.point,normal:i.face.normal,uv:null}:(i.face.normal.applyNormalMatrix((new y).getNormalMatrix(i.object.matrixWorld)),{position:i.point,normal:i.face.normal,uv:i.uv})}addHotspot(t){this.target.add(t),this.annotationRenderer.domElement.appendChild(t.element)}removeHotspot(t){this.target.remove(t)}forHotspots(i){var n=this.target["children"];for(let t=0,e=n.length;t<e;t++){var r=n[t];r instanceof dh&&i(r)}}updateHotspots(e){this.forHotspots(t=>{vh.copy(e),yh.setFromMatrixPosition(t.matrixWorld),vh.sub(yh),xh.copy(t.normal).transformDirection(this.target.matrixWorld),vh.dot(xh)<0?t.hide():t.show()})}orientHotspots(e){this.forHotspots(t=>{t.orient(e)})}setHotspotsVisibility(e){this.forHotspots(t=>{t.visible=e})}updateSchema(t){const{schemaElement:e,element:i}=this,{alt:n,poster:r,iosSrc:s}=i;if(null!=t){const i=[{"@type":"MediaObject",contentUrl:t,encodingFormat:"gltf"===(null==(t=t.split(".").pop())?void 0:t.toLowerCase())?"model/gltf+json":"model/gltf-binary"}];s&&i.push({"@type":"MediaObject",contentUrl:s,encodingFormat:"model/vnd.usdz+zip"});t={"@context":"http://schema.org/","@type":"3DModel",image:null!=r?r:void 0,name:null!=n?n:void 0,encoding:i};e.textContent=JSON.stringify(t),document.head.appendChild(e)}else null!=e.parentElement&&e.parentElement.removeChild(e)}}class Ih{constructor(t,e,i,n,r){this.xrLight=t,this.renderer=e,this.lightProbe=i,this.xrWebGLBinding=null,this.estimationStartCallback=r,this.frameCallback=this.onXRFrame.bind(this);const s=e.xr.getSession();if(n&&"XRWebGLBinding"in window){const i=new Je(16),n=(t.environment=i.texture,e.getContext());switch(s.preferredReflectionFormat){case"srgba8":n.getExtension("EXT_sRGB");break;case"rgba16f":n.getExtension("OES_texture_half_float")}this.xrWebGLBinding=new XRWebGLBinding(s,n),this.lightProbe.addEventListener("reflectionchange",()=>{this.updateReflection()})}s.requestAnimationFrame(this.frameCallback)}updateReflection(){const t=this.renderer.properties.get(this.xrLight.environment);var e;t&&(e=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe))&&(t.__webglTexture=e,this.xrLight.environment.needsPMREMUpdate=!0)}onXRFrame(t,e){if(this.xrLight){e.session.requestAnimationFrame(this.frameCallback);e=e.getLightEstimate(this.lightProbe);if(e){this.xrLight.lightProbe.sh.fromArray(e.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;const t=Math.max(1,Math.max(e.primaryLightIntensity.x,Math.max(e.primaryLightIntensity.y,e.primaryLightIntensity.z)));this.xrLight.directionalLight.color.setRGB(e.primaryLightIntensity.x/t,e.primaryLightIntensity.y/t,e.primaryLightIntensity.z/t),this.xrLight.directionalLight.intensity=t,this.xrLight.directionalLight.position.copy(e.primaryLightDirection),this.estimationStartCallback&&(this.estimationStartCallback(),this.estimationStartCallback=null)}}}dispose(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}class Ch extends Ss{constructor(e,i=!0){super(),this.lightProbe=new la,this.lightProbe.intensity=0,this.add(this.lightProbe),this.directionalLight=new aa,this.directionalLight.intensity=0,this.add(this.directionalLight);let n=this.environment=null,r=!1;e.xr.addEventListener("sessionstart",()=>{const t=e.xr.getSession();"requestLightProbe"in t&&t.requestLightProbe({reflectionFormat:t.preferredReflectionFormat}).then(t=>{n=new Ih(this,e,t,i,()=>{r=!0,this.dispatchEvent({type:"estimationstart"})})})}),e.xr.addEventListener("sessionend",()=>{n&&(n.dispose(),n=null),r&&this.dispatchEvent({type:"estimationend"})}),this.dispose=()=>{n&&(n.dispose(),n=null),this.remove(this.lightProbe),this.lightProbe=null,this.remove(this.directionalLight),this.directionalLight=null,this.environment=null}}}const Sh=Math.PI/24,Mh=new v,Bh=(e,i,n)=>{let r=0<i?0<n?0:-Math.PI/2:0<n?Math.PI/2:Math.PI;for(let t=0;t<=12;++t)e.push(i+.17*Math.cos(r),n+.17*Math.sin(r),0,i+.2*Math.cos(r),n+.2*Math.sin(r),0),r+=Sh};class Th extends Ne{constructor(t,e){const i=new xe,n=[],r=[],{size:s,boundingBox:a}=t,o=s.x/2,l=("back"===e?s.y:s.z)/2;Bh(r,o,l),Bh(r,-o,l),Bh(r,-o,-l),Bh(r,o,-l);var h=r.length/3;for(let t=0;t<h-2;t+=2)n.push(t,t+1,t+3,t,t+3,t+2);var c=h-2;n.push(c,1+c,1,c,1,0),i.setAttribute("position",new de(r,3)),i.setIndex(n),super(i),this.side=e;const u=this.material;switch(u.side=2,u.transparent=!0,u.opacity=0,this.goalOpacity=0,this.opacityDamper=new uh,this.hitPlane=new Ne(new ri(2*(.2+o),2*(.2+l))),this.hitPlane.visible=!1,this.hitPlane.material.side=2,this.add(this.hitPlane),a.getCenter(this.position),e){case"bottom":this.rotateX(-Math.PI/2),this.shadowHeight=a.min.y,this.position.y=this.shadowHeight;break;case"back":this.shadowHeight=a.min.z,this.position.z=this.shadowHeight}t.target.add(this),this.offsetHeight=0}getHit(t,e,i){Mh.set(e,-i),this.hitPlane.visible=!0;e=t.positionAndNormalFromPoint(Mh,this.hitPlane);return this.hitPlane.visible=!1,null==e?null:e.position}getExpandedHit(t,e,i){this.hitPlane.scale.set(1e3,1e3,1e3),this.hitPlane.updateMatrixWorld();t=this.getHit(t,e,i);return this.hitPlane.scale.set(1,1,1),t}set offsetHeight(t){t-=.001,"back"===this.side?this.position.z=this.shadowHeight+t:this.position.y=this.shadowHeight+t}get offsetHeight(){return"back"===this.side?this.position.z-this.shadowHeight:this.position.y-this.shadowHeight}set show(t){this.goalOpacity=t?.75:0}updateOpacity(t){const e=this.material;e.opacity=this.opacityDamper.update(e.opacity,this.goalOpacity,t,1),this.visible=0<e.opacity}dispose(){var t;const{geometry:e,material:i}=this.hitPlane;e.dispose(),i.dispose(),this.geometry.dispose(),this.material.dispose(),null!=(t=this.parent)&&t.remove(this)}}const Rh="not-presenting",Dh="session-started",Lh="object-placed",Qh="failed",Ph="tracking",Fh="not-tracking",Uh=new V,Nh=new _t,kh=new V,Oh=new qe(45,1,.1,100);class Gh extends n{constructor(t){super(),this.renderer=t,this.currentSession=null,this.placeOnWall=!1,this.placementBox=null,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.initialHitSource=null,this.transientHitTestSource=null,this.inputSource=null,this._presentedScene=null,this.resolveCleanup=null,this.exitWebXRButtonContainer=null,this.overlay=null,this.xrLight=null,this.tracking=!0,this.frames=0,this.initialized=!1,this.oldTarget=new V,this.placementComplete=!1,this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastDragPosition=new V,this.firstRatio=0,this.lastAngle=0,this.goalPosition=new V,this.goalYaw=0,this.goalScale=1,this.xDamper=new uh,this.yDamper=new uh,this.zDamper=new uh,this.yawDamper=new uh,this.scaleDamper=new uh,this.onExitWebXRButtonContainerClick=()=>this.stopPresenting(),this.onUpdateScene=()=>{null!=this.placementBox&&this.isPresenting&&(this.placementBox.dispose(),this.placementBox=new Th(this.presentedScene,this.placeOnWall?"back":"bottom"))},this.onSelectStart=t=>{const e=this.transientHitTestSource;if(null!=e){const i=this.frame.getHitTestResultsForTransientInput(e),n=this.presentedScene,r=this.placementBox;if(1===i.length){this.inputSource=t.inputSource;const e=this.inputSource.gamepad["axes"],i=r.getHit(this.presentedScene,e[0],e[1]);r.show=!0,null!=i?(this.isTranslating=!0,this.lastDragPosition.copy(i)):!1===this.placeOnWall&&(this.isRotating=!0,this.lastAngle=1.5*e[0])}else if(2===i.length){r.show=!0,this.isTwoFingering=!0;const t=this.fingerPolar(i)["separation"];this.firstRatio=t/n.scale.x}}},this.onSelectEnd=()=>{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.inputSource=null,this.goalPosition.y+=this.placementBox.offsetHeight*this.presentedScene.scale.x,this.placementBox.show=!1},this.threeRenderer=t.threeRenderer,this.threeRenderer.xr.enabled=!0}async resolveARSession(){Go();var t=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay","light-estimation"],domOverlay:this.overlay?{root:this.overlay}:void 0});return this.threeRenderer.xr.setReferenceSpaceType("local"),await this.threeRenderer.xr.setSession(t),this.threeRenderer.xr.cameraAutoUpdate=!1,t}get presentedScene(){return this._presentedScene}async supportsPresentation(){try{return Go(),await navigator.xr.isSessionSupported("immersive-ar")}catch(t){return console.warn("Request to present in WebXR denied:"),console.warn(t),console.warn("Falling back to next ar-mode"),!1}}async present(t,e=!1){this.isPresenting&&console.warn("Cannot present while a model is already presenting");var i=new Promise((t,e)=>{requestAnimationFrame(()=>t())});t.setHotspotsVisibility(!1),t.queueRender(),await i,this._presentedScene=t,this.overlay=t.element.shadowRoot.querySelector("div.default"),!0===e&&(this.xrLight=new Ch(this.threeRenderer),this.xrLight.addEventListener("estimationstart",()=>{if(this.isPresenting&&null!=this.xrLight){const t=this.presentedScene;t.add(this.xrLight),t.environment=this.xrLight.environment}}));const n=await this.resolveARSession(),r=(n.addEventListener("end",()=>{this.postSessionCleanup()},{once:!0}),t.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button"));r.classList.add("enabled"),r.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=r;i=await n.requestReferenceSpace("viewer"),this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=t.yaw,this.goalYaw=t.yaw,this.goalScale=1,t.background=null,this.oldShadowIntensity=t.shadowIntensity,t.setShadowIntensity(.01),this.oldTarget.copy(t.getTarget()),t.element.addEventListener("load",this.onUpdateScene),e=20*Math.PI/180,e=!0===this.placeOnWall?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(e),z:-Math.cos(e)});n.requestHitTestSource({space:i,offsetRay:e}).then(t=>{this.initialHitSource=t}),this.currentSession=n,this.placementBox=new Th(t,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:Dh})}async stopPresenting(){if(this.isPresenting){var t=new Promise(t=>{this.resolveCleanup=t});try{await this.currentSession.end(),await t}catch(t){console.warn("Error while trying to end WebXR AR session"),console.warn(t),this.postSessionCleanup()}}}get isPresenting(){return null!=this.presentedScene}get target(){return this.oldTarget}updateTarget(){const t=this.presentedScene;if(null!=t){const e=t.getTarget();this.oldTarget.copy(e),this.placeOnWall?e.z=t.boundingBox.min.z:e.y=t.boundingBox.min.y,t.setTarget(e.x,e.y,e.z)}}postSessionCleanup(){const t=this.currentSession,e=(null!=t&&(t.removeEventListener("selectstart",this.onSelectStart),t.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null),this.presentedScene);if((this._presentedScene=null)!=e){const t=e["element"],i=(null!=this.xrLight&&(e.remove(this.xrLight),this.xrLight.dispose(),this.xrLight=null),e.position.set(0,0,0),e.scale.set(1,1,1),e.setShadowOffset(0),this.turntableRotation),n=(null!=i&&(e.yaw=i),this.oldShadowIntensity),r=(null!=n&&e.setShadowIntensity(n),e.setEnvironmentAndSkybox(t[Yo],t[Jo]),this.oldTarget);e.setTarget(r.x,r.y,r.z),e.xrCamera=null,e.element.removeEventListener("load",this.onUpdateScene),e.orientHotspots(0),t.requestUpdate("cameraTarget"),t.requestUpdate("maxCameraOrbit"),t[rd](t.getBoundingClientRect())}this.renderer.height=0;const i=this.exitWebXRButtonContainer,n=(null!=i&&(i.classList.remove("enabled"),i.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null),this.transientHitTestSource),r=(null!=n&&(n.cancel(),this.transientHitTestSource=null),this.initialHitSource);null!=r&&(r.cancel(),this.initialHitSource=null),null!=this.placementBox&&(this.placementBox.dispose(),this.placementBox=null),this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.inputSource=null,(this.overlay=null)!=this.resolveCleanup&&this.resolveCleanup(),this.dispatchEvent({type:"status",status:Rh})}updateView(t){const e=this.presentedScene,i=this.threeRenderer.xr;i.updateCamera(Oh),e.xrCamera=i.getCamera();var n=e.getCamera().matrixWorld["elements"];if(e.orientHotspots(Math.atan2(n[1],n[5])),this.initialized||(this.placeInitially(),this.initialized=!0),t.requestViewportScale&&t.recommendedViewportScale){const e=t.recommendedViewportScale;t.requestViewportScale(Math.max(e,.25))}n=this.currentSession.renderState.baseLayer.getViewport(t);this.threeRenderer.setViewport(n.x,n.y,n.width,n.height)}placeInitially(){const t=this.presentedScene,{position:e,element:i}=t,n=t.getCamera(),{width:r,height:s}=this.overlay.getBoundingClientRect(),{theta:a,radius:o}=(t.setSize(r,s),n.projectionMatrixInverse.copy(n.projectionMatrix).invert(),i.getCameraOrbit()),l=n.getWorldDirection(Uh);t.yaw=Math.atan2(-l.x,-l.z)-a,this.goalYaw=t.yaw,e.copy(n.position).add(l.multiplyScalar(o)),this.updateTarget();var h=t.getTarget();e.add(h).sub(this.oldTarget),this.goalPosition.copy(e),t.setHotspotsVisibility(!0);const c=this.frame["session"];c.addEventListener("selectstart",this.onSelectStart),c.addEventListener("selectend",this.onSelectEnd),c.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then(t=>{this.transientHitTestSource=t})}getTouchLocation(){var t=this.inputSource.gamepad["axes"],t=this.placementBox.getExpandedHit(this.presentedScene,t[0],t[1]);return null!=t&&(Uh.copy(t).sub(this.presentedScene.getCamera().position),10<Uh.length())?null:t}getHitPoint(t){var e=this.threeRenderer.xr.getReferenceSpace(),t=t.getPose(e);if(null==t)return null;e=Nh.fromArray(t.transform.matrix);return!0===this.placeOnWall&&(this.goalYaw=Math.atan2(e.elements[4],e.elements[6])),.75<e.elements[5]!==this.placeOnWall?kh.setFromMatrixPosition(e):null}moveToFloor(t){const e=this.initialHitSource;null!=e&&0!=(t=t.getHitTestResults(e)).length&&(t=t[0],null!=(t=this.getHitPoint(t))&&(this.placementBox.show=!0,this.isTranslating||(this.placeOnWall?this.goalPosition.copy(t):this.goalPosition.y=t.y),e.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:Lh})))}fingerPolar(t){var e=t[0].inputSource.gamepad.axes,t=t[1].inputSource.gamepad.axes,i=t[0]-e[0],t=t[1]-e[1],e=Math.atan2(t,i);let n=this.lastAngle-e;return n>Math.PI?n-=2*Math.PI:n<-Math.PI&&(n+=2*Math.PI),this.lastAngle=e,{separation:Math.sqrt(i*i+t*t),deltaYaw:n}}processInput(t){const e=this.transientHitTestSource;if(null!=e&&(this.isTranslating||this.isTwoFingering||this.isRotating)){const i=t.getHitTestResultsForTransientInput(e),r=this.presentedScene,s=r.scale.x;if(this.isTwoFingering)if(i.length<2)this.isTwoFingering=!1;else{const{separation:t,deltaYaw:e}=this.fingerPolar(i);if(!1===this.placeOnWall&&(this.goalYaw+=e),r.canScale){const e=t/this.firstRatio;this.goalScale=e<1.3&&.7692307692307692<e?1:e}}else if(2!==i.length)if(this.isRotating){const t=1.5*this.inputSource.gamepad.axes[0];this.goalYaw+=t-this.lastAngle,this.lastAngle=t}else this.isTranslating&&i.forEach(e=>{if(e.inputSource===this.inputSource){let t=null;if(null!=(t=null==(t=0<e.results.length?this.getHitPoint(e.results[0]):t)?this.getTouchLocation():t)){if(this.goalPosition.sub(this.lastDragPosition),!1===this.placeOnWall){const e=t.y-this.lastDragPosition.y;if(e<0){this.placementBox.offsetHeight=e/s,this.presentedScene.setShadowOffset(e);const i=Uh.copy(r.getCamera().position),n=-e/(i.y-t.y);i.multiplyScalar(n),t.multiplyScalar(1-n).add(i)}}this.goalPosition.add(t),this.lastDragPosition.copy(t)}}});else{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;const t=this.fingerPolar(i)["separation"];this.firstRatio=t/s}}}moveScene(t){const e=this.presentedScene,{position:i,yaw:n}=e,r=e.boundingSphere.radius,s=this.goalPosition,a=e.scale.x,o=this.placementBox;if(!s.equals(i)||this.goalScale!==a){var{x:l,y:h,z:c}=i,l=this.xDamper.update(l,s.x,t,r),h=this.yDamper.update(h,s.y,t,r),c=this.zDamper.update(c,s.z,t,r),l=(i.set(l,h,c),this.scaleDamper.update(a,this.goalScale,t,1));if(e.scale.set(l,l,l),!this.isTranslating){const t=s.y-h;this.placementComplete&&!1===this.placeOnWall?(o.offsetHeight=t/l,e.setShadowOffset(t)):0==t&&(this.placementComplete=!0,o.show=!1,e.setShadowIntensity(.8))}}o.updateOpacity(t),e.updateTarget(t),e.yaw=this.yawDamper.update(n,this.goalYaw,t,Math.PI)}onWebXRFrame(e,i){this.frame=i,++this.frames;const n=this.threeRenderer.xr.getReferenceSpace(),r=i.getViewerPose(n),s=(null==r&&!0===this.tracking&&30<this.frames&&(this.tracking=!1,this.dispatchEvent({type:"tracking",status:Fh})),this.presentedScene);if(null!=r&&null!=s&&s.element.loaded){!1===this.tracking&&(this.tracking=!0,this.dispatchEvent({type:"tracking",status:Ph}));let t=!0;for(const n of r.views){if(this.updateView(n),t){this.moveToFloor(i),this.processInput(i);const n=e-this.lastTick;this.moveScene(n),this.renderer.preRender(s,e,n),this.lastTick=e,s.renderShadow(this.threeRenderer)}this.threeRenderer.render(s,s.getCamera()),t=!1}}else this.threeRenderer.clear()}}class Hh{constructor(t){t.threeRenderer.debug={checkShaderErrors:!0},Promise.resolve().then(()=>{self.dispatchEvent(new CustomEvent("model-viewer-renderer-debug",{detail:{renderer:t,THREE:{ShaderMaterial:Ve,Texture:N,Mesh:Ne,Scene:Ps,PlaneGeometry:ri,OrthographicCamera:gi,WebGLRenderTarget:O}}}))})}addScene(t){self.dispatchEvent(new CustomEvent("model-viewer-scene-added-debug",{detail:{scene:t}}))}removeScene(t){self.dispatchEvent(new CustomEvent("model-viewer-scene-removed-debug",{detail:{scene:t}}))}}function zh(t){const r=new Map,s=new Map,e=t.clone();return Vh(t,e,function(t,e){r.set(e,t),s.set(t,e)}),e.traverse(function(t){if(t.isSkinnedMesh){const e=t,i=r.get(t),n=i.skeleton.bones;e.skeleton=i.skeleton.clone(),e.bindMatrix.copy(i.bindMatrix),e.skeleton.bones=n.map(function(t){return s.get(t)}),e.bind(e.skeleton,e.bindMatrix)}}),e}function Vh(e,i,n){n(e,i);for(let t=0;t<e.children.length;t++)Vh(e.children[t],i.children[t],n)}const Wh=Symbol("prepared"),qh=Symbol("prepare"),jh=Symbol("preparedGLTF"),Yh=Symbol("clone");class Jh{constructor(t){this[jh]=t}static prepare(t){if(null==t.scene)throw new Error("Model does not have a scene");if(t[Wh])return t;const e=this[qh](t);return e[Wh]=!0,e}static[qh](t){var e=t["scene"],i=[e];return Object.assign(Object.assign({},t),{scene:e,scenes:i})}get parser(){return this[jh].parser}get animations(){return this[jh].animations}get scene(){return this[jh].scene}get scenes(){return this[jh].scenes}get cameras(){return this[jh].cameras}get asset(){return this[jh].asset}get userData(){return this[jh].userData}clone(){return new this.constructor(this[Yh]())}dispose(){this.scenes.forEach(t=>{t.traverse(t=>{if(t.isMesh){const e=t;(Array.isArray(e.material)?e.material:[e.material]).forEach(t=>{for(const e in t){const i=t[e];if(i instanceof N){const t=i.source.data;null!=t.close&&t.close(),i.dispose()}}t.dispose()}),e.geometry.dispose()}})})}[Yh](){var t=this[jh],e=zh(this.scene),i=(Xh(e,this.scene),[e]),n=t.userData?Object.assign({},t.userData):{};return Object.assign(Object.assign({},t),{scene:e,scenes:i,userData:n})}}const Xh=(t,e)=>{Kh(t,e,(t,e)=>{void 0!==e.userData.variantMaterials&&(t.userData.variantMaterials=new Map(e.userData.variantMaterials)),void 0!==e.userData.variantData&&(t.userData.variantData=e.userData.variantData),void 0!==e.userData.originalMaterial&&(t.userData.originalMaterial=e.userData.originalMaterial)})},Kh=(e,i,n)=>{n(e,i);for(let t=0;t<e.children.length;t++)Kh(e.children[t],i.children[t],n)},$h=Symbol("threeGLTF"),Zh=Symbol("gltf"),tu=Symbol("gltfElementMap"),eu=Symbol("threeObjectMap"),iu=Symbol("parallelTraverseThreeScene"),nu=Symbol("correlateOriginalThreeGLTF"),su=Symbol("correlateCloneThreeGLTF");class ru{constructor(t,e,i,n){this[$h]=t,this[Zh]=e,this[tu]=n,this[eu]=i}static from(t,e){return null!=e?this[su](t,e):this[nu](t)}static[nu](e){const i=e.parser.json,n=e.parser.associations,r=new Map,s={name:"Default"},a={type:"materials",index:-1};for(const e of n.keys())e instanceof re&&null==n.get(e)&&(a.index<0&&(null==i.materials&&(i.materials=[]),a.index=i.materials.length,i.materials.push(s)),e.name=s.name,n.set(e,{materials:a.index}));for(const[e,s]of n){if(s){const i=e;i.userData=i.userData||{},i.userData.associations=s}for(const n in s)if(null!=n&&"primitives"!==n){const a=n,o=(i[a]||[])[s[a]];if(null==o)continue;let t=r.get(o);null==t&&(t=new Set,r.set(o,t)),t.add(e)}}return new ru(e,i,n,r)}static[su](e,o){const i=o.threeGLTF,t=o.gltf,l=JSON.parse(JSON.stringify(t)),h=new Map,c=new Map;for(let t=0;t<i.scenes.length;t++)this[iu](i.scenes[t],e.scenes[t],(t,e)=>{var i=o.threeObjectMap.get(t);if(null!=i)for(const t in i)if(null!=t&&"primitives"!==t){const o=t,n=i[o],r=l[o][n],s=h.get(e)||{},a=(s[o]=n,h.set(e,s),c.get(r)||new Set);a.add(e),c.set(r,a)}});return new ru(e,l,h,c)}static[iu](t,e,n){const r=(e,i)=>{if(n(e,i),e.isObject3D){if(e.isMesh)if(Array.isArray(e.material))for(let t=0;t<e.material.length;++t)r(e.material[t],i.material[t]);else r(e.material,i.material);for(let t=0;t<e.children.length;++t)r(e.children[t],i.children[t])}};r(t,e)}get threeGLTF(){return this[$h]}get gltf(){return this[Zh]}get gltfElementMap(){return this[tu]}get threeObjectMap(){return this[eu]}}const au=Symbol("correlatedSceneGraph");class ou extends Jh{static[qh](t){const r=super[qh](t),e=(null==r[au]&&(r[au]=ru.from(r)),r)["scene"],s=new dt(void 0,1/0);return e.traverse(t=>{t.renderOrder=1e3,t.frustumCulled=!1,t.name||(t.name=t.uuid);const e=t;if(e.isMesh){const t=e["geometry"],i=(e.castShadow=!0,e.isSkinnedMesh&&(t.boundingSphere=s,t.boundingBox=null),e.material);if(!0===i.isMeshBasicMaterial&&(i.toneMapped=!1),i.shadowSide=0,i.aoMap){const{gltf:e,threeObjectMap:s}=r[au],n=s.get(i);if(null!=e.materials&&null!=n&&null!=n.materials){const r=e.materials[n.materials];r.occlusionTexture&&0===r.occlusionTexture.texCoord&&null!=t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv)}}}}),r}get correlatedSceneGraph(){return this[jh][au]}[Yh](){const t=super[Yh](),n=new Map;return t.scene.traverse(t=>{if(t.isMesh){const e=t,i=e.material;null!=i&&(n.has(i.uuid)?e.material=n.get(i.uuid):(e.material=i.clone(),n.set(i.uuid,e.material)))}}),t[au]=ru.from(t,this.correlatedSceneGraph),t}}class lu extends Ps{constructor(){super(),this.position.y=-3.5;const t=new Oe,e=(t.deleteAttribute("uv"),new gr({metalness:0,side:1})),i=new gr({metalness:0}),n=new sa(16777215,500,28,2),r=(n.position.set(.418,16.199,.3),this.add(n),new Ne(t,e)),s=(r.position.set(-.757,13.219,.717),r.scale.set(31.713,28.305,28.591),this.add(r),new Ne(t,i)),a=(s.position.set(-10.906,2.009,1.846),s.rotation.set(0,-.195,0),s.scale.set(2.328,7.905,4.651),this.add(s),new Ne(t,i)),o=(a.position.set(-5.607,-.754,-.758),a.rotation.set(0,.994,0),a.scale.set(1.97,1.534,3.955),this.add(a),new Ne(t,i)),l=(o.position.set(6.167,.857,7.803),o.rotation.set(0,.561,0),o.scale.set(3.927,6.285,3.687),this.add(o),new Ne(t,i)),h=(l.position.set(-2.017,.018,6.124),l.rotation.set(0,.333,0),l.scale.set(2.002,4.566,2.064),this.add(l),new Ne(t,i)),c=(h.position.set(2.291,-.756,-2.621),h.rotation.set(0,-.286,0),h.scale.set(1.546,1.552,1.496),this.add(h),new Ne(t,i)),u=(c.position.set(-2.193,-.369,-5.547),c.rotation.set(0,.516,0),c.scale.set(3.875,3.487,2.986),this.add(c),new Ne(t,this.createAreaLightMaterial(50))),d=(u.position.set(-16.116,14.37,8.208),u.scale.set(.1,2.428,2.739),this.add(u),new Ne(t,this.createAreaLightMaterial(50))),p=(d.position.set(-16.109,18.021,-8.207),d.scale.set(.1,2.425,2.751),this.add(d),new Ne(t,this.createAreaLightMaterial(17))),f=(p.position.set(14.904,12.198,-1.832),p.scale.set(.15,4.265,6.331),this.add(p),new Ne(t,this.createAreaLightMaterial(43))),m=(f.position.set(-.462,8.89,14.52),f.scale.set(4.38,5.441,.088),this.add(f),new Ne(t,this.createAreaLightMaterial(20))),g=(m.position.set(3.235,11.486,-12.541),m.scale.set(2.5,2,.1),this.add(m),new Ne(t,this.createAreaLightMaterial(100)));g.position.set(0,20,0),g.scale.set(1,.1,1),this.add(g)}createAreaLightMaterial(t){const e=new ae;return e.color.setScalar(t),e}}class cu extends Ps{constructor(){super(),this.position.y=-3.5;const t=new Oe,e=(t.deleteAttribute("uv"),new gr({metalness:0,side:1})),i=new gr({metalness:0}),n=new sa(16777215,400,28,2),r=(n.position.set(.5,14,.5),this.add(n),new Ne(t,e)),s=(r.position.set(0,13.2,0),r.scale.set(31.5,28.5,31.5),this.add(r),new Ne(t,i)),a=(s.position.set(-10.906,-1,1.846),s.rotation.set(0,-.195,0),s.scale.set(2.328,7.905,4.651),this.add(s),new Ne(t,i)),o=(a.position.set(-5.607,-.754,-.758),a.rotation.set(0,.994,0),a.scale.set(1.97,1.534,3.955),this.add(a),new Ne(t,i)),l=(o.position.set(6.167,-.16,7.803),o.rotation.set(0,.561,0),o.scale.set(3.927,6.285,3.687),this.add(o),new Ne(t,i)),h=(l.position.set(-2.017,.018,6.124),l.rotation.set(0,.333,0),l.scale.set(2.002,4.566,2.064),this.add(l),new Ne(t,i)),c=(h.position.set(2.291,-.756,-2.621),h.rotation.set(0,-.286,0),h.scale.set(1.546,1.552,1.496),this.add(h),new Ne(t,i)),u=(c.position.set(-2.193,-.369,-5.547),c.rotation.set(0,.516,0),c.scale.set(3.875,3.487,2.986),this.add(c),new Ne(t,this.createAreaLightMaterial(80))),d=(u.position.set(-14,10,8),u.scale.set(.1,2.5,2.5),this.add(u),new Ne(t,this.createAreaLightMaterial(80))),p=(d.position.set(-14,14,-4),d.scale.set(.1,2.5,2.5),this.add(d),new Ne(t,this.createAreaLightMaterial(23))),f=(p.position.set(14,12,0),p.scale.set(.1,5,5),this.add(p),new Ne(t,this.createAreaLightMaterial(16))),m=(f.position.set(0,9,14),f.scale.set(5,5,.1),this.add(f),new Ne(t,this.createAreaLightMaterial(80))),g=(m.position.set(7,8,-14),m.scale.set(2.5,2.5,.1),this.add(m),new Ne(t,this.createAreaLightMaterial(80))),A=(g.position.set(-7,16,-14),g.scale.set(2.5,2.5,.1),this.add(g),new Ne(t,this.createAreaLightMaterial(1)));A.position.set(0,20,0),A.scale.set(.1,.1,.1),this.add(A)}createAreaLightMaterial(t){const e=new ae;return e.color.setScalar(t),e}}const hu=/\.hdr(\.js)?$/,uu=new qr,du=new class extends Wr{constructor(t){super(t),this.type=1016}parse(n){const p=function(t,e){switch(t){case 1:console.error("THREE.RGBELoader Read Error: "+(e||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(e||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(e||""));break;default:console.error("THREE.RGBELoader: Error: "+(e||""))}return-1},l=function(t,e,i){e=e||1024;let n=t.pos,r=-1,s=0,a="",o=String.fromCharCode.apply(null,new Uint16Array(t.subarray(n,n+128)));for(;(r=o.indexOf("\n"))<0&&s<e&&n<t.byteLength;)a+=o,s+=o.length,n+=128,o+=String.fromCharCode.apply(null,new Uint16Array(t.subarray(n,n+128)));return-1<r&&(!1!==i&&(t.pos+=s+r+1),a+o.slice(0,r))},t=new Uint8Array(n);t.pos=0;var r,s,a,o,h,c,u,d,f,m,g=function(t){const e=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,i=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,n=/^\s*FORMAT=(\S+)\s*$/,r=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,s={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let a,o;if(t.pos>=t.byteLength||!(a=l(t)))return p(1,"no header found");if(!(o=a.match(/^#\?(\S+)/)))return p(3,"bad initial token");for(s.valid|=1,s.programtype=o[1],s.string+=a+"\n";!1!==(a=l(t));)if(s.string+=a+"\n","#"!==a.charAt(0)){if((o=a.match(e))&&(s.gamma=parseFloat(o[1])),(o=a.match(i))&&(s.exposure=parseFloat(o[1])),(o=a.match(n))&&(s.valid|=2,s.format=o[1]),(o=a.match(r))&&(s.valid|=4,s.height=parseInt(o[1],10),s.width=parseInt(o[2],10)),2&s.valid&&4&s.valid)break}else s.comments+=a+"\n";return 2&s.valid?4&s.valid?s:p(3,"missing image size specifier"):p(3,"missing format specifier")}(t);if(-1!==g){const n=g.width,l=g.height,A=function(t,e,i){const n=e;if(n<8||32767<n||2!==t[0]||2!==t[1]||128&t[2])return new Uint8Array(t);if(n!==(t[2]<<8|t[3]))return p(3,"wrong scanline width");const r=new Uint8Array(4*e*i);if(!r.length)return p(4,"unable to allocate buffer space");let s=0,a=0;const o=4*n,l=new Uint8Array(4),h=new Uint8Array(o);let c=i;for(;0<c&&a<t.byteLength;){if(a+4>t.byteLength)return p(1);if(l[0]=t[a++],l[1]=t[a++],l[2]=t[a++],l[3]=t[a++],2!=l[0]||2!=l[1]||(l[2]<<8|l[3])!=n)return p(3,"bad rgbe scanline format");let e,i=0;for(;i<o&&a<t.byteLength;){const n=128<(e=t[a++]);if(n&&(e-=128),0===e||i+e>o)return p(3,"bad scanline data");if(n){const p=t[a++];for(let t=0;t<e;t++)h[i++]=p}else h.set(t.subarray(a,a+e),i),i+=e,a+=e}var u=n;for(let t=0;t<u;t++){var d=0;r[s]=h[t+0],d+=n,r[s+1]=h[t+d],d+=n,r[s+2]=h[t+d],d+=n,r[s+3]=h[t+d],s+=4}c--}return r}(t.subarray(t.pos),n,l);if(-1!==A){let t,e,i;switch(this.type){case 1015:i=A.length/4;const n=new Float32Array(4*i);for(let t=0;t<i;t++)c=A,u=4*t,d=n,f=4*t,m=void 0,m=c[u+3],m=Math.pow(2,m-128)/255,d[f+0]=c[u+0]*m,d[f+1]=c[u+1]*m,d[f+2]=c[u+2]*m,d[f+3]=1;t=n,e=1015;break;case 1016:i=A.length/4;const l=new Uint16Array(4*i);for(let t=0;t<i;t++)r=A,s=4*t,a=l,o=4*t,h=void 0,h=r[s+3],h=Math.pow(2,h-128)/255,a[o+0]=Ia.toHalfFloat(Math.min(r[s+0]*h,65504)),a[o+1]=Ia.toHalfFloat(Math.min(r[s+1]*h,65504)),a[o+2]=Ia.toHalfFloat(Math.min(r[s+2]*h,65504)),a[o+3]=Ia.toHalfFloat(1);t=l,e=1016;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:n,height:l,data:t,header:g.string,gamma:g.gamma,exposure:g.exposure,type:e}}}return null}setDataType(t){return this.type=t,this}load(t,i,e,n){return super.load(t,function(t,e){switch(t.type){case 1015:case 1016:t.encoding=3e3,t.minFilter=1006,t.magFilter=1006,t.generateMipmaps=!1,t.flipY=!0}i&&i(t,e)},e,n)}};du.setDataType(1016);class Au extends n{constructor(t){super(),this.threeRenderer=t,this.generatedEnvironmentMap=null,this.generatedEnvironmentMapAlt=null,this.skyboxCache=new Map,this.blurMaterial=null,this.blurScene=null}async load(i,n=()=>{}){try{const t=hu.test(i),r=t?du:uu,e=await new Promise((t,e)=>r.load(i,t,t=>{n(t.loaded/t.total*.9)},e));return n(1),e.name=i,e.mapping=303,t||(e.encoding=3001),e}finally{n&&n(1)}}async generateEnvironmentMapAndSkybox(t=null,e=null,i=()=>{}){var n="legacy"!==e;"legacy"!==e&&"neutral"!==e||(e=null),e=Oo(e);let r,s=Promise.resolve(null);t&&(s=this.loadEquirectFromUrl(t,i)),r=e?this.loadEquirectFromUrl(e,i):t?this.loadEquirectFromUrl(t,i):n?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap();var[e,t]=await Promise.all([r,s]);if(null==e)throw new Error("Failed to load environment map.");return{environmentMap:e,skybox:t}}async loadEquirectFromUrl(t,e){return this.skyboxCache.has(t)||(e=this.load(t,e),this.skyboxCache.set(t,e)),this.skyboxCache.get(t)}async GenerateEnvironmentMap(t,e){await new Promise(t=>setTimeout(t,0));const i=this.threeRenderer,n=new Je(256,{generateMipmaps:!1,type:1016,format:1023,encoding:3e3,depthBuffer:!0}),r=new je(.1,100,n),s=r.renderTarget.texture;s.name=e;var e=i.outputEncoding,a=i.toneMapping;return i.toneMapping=0,i.outputEncoding=3e3,r.update(i,t),this.blurCubemap(n,.04),i.toneMapping=a,i.outputEncoding=e,s}async loadGeneratedEnvironmentMap(){return null==this.generatedEnvironmentMap&&(this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new lu,"legacy")),this.generatedEnvironmentMap}async loadGeneratedEnvironmentMapAlt(){return null==this.generatedEnvironmentMapAlt&&(this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new cu,"neutral")),this.generatedEnvironmentMapAlt}blurCubemap(t,e){if(null==this.blurMaterial){this.blurMaterial=this.getBlurShader(20);const t=new Oe,e=new Ne(t,this.blurMaterial);this.blurScene=new Ps,this.blurScene.add(e)}var i=t.clone();this.halfblur(t,i,e,"latitudinal"),this.halfblur(i,t,e,"longitudinal")}halfblur(t,e,i,n){var r=t.width,r=isFinite(i)?Math.PI/(2*r):2*Math.PI/39,s=i/r,a=isFinite(i)?1+Math.floor(3*s):20;20<a&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${a} samples when the maximum is set to 20`);const o=[];let l=0;for(let t=0;t<20;++t){const e=t/s,i=Math.exp(-e*e/2);o.push(i),0==t?l+=i:t<a&&(l+=2*i)}for(let t=0;t<o.length;t++)o[t]=o[t]/l;const h=this.blurMaterial.uniforms;h.envMap.value=t.texture,h.samples.value=a,h.weights.value=o,h.latitudinal.value="latitudinal"===n,h.dTheta.value=r,new je(.1,100,e).update(this.threeRenderer,this.blurScene)}getBlurShader(t){var e=new Float32Array(t),i=new V(0,1,0);return new Ve({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:i}},vertexShader:"\n      \n      varying vec3 vOutputDirection;\n  \n      void main() {\n  \n        vOutputDirection = vec3( position );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  \n      }\n    ",fragmentShader:"\n        varying vec3 vOutputDirection;\n  \n        uniform samplerCube envMap;\n        uniform int samples;\n        uniform float weights[ n ];\n        uniform bool latitudinal;\n        uniform float dTheta;\n        uniform vec3 poleAxis;\n  \n        vec3 getSample( float theta, vec3 axis ) {\n  \n          float cosTheta = cos( theta );\n          // Rodrigues' axis-angle rotation\n          vec3 sampleDirection = vOutputDirection * cosTheta\n            + cross( axis, vOutputDirection ) * sin( theta )\n            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n  \n          return vec3( textureCube( envMap, sampleDirection ) );\n  \n        }\n  \n        void main() {\n  \n          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n  \n          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n  \n            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n  \n          }\n  \n          axis = normalize( axis );\n  \n          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n  \n          for ( int i = 1; i < n; i++ ) {\n  \n            if ( i >= samples ) {\n  \n              break;\n  \n            }\n  \n            float theta = dTheta * float( i );\n            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n  \n          }\n        }\n      ",blending:0,depthTest:!1,depthWrite:!1,side:1})}async dispose(){for(var[,t]of this.skyboxCache)(await t).dispose();null!=this.generatedEnvironmentMap&&((await this.generatedEnvironmentMap).dispose(),this.generatedEnvironmentMap=null),null!=this.generatedEnvironmentMapAlt&&((await this.generatedEnvironmentMapAlt).dispose(),this.generatedEnvironmentMapAlt=null),null!=this.blurMaterial&&this.blurMaterial.dispose()}}const pu=[1,.79,.62,.5,.4,.31,.25];class gu extends n{constructor(t){super(),this.loader=new Vc(ou),this.width=0,this.height=0,this.dpr=1,this.debugger=null,this.scenes=new Set,this.multipleScenesVisible=!1,this.lastTick=performance.now(),this.renderedLastFrame=!1,this.scaleStep=0,this.lastStep=3,this.avgFrameDuration=50,this.onWebGLContextLost=t=>{this.dispatchEvent({type:"contextlost",sourceEvent:t})},this.onWebGLContextRestored=()=>{var t;null!=(t=this.textureUtils)&&t.dispose(),this.textureUtils=new Au(this.threeRenderer);for(const t of this.scenes)t.element[Xo]()},this.dpr=Wo(),this.canvas3D=document.createElement("canvas"),this.canvas3D.id="webgl-canvas",this.canvas3D.classList.add("show");try{this.threeRenderer=new Qs({canvas:this.canvas3D,alpha:!0,antialias:!0,powerPreference:t.powerPreference,preserveDrawingBuffer:!0}),this.threeRenderer.autoClear=!0,this.threeRenderer.outputEncoding=3001,this.threeRenderer.physicallyCorrectLights=!0,this.threeRenderer.setPixelRatio(1),this.debugger=t.debug?new Hh(this):null,this.threeRenderer.debug={checkShaderErrors:!!this.debugger},this.threeRenderer.toneMapping=4}catch(t){console.warn(t)}this.arRenderer=new Gh(this),this.textureUtils=this.canRender?new Au(this.threeRenderer):null,Vc.initializeKTX2Loader(this.threeRenderer),this.canvas3D.addEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.addEventListener("webglcontextrestored",this.onWebGLContextRestored),this.updateRendererSize()}static get singleton(){return this._singleton}static resetSingleton(){var t=this._singleton.dispose();for(const e of t)e.disconnectedCallback();this._singleton=new gu({powerPreference:(self.ModelViewerElement||{}).powerPreference||"high-performance",debug:qo()});for(const i of t)i.connectedCallback()}get canRender(){return null!=this.threeRenderer}get scaleFactor(){return pu[this.scaleStep]}set minScale(t){let e=1;for(;e<pu.length&&!(pu[e]<t);)++e;this.lastStep=e-1}registerScene(t){this.scenes.add(t),t.forceRescale();var e=new v;this.threeRenderer.getSize(e),t.canvas.width=e.x,t.canvas.height=e.y,this.canRender&&0<this.scenes.size&&this.threeRenderer.setAnimationLoop((t,e)=>this.render(t,e)),null!=this.debugger&&this.debugger.addScene(t)}unregisterScene(t){this.scenes.delete(t),this.canvas3D.parentElement===t.canvas.parentElement&&t.canvas.parentElement.removeChild(this.canvas3D),this.canRender&&0===this.scenes.size&&this.threeRenderer.setAnimationLoop(null),null!=this.debugger&&this.debugger.removeScene(t)}displayCanvas(t){return this.multipleScenesVisible?t.element[td]:this.canvas3D}countVisibleScenes(){const t=this["canvas3D"];let e=0,i=null;for(const r of this.scenes){var n=r["element"];n.modelIsVisible&&null==r.externalRenderer&&++e,t.parentElement===r.canvas.parentElement&&(i=r)}const r=1<e;if(null!=i){const e=r&&!this.multipleScenesVisible,s=!i.element.modelIsVisible;if(e||s){const{width:e,height:r}=this.sceneSize(i);this.copyPixels(i,e,r),t.parentElement.removeChild(t)}}this.multipleScenesVisible=r}updateRendererSize(){const t=Wo();if(t!==this.dpr)for(const t of this.scenes){const e=t["element"];e[Gu](e.getBoundingClientRect())}let e=0,i=0;for(const t of this.scenes)e=Math.max(e,t.width),i=Math.max(i,t.height);if(e!==this.width||i!==this.height||t!==this.dpr){this.width=e,this.height=i,this.dpr=t,e=Math.ceil(e*t),i=Math.ceil(i*t),this.canRender&&this.threeRenderer.setSize(e,i,!1);for(const t of this.scenes){const n=t["canvas"];n.width=e,n.height=i,t.forceRescale()}}}updateRendererScale(t){var e=this.scaleStep;this.avgFrameDuration+=Vo(.2*(t-this.avgFrameDuration),-5,5),60<this.avgFrameDuration?++this.scaleStep:this.avgFrameDuration<40&&0<this.scaleStep&&--this.scaleStep,this.scaleStep=Math.min(this.scaleStep,this.lastStep),e!==this.scaleStep&&(this.avgFrameDuration=50)}shouldRender(t){if(t.shouldRender())t.scaleStep!=this.scaleStep&&(t.scaleStep=this.scaleStep,this.rescaleCanvas(t));else{if(0==t.scaleStep)return!1;t.scaleStep=0,this.rescaleCanvas(t)}return!0}rescaleCanvas(t){const e=pu[t.scaleStep],i=Math.ceil(this.width/e),n=Math.ceil(this.height/e),r=t.canvas["style"];r.width=i+"px",r.height=n+"px",this.canvas3D.style.width=i+"px",this.canvas3D.style.height=n+"px";var s=this.dpr*e,a=e<1?"GPU throttling":this.dpr!==window.devicePixelRatio?"No meta viewport tag":"";t.element.dispatchEvent(new CustomEvent("render-scale",{detail:{reportedDpr:window.devicePixelRatio,renderedDpr:s,minimumDpr:this.dpr*pu[this.lastStep],pixelWidth:Math.ceil(t.width*s),pixelHeight:Math.ceil(t.height*s),reason:a}}))}sceneSize(t){var e=this["dpr"],i=pu[t.scaleStep];return{width:Math.min(Math.ceil(t.width*i*e),this.canvas3D.width),height:Math.min(Math.ceil(t.height*i*e),this.canvas3D.height)}}copyPixels(t,e,i){null==t.context&&t.createContext();const n=t.context;n.clearRect(0,0,e,i),n.drawImage(this.canvas3D,0,0,e,i,0,0,e,i),t.canvas.classList.add("show")}orderedScenes(){const t=[];for(const e of[!1,!0])for(const i of this.scenes)i.element.modelIsVisible===e&&t.push(i);return t}get isPresenting(){return this.arRenderer.isPresenting}preRender(t,e,i){const{element:n,exposure:r}=t;n[nd](e,i);t="number"==typeof r&&!Number.isNaN(r);this.threeRenderer.toneMappingExposure=t?r:1}render(t,e){if(null!=e)this.arRenderer.onWebXRFrame(t,e);else{const r=t-this.lastTick;if(this.lastTick=t,this.canRender&&!this.isPresenting){this.countVisibleScenes(),this.updateRendererSize(),this.renderedLastFrame&&(this.updateRendererScale(r),this.renderedLastFrame=!1);const s=this["canvas3D"];for(const e of this.orderedScenes()){var i=e["element"];if(!(!i.loaded||!i.modelIsVisible&&0<e.renderCount)&&(this.preRender(e,t,r),this.shouldRender(e)))if(null!=e.externalRenderer){const t=e.getCamera(),{matrix:r,projectionMatrix:s}=(t.updateMatrix(),t),a=r.elements.slice(),o=e.getTarget();a[12]+=o.x,a[13]+=o.y,a[14]+=o.z,e.externalRenderer.render({viewMatrix:a,projectionMatrix:s.elements})}else{if(!i.modelIsVisible&&!this.multipleScenesVisible)for(const t of this.scenes)t.element.modelIsVisible&&t.queueRender();var{width:i,height:n}=this.sceneSize(e);e.renderShadow(this.threeRenderer),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.ceil(this.height*this.dpr)-n,i,n),this.threeRenderer.render(e,e.camera),this.multipleScenesVisible||0===e.renderCount?this.copyPixels(e,i,n):(e.canvas.parentElement.appendChild(s),e.canvas.classList.remove("show")),e.hasRendered(),++e.renderCount,this.renderedLastFrame=!0}}}}}dispose(){null!=this.textureUtils&&this.textureUtils.dispose(),null!=this.threeRenderer&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null;const t=[];for(const e of this.scenes)t.push(e.element);return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),t}}gu._singleton=new gu({powerPreference:(self.ModelViewerElement||{}).powerPreference||"high-performance",debug:qo()});class mu extends EventTarget{constructor(){super(...arguments),this.ongoingActivities=new Set,this.totalProgress=0}get ongoingActivityCount(){return this.ongoingActivities.size}beginActivity(){const e={progress:0,completed:!1};return this.ongoingActivities.add(e),1===this.ongoingActivityCount&&this.announceTotalProgress(e,0),t=>{t=Math.max(Vo(t,0,1),e.progress);return t!==e.progress&&this.announceTotalProgress(e,t),e.progress}}announceTotalProgress(t,e){let i=0,n=0;1==e&&(t.completed=!0);for(const t of this.ongoingActivities){const e=t["progress"];i+=1-e,!0===t.completed&&n++}var r=t.progress,t=(t.progress=e,this.totalProgress+=(e-r)*(1-this.totalProgress)/i,n===this.ongoingActivityCount?1:this.totalProgress);this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:t}})),n===this.ongoingActivityCount&&(this.totalProgress=0,this.ongoingActivities.clear())}}var fu,vu,yu,xu,_u,Eu,wu,bu,Iu,Cu,Su,Mu,Bu,Tu=function(t,e,i,n){for(var r,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n,o=t.length-1;0<=o;o--)(r=t[o])&&(a=(s<3?r(a):3<s?r(e,i,a):r(e,i))||a);return 3<s&&a&&Object.defineProperty(e,i,a),a};const Ru=document.createElement("canvas"),Du=Symbol("fallbackResizeHandler"),Lu=Symbol("defaultAriaLabel"),Qu=Symbol("resizeObserver"),Pu=Symbol("clearModelTimeout"),Fu=Symbol("onContextLost"),Uu=Symbol("loaded"),Nu=Symbol("status"),ku=Symbol("onFocus"),Ou=Symbol("onBlur"),Gu=Symbol("updateSize"),Hu=Symbol("intersectionObserver"),zu=Symbol("isElementInViewport"),Vu=Symbol("announceModelVisibility"),Wu=Symbol("ariaLabel"),qu=Symbol("altDefaulted"),ju=Symbol("statusElement"),Yu=Symbol("updateStatus"),Ju=Symbol("loadedTime"),Xu=Symbol("updateSource"),Ku=Symbol("markLoaded"),$u=Symbol("container"),Zu=Symbol("input"),td=Symbol("canvas"),ed=Symbol("scene"),id=Symbol("needsRender"),nd=Symbol("tick"),sd=Symbol("onModelLoad"),rd=Symbol("onResize"),ad=Symbol("renderer"),od=Symbol("progressTracker"),ld=Symbol("getLoaded"),cd=Symbol("getModelIsVisible"),hd=Symbol("shouldAttemptPreload"),ud=t=>({x:t.x,y:t.y,z:t.z,toString(){return`${this.x}m ${this.y}m ${this.z}m`}}),dd=t=>({u:t.x,v:t.y,toString(){return this.u+" "+this.v}});class Ad extends Oa{constructor(){super(),this.alt=null,this.src=null,this.withCredentials=!1,this.generateSchema=!1,this[fu]=!1,this[vu]=!1,this[yu]=0,this[xu]="",this[_u]=null,this[Eu]=zo(()=>{var t=this.getBoundingClientRect();this[Gu](t)},50),this[wu]=zo(t=>{var e=this.modelIsVisible;e!==t&&this.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:e}}))},0),this[bu]=null,this[Iu]=null,this[Cu]=new mu,this[Su]=()=>{this[ju].textContent=this[Nu]},this[Mu]=()=>{this[ju].textContent=""},this[Bu]=t=>{this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:t.sourceEvent}}))},this.attachShadow({mode:"open"});const t=this.shadowRoot;let e,i;if(n=t,co($o,n),this[$u]=t.querySelector(".container"),this[Zu]=t.querySelector(".userInput"),this[td]=t.querySelector("canvas"),this[ju]=t.querySelector("#status"),this[Lu]=this[Zu].getAttribute("aria-label"),this.isConnected){const t=this.getBoundingClientRect();e=t.width,i=t.height}else e=300,i=150;var n;this[ed]=new bh({canvas:this[td],element:this,width:e,height:i}),Promise.resolve().then(()=>{this[Gu](this.getBoundingClientRect())}),To&&(this[Qu]=new ResizeObserver(t=>{if(!this[ad].isPresenting)for(var e of t)e.target===this&&this[Gu](e.contentRect)})),Ro?this[Hu]=new IntersectionObserver(t=>{for(var e of t)if(e.target===this){const t=this.modelIsVisible;this[zu]=e.isIntersecting,this[Vu](t),this[zu]&&!this.loaded&&this[Xu]()}},{root:null,rootMargin:"0px",threshold:1e-5}):this[zu]=!0}static get is(){return"model-viewer"}static set modelCacheSize(t){Vc[Hc].evictionThreshold=t}static get modelCacheSize(){return Vc[Hc].evictionThreshold}static set minimumRenderScale(t){1<t&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),t<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."),gu.singleton.minScale=t}static get minimumRenderScale(){return gu.singleton.minScale}get loaded(){return this[ld]()}get[(fu=zu,vu=Uu,yu=Ju,xu=Nu,_u=Pu,Eu=Du,wu=Vu,bu=Qu,Iu=Hu,Cu=od,ad)](){return gu.singleton}get modelIsVisible(){return this[cd]()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),To?this[Qu].observe(this):self.addEventListener("resize",this[Du]),Ro&&this[Hu].observe(this),this.addEventListener("focus",this[ku]),this.addEventListener("blur",this[Ou]);const t=this[ad];t.addEventListener("contextlost",this[Fu]),t.registerScene(this[ed]),null!=this[Pu]&&(self.clearTimeout(this[Pu]),this[Pu]=null,this.requestUpdate("src",null))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),To?this[Qu].unobserve(this):self.removeEventListener("resize",this[Du]),Ro&&this[Hu].unobserve(this),this.removeEventListener("focus",this[ku]),this.removeEventListener("blur",this[Ou]);const t=this[ad];t.removeEventListener("contextlost",this[Fu]),t.unregisterScene(this[ed]),this[Pu]=self.setTimeout(()=>{this[ed].reset()},1e3)}updated(t){super.updated(t),t.has("src")&&(null==this.src?(this[Uu]=!1,this[Ju]=0,this[ed].reset()):this.src!==this[ed].url&&(this[Uu]=!1,this[Ju]=0,this[Xu]())),t.has("alt")&&this[Zu].setAttribute("aria-label",this[Wu]),t.has("withCredentials")&&(Vc.withCredentials=this.withCredentials),t.has("generateSchema")&&(this.generateSchema?this[ed].updateSchema(this.src):this[ed].updateSchema(null))}toDataURL(t,e){return this[ad].displayCanvas(this[ed]).toDataURL(t,e)}async toBlob(t){const n=t?t.mimeType:void 0,r=t?t.qualityArgument:void 0,e=t?t.idealAspect:void 0,{width:i,height:s,idealAspect:a,aspect:o}=this[ed],{dpr:l,scaleFactor:h}=this[ad];let c=i*h*l,u=s*h*l,d=0,p=0;if(!0===e)if(o<a){const t=u;u=Math.round(c/a),p=(t-u)/2}else{const t=c;c=Math.round(u*a),d=(t-c)/2}Ru.width=c,Ru.height=u;try{return new Promise(async(e,i)=>(Ru.getContext("2d").drawImage(this[ad].displayCanvas(this[ed]),d,p,c,u,0,0,c,u),!Ru.msToBlob||n&&"image/png"!==n?Ru.toBlob?void Ru.toBlob(t=>{if(!t)return i(new Error("Unable to retrieve canvas blob"));e(t)},n,r):e(await(async o=>new Promise((e,i)=>{const n=o.match(/data:(.*);/);if(!n)return i(new Error(o+" is not a valid data Url"));const t=n[1],r=o.replace(/data:image\/\w+;base64,/,""),s=atob(r),a=[];for(let t=0;t<s.length;t+=512){const e=s.slice(t,t+512),i=new Array(e.length);for(let t=0;t<e.length;t++)i[t]=e.charCodeAt(t);const n=new Uint8Array(i);a.push(n)}e(new Blob(a,{type:t}))}))(Ru.toDataURL(n,r))):e(Ru.msToBlob())))}finally{this[Gu]({width:i,height:s})}}registerRenderer(t){this[ed].externalRenderer=t}unregisterRenderer(){this[ed].externalRenderer=null}get[Wu](){return this[qu]}get[qu](){return null==this.alt||"null"===this.alt?this[Lu]:this.alt}[ld](){return this[Uu]}[cd](){return this.loaded&&this[zu]}[hd](){return!!this.src&&this[zu]}[Gu]({width:t,height:e}){this[$u].style.width=t+"px",this[$u].style.height=e+"px",this[rd]({width:parseFloat(t),height:parseFloat(e)})}[nd](t,e){}[Ku](){this[Uu]||(this[Uu]=!0,this[Ju]=performance.now())}[id](){this[ed].queueRender()}[sd](){}[Yu](t){this[Nu]=t;var e=this.getRootNode();null!=e&&e.activeElement===this&&this[ju].textContent!=t&&(this[ju].textContent=t)}[(Su=ku,Mu=Ou,rd)](t){this[ed].setSize(t.width,t.height)}async[(Bu=Fu,Xu)](){const t=this[ed];if(!this.loaded&&this[hd]()&&this.src!==t.url){this.generateSchema&&t.updateSchema(this.src),this[Yu]("Loading"),t.stopAnimation();const n=this[od].beginActivity(),r=this.src;try{var e=t.setSource(r,t=>n(.95*Vo(t,0,1))),i=this[Xo]();await Promise.all([e,i]),this[Ku](),this[sd](),await new Promise(t=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.dispatchEvent(new CustomEvent("load",{detail:{url:r}})),t()})})})}catch(t){this.dispatchEvent(new CustomEvent("error",{detail:{type:"loadfailure",sourceError:t}}))}finally{n(1)}}}}Tu([e({type:String})],Ad.prototype,"alt",void 0),Tu([e({type:String})],Ad.prototype,"src",void 0),Tu([e({type:Boolean,attribute:"with-credentials"})],Ad.prototype,"withCredentials",void 0),Tu([e({type:Boolean,attribute:"generate-schema"})],Ad.prototype,"generateSchema",void 0);var pd=function(t,e,i,n){for(var r,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n,o=t.length-1;0<=o;o--)(r=t[o])&&(a=(s<3?r(a):3<s?r(e,i,a):r(e,i))||a);return 3<s&&a&&Object.defineProperty(e,i,a),a};const gd=Symbol("changeAnimation"),md=Symbol("paused"),fd={repetitions:1/0,pingpong:!1},vd=Symbol("hotspotMap"),yd=Symbol("mutationCallback"),xd=Symbol("observer"),_d=Symbol("addHotspot"),Ed=Symbol("removeHotspot"),wd=new _t,bd=new y;var Id=function(t){return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};try{URL.revokeObjectURL(Id(""))}catch(Va){Id=function(t){return"data:application/javascript;charset=UTF-8,"+encodeURI(t)}}var Cd=Uint8Array,Sd=Uint16Array,Md=Uint32Array,Bd=new Cd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Td=new Cd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Rd=new Cd([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Dd=function(t,e){for(var i=new Sd(31),n=0;n<31;++n)i[n]=e+=1<<t[n-1];for(var r=new Md(i[30]),n=1;n<30;++n)for(var s=i[n];s<i[n+1];++s)r[s]=s-i[n]<<5|n;return[i,r]},Ld=Dd(Bd,2),Qd=Ld[0],Pd=Ld[1];Qd[28]=258,Pd[258]=28;for(var Fd=Dd(Td,0)[1],Ud=new Sd(32768),Nd=0;Nd<32768;++Nd){var kd=(61680&(kd=(52428&(kd=(43690&Nd)>>>1|(21845&Nd)<<1))>>>2|(13107&kd)<<2))>>>4|(3855&kd)<<4;Ud[Nd]=((65280&kd)>>>8|(255&kd)<<8)>>>1}for(var Od=function(t,e,i){for(var n=t.length,r=0,s=new Sd(e);r<n;++r)++s[t[r]-1];var a=new Sd(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;if(i){for(var o=new Sd(1<<e),l=15-e,r=0;r<n;++r)if(t[r])for(var h=r<<4|t[r],c=e-t[r],u=a[t[r]-1]++<<c,d=u|(1<<c)-1;u<=d;++u)o[Ud[u]>>>l]=h}else for(o=new Sd(n),r=0;r<n;++r)t[r]&&(o[r]=Ud[a[t[r]-1]++]>>>15-t[r]);return o},Gd=new Cd(288),Nd=0;Nd<144;++Nd)Gd[Nd]=8;for(Nd=144;Nd<256;++Nd)Gd[Nd]=9;for(Nd=256;Nd<280;++Nd)Gd[Nd]=7;for(Nd=280;Nd<288;++Nd)Gd[Nd]=8;var Hd=new Cd(32);for(Nd=0;Nd<32;++Nd)Hd[Nd]=5;var zd=Od(Gd,9,0),Vd=Od(Hd,5,0),Wd=function(t){return(t/8|0)+(7&t&&1)},qd=function(t,e,i){(null==i||i>t.length)&&(i=t.length);var n=new(t instanceof Sd?Sd:t instanceof Md?Md:Cd)(i-(e=null==e||e<0?0:e));return n.set(t.subarray(e,i)),n},jd=function(t,e,i){var n=e/8|0;t[n]|=i<<=7&e,t[1+n]|=i>>>8},Yd=function(t,e,i){var n=e/8|0;t[n]|=i<<=7&e,t[1+n]|=i>>>8,t[2+n]|=i>>>16},Jd=function(t,e){for(var i=[],n=0;n<t.length;++n)t[n]&&i.push({s:n,f:t[n]});var r=i.length,s=i.slice();if(!r)return[iA,0];if(1==r)return(m=new Cd(i[0].s+1))[i[0].s]=1,[m,1];i.sort(function(t,e){return t.f-e.f}),i.push({s:-1,f:25001});var a=i[0],o=i[1],l=0,h=1,c=2;for(i[0]={s:-1,f:a.f+o.f,l:a,r:o};h!=r-1;)a=i[i[l].f<i[c].f?l++:c++],o=i[l!=h&&i[l].f<i[c].f?l++:c++],i[h++]={s:-1,f:a.f+o.f,l:a,r:o};var u=s[0].s;for(n=1;n<r;++n)s[n].s>u&&(u=s[n].s);var d=new Sd(u+1),p=Xd(i[h-1],d,0);if(e<p){var n=0,f=0,m=p-e,g=1<<m;for(s.sort(function(t,e){return d[e.s]-d[t.s]||t.f-e.f});n<r;++n){var A=s[n].s;if(!(d[A]>e))break;f+=g-(1<<p-d[A]),d[A]=e}for(f>>>=m;0<f;){var v=s[n].s;d[v]<e?f-=1<<e-d[v]++-1:++n}for(;0<=n&&f;--n){var y=s[n].s;d[y]==e&&(--d[y],++f)}p=e}return[new Cd(d),p]},Xd=function(t,e,i){return-1==t.s?Math.max(Xd(t.l,e,i+1),Xd(t.r,e,i+1)):e[t.s]=i},Kd=function(t){for(var e=t.length;e&&!t[--e];);function i(t){n[r++]=t}for(var n=new Sd(++e),r=0,s=t[0],a=1,o=1;o<=e;++o)if(t[o]==s&&o!=e)++a;else{if(!s&&2<a){for(;138<a;a-=138)i(32754);2<a&&(i(10<a?a-11<<5|28690:a-3<<5|12305),a=0)}else if(3<a){for(i(s),--a;6<a;a-=6)i(8304);2<a&&(i(a-3<<5|8208),a=0)}for(;a--;)i(s);a=1,s=t[o]}return[n.subarray(0,r),e]},$d=function(t,e){for(var i=0,n=0;n<e.length;++n)i+=t[n]*e[n];return i},Zd=function(t,e,i){var n=i.length,r=Wd(e+2);t[r]=255&n,t[r+1]=n>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<n;++s)t[r+s+4]=i[s];return 8*(r+4+n)},tA=function(t,e,i,n,r,s,a,o,l,h,c){jd(e,c++,i),++r[256];for(var i=Jd(r,15),u=i[0],i=i[1],d=Jd(s,15),p=d[0],d=d[1],f=Kd(u),m=f[0],f=f[1],g=Kd(p),A=g[0],g=g[1],v=new Sd(19),y=0;y<m.length;++y)v[31&m[y]]++;for(y=0;y<A.length;++y)v[31&A[y]]++;for(var _=Jd(v,7),b=_[0],_=_[1],x=19;4<x&&!b[Rd[x-1]];--x);var S,w=h+5<<3,E=$d(r,Gd)+$d(s,Hd)+a,r=$d(r,u)+$d(s,p)+a+14+3*x+$d(v,b)+(2*v[16]+3*v[17]+7*v[18]);if(w<=E&&w<=r)return Zd(e,c,t.subarray(l,l+h));if(jd(e,c,1+(r<E)),c+=2,r<E){var C=Od(u,i,0),T=u,M=Od(p,d,0),I=p,B=Od(b,_,0);for(jd(e,c,f-257),jd(e,c+5,g-1),jd(e,c+10,x-4),c+=14,y=0;y<x;++y)jd(e,c+3*y,b[Rd[y]]);c+=3*x;for(var D=[m,A],P=0;P<2;++P)for(var L=D[P],y=0;y<L.length;++y){var R=31&L[y];jd(e,c,B[R]),c+=b[R],15<R&&(jd(e,c,L[y]>>>5&127),c+=L[y]>>>12)}}else C=zd,T=Gd,M=Vd,I=Hd;for(y=0;y<o;++y)255<n[y]?(R=n[y]>>>18&31,Yd(e,c,C[R+257]),c+=T[R+257],7<R&&(jd(e,c,n[y]>>>23&31),c+=Bd[R]),S=31&n[y],Yd(e,c,M[S]),c+=I[S],3<S&&(Yd(e,c,n[y]>>>5&8191),c+=Td[S])):(Yd(e,c,C[n[y]]),c+=T[n[y]]);return Yd(e,c,C[256]),c+T[256]},eA=new Md([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),iA=new Cd(0),nA=function(){for(var t=new Md(256),e=0;e<256;++e){for(var i=e,n=9;--n;)i=(1&i&&3988292384)^i>>>1;t[e]=i}return t}(),sA=function(){var n=-1;return{p:function(t){for(var e=n,i=0;i<t.length;++i)e=nA[255&e^t[i]]^e>>>8;n=e},d:function(){return~n}}},rA=function(t,e,i,n,N){var r=t,s=null==e.level?6:e.level,t=null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,e=i,i=n,a=!N,o=r.length,n=new Cd(e+o+5*(1+Math.ceil(o/7e3))+i),l=n.subarray(e,n.length-i),h=0;if(!s||o<8)for(var c=0;c<=o;c+=65535)var u=c+65535,h=u<o?Zd(l,h,r.subarray(c,u)):(l[c]=a,Zd(l,h,r.subarray(c,o)));else{function d(t){return(r[t]^r[t+1]<<g^r[t+2]<<O)&p}for(var s=eA[s-1],Q=s>>>13,F=8191&s,p=(1<<t)-1,f=new Sd(32768),m=new Sd(p+1),g=Math.ceil(t/3),O=2*g,A=new Md(25e3),v=new Sd(288),y=new Sd(32),_=0,b=0,x=c=0,S=0,w=0;c<o;++c){var E=d(c),C=32767&c,T=m[E];if(f[C]=T,m[E]=C,S<=c){var M=o-c;if((7e3<_||24576<x)&&423<M){h=tA(r,l,0,A,v,y,b,x,w,c-w,h);for(var x=_=b=0,w=c,I=0;I<286;++I)v[I]=0;for(I=0;I<30;++I)y[I]=0}var B=2,D=0,G=F,P=C-T&32767;if(2<M&&E==d(c-P))for(var U=Math.min(Q,M)-1,H=Math.min(32767,c),V=Math.min(258,M);P<=H&&--G&&C!=T;){if(r[c+B]==r[c+B-P]){for(var L=0;L<V&&r[c+L]==r[c+L-P];++L);if(B<L){if(D=P,U<(B=L))break;for(var z=Math.min(P,L-2),R=0,I=0;I<z;++I){var k=c-P+I+32768&32767,W=k-f[k]+32768&32767;R<W&&(R=W,T=k)}}}P+=(C=T)-(T=f[C])+32768&32767}D?(A[x++]=268435456|Pd[B]<<18|Fd[D],E=31&Pd[B],M=31&Fd[D],b+=Bd[E]+Td[M],++v[257+E],++y[M],S=c+B,++_):(A[x++]=r[c],++v[r[c]])}}h=tA(r,l,a,A,v,y,b,x,w,c-w,h),!a&&7&h&&(h=Zd(l,h+1,iA))}return qd(n,0,e+Wd(h)+i)},aA=function(t,e){var i,n={};for(i in t)n[i]=t[i];for(i in e)n[i]=e[i];return n},oA=function(t,e,i){for(;i;++e)t[e]=i,i>>>=8};function lA(t,e){return rA(t,e||{},0,0)}var cA=function(t,e,i,n){for(var r in t){var s=t[r],r=e+r;s instanceof Cd?i[r]=[s,n]:Array.isArray(s)?i[r]=[s[0],aA(n,s[1])]:cA(s,r+"/",i,n)}},hA="undefined"!=typeof TextEncoder&&new TextEncoder,uA="undefined"!=typeof TextDecoder&&new TextDecoder;try{uA.decode(iA,{stream:!0})}catch(Va){}function dA(t,e){if(e){for(var i=new Cd(t.length),n=0;n<t.length;++n)i[n]=t.charCodeAt(n);return i}if(hA)return hA.encode(t);function r(t){a[o++]=t}for(var s=t.length,a=new Cd(t.length+(t.length>>1)),o=0,n=0;n<s;++n){o+5>a.length&&((l=new Cd(o+8+(s-n<<1))).set(a),a=l);var l=t.charCodeAt(n);l<128||e?r(l):(l<2048?r(192|l>>6):(55295<l&&l<57344?(r(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++n))>>18),r(128|l>>12&63)):r(224|l>>12),r(128|l>>6&63)),r(128|63&l))}return qd(a,0,o)}var AA=function(t){var e=0;if(t)for(var i in t){i=t[i].length;if(65535<i)throw"extra field too long";e+=i+4}return e},pA=function(t,e,i,n,r,s,a,o){var l=n.length,h=i.extra,c=o&&o.length,u=AA(h),r=(oA(t,e,null!=a?33639248:67324752),e+=4,null!=a&&(t[e++]=20,t[e++]=i.os),t[e]=20,e+=2,t[e++]=i.flag<<1|(null==s&&8),t[e++]=r&&8,t[e++]=255&i.compression,t[e++]=i.compression>>8,new Date(null==i.mtime?Date.now():i.mtime)),d=r.getFullYear()-1980;if(d<0||119<d)throw"date not in range 1980-2099";if(oA(t,e,d<<25|r.getMonth()+1<<21|r.getDate()<<16|r.getHours()<<11|r.getMinutes()<<5|r.getSeconds()>>>1),e+=4,null!=s&&(oA(t,e,i.crc),oA(t,e+4,s),oA(t,e+8,i.size)),oA(t,e+12,l),oA(t,e+14,u),e+=16,null!=a&&(oA(t,e,c),oA(t,e+6,i.attrs),oA(t,e+10,a),e+=14),t.set(n,e),e+=l,u)for(var p in h){var f=h[p],m=f.length;oA(t,e,+p),oA(t,e+2,m),t.set(f,e+4),e+=4+m}return c&&(t.set(o,e),e+=c),e};function gA(t,e){var i,n={},r=[],s=(cA(t,"",n,e=e||{}),0),a=0;for(i in n){var o=n[i],l=o[0],o=o[1],h=0==o.level?0:8,c=(S=dA(i)).length,u=o.comment,d=u&&dA(u),p=d&&d.length,f=AA(o.extra);if(65535<c)throw"filename too long";var m=h?lA(l,o):l,g=m.length,A=sA();A.p(l),r.push(aA(o,{size:l.length,crc:A.d(),c:m,f:S,m:d,u:c!=i.length||d&&u.length!=p,o:s,compression:h})),s+=30+c+f+g,a+=76+2*(c+f)+(p||0)+g}for(var v,y,_,b=new Cd(a+22),t=s,e=a-s,x=0;x<r.length;++x){var S=r[x],w=(pA(b,S.o,S,S.f,S.u,S.c.length),30+S.f.length+AA(S.extra));b.set(S.c,S.o+w),pA(b,s,S,S.f,S.u,S.c.length,S.o,S.m),s+=16+w+(S.m?S.m.length:0)}return v=b,y=s,_=r.length,e=e,t=t,oA(v,y,101010256),oA(v,y+8,_),oA(v,y+10,_),oA(v,y+12,e),oA(v,y+16,t),b}class mA{async parse(t){const l={"model.usda":null};let h=vA();const c={},e={};t.traverseVisible(t=>{if(t.isMesh){var e=t.geometry,i=t.material;if(i.isMeshStandardMaterial){var n="geometries/Geometry_"+e.id+".usd";if(!(n in l)){const t=`
def "Geometry"
{
  ${r=e,a=r.attributes,o=a.position.count,`
    def Mesh "Geometry"
    {
        int[] faceVertexCounts = [${s=(null!==r.index?r.index:r.attributes.position).count,Array(s/3).fill(3).join(", ")}]
        int[] faceVertexIndices = [${function(t){const e=t.index,i=[];if(null!==e)for(let t=0;t<e.count;t++)i.push(e.getX(t));else{const e=t.attributes.position.count;for(let t=0;t<e;t++)i.push(t)}return i.join(", ")}(r)}]
        normal3f[] normals = [${xA(a.normal,o)}] (
            interpolation = "vertex"
        )
        point3f[] points = [${xA(a.position,o)}]
        float2[] primvars:st = [${function(e,t){if(void 0===e)return console.warn("USDZExporter: UVs missing."),Array(t).fill("(0, 0)").join(", ");const i=[];for(let t=0;t<e.count;t++){const n=e.getX(t),r=e.getY(t);i.push(`(${n.toPrecision(7)}, ${1-r.toPrecision(7)})`)}return i.join(", ")}(a.uv,o)}] (
            interpolation = "vertex"
        )
        uniform token subdivisionScheme = "none"
    }
`}
}
`;l[n]=(s=t,r=vA(),dA(r+=s))}i.uuid in c||(c[i.uuid]=i),h+=(a=e,o=i,s="Object_"+(n=t).id,r=`( ${yA(r=n.matrixWorld.elements,0)}, ${yA(r,4)}, ${yA(r,8)}, ${yA(r,12)} )`,n.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",n),`def Xform "${s}" (
    prepend references = @./geometries/Geometry_${a.id}.usd@</Geometry>
)
{
    matrix4d xformOp:transform = ${r}
    uniform token[] xformOpOrder = ["xformOp:transform"]

    rel material:binding = </Materials/Material_${o.id}>
}

`)}else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)",t)}var r,s,a,o}),h+=function(t,e){const i=[];for(const r in t){var n=t[r];i.push(_A(n,e))}return`def "Materials"
{
${i.join("")}
}

`}(c,e),l["model.usda"]=dA(h),h=null;for(const t in e){const h=e[t],c=t.split("_")[1],i=1023===h.format,n=fA(h.image,c),r=await new Promise(t=>n.toBlob(t,i?"image/png":"image/jpeg",1));l[`textures/Texture_${t}.`+(i?"png":"jpg")]=new Uint8Array(await r.arrayBuffer())}let i=0;for(const t in l){const h=l[t],c=63&(i+=34+t.length);if(4!=c){const e=new Uint8Array(64-c);l[t]=[h,{extra:{12345:e}}]}i=h.length}return gA(l,{level:0})}}function fA(t,e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const i=1024/Math.max(t.width,t.height),n=document.createElement("canvas"),r=(n.width=t.width*Math.min(1,i),n.height=t.height*Math.min(1,i),n.getContext("2d"));if(r.drawImage(t,0,0,n.width,n.height),void 0!==e){const t=parseInt(e,16),s=(t>>16&255)/255,a=(t>>8&255)/255,o=(255&t)/255,l=r.getImageData(0,0,n.width,n.height),h=l.data;for(let t=0;t<h.length;t+=4)h[t+0]=h[t+0]*s,h[t+1]=h[t+1]*a,h[t+2]=h[t+2]*o;r.putImageData(l,0,0)}return n}}function vA(){return'#usda 1.0\n(\n    customLayerData = {\n        string creator = "Three.js USDZExporter"\n    }\n    metersPerUnit = 1\n    upAxis = "Y"\n)\n\n'}function yA(t,e){return`(${t[e+0]}, ${t[e+1]}, ${t[e+2]}, ${t[e+3]})`}function xA(e,t){if(void 0===e)return console.warn("USDZExporter: Normals missing."),Array(t).fill("(0, 0, 0)").join(", ");const i=[];for(let t=0;t<e.count;t++){const n=e.getX(t),r=e.getY(t),s=e.getZ(t);i.push(`(${n.toPrecision(7)}, ${r.toPrecision(7)}, ${s.toPrecision(7)})`)}return i.join(", ")}function _A(r,s){const t="            ",e=[],i=[];function n(t,e,i){var i=t.id+(i?"_"+i.getHexString():""),n=1023===t.format;return s[i]=t,`
        def Shader "Transform2d_${e}" (
            sdrMetadata = {
                string role = "math"
            }
        )
        {
            uniform token info:id = "UsdTransform2d"
            float2 inputs:in.connect = </Materials/Material_${r.id}/uvReader_st.outputs:result>
            float2 inputs:scale = ${wA(t.repeat)}
            float2 inputs:translation = ${wA(t.offset)}
            float2 outputs:result
        }

        def Shader "Texture_${t.id}_${e}"
        {
            uniform token info:id = "UsdUVTexture"
            asset inputs:file = @textures/Texture_${i}.${n?"png":"jpg"}@
            float2 inputs:st.connect = </Materials/Material_${r.id}/Transform2d_${e}.outputs:result>
            token inputs:wrapS = "repeat"
            token inputs:wrapT = "repeat"
            float outputs:r
            float outputs:g
            float outputs:b
            float3 outputs:rgb
            ${r.transparent||0<r.alphaTest?"float outputs:a":""}
        }`}return 2===r.side&&console.warn("THREE.USDZExporter: USDZ does not support double sided materials",r),null!==r.map?(e.push(t+`color3f inputs:diffuseColor.connect = </Materials/Material_${r.id}/Texture_${r.map.id}_diffuse.outputs:rgb>`),r.transparent?e.push(t+`float inputs:opacity.connect = </Materials/Material_${r.id}/Texture_${r.map.id}_diffuse.outputs:a>`):0<r.alphaTest&&(e.push(t+`float inputs:opacity.connect = </Materials/Material_${r.id}/Texture_${r.map.id}_diffuse.outputs:a>`),e.push(t+"float inputs:opacityThreshold = "+r.alphaTest)),i.push(n(r.map,"diffuse",r.color))):e.push(t+"color3f inputs:diffuseColor = "+EA(r.color)),null!==r.emissiveMap?(e.push(t+`color3f inputs:emissiveColor.connect = </Materials/Material_${r.id}/Texture_${r.emissiveMap.id}_emissive.outputs:rgb>`),i.push(n(r.emissiveMap,"emissive"))):0<r.emissive.getHex()&&e.push(t+"color3f inputs:emissiveColor = "+EA(r.emissive)),null!==r.normalMap&&(e.push(t+`normal3f inputs:normal.connect = </Materials/Material_${r.id}/Texture_${r.normalMap.id}_normal.outputs:rgb>`),i.push(n(r.normalMap,"normal"))),null!==r.aoMap&&(e.push(t+`float inputs:occlusion.connect = </Materials/Material_${r.id}/Texture_${r.aoMap.id}_occlusion.outputs:r>`),i.push(n(r.aoMap,"occlusion"))),null!==r.roughnessMap&&1===r.roughness?(e.push(t+`float inputs:roughness.connect = </Materials/Material_${r.id}/Texture_${r.roughnessMap.id}_roughness.outputs:g>`),i.push(n(r.roughnessMap,"roughness"))):e.push(t+"float inputs:roughness = "+r.roughness),null!==r.metalnessMap&&1===r.metalness?(e.push(t+`float inputs:metallic.connect = </Materials/Material_${r.id}/Texture_${r.metalnessMap.id}_metallic.outputs:b>`),i.push(n(r.metalnessMap,"metallic"))):e.push(t+"float inputs:metallic = "+r.metalness),null!==r.alphaMap?(e.push(t+`float inputs:opacity.connect = </Materials/Material_${r.id}/Texture_${r.alphaMap.id}_opacity.outputs:r>`),e.push(t+"float inputs:opacityThreshold = 0.0001"),i.push(n(r.alphaMap,"opacity"))):e.push(t+"float inputs:opacity = "+r.opacity),r.isMeshPhysicalMaterial&&(e.push(t+"float inputs:clearcoat = "+r.clearcoat),e.push(t+"float inputs:clearcoatRoughness = "+r.clearcoatRoughness),e.push(t+"float inputs:ior = "+r.ior)),`
    def Material "Material_${r.id}"
    {
        def Shader "PreviewSurface"
        {
            uniform token info:id = "UsdPreviewSurface"
${e.join("\n")}
            int inputs:useSpecularWorkflow = 0
            token outputs:surface
        }

        token outputs:surface.connect = </Materials/Material_${r.id}/PreviewSurface.outputs:surface>
        token inputs:frame:stPrimvarName = "st"

        def Shader "uvReader_st"
        {
            uniform token info:id = "UsdPrimvarReader_float2"
            token inputs:varname.connect = </Materials/Material_${r.id}.inputs:frame:stPrimvarName>
            float2 inputs:fallback = (0.0, 0.0)
            float2 outputs:result
        }

${i.join("\n")}

    }
`}function EA(t){return`(${t.r}, ${t.g}, ${t.b})`}function wA(t){return`(${t.x}, ${t.y})`}var MA,YA,JA,XA,gp,mp,fp,vp,bA=function(t,e,i,n){for(var r,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n,o=t.length-1;0<=o;o--)(r=t[o])&&(a=(s<3?r(a):3<s?r(e,i,a):r(e,i))||a);return 3<s&&a&&Object.defineProperty(e,i,a),a};let IA=!1,CA=!1;MA=["quick-look","scene-viewer","webxr","none"];const SA=t=>{try{const e=Zc(t),i=(e.length?e[0].terms:[]).filter(t=>t&&"ident"===t.type).map(t=>t.value).filter(t=>-1<MA.indexOf(t)),n=new Set;for(const t of i)n.add(t);return n}catch(t){}return new Set},BA="quick-look",TA="scene-viewer",RA="webxr",DA="none",LA=Symbol("arButtonContainer"),QA=Symbol("enterARWithWebXR"),PA=Symbol("openSceneViewer"),FA=Symbol("openIOSARQuickLook"),UA=Symbol("canActivateAR"),NA=Symbol("arMode"),kA=Symbol("arModes"),OA=Symbol("arAnchor"),GA=Symbol("preload"),HA=Symbol("onARButtonContainerClick"),zA=Symbol("onARStatus"),VA=Symbol("onARTracking"),WA=Symbol("onARTap"),qA=Symbol("selectARMode"),jA=Symbol("triggerLoad"),KA=Symbol("evaluate"),$A=Symbol("lastValue");class ZA{constructor(){this[YA]=null}static evaluatableFor(t,e=oh){if(t instanceof ZA)return t;if("number"===t.type)return"%"===t.unit?new ip(t,e):t;switch(t.name.value){case"calc":return new op(t,e);case"env":return new sp(t)}return oh}static evaluate(t){return t instanceof ZA?t.evaluate():t}static isConstant(t){return!(t instanceof ZA)||t.isConstant}static applyIntrinsics(r,t){const{basis:e,keywords:s}=t,a=s["auto"];return e.map((t,e)=>{var i=null==a[e]?t:a[e];let n=r[e]||i;if("ident"===n.type){const r=n.value;r in s&&(n=s[r][e])}return"%"===(n=null!=n&&"ident"!==n.type?n:i).unit?$c(n.number/100*t.number,t.unit):(n=hh(n,t)).unit!==t.unit?t:n})}get isConstant(){return!1}evaluate(){return this.isConstant&&null!=this[$A]||(this[$A]=this[KA]()),this[$A]}}YA=$A;const tp=Symbol("percentage"),ep=Symbol("basis");class ip extends ZA{constructor(t,e){super(),this[tp]=t,this[ep]=e}get isConstant(){return!0}[KA](){return $c(this[tp].number/100*this[ep].number,this[ep].unit)}}const np=Symbol("identNode");class sp extends ZA{constructor(t){super(),this[JA]=null;t=t.arguments.length?t.arguments[0].terms[0]:null;null!=t&&"ident"===t.type&&(this[np]=t)}get isConstant(){return!1}[(JA=np,KA)](){return null!=this[np]&&"window-scroll-y"===this[np].value?{type:"number",number:window.pageYOffset/(Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)-window.innerHeight)||0,unit:null}:oh}}const rp=/[\*\/]/,ap=Symbol("evaluator");class op extends ZA{constructor(t,e=oh){if(super(),this[XA]=null,1===t.arguments.length){const i=t.arguments[0].terms.slice(),n=[];for(;i.length;){const t=i.shift();if(0<n.length){const i=n[n.length-1];if("operator"===i.type&&rp.test(i.value)){const i=n.pop(),r=n.pop();if(null==r)return;n.push(new up(i,ZA.evaluatableFor(r,e),ZA.evaluatableFor(t,e)));continue}}n.push("operator"===t.type?t:ZA.evaluatableFor(t,e))}for(;2<n.length;){const[t,i,s]=n.splice(0,3);if("operator"!==i.type)return;n.unshift(new up(i,ZA.evaluatableFor(t,e),ZA.evaluatableFor(s,e)))}1===n.length&&(this[ap]=n[0])}}get isConstant(){return null==this[ap]||ZA.isConstant(this[ap])}[(XA=ap,KA)](){return null!=this[ap]?ZA.evaluate(this[ap]):oh}}const lp=Symbol("operator"),cp=Symbol("left"),hp=Symbol("right");class up extends ZA{constructor(t,e,i){super(),this[lp]=t,this[cp]=e,this[hp]=i}get isConstant(){return ZA.isConstant(this[cp])&&ZA.isConstant(this[hp])}[KA](){var{number:t,unit:e}=hh(ZA.evaluate(this[cp])),{number:i,unit:n}=hh(ZA.evaluate(this[hp]));if(null!=n&&null!=e&&n!=e)return oh;e=e||n;let r;switch(this[lp].value){case"+":r=t+i;break;case"-":r=t-i;break;case"/":r=t/i;break;case"*":r=t*i;break;default:return oh}return{type:"number",number:r,unit:e}}}const dp=Symbol("evaluatables"),Ap=Symbol("intrinsics");class pp extends ZA{constructor(t,e){super(),this[Ap]=e;const i=t[0],n=null!=i?i.terms:[];this[dp]=e.basis.map((t,e)=>{e=n[e];return null==e?{type:"ident",value:"auto"}:"ident"===e.type?e:ZA.evaluatableFor(e,t)})}get isConstant(){for(const t of this[dp])if(!ZA.isConstant(t))return!1;return!0}[KA](){var t=this[dp].map(t=>ZA.evaluate(t));return ZA.applyIntrinsics(t,this[Ap]).map(t=>t.number)}}const yp=Symbol("instances"),xp=Symbol("activateListener"),_p=Symbol("deactivateListener"),Ep=Symbol("notifyInstances"),wp=Symbol("notify"),bp=Symbol("callback");class Ip{constructor(t){this[bp]=t}static[Ep](){for(const t of Ip[yp])t[wp]()}static[(gp=yp,xp)](){window.addEventListener("scroll",this[Ep],{passive:!0})}static[_p](){window.removeEventListener("scroll",this[Ep])}observe(){0===Ip[yp].size&&Ip[xp](),Ip[yp].add(this)}disconnect(){Ip[yp].delete(this),0===Ip[yp].size&&Ip[_p]()}[wp](){this[bp]()}}Ip[gp]=new Set;const Cp=Symbol("computeStyleCallback"),Sp=Symbol("astWalker"),Mp=Symbol("dependencies"),Bp=Symbol("onScroll");class Tp{constructor(t){this[mp]={},this[fp]=new ah(["function"]),this[vp]=()=>{this[Cp]({relatedState:"window-scroll"})},this[Cp]=t}observeEffectsFor(t){const i={},n=this[Mp];this[Sp].walk(t,t=>{var e=t["name"],t=t.arguments[0].terms[0];if("env"===e.value&&null!=t&&"ident"===t.type&&"window-scroll-y"===t.value&&null==i["window-scroll"]){const t="window-scroll"in n?n["window-scroll"]:new Ip(this[Bp]);t.observe(),delete n["window-scroll"],i["window-scroll"]=t}});for(const t in n)n[t].disconnect();this[Mp]=i}dispose(){for(const t in this[Mp])this[Mp][t].disconnect()}}mp=Mp,fp=Sp,vp=Bp;const Rp=h=>{const c=h.observeEffects||!1,u=h.intrinsics instanceof Function?h.intrinsics:()=>h.intrinsics;return(t,e)=>{const i=t.updated,n=t.connectedCallback,r=t.disconnectedCallback,s=Symbol(e+"StyleEffector"),a=Symbol(e+"StyleEvaluator"),o=Symbol(e+"UpdateEvaluator"),l=Symbol(e+"EvaluateAndSync");Object.defineProperties(t,{[s]:{value:null,writable:!0},[a]:{value:null,writable:!0},[o]:{value:function(){var t=Zc(this[e]);this[a]=new pp(t,u(this)),null==this[s]&&c&&(this[s]=new Tp(()=>this[l]())),null!=this[s]&&this[s].observeEffectsFor(t)}},[l]:{value:function(){var t;null!=this[a]&&(t=this[a].evaluate(),this[h.updateHandler](t))}},updated:{value:function(t){t.has(e)&&(this[o](),this[l]()),i.call(this,t)}},connectedCallback:{value:function(){n.call(this),this.requestUpdate(e,this[e])}},disconnectedCallback:{value:function(){r.call(this),null!=this[s]&&(this[s].dispose(),this[s]=null)}}})}},Dp=new v,Lp=new V,Qp=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:Math.PI/8,maximumPolarAngle:Math.PI-Math.PI/8,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,touchAction:"none"}),Pp=Math.PI/8,Fp="user-interaction",Up="none",Np="automatic";class kp extends n{constructor(t,e,i){super(),this.camera=t,this.element=e,this.scene=i,this.orbitSensitivity=1,this.inputSensitivity=1,this.changeSource=Up,this._interactionEnabled=!1,this._disableZoom=!1,this.isUserPointing=!1,this.enablePan=!0,this.enableTap=!0,this.panProjection=new y,this.panPerPixel=0,this.spherical=new Ea,this.goalSpherical=new Ea,this.thetaDamper=new uh,this.phiDamper=new uh,this.radiusDamper=new uh,this.logFov=Math.log(Qp.maximumFieldOfView),this.goalLogFov=this.logFov,this.fovDamper=new uh,this.touchMode=null,this.pointers=[],this.startTime=0,this.startPointerPosition={clientX:0,clientY:0},this.lastSeparation=0,this.touchDecided=!1,this.onContext=t=>{if(this.enablePan)t.preventDefault();else for(const t of this.pointers)this.onPointerUp(new PointerEvent("pointercancel",Object.assign(Object.assign({},this.startPointerPosition),{pointerId:t.id})))},this.touchModeZoom=(t,e)=>{if(!this._disableZoom){const t=this.twoTouchDistance(this.pointers[0],this.pointers[1]),e=.04*(this.lastSeparation-t)*50/this.scene.height;this.lastSeparation=t,this.userAdjustOrbit(0,0,e)}0<this.panPerPixel&&this.movePan(t,e)},this.disableScroll=t=>{t.preventDefault()},this.touchModeRotate=(t,e)=>{var i=this._options["touchAction"];if(!this.touchDecided&&"none"!==i){this.touchDecided=!0;var n=Math.abs(t),r=Math.abs(e);if(this.changeSource===Fp&&("pan-y"===i&&n<r||"pan-x"===i&&r<n))return void(this.touchMode=null);this.element.addEventListener("touchmove",this.disableScroll,{passive:!1})}this.handleSinglePointerMove(t,e)},this.onPointerDown=t=>{if(!(2<this.pointers.length)){const e=this["element"];0===this.pointers.length&&(e.addEventListener("pointermove",this.onPointerMove),e.addEventListener("pointerup",this.onPointerUp),this.touchMode=null,this.touchDecided=!1,this.startPointerPosition.clientX=t.clientX,this.startPointerPosition.clientY=t.clientY,this.startTime=performance.now());try{e.setPointerCapture(t.pointerId)}catch(t){}this.pointers.push({clientX:t.clientX,clientY:t.clientY,id:t.pointerId}),this.isUserPointing=!1,"touch"===t.pointerType?(this.changeSource=t.altKey?Np:Fp,this.onTouchChange(t)):(this.changeSource=Fp,this.onMouseDown(t))}},this.onPointerMove=e=>{const t=this.pointers.find(t=>t.id===e.pointerId);var i,n;null!=t&&(n=this.pointers.length,i=(e.clientX-t.clientX)/n,n=(e.clientY-t.clientY)/n,0==i&&0==n||(t.clientX=e.clientX,t.clientY=e.clientY,"touch"===e.pointerType?(this.changeSource=e.altKey?Np:Fp,null!==this.touchMode&&this.touchMode(i,n)):(this.changeSource=Fp,0<this.panPerPixel?this.movePan(i,n):this.handleSinglePointerMove(i,n))))},this.onPointerUp=e=>{const t=this["element"],i=this.pointers.findIndex(t=>t.id===e.pointerId);-1!==i&&this.pointers.splice(i,1),0<this.panPerPixel&&!e.altKey&&this.resetRadius(),0===this.pointers.length?(t.removeEventListener("pointermove",this.onPointerMove),t.removeEventListener("pointerup",this.onPointerUp),t.removeEventListener("touchmove",this.disableScroll),this.enablePan&&this.enableTap&&this.recenter(e)):null!==this.touchMode&&this.onTouchChange(e),this.scene.element[og].style.opacity=0,t.style.cursor="grab",this.panPerPixel=0,this.isUserPointing&&this.dispatchEvent({type:"pointer-change-end"})},this.onWheel=t=>{this.changeSource=Fp;var e=t.deltaY*(1==t.deltaMode?18:1)*.04/30;this.userAdjustOrbit(0,0,e),t.preventDefault()},this.onKeyDown=t=>{var e=this["changeSource"];this.changeSource=Fp,(t.shiftKey&&this.enablePan?this.panKeyCodeHandler(t):this.orbitZoomKeyCodeHandler(t))?t.preventDefault():this.changeSource=e},this._options=Object.assign({},Qp),this.setOrbit(0,Math.PI/2,1),this.setFieldOfView(100),this.jumpToGoal()}get interactionEnabled(){return this._interactionEnabled}enableInteraction(){if(!1===this._interactionEnabled){const t=this["element"];t.addEventListener("pointerdown",this.onPointerDown),t.addEventListener("pointercancel",this.onPointerUp),this._disableZoom||t.addEventListener("wheel",this.onWheel),t.addEventListener("keydown",this.onKeyDown),t.addEventListener("touchmove",()=>{},{passive:!1}),t.addEventListener("contextmenu",this.onContext),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}disableInteraction(){if(!0===this._interactionEnabled){const t=this["element"];t.removeEventListener("pointerdown",this.onPointerDown),t.removeEventListener("pointermove",this.onPointerMove),t.removeEventListener("pointerup",this.onPointerUp),t.removeEventListener("pointercancel",this.onPointerUp),t.removeEventListener("wheel",this.onWheel),t.removeEventListener("keydown",this.onKeyDown),t.removeEventListener("contextmenu",this.onContext),t.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}get options(){return this._options}set disableZoom(t){this._disableZoom!=t&&(!0===(this._disableZoom=t)?this.element.removeEventListener("wheel",this.onWheel):this.element.addEventListener("wheel",this.onWheel),this.updateTouchActionStyle())}getCameraSpherical(t=new Ea){return t.copy(this.spherical)}getFieldOfView(){return this.camera.fov}applyOptions(t){Object.assign(this._options,t),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}updateNearFar(t,e){this.camera.near=Math.max(t,e/1e3),this.camera.far=e,this.camera.updateProjectionMatrix()}updateAspect(t){this.camera.aspect=t,this.camera.updateProjectionMatrix()}setOrbit(t=this.goalSpherical.theta,e=this.goalSpherical.phi,i=this.goalSpherical.radius){var{minimumAzimuthalAngle:n,maximumAzimuthalAngle:r,minimumPolarAngle:s,maximumPolarAngle:a,minimumRadius:o,maximumRadius:l}=this._options,{theta:h,phi:c,radius:u}=this.goalSpherical,t=Vo(t,n,r),n=(isFinite(n)||isFinite(r)||(this.spherical.theta=this.wrapAngle(this.spherical.theta-t)+t),Vo(e,s,a)),r=Vo(i,o,l);return(t!==h||n!==c||r!==u)&&(this.goalSpherical.theta=t,this.goalSpherical.phi=n,this.goalSpherical.radius=r,this.goalSpherical.makeSafe(),!0)}setRadius(t){this.goalSpherical.radius=t,this.setOrbit()}setFieldOfView(t){var{minimumFieldOfView:e,maximumFieldOfView:i}=this._options;t=Vo(t,e,i),this.goalLogFov=Math.log(t)}setDamperDecayTime(t){this.thetaDamper.setDecayTime(t),this.phiDamper.setDecayTime(t),this.radiusDamper.setDecayTime(t),this.fovDamper.setDecayTime(t)}adjustOrbit(t,e,i){var{theta:n,phi:r,radius:s}=this.goalSpherical,{minimumRadius:a,maximumRadius:o,minimumFieldOfView:l,maximumFieldOfView:h}=this._options,c=this.spherical.theta-n,u=Math.PI-.001,n=n-Vo(t,-u-c,u-c),t=r-e,u=0===i?0:((0<i?o:a)-s)/(Math.log(0<i?h:l)-this.goalLogFov),c=s+i*(isFinite(u)?u:2*(o-a));if(this.setOrbit(n,t,c),0!==i){const t=this.goalLogFov+i;this.setFieldOfView(Math.exp(t))}}jumpToGoal(){this.update(0,1e4)}update(t,e){var i,n,r;this.isStationary()||({maximumPolarAngle:i,maximumRadius:n}=this._options,r=this.spherical.theta-this.goalSpherical.theta,Math.abs(r)>Math.PI&&!isFinite(this._options.minimumAzimuthalAngle)&&!isFinite(this._options.maximumAzimuthalAngle)&&(this.spherical.theta-=2*Math.sign(r)*Math.PI),this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,e,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,e,i),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,e,n),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,e,1),this.moveCamera())}updateTouchActionStyle(){const t=this.element["style"];var e;this._interactionEnabled?(e=this._options["touchAction"],this._disableZoom&&"none"!==e?t.touchAction="manipulation":t.touchAction=e):t.touchAction=""}isStationary(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}dispatchChange(){this.dispatchEvent({type:"change",source:this.changeSource})}moveCamera(){this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new Rt(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov)&&(this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix()),this.dispatchChange()}userAdjustOrbit(t,e,i){this.adjustOrbit(t*this.orbitSensitivity*this.inputSensitivity,e*this.orbitSensitivity*this.inputSensitivity,i*this.inputSensitivity),this.dispatchChange()}wrapAngle(t){t=(t+Math.PI)/(2*Math.PI);return 2*(t-Math.floor(t))*Math.PI-Math.PI}pixelLengthToSphericalAngle(t){return 2*Math.PI*t/this.element.clientHeight}twoTouchDistance(t,e){var{clientX:t,clientY:i}=t,{clientX:e,clientY:n}=e,e=e-t,t=n-i;return Math.sqrt(e*e+t*t)}handleSinglePointerMove(t,e){t=this.pixelLengthToSphericalAngle(t),e=this.pixelLengthToSphericalAngle(e);!1===this.isUserPointing&&(this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start"})),this.userAdjustOrbit(t,e,0)}initializePan(){var{theta:t,phi:e}=this.spherical,t=t-this.scene.yaw;this.panPerPixel=.018/this.scene.height,this.panProjection.set(-Math.cos(t),-Math.cos(e)*Math.sin(t),0,0,Math.sin(e),0,Math.sin(t),-Math.cos(e)*Math.cos(t),0)}movePan(t,e){const i=this["scene"],n=Lp.set(t,e,0).multiplyScalar(this.inputSensitivity),r=this.spherical.radius*Math.exp(this.logFov)*this.panPerPixel,s=(n.multiplyScalar(r),i.getTarget());s.add(n.applyMatrix3(this.panProjection)),i.boundingSphere.clampPoint(s,s),i.setTarget(s.x,s.y,s.z),this.dispatchChange()}recenter(t){if(!(performance.now()>this.startTime+300||2<Math.abs(t.clientX-this.startPointerPosition.clientX)||2<Math.abs(t.clientY-this.startPointerPosition.clientY))){const e=this["scene"],i=e.positionAndNormalFromPoint(e.getNDC(t.clientX,t.clientY));if(null==i){const t=e.element["cameraTarget"];e.element.cameraTarget="",e.element.cameraTarget=t,this.userAdjustOrbit(0,0,1)}else e.target.worldToLocal(i.position),e.setTarget(i.position.x,i.position.y,i.position.z)}}resetRadius(){const t=this["scene"],e=t.positionAndNormalFromPoint(Dp.set(0,0));if(null!=e){t.target.worldToLocal(e.position);const i=t.getTarget(),{theta:n,phi:r}=this.spherical,s=n-t.yaw,a=Lp.set(Math.sin(r)*Math.sin(s),Math.cos(r),Math.sin(r)*Math.cos(s)),o=a.dot(e.position.sub(i));i.add(a.multiplyScalar(o)),t.setTarget(i.x,i.y,i.z),this.setOrbit(void 0,void 0,this.goalSpherical.radius-o)}}onTouchChange(t){if(1===this.pointers.length)this.touchMode=this.touchModeRotate;else{if(this._disableZoom)return this.touchMode=null,void this.element.removeEventListener("touchmove",this.disableScroll);this.touchMode=this.touchDecided&&null===this.touchMode?null:this.touchModeZoom,this.touchDecided=!0,this.element.addEventListener("touchmove",this.disableScroll,{passive:!1}),this.lastSeparation=this.twoTouchDistance(this.pointers[0],this.pointers[1]),this.enablePan&&null!=this.touchMode&&(this.initializePan(),t.altKey||(this.scene.element[og].style.opacity=1))}}onMouseDown(t){this.panPerPixel=0,this.enablePan&&(2===t.button||t.ctrlKey||t.metaKey||t.shiftKey)&&(this.initializePan(),this.scene.element[og].style.opacity=1),this.element.style.cursor="grabbing"}orbitZoomKeyCodeHandler(t){let e=!0;switch(t.key){case"PageUp":this.userAdjustOrbit(0,0,.04);break;case"PageDown":this.userAdjustOrbit(0,0,-.04);break;case"ArrowUp":this.userAdjustOrbit(0,-Pp,0);break;case"ArrowDown":this.userAdjustOrbit(0,Pp,0);break;case"ArrowLeft":this.userAdjustOrbit(-Pp,0,0);break;case"ArrowRight":this.userAdjustOrbit(Pp,0,0);break;default:e=!1}return e}panKeyCodeHandler(t){this.initializePan();let e=!0;switch(t.key){case"ArrowUp":this.movePan(0,-10);break;case"ArrowDown":this.movePan(0,10);break;case"ArrowLeft":this.movePan(-10,0);break;case"ArrowRight":this.movePan(10,0);break;default:e=!1}return e}}const Op=t=>t<.5?2*t*t:(4-2*t)*t-1,Gp=(e,i,n=Op)=>t=>e+(i-e)*n(t),Hp=e=>{const i=[],n=[];let r=e.initialValue;for(let t=0;t<e.keyframes.length;++t){var s=e.keyframes[t],{value:a,frames:o}=s,s=s.ease||Op,s=Gp(r,a,s);i.push(s),n.push(o),r=a}{var l=i,h;const c=n.map((h=0,t=>h+=t));return e=>{e=Vo(e,0,1),e*=c[c.length-1];var t=c.findIndex(t=>e<=t),i=t<1?0:c[t-1],n=c[t];return l[t]((e-i)/(n-i))}}};var zp=function(t,e,i,n){for(var r,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n,o=t.length-1;0<=o;o--)(r=t[o])&&(a=(s<3?r(a):3<s?r(e,i,a):r(e,i))||a);return 3<s&&a&&Object.defineProperty(e,i,a),a};const Vp=Hp({initialValue:0,keyframes:[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]}),Wp=Hp({initialValue:0,keyframes:[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]}),qp=["front","right","back","left"],jp=["upper-","","lower-"],Yp="auto",Jp="none",Xp=()=>({basis:[lh($c(30,"deg"))],keywords:{auto:[null]}}),Kp=()=>({basis:[lh($c(12,"deg"))],keywords:{auto:[null]}}),$p=(()=>{const t=Zc("0deg 75deg 105%")[0].terms,e=hh(t[0]),i=hh(t[1]);return t=>{t=t[ed].idealCameraDistance();return{basis:[e,i,$c(t,"m")],keywords:{auto:[null,null,$c(105,"%")]}}}})(),Zp=t=>{t=2.2*t[ed].boundingSphere.radius;return{basis:[$c(-1/0,"rad"),$c(Math.PI/8,"rad"),$c(t,"m")],keywords:{auto:[null,null,null]}}},tg=t=>{t=$p(t),t=new pp([],t).evaluate()[2];return{basis:[$c(1/0,"rad"),$c(Math.PI-Math.PI/8,"rad"),$c(t,"m")],keywords:{auto:[null,null,null]}}},eg=t=>{t=t[ed].boundingBox.getCenter(new V);return{basis:[$c(t.x,"m"),$c(t.y,"m"),$c(t.z,"m")],keywords:{auto:[null,null,null]}}},ig=Math.PI/2,ng=Math.PI/3,sg=ig/2,rg=2*Math.PI,ag=Symbol("controls"),og=Symbol("panElement"),lg=Symbol("promptElement"),cg=Symbol("promptAnimatedContainer"),hg=Symbol("fingerAnimatedContainers"),ug=Symbol("deferInteractionPrompt"),dg=Symbol("updateAria"),Ag=Symbol("updateCameraForRadius"),pg=Symbol("onChange"),gg=Symbol("onPointerChange"),mg=Symbol("waitingToPromptUser"),fg=Symbol("userHasInteracted"),vg=Symbol("promptElementVisibleTime"),yg=Symbol("lastPromptOffset"),xg=Symbol("lastSpherical"),_g=Symbol("jumpCamera"),Eg=Symbol("initialized"),wg=Symbol("maintainThetaPhi"),bg=Symbol("syncCameraOrbit"),Ig=Symbol("syncFieldOfView"),Cg=Symbol("syncCameraTarget"),Sg=Symbol("syncMinCameraOrbit"),Mg=Symbol("syncMaxCameraOrbit"),Bg=Symbol("syncMinFieldOfView"),Tg=Symbol("syncMaxFieldOfView");var Nm,km,Xm,Km,nf,cf,Sf,Mf,Bf,kf,Of,Gf,Hf,zf,Vf,Rg=function(t,e,i,n){for(var r,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n,o=t.length-1;0<=o;o--)(r=t[o])&&(a=(s<3?r(a):3<s?r(e,i,a):r(e,i))||a);return 3<s&&a&&Object.defineProperty(e,i,a),a};const Dg="auto",Lg="auto",Qg="eager",Pg=Symbol("defaultProgressBarElement"),Fg=Symbol("posterContainerElement"),Ug=Symbol("defaultPosterElement"),Ng=Symbol("shouldDismissPoster"),kg=Symbol("hidePoster"),Og=Symbol("modelIsRevealed"),Gg=Symbol("updateProgressBar"),Hg=Symbol("ariaLabelCallToAction"),zg=Symbol("onProgress");class Vg{constructor(){this.pluginCallbacks=[],this.register(function(t){return new ym(t)}),this.register(function(t){return new xm(t)}),this.register(function(t){return new _m(t)}),this.register(function(t){return new bm(t)}),this.register(function(t){return new Im(t)}),this.register(function(t){return new Em(t)}),this.register(function(t){return new wm(t)})}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,i,n){const r=new vm,s=[];for(let t=0,e=this.pluginCallbacks.length;t<e;t++)s.push(this.pluginCallbacks[t](r));r.setPlugins(s),r.write(t,e,n).catch(i)}parseAsync(i,n){const r=this;return new Promise(function(t,e){r.parse(i,t,e,n)})}}const Wg=0,qg=1,jg=2,Yg=3,Jg=4,Xg=5121,Kg=5123,$g=5126,Zg=5125,tm=34962,em=34963,im=9728,nm=9729,sm=9984,rm=9985,am=9986,om=9987,lm=33071,cm=33648,hm=10497,um={},dm=(um[1003]=im,um[1004]=sm,um[1005]=am,um[1006]=nm,um[1007]=rm,um[1008]=om,um[1001]=lm,um[1e3]=hm,um[1002]=cm,{scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"});function Am(t,i){return t.length===i.length&&t.every(function(t,e){return t===i[e]})}function pm(t){return 4*Math.ceil(t/4)}function gm(e,i=0){var n=pm(e.byteLength);if(n===e.byteLength)return e;{const r=new Uint8Array(n);if(r.set(new Uint8Array(e)),0!==i)for(let t=e.byteLength;t<n;t++)r[t]=i;return r.buffer}}function mm(){return"undefined"==typeof document&&"undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas")}function fm(e,i){if(void 0!==e.toBlob)return new Promise(t=>e.toBlob(t,i));let t;return"image/jpeg"===i?t=.92:"image/webp"===i&&(t=.8),e.convertToBlob({type:i,quality:t})}class vm{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(t){this.plugins=t}async write(h,c,t){this.options=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},t),0<this.options.animations.length&&(this.options.trs=!0),this.processInput(h),await Promise.all(this.pending);const e=this.buffers,u=this.json;t=this.options;var h=this.extensionsUsed,i=new Blob(e,{type:"application/octet-stream"}),h=Object.keys(h);if(0<h.length&&(u.extensionsUsed=h),u.buffers&&0<u.buffers.length&&(u.buffers[0].byteLength=i.size),!0===t.binary){const h=new FileReader;h.readAsArrayBuffer(i),h.onloadend=function(){const t=gm(h.result),e=new DataView(new ArrayBuffer(8));e.setUint32(0,t.byteLength,!0),e.setUint32(4,5130562,!0);var i=gm((i=JSON.stringify(u),(new TextEncoder).encode(i).buffer),32);const n=new DataView(new ArrayBuffer(8)),r=(n.setUint32(0,i.byteLength,!0),n.setUint32(4,1313821514,!0),new ArrayBuffer(12)),s=new DataView(r);s.setUint32(0,1179937895,!0),s.setUint32(4,2,!0);var a=12+n.byteLength+i.byteLength+e.byteLength+t.byteLength;s.setUint32(8,a,!0);const o=new Blob([r,n,i,e,t],{type:"application/octet-stream"}),l=new FileReader;l.readAsArrayBuffer(o),l.onloadend=function(){c(l.result)}}}else if(u.buffers&&0<u.buffers.length){const h=new FileReader;h.readAsDataURL(i),h.onloadend=function(){var t=h.result;u.buffers[0].uri=t,c(u)}}else c(u)}serializeUserData(t,e){if(0!==Object.keys(t.userData).length){const i=this.options,n=this.extensionsUsed;try{const r=JSON.parse(JSON.stringify(t.userData));if(i.includeCustomExtensions&&r.gltfExtensions){void 0===e.extensions&&(e.extensions={});for(const t in r.gltfExtensions)e.extensions[t]=r.gltfExtensions[t],n[t]=!0;delete r.gltfExtensions}0<Object.keys(r).length&&(e.extras=r)}catch(e){console.warn("THREE.GLTFExporter: userData of '"+t.name+"' won't be serialized because of JSON.stringify error - "+e.message)}}}getUID(t,e=!1){if(!1===this.uids.has(t)){const e=new Map;e.set(!0,this.uid++),e.set(!1,this.uid++),this.uids.set(t,e)}return this.uids.get(t).get(e)}isNormalizedNormalAttribute(i){if(this.cache.attributesNormalized.has(i))return!1;const n=new V;for(let t=0,e=i.count;t<e;t++)if(5e-4<Math.abs(n.fromBufferAttribute(i,t).length()-1))return!1;return!0}createNormalizedNormalAttribute(t){const e=this.cache;if(e.attributesNormalized.has(t))return e.attributesNormalized.get(t);const i=t.clone(),n=new V;for(let t=0,e=i.count;t<e;t++)n.fromBufferAttribute(i,t),0===n.x&&0===n.y&&0===n.z?n.setX(1):n.normalize(),i.setXYZ(t,n.x,n.y,n.z);return e.attributesNormalized.set(t,i),i}applyTextureTransform(t,e){let i=!1;const n={};0===e.offset.x&&0===e.offset.y||(n.offset=e.offset.toArray(),i=!0),0!==e.rotation&&(n.rotation=e.rotation,i=!0),1===e.repeat.x&&1===e.repeat.y||(n.scale=e.repeat.toArray(),i=!0),i&&(t.extensions=t.extensions||{},t.extensions.KHR_texture_transform=n,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,i){if(e===i)return e;function t(t){return 3001===t.encoding?function(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}:function(t){return t}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.");const n=e?.image,r=i?.image,s=Math.max(n?.width||0,r?.width||0),a=Math.max(n?.height||0,r?.height||0),o=mm(),l=(o.width=s,o.height=a,o.getContext("2d")),h=(l.fillStyle="#00ffff",l.fillRect(0,0,s,a),l.getImageData(0,0,s,a));if(n){l.drawImage(n,0,0,s,a);const i=t(e),r=l.getImageData(0,0,s,a).data;for(let t=2;t<r.length;t+=4)h.data[t]=256*i(r[t]/256)}if(r){l.drawImage(r,0,0,s,a);const e=t(i),n=l.getImageData(0,0,s,a).data;for(let t=1;t<n.length;t+=4)h.data[t]=256*e(n[t]/256)}l.putImageData(h,0,0);const c=(e||i).clone();return c.source=new P(o),c.encoding=3e3,c}processBuffer(t){const e=this.json,i=this.buffers;return e.buffers||(e.buffers=[{byteLength:0}]),i.push(t),0}processBufferView(n,r,t,e,i){const s=this.json;var a;s.bufferViews||(s.bufferViews=[]),a=r===Xg?1:r===Kg?2:4;const o=pm(e*n.itemSize*a),l=new DataView(new ArrayBuffer(o));let h=0;for(let i=t;i<t+e;i++)for(let e=0;e<n.itemSize;e++){let t;4<n.itemSize?t=n.array[i*n.itemSize+e]:0===e?t=n.getX(i):1===e?t=n.getY(i):2===e?t=n.getZ(i):3===e&&(t=n.getW(i)),r===$g?l.setFloat32(h,t,!0):r===Zg?l.setUint32(h,t,!0):r===Kg?l.setUint16(h,t,!0):r===Xg&&l.setUint8(h,t),h+=a}const c={buffer:this.processBuffer(l.buffer),byteOffset:this.byteOffset,byteLength:o};return void 0!==i&&(c.target=i),i===tm&&(c.byteStride=n.itemSize*a),this.byteOffset+=o,s.bufferViews.push(c),{id:s.bufferViews.length-1,byteLength:0}}processBufferViewImage(t){const r=this,s=r.json;return s.bufferViews||(s.bufferViews=[]),new Promise(function(i){const n=new FileReader;n.readAsArrayBuffer(t),n.onloadend=function(){var t=gm(n.result),e={buffer:r.processBuffer(t),byteOffset:r.byteOffset,byteLength:t.byteLength};r.byteOffset+=t.byteLength,i(s.bufferViews.push(e)-1)}})}processAccessor(t,e,i,n){const r=this.options,s=this.json;let a;if(t.array.constructor===Float32Array)a=$g;else if(t.array.constructor===Uint32Array)a=Zg;else if(t.array.constructor===Uint16Array)a=Kg;else{if(t.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");a=Xg}if(void 0===i&&(i=0),void 0===n&&(n=t.count),r.truncateDrawRange&&void 0!==e&&null===e.index){const r=i+n,s=e.drawRange.count===1/0?t.count:e.drawRange.start+e.drawRange.count;i=Math.max(i,e.drawRange.start),(n=Math.min(r,s)-i)<0&&(n=0)}if(0===n)return null;var o=function(n,t,e){const r={min:new Array(n.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(n.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let i=t;i<t+e;i++)for(let e=0;e<n.itemSize;e++){let t;4<n.itemSize?t=n.array[i*n.itemSize+e]:0===e?t=n.getX(i):1===e?t=n.getY(i):2===e?t=n.getZ(i):3===e&&(t=n.getW(i)),r.min[e]=Math.min(r.min[e],t),r.max[e]=Math.max(r.max[e],t)}return r}(t,i,n);let l;void 0!==e&&(l=t===e.index?em:tm);const h=this.processBufferView(t,a,i,n,l),c={bufferView:h.id,byteOffset:h.byteOffset,componentType:a,count:n,max:o.max,min:o.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"}[t.itemSize]};return!0===t.normalized&&(c.normalized=!0),s.accessors||(s.accessors=[]),s.accessors.push(c)-1}processImage(e,t,i,n="image/png"){const r=this,s=r.cache,a=r.json,o=r.options,l=r.pending,h=(s.images.has(e)||s.images.set(e,{}),s.images.get(e)),c=n+":flipY/"+i.toString();if(void 0!==h[c])return h[c];a.images||(a.images=[]);const u={mimeType:n},d=mm(),p=(d.width=Math.min(e.width,o.maxTextureSize),d.height=Math.min(e.height,o.maxTextureSize),d.getContext("2d"));if(!0===i&&(p.translate(0,d.height),p.scale(1,-1)),void 0!==e.data){1023!==t&&console.error("GLTFExporter: Only RGBAFormat is supported."),(e.width>o.maxTextureSize||e.height>o.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const i=new Uint8ClampedArray(e.height*e.width*4);for(let t=0;t<i.length;t+=4)i[t+0]=e.data[t+0],i[t+1]=e.data[t+1],i[t+2]=e.data[t+2],i[t+3]=e.data[t+3];p.putImageData(new ImageData(i,e.width,e.height),0,0)}else p.drawImage(e,0,0,d.width,d.height);!0===o.binary?l.push(fm(d,n).then(t=>r.processBufferViewImage(t)).then(t=>{u.bufferView=t})):void 0!==d.toDataURL?u.uri=d.toDataURL(n):l.push(fm(d,n).then(t=>(new FileReader).readAsDataURL(t)).then(t=>{u.uri=t}));i=a.images.push(u)-1;return h[c]=i}processSampler(t){const e=this.json;e.samplers||(e.samplers=[]);t={magFilter:um[t.magFilter],minFilter:um[t.minFilter],wrapS:um[t.wrapS],wrapT:um[t.wrapT]};return e.samplers.push(t)-1}processTexture(e){const t=this.cache,i=this.json;if(t.textures.has(e))return t.textures.get(e);i.textures||(i.textures=[]);let n=e.userData.mimeType;"image/webp"===n&&(n="image/png");const r={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,n)};e.name&&(r.name=e.name),this._invokeAll(function(t){t.writeTexture&&t.writeTexture(e,r)});var s=i.textures.push(r)-1;return t.textures.set(e,s),s}processMaterial(e){const t=this.cache,i=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;i.materials||(i.materials=[]);const n={pbrMetallicRoughness:{}};!0!==e.isMeshStandardMaterial&&!0!==e.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");var r=e.color.toArray().concat([e.opacity]);if(Am(r,[1,1,1,1])||(n.pbrMetallicRoughness.baseColorFactor=r),e.isMeshStandardMaterial?(n.pbrMetallicRoughness.metallicFactor=e.metalness,n.pbrMetallicRoughness.roughnessFactor=e.roughness):(n.pbrMetallicRoughness.metallicFactor=.5,n.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const t=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),i={index:this.processTexture(t)};this.applyTextureTransform(i,t),n.pbrMetallicRoughness.metallicRoughnessTexture=i}if(e.map){const t={index:this.processTexture(e.map)};this.applyTextureTransform(t,e.map),n.pbrMetallicRoughness.baseColorTexture=t}if(e.emissive){const t=e.emissive.clone().multiplyScalar(e.emissiveIntensity),i=Math.max(t.r,t.g,t.b);if(1<i&&(t.multiplyScalar(1/i),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),0<i&&(n.emissiveFactor=t.toArray()),e.emissiveMap){const t={index:this.processTexture(e.emissiveMap)};this.applyTextureTransform(t,e.emissiveMap),n.emissiveTexture=t}}if(e.normalMap){const t={index:this.processTexture(e.normalMap)};e.normalScale&&1!==e.normalScale.x&&(t.scale=e.normalScale.x),this.applyTextureTransform(t,e.normalMap),n.normalTexture=t}if(e.aoMap){const t={index:this.processTexture(e.aoMap),texCoord:1};1!==e.aoMapIntensity&&(t.strength=e.aoMapIntensity),this.applyTextureTransform(t,e.aoMap),n.occlusionTexture=t}e.transparent?n.alphaMode="BLEND":0<e.alphaTest&&(n.alphaMode="MASK",n.alphaCutoff=e.alphaTest),2===e.side&&(n.doubleSided=!0),""!==e.name&&(n.name=e.name),this.serializeUserData(e,n),this._invokeAll(function(t){t.writeMaterial&&t.writeMaterial(e,n)});r=i.materials.push(n)-1;return t.materials.set(e,r),r}processMesh(i){const n=this.cache,r=this.json,s=[i.geometry.uuid];if(Array.isArray(i.material))for(let t=0,e=i.material.length;t<e;t++)s.push(i.material[t].uuid);else s.push(i.material.uuid);const a=s.join(":");if(n.meshes.has(a))return n.meshes.get(a);const o=i.geometry;var t,l=i.isLineSegments?qg:i.isLineLoop?jg:i.isLine?Yg:i.isPoints?Wg:i.material.wireframe?qg:Jg;const h={},c={},u=[],d=[],e={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},p=o.getAttribute("normal");void 0===p||this.isNormalizedNormalAttribute(p)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),o.setAttribute("normal",this.createNormalizedNormalAttribute(p)));let f=null;for(t in o.attributes)if("morph"!==t.slice(0,5)){const r=o.attributes[t];if(t=e[t]||t.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(t)||(t="_"+t),n.attributes.has(this.getUID(r)))c[t]=n.attributes.get(this.getUID(r));else{f=null;const s=r.array,a=("JOINTS_0"!==t||s instanceof Uint16Array||s instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),f=new ce(new Uint16Array(s),r.itemSize,r.normalized)),this.processAccessor(f||r,o));null!==a&&(c[t]=a,n.attributes.set(this.getUID(r),a))}}if(void 0!==p&&o.setAttribute("normal",p),0===Object.keys(c).length)return null;if(void 0!==i.morphTargetInfluences&&0<i.morphTargetInfluences.length){const r=[],s=[],a={};if(void 0!==i.morphTargetDictionary)for(const n in i.morphTargetDictionary)a[i.morphTargetDictionary[n]]=n;for(let e=0;e<i.morphTargetInfluences.length;++e){const h={};let t=!1;for(const i in o.morphAttributes)if("position"!==i&&"normal"!==i)t||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),t=!0);else{const r=o.morphAttributes[i][e],s=i.toUpperCase(),a=o.attributes[i];if(n.attributes.has(this.getUID(r,!0)))h[s]=n.attributes.get(this.getUID(r,!0));else{const u=r.clone();if(!o.morphTargetsRelative)for(let t=0,e=r.count;t<e;t++)u.setXYZ(t,r.getX(t)-a.getX(t),r.getY(t)-a.getY(t),r.getZ(t)-a.getZ(t));h[s]=this.processAccessor(u,o),n.attributes.set(this.getUID(a,!0),h[s])}}d.push(h),r.push(i.morphTargetInfluences[e]),void 0!==i.morphTargetDictionary&&s.push(a[e])}h.weights=r,0<s.length&&(h.extras={},h.extras.targetNames=s)}var m=Array.isArray(i.material);if(m&&0===o.groups.length)return null;var g=m?i.material:[i.material],A=m?o.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let e=0,t=A.length;e<t;e++){const r={mode:l,attributes:c};if(this.serializeUserData(o,r),0<d.length&&(r.targets=d),null!==o.index){let t=this.getUID(o.index);void 0===A[e].start&&void 0===A[e].count||(t+=":"+A[e].start+":"+A[e].count),n.attributes.has(t)?r.indices=n.attributes.get(t):(r.indices=this.processAccessor(o.index,o,A[e].start,A[e].count),n.attributes.set(t,r.indices)),null===r.indices&&delete r.indices}const s=this.processMaterial(g[A[e].materialIndex]);null!==s&&(r.material=s),u.push(r)}h.primitives=u,r.meshes||(r.meshes=[]),this._invokeAll(function(t){t.writeMesh&&t.writeMesh(i,h)});m=r.meshes.push(h)-1;return n.meshes.set(a,m),m}processCamera(t){const e=this.json,i=(e.cameras||(e.cameras=[]),t.isOrthographicCamera),n={type:i?"orthographic":"perspective"};return i?n.orthographic={xmag:2*t.right,ymag:2*t.top,zfar:t.far<=0?.001:t.far,znear:t.near<0?0:t.near}:n.perspective={aspectRatio:t.aspect,yfov:f.degToRad(t.fov),zfar:t.far<=0?.001:t.far,znear:t.near<0?0:t.near},""!==t.name&&(n.name=t.type),e.cameras.push(n)-1}processAnimation(t,r){const s=this.json,a=this.nodeMap,o=(s.animations||(s.animations=[]),(t=Vg.Utils.mergeMorphTargetTracks(t.clone(),r)).tracks),l=[],h=[];for(let n=0;n<o.length;++n){const s=o[n],u=ma.parseTrackName(s.name);let t=ma.findNode(r,u.nodeName);var c=dm[u.propertyName];if(!(t="bones"===u.objectName?!0===t.isSkinnedMesh?t.skeleton.getBoneByName(u.objectIndex):void 0:t)||!c)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',s.name),null;let e,i=s.values.length/s.times.length;c===dm.morphTargetInfluences&&(i/=t.morphTargetInfluences.length),!0===s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(e="CUBICSPLINE",i/=3):e=2300===s.getInterpolation()?"STEP":"LINEAR",h.push({input:this.processAccessor(new ce(s.times,1)),output:this.processAccessor(new ce(s.values,i)),interpolation:e}),l.push({sampler:h.length-1,target:{node:a.get(t),path:c}})}return s.animations.push({name:t.name||"clip_"+s.animations.length,samplers:h,channels:l}),s.animations.length-1}processSkin(e){const t=this.json,i=this.nodeMap,n=t.nodes[i.get(e)],r=e.skeleton;if(void 0===r)return null;var s=e.skeleton.bones[0];if(void 0===s)return null;const a=[],o=new Float32Array(16*r.bones.length),l=new _t;for(let t=0;t<r.bones.length;++t)a.push(i.get(r.bones[t])),l.copy(r.boneInverses[t]),l.multiply(e.bindMatrix).toArray(o,16*t);return void 0===t.skins&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new ce(o,16)),joints:a,skeleton:i.get(s)}),n.skin=t.skins.length-1}processNode(i){const n=this.json,r=this.options,t=this.nodeMap,s=(n.nodes||(n.nodes=[]),{});if(r.trs){const n=i.quaternion.toArray(),r=i.position.toArray(),t=i.scale.toArray();Am(n,[0,0,0,1])||(s.rotation=n),Am(r,[0,0,0])||(s.translation=r),Am(t,[1,1,1])||(s.scale=t)}else i.matrixAutoUpdate&&i.updateMatrix(),!1===Am(i.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])&&(s.matrix=i.matrix.elements);if(""!==i.name&&(s.name=String(i.name)),this.serializeUserData(i,s),i.isMesh||i.isLine||i.isPoints){const n=this.processMesh(i);null!==n&&(s.mesh=n)}else i.isCamera&&(s.camera=this.processCamera(i));if(i.isSkinnedMesh&&this.skins.push(i),0<i.children.length){const n=[];for(let t=0,e=i.children.length;t<e;t++){const s=i.children[t];if(s.visible||!1===r.onlyVisible){const i=this.processNode(s);null!==i&&n.push(i)}}0<n.length&&(s.children=n)}this._invokeAll(function(t){t.writeNode&&t.writeNode(i,s)});var e=n.nodes.push(s)-1;return t.set(i,e),e}processScene(i){const t=this.json,n=this.options,r=(t.scenes||(t.scenes=[],t.scene=0),{}),s=(""!==i.name&&(r.name=i.name),t.scenes.push(r),[]);for(let t=0,e=i.children.length;t<e;t++){const r=i.children[t];if(r.visible||!1===n.onlyVisible){const i=this.processNode(r);null!==i&&s.push(i)}}0<s.length&&(r.nodes=s),this.serializeUserData(i,r)}processObjects(e){const i=new Ps;i.name="AuxScene";for(let t=0;t<e.length;t++)i.children.push(e[t]);this.processScene(i)}processInput(e){var i=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(t){t.beforeParse&&t.beforeParse(e)});const n=[];for(let t=0;t<e.length;t++)e[t]instanceof Ps?this.processScene(e[t]):n.push(e[t]);0<n.length&&this.processObjects(n);for(let t=0;t<this.skins.length;++t)this.processSkin(this.skins[t]);for(let t=0;t<i.animations.length;++t)this.processAnimation(i.animations[t],e[0]);this._invokeAll(function(t){t.afterParse&&t.afterParse(e)})}_invokeAll(i){for(let t=0,e=this.plugins.length;t<e;t++)i(this.plugins[t])}}class ym{constructor(t){this.writer=t,this.name="KHR_lights_punctual"}writeNode(t,e){if(t.isLight)if(t.isDirectionalLight||t.isPointLight||t.isSpotLight){const i=this.writer,n=i.json,r=i.extensionsUsed,s={},a=(t.name&&(s.name=t.name),s.color=t.color.toArray(),s.intensity=t.intensity,t.isDirectionalLight?s.type="directional":t.isPointLight?(s.type="point",0<t.distance&&(s.range=t.distance)):t.isSpotLight&&(s.type="spot",0<t.distance&&(s.range=t.distance),s.spot={},s.spot.innerConeAngle=(t.penumbra-1)*t.angle*-1,s.spot.outerConeAngle=t.angle),void 0!==t.decay&&2!==t.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),!t.target||t.target.parent===t&&0===t.target.position.x&&0===t.target.position.y&&-1===t.target.position.z||console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),r[this.name]||(n.extensions=n.extensions||{},n.extensions[this.name]={lights:[]},r[this.name]=!0),n.extensions[this.name].lights);a.push(s),e.extensions=e.extensions||{},e.extensions[this.name]={light:a.length-1}}else console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",t)}}class xm{constructor(t){this.writer=t,this.name="KHR_materials_unlit"}writeMaterial(t,e){if(t.isMeshBasicMaterial){const i=this.writer.extensionsUsed;e.extensions=e.extensions||{},e.extensions[this.name]={},i[this.name]=!0,e.pbrMetallicRoughness.metallicFactor=0,e.pbrMetallicRoughness.roughnessFactor=.9}}}class _m{constructor(t){this.writer=t,this.name="KHR_materials_pbrSpecularGlossiness"}writeMaterial(t,e){if(t.isGLTFSpecularGlossinessMaterial){const n=this.writer,r=n.extensionsUsed,s={};e.pbrMetallicRoughness.baseColorFactor&&(s.diffuseFactor=e.pbrMetallicRoughness.baseColorFactor);var i=[1,1,1];if(t.specular.toArray(i,0),s.specularFactor=i,s.glossinessFactor=t.glossiness,e.pbrMetallicRoughness.baseColorTexture&&(s.diffuseTexture=e.pbrMetallicRoughness.baseColorTexture),t.specularMap){const e={index:n.processTexture(t.specularMap)};n.applyTextureTransform(e,t.specularMap),s.specularGlossinessTexture=e}e.extensions=e.extensions||{},e.extensions[this.name]=s,r[this.name]=!0}}}class Em{constructor(t){this.writer=t,this.name="KHR_materials_clearcoat"}writeMaterial(t,e){if(t.isMeshPhysicalMaterial){const i=this.writer,n=i.extensionsUsed,r={};if(r.clearcoatFactor=t.clearcoat,t.clearcoatMap){const e={index:i.processTexture(t.clearcoatMap)};i.applyTextureTransform(e,t.clearcoatMap),r.clearcoatTexture=e}if(r.clearcoatRoughnessFactor=t.clearcoatRoughness,t.clearcoatRoughnessMap){const e={index:i.processTexture(t.clearcoatRoughnessMap)};i.applyTextureTransform(e,t.clearcoatRoughnessMap),r.clearcoatRoughnessTexture=e}if(t.clearcoatNormalMap){const e={index:i.processTexture(t.clearcoatNormalMap)};i.applyTextureTransform(e,t.clearcoatNormalMap),r.clearcoatNormalTexture=e}e.extensions=e.extensions||{},e.extensions[this.name]=r,n[this.name]=!0}}}class wm{constructor(t){this.writer=t,this.name="KHR_materials_iridescence"}writeMaterial(t,e){if(t.isMeshPhysicalMaterial){const i=this.writer,n=i.extensionsUsed,r={};if(r.iridescenceFactor=t.iridescence,t.iridescenceMap){const e={index:i.processTexture(t.iridescenceMap)};i.applyTextureTransform(e,t.iridescenceMap),r.iridescenceTexture=e}if(r.iridescenceIor=t.iridescenceIOR,r.iridescenceThicknessMinimum=t.iridescenceThicknessRange[0],r.iridescenceThicknessMaximum=t.iridescenceThicknessRange[1],t.iridescenceThicknessMap){const e={index:i.processTexture(t.iridescenceThicknessMap)};i.applyTextureTransform(e,t.iridescenceThicknessMap),r.iridescenceThicknessTexture=e}e.extensions=e.extensions||{},e.extensions[this.name]=r,n[this.name]=!0}}}class bm{constructor(t){this.writer=t,this.name="KHR_materials_transmission"}writeMaterial(t,e){if(t.isMeshPhysicalMaterial&&0!==t.transmission){const i=this.writer,n=i.extensionsUsed,r={};if(r.transmissionFactor=t.transmission,t.transmissionMap){const e={index:i.processTexture(t.transmissionMap)};i.applyTextureTransform(e,t.transmissionMap),r.transmissionTexture=e}e.extensions=e.extensions||{},e.extensions[this.name]=r,n[this.name]=!0}}}class Im{constructor(t){this.writer=t,this.name="KHR_materials_volume"}writeMaterial(t,e){if(t.isMeshPhysicalMaterial&&0!==t.transmission){const i=this.writer,n=i.extensionsUsed,r={};if(r.thicknessFactor=t.thickness,t.thicknessMap){const e={index:i.processTexture(t.thicknessMap)};i.applyTextureTransform(e,t.thicknessMap),r.thicknessTexture=e}r.attenuationDistance=t.attenuationDistance,r.attenuationColor=t.attenuationColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=r,n[this.name]=!0}}}Vg.Utils={insertKeyframe:function(e,i){const n=e.getValueSize(),r=new e.TimeBufferType(e.times.length+1),s=new e.ValueBufferType(e.values.length+n),a=e.createInterpolant(new e.ValueBufferType(n));let o;if(0===e.times.length){r[0]=i;for(let t=0;t<n;t++)s[t]=0;o=0}else if(i<e.times[0]){if(Math.abs(e.times[0]-i)<.001)return 0;r[0]=i,r.set(e.times,1),s.set(a.evaluate(i),0),s.set(e.values,n),o=0}else if(i>e.times[e.times.length-1]){if(Math.abs(e.times[e.times.length-1]-i)<.001)return e.times.length-1;r[r.length-1]=i,r.set(e.times,0),s.set(e.values,0),s.set(a.evaluate(i),e.values.length),o=r.length-1}else for(let t=0;t<e.times.length;t++){if(Math.abs(e.times[t]-i)<.001)return t;if(e.times[t]<i&&e.times[t+1]>i){r.set(e.times.slice(0,t+1),0),r[t+1]=i,r.set(e.times.slice(t+1),t+2),s.set(e.values.slice(0,(t+1)*n),0),s.set(a.evaluate(i),(t+1)*n),s.set(e.values.slice((t+1)*n),(t+2)*n),o=t+1;break}}return e.times=r,e.values=s,o},mergeMorphTargetTracks:function(n,r){const s=[],a={},e=n.tracks;for(let t=0;t<e.length;++t){let i=e[t];var o=ma.parseTrackName(i.name),l=ma.findNode(r,o.nodeName);if("morphTargetInfluences"!==o.propertyName||void 0===o.propertyIndex)s.push(i);else{if(i.createInterpolant!==i.InterpolantFactoryMethodDiscrete&&i.createInterpolant!==i.InterpolantFactoryMethodLinear){if(i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),(i=i.clone()).setInterpolation(2301)}var h=l.morphTargetInfluences.length,c=l.morphTargetDictionary[o.propertyIndex];if(void 0===c)throw new Error("THREE.GLTFExporter: Morph target name not found: "+o.propertyIndex);let e;if(void 0===a[l.uuid]){const n=new(e=i.clone()).ValueBufferType(h*e.times.length);for(let t=0;t<e.times.length;t++)n[t*h+c]=e.values[t];e.name=(o.nodeName||"")+".morphTargetInfluences",e.values=n,a[l.uuid]=e,s.push(e)}else{const u=i.createInterpolant(new i.ValueBufferType(1));e=a[l.uuid];for(let t=0;t<e.times.length;t++)e.values[t*h+c]=u.evaluate(e.times[t]);for(let t=0;t<i.times.length;t++){const r=this.insertKeyframe(e,i.times[t]);e.values[r*h+c]=i.values[t]}}}}return n.tracks=s,n}};const Cm=t=>void 0!==t.material&&t.userData&&t.userData.variantMaterials&&!!Array.from(t.userData.variantMaterials.values()).filter(t=>Sm(t.material)),Sm=t=>t&&t.isMaterial&&!Array.isArray(t);class Mm{constructor(t){this.writer=t,this.name="KHR_materials_variants",this.variantNames=[]}beforeParse(t){const r=new Set;for(const e of t)e.traverse(t=>{if(Cm(t)){const e=t.userData.variantMaterials,i=t.userData.variantData;for(const[t,n]of i){const i=e.get(n.index);Sm(i.material)&&r.add(t)}}});r.forEach(t=>this.variantNames.push(t))}writeMesh(t,e){if(Cm(t)){const r=t.userData,s=r.variantMaterials,a=r.variantData,o=new Map,l=new Map,h=Array.from(a.values()).sort((t,e)=>t.index-e.index);for(const[t,e]of h.entries())l.set(e.index,t);for(const t of a.values()){const e=s.get(t.index).material;if(Sm(e)){const r=this.writer.processMaterial(e);o.has(r)||o.set(r,{material:r,variants:[]}),o.get(r).variants.push(l.get(t.index))}}var i=Array.from(o.values()).map(t=>t.variants.sort((t,e)=>t-e)&&t).sort((t,e)=>t.material-e.material);if(0!==i.length){var n=Sm(r.originalMaterial)?this.writer.processMaterial(r.originalMaterial):-1;for(const t of e.primitives)0<=n&&(t.material=n),t.extensions=t.extensions||{},t.extensions[this.name]={mappings:i}}}}afterParse(){if(0!==this.variantNames.length){const e=this.writer.json;e.extensions=e.extensions||{};var t=this.variantNames.map(t=>({name:t}));e.extensions[this.name]={variants:t},this.writer.extensionsUsed[this.name]=!0}}}const Bm=Symbol("correlatedObjects"),Tm=Symbol("sourceObject"),Rm=Symbol("onUpdate");class Dm{constructor(t,e,i=null){this[Rm]=t,this[Tm]=e,this[Bm]=i}}const Lm=new ae,Qm=new ri(2,2);let Pm=0;const Fm=Symbol("threeTexture");class Um extends Dm{get[Fm](){var t;return console.assert(null!=this[Bm]&&0<this[Bm].size,"Image correlated object is undefined"),null==(t=this[Bm])?void 0:t.values().next().value}constructor(t,e,i){super(t,i=null!=i?i:{name:e&&e.image&&e.image.src?e.image.src.split("/").pop():"adhoc_image",uri:e&&e.image&&e.image.src?e.image.src:"adhoc_image"+Pm++},new Set(e?[e]:[]))}get name(){return this[Tm].name||""}get uri(){return this[Tm].uri}get bufferView(){return this[Tm].bufferView}get type(){return null!=this.uri?"external":"embedded"}set name(t){this[Tm].name=t}async createThumbnail(t,e){const i=new Ps;Lm.map=this[Fm];var n=new Ne(Qm,Lm);i.add(n);const r=new gi(-1,1,1,-1,0,1),s=gu.singleton["threeRenderer"],a=new O(t,e);s.setRenderTarget(a),s.render(i,r),s.setRenderTarget(null);n=new Uint8Array(t*e*4);s.readRenderTargetPixels(a,0,0,t,e,n),Ru.width=t,Ru.height=e;const o=Ru.getContext("2d"),l=o.createImageData(t,e);return l.data.set(n),o.putImageData(l,0,0),new Promise(async(e,i)=>{Ru.toBlob(t=>{if(!t)return i("Failed to capture thumbnail.");e(URL.createObjectURL(t))},"image/png")})}}!function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.NearestMipmapNearest=9984]="NearestMipmapNearest",t[t.LinearMipmapNearest=9985]="LinearMipmapNearest",t[t.NearestMipmapLinear=9986]="NearestMipmapLinear",t[t.LinearMipmapLinear=9987]="LinearMipmapLinear"}(Nm=Nm||{}),function(t){t[t.ClampToEdge=33071]="ClampToEdge",t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.Repeat=10497]="Repeat"}(km=km||{});const Om=(()=>{const e=[Nm.Nearest,Nm.Linear,Nm.NearestMipmapNearest,Nm.LinearMipmapLinear,Nm.NearestMipmapLinear,Nm.LinearMipmapLinear];return t=>-1<e.indexOf(t)})(),Gm=(()=>{const e=[Nm.Nearest,Nm.Linear];return t=>-1<e.indexOf(t)})(),Hm=(()=>{const e=[km.ClampToEdge,km.MirroredRepeat,km.Repeat];return t=>-1<e.indexOf(t)})(),zm=Symbol("threeTextures"),Vm=Symbol("setProperty"),Wm=Symbol("sourceSampler");class qm extends Dm{get[zm](){return console.assert(null!=this[Bm]&&0<this[Bm].size,"Sampler correlated object is undefined"),this[Bm]}get[Wm](){return console.assert(null!=this[Tm],"Sampler source is undefined"),this[Tm]}constructor(t,e,i){null==(i=null!=i?i:{}).minFilter&&(i.minFilter=e?e.minFilter:Nm.LinearMipmapLinear),null==i.magFilter&&(i.magFilter=e?e.magFilter:Nm.Linear),null==i.wrapS&&(i.wrapS=e?e.wrapS:km.Repeat),null==i.wrapT&&(i.wrapT=e?e.wrapT:km.Repeat),super(t,i,new Set(e?[e]:[]))}get name(){return this[Tm].name||""}get minFilter(){return this[Wm].minFilter}get magFilter(){return this[Wm].magFilter}get wrapS(){return this[Wm].wrapS}get wrapT(){return this[Wm].wrapT}setMinFilter(t){this[Vm]("minFilter",t)}setMagFilter(t){this[Vm]("magFilter",t)}setWrapS(t){this[Vm]("wrapS",t)}setWrapT(t){this[Vm]("wrapT",t)}[Vm](t,e){const i=this[Wm];if(null!=i){if(((t,e)=>{switch(t){case"minFilter":return Om(e);case"magFilter":return Gm(e);case"wrapS":case"wrapT":return Hm(e);default:throw new Error(`Cannot configure property "${t}" on Sampler`)}})(t,e)){i[t]=e;for(const i of this[zm])i[t]=e,i.needsUpdate=!0}this[Rm]()}}}const jm=Symbol("image"),Ym=Symbol("sampler");class Jm extends Dm{constructor(t,e,i=null,n=null,r=null){super(t,i||{},new Set(e?[e]:[])),this[Ym]=new qm(t,e,n),this[jm]=new Um(t,e,r)}get name(){return this[Tm].name||""}set name(t){this[Tm].name=t}get sampler(){return this[Ym]}get source(){return this[jm]}}const $m=Symbol("texture"),Zm=Symbol("transform"),tf=Symbol("materials"),ef=Symbol("usage");!function(t){t[t.Base=0]="Base",t[t.MetallicRoughness=1]="MetallicRoughness",t[t.Normal=2]="Normal",t[t.Occlusion=3]="Occlusion",t[t.Emissive=4]="Emissive"}(nf=nf||{});class sf{constructor(t,e,i,n,r,s){if(this[Xm]=null,this[Km]={rotation:0,scale:new v(1,1),offset:new v(0,0)},s&&i){const e=r.textures?r.textures[s.index]:null,n=e&&r.samplers?r.samplers[e.sampler]:null,a=e&&r.images?r.images[e.source]:null;this[Zm].rotation=i.rotation,this[Zm].scale.copy(i.repeat),this[Zm].offset.copy(i.offset),this[$m]=new Jm(t,i,e,n,a)}this.onUpdate=t,this[tf]=n,this[ef]=e}get texture(){return this[$m]}setTexture(t){const e=null!=t?t.source[Fm]:null;let i=3001;if(this[$m]=t,this[tf])for(const t of this[tf]){switch(this[ef]){case nf.Base:t.map=e;break;case nf.MetallicRoughness:i=3e3,t.metalnessMap=e,t.roughnessMap=e;break;case nf.Normal:i=3e3,t.normalMap=e;break;case nf.Occlusion:i=3e3,t.aoMap=e;break;case nf.Emissive:t.emissiveMap=e}t.needsUpdate=!0}e&&(e.encoding=i,e.rotation=this[Zm].rotation,e.repeat=this[Zm].scale,e.offset=this[Zm].offset),this.onUpdate()}}Xm=$m,Km=Zm;const rf=Symbol("threeMaterials"),af=Symbol("baseColorTexture"),of=Symbol("metallicRoughnessTexture");class lf extends Dm{constructor(t,e,i,n){super(t,i,n),null==i.baseColorFactor&&(i.baseColorFactor=[1,1,1,1]),null==i.roughnessFactor&&(i.roughnessFactor=1),null==i.metallicFactor&&(i.metallicFactor=1);var{baseColorTexture:i,metallicRoughnessTexture:r}=i,{map:s,metalnessMap:a}=n.values().next().value;this[af]=new sf(t,nf.Base,s,n,e,i||null),this[of]=new sf(t,nf.MetallicRoughness,a,n,e,r||null)}get[rf](){return this[Bm]}get baseColorFactor(){return this[Tm].baseColorFactor}get metallicFactor(){return this[Tm].metallicFactor}get roughnessFactor(){return this[Tm].roughnessFactor}get baseColorTexture(){return this[af]}get metallicRoughnessTexture(){return this[of]}setBaseColorFactor(t){for(const e of this[rf])e.color.fromArray(t),e.opacity=t[3];this[Tm].baseColorFactor=t,this[Rm]()}setMetallicFactor(t){for(const e of this[rf])e.metalness=t;this[Tm].metallicFactor=t,this[Rm]()}setRoughnessFactor(t){for(const e of this[rf])e.roughness=t;this[Tm].roughnessFactor=t,this[Rm]()}}const hf=Symbol("pbrMetallicRoughness"),uf=Symbol("normalTexture"),df=Symbol("occlusionTexture"),Af=Symbol("emissiveTexture"),pf=Symbol("backingThreeMaterial"),gf=Symbol("applyAlphaCutoff"),mf=Symbol("lazyLoadGLTFInfo"),ff=Symbol("initialize"),vf=Symbol("getLoadedMaterial"),yf=Symbol("ensureMaterialIsLoaded"),xf=Symbol("gltfIndex"),_f=Symbol("setActive"),Ef=Symbol("variantIndices"),wf=Symbol("isActive"),bf=Symbol("variantSet"),If=Symbol("modelVariants");class Cf extends Dm{constructor(t,e,i,n,r,s,a,o){super(t,i,a),this[cf]=new Set,this[xf]=n,this[wf]=r,this[If]=s,null==o?this[ff](e):this[mf]=o}get[(cf=bf,pf)](){return this[Bm].values().next().value}[ff](t){const e=this[Rm],i=this[Tm],n=this[Bm];i.extensions&&i.extensions.KHR_materials_pbrSpecularGlossiness&&console.warn(`Material ${i.name} uses a deprecated extension
          "KHR_materials_pbrSpecularGlossiness", please use
          "pbrMetallicRoughness" instead. Specular Glossiness materials are
          currently supported for rendering, but not for our scene-graph API,
          nor for auto-generation of USDZ for Quick Look.`),null==i.pbrMetallicRoughness&&(i.pbrMetallicRoughness={}),this[hf]=new lf(e,t,i.pbrMetallicRoughness,n),null==i.emissiveFactor&&(i.emissiveFactor=[0,0,0]),null==i.doubleSided&&(i.doubleSided=!1),null==i.alphaMode&&(i.alphaMode="OPAQUE"),null==i.alphaCutoff&&(i.alphaCutoff=.5);var{normalTexture:r,occlusionTexture:s,emissiveTexture:a}=i,{normalMap:o,aoMap:l,emissiveMap:h}=n.values().next().value;this[uf]=new sf(e,nf.Normal,o,n,t,r||null),this[df]=new sf(e,nf.Occlusion,l,n,t,s||null),this[Af]=new sf(e,nf.Emissive,h,n,t,a||null)}async[vf](){var t,e;return null!=this[mf]?({set:t,material:e}=await this[mf].doLazyLoad(),this[Bm]=t,this[ff](this[mf].gltf),this[mf]=void 0,this.ensureLoaded=async()=>{},e):this[Bm].values().next().value}[yf](){if(null!=this[mf])throw new Error(`Material "${this.name}" has not been loaded, call 'await
    myMaterial.ensureLoaded()' before using an unloaded material.`)}async ensureLoaded(){await this[vf]()}get isLoaded(){return null==this[mf]}get isActive(){return this[wf]}[_f](t){this[wf]=t}get name(){return this[Tm].name}set name(t){const e=this[Tm];if(null!=e&&(e.name=t),null!=this[Bm])for(const e of this[Bm])e.name=t}get pbrMetallicRoughness(){return this[yf](),this[hf]}get normalTexture(){return this[yf](),this[uf]}get occlusionTexture(){return this[yf](),this[df]}get emissiveTexture(){return this[yf](),this[Af]}get emissiveFactor(){return this[yf](),this[Tm].emissiveFactor}get index(){return this[xf]}[Ef](){return this[bf]}hasVariant(t){t=this[If].get(t);return null!=t&&this[bf].has(t.index)}setEmissiveFactor(t){this[yf]();for(const e of this[Bm])e.emissive.fromArray(t);this[Tm].emissiveFactor=t,this[Rm]()}[gf](){this[yf]();var t=this[Tm];for(const e of this[Bm])"MASK"===this[Tm].alphaMode?e.alphaTest=t.alphaCutoff:e.alphaTest=void 0,e.needsUpdate=!0}setAlphaCutoff(t){this[yf](),this[Tm].alphaCutoff=t,this[gf](),this[Rm]()}getAlphaCutoff(){return this[yf](),this[Tm].alphaCutoff}setDoubleSided(t){this[yf]();for(const e of this[Bm])e.side=t?2:0,e.needsUpdate=!0;this[Tm].doubleSided=t,this[Rm]()}getDoubleSided(){return this[yf](),this[Tm].doubleSided}setAlphaMode(t){this[yf]();var e,i;this[Tm].alphaMode=t;for(const n of this[Bm])e=n,i="BLEND"===t,e.transparent=i,e.depthWrite=!i,this[gf](),n.needsUpdate=!0;this[Rm]()}getAlphaMode(){return this[yf](),this[Tm].alphaMode}}const Tf=Symbol("materials"),Rf=Symbol("variantToMaterialMap"),Df=Symbol("modelVariants"),Lf=Symbol("mesh"),Qf=Symbol("children"),Pf=Symbol("initialMaterialIdx"),Ff=Symbol("activeMaterialIdx");class Uf{constructor(t){this.name="",this[Sf]=new Array,this.name=t}}Sf=Qf;class Nf extends Uf{constructor(t,e,i,n){super(t.name),this[Mf]=new Map,this[Bf]=new Map,this[Lf]=t;const{gltf:r,threeGLTF:s,threeObjectMap:a}=n;this[Df]=i,this.mesh.userData.variantData=i;n=a.get(t.material),null!=n.materials?this[Pf]=this[Ff]=n.materials:console.error(`Primitive (${t.name}) missing initial material reference.`),n=t.userData.associations||{};if(null==n.meshes)console.error("Mesh is missing primitive index association");else{var o=((r.meshes||[])[n.meshes].primitives||[])[n.primitives];if(null!=o){if(null!=o.material)this[Tf].set(o.material,e[o.material]);else{const t=e.findIndex(t=>"Default"===t.name);0<=t?this[Tf].set(t,e[t]):console.warn("gltfPrimitive has no material!")}if(o.extensions&&o.extensions.KHR_materials_variants){const t=o.extensions.KHR_materials_variants,n=s.parser.json.extensions.KHR_materials_variants.variants;for(const r of t.mappings){const t=e[r.material];this[Tf].set(r.material,t);for(const e of r.variants){const r=n[e]["name"];this[Rf].set(e,t),t[Ef]().add(e),i.has(r)||i.set(r,{name:r,index:e})}}}}else console.error("Mesh primitive definition is missing.")}}get mesh(){return this[Lf]}async setActiveMaterial(t){const e=this[Tf].get(t);return null!=e&&(this.mesh.material=await e[vf](),this[Ff]=t),this.mesh.material}getActiveMaterial(){return this[Tf].get(this[Ff])}getMaterial(t){return this[Tf].get(t)}async enableVariant(t){return null==t?this.setActiveMaterial(this[Pf]):null!=this[Rf]&&this[Df].has(t)?(t=this[Df].get(t),this.enableVariantHelper(t.index)):null}async enableVariantHelper(t){if(null!=this[Rf]&&null!=t){t=this[Rf].get(t);if(null!=t)return this.setActiveMaterial(t.index)}return null}async instantiateVariants(){if(null!=this[Rf])for(const e of this[Rf].keys()){var t;null==this.mesh.userData.variantMaterials.get(e).material&&(null!=(t=await this.enableVariantHelper(e))&&(this.mesh.userData.variantMaterials.get(e).material=t))}}get variantInfo(){return this[Rf]}addVariant(t,e){if(!this.ensureVariantIsUnused(e))return!1;this[Df].has(e)||this[Df].set(e,{name:e,index:this[Df].size});e=this[Df].get(e).index;return t[Ef]().add(e),this[Rf].set(e,t),this[Tf].set(t.index,t),this.updateVariantUserData(e,t),!0}deleteVariant(t){if(this.variantInfo.has(t)){this.variantInfo.delete(t);const e=this.mesh.userData.variantMaterials;null!=e&&e.delete(t)}}updateVariantUserData(t,e){e[Ef]().add(t),this.mesh.userData.variantData=this[Df],this.mesh.userData.variantMaterials=this.mesh.userData.variantMaterials||new Map,this.mesh.userData.variantMaterials.set(t,{material:e[Bm].values().next().value,gltfMaterialIndex:e.index})}ensureVariantIsUnused(t){var e=this[Df].get(t);return null==e||!this.variantInfo.has(e.index)||(console.warn(`Primitive cannot add variant '${t}' for this material, it already exists.`),!1)}}Mf=Tf,Bf=Rf;const Wf=Symbol("materials"),qf=Symbol("hierarchy"),jf=Symbol("roots"),Yf=Symbol("primitives"),Jf=Symbol("correlatedSceneGraph"),Xf=Symbol("prepareVariantsForExport"),Kf=Symbol("switchVariant"),$f=Symbol("threeScene"),Zf=Symbol("materialsFromPoint"),tv=Symbol("materialFromPoint"),ev=Symbol("variantData"),iv=Symbol("availableVariants"),nv=Symbol("modelOnUpdate"),sv=Symbol("cloneMaterial");class rv{constructor(t,e,i,n){this.gltf=t,this.gltfElementMap=e,this.mapKey=i,this.doLazyLoad=n}}class av{constructor(e,i=()=>{}){this[kf]=new Array,this[Of]=new Array,this[Gf]=new Array,this[Hf]=new Array,this[zf]=()=>{},this[Vf]=new Map,this[nv]=i;const{gltf:t,threeGLTF:n,gltfElementMap:r}=this[Jf]=e;this[$f]=n.scene;for(const[e,s]of t.materials.entries()){const a=r.get(s);if(null!=a)this[Wf].push(new Cf(i,t,s,e,!0,this[ev],a));else{const s=(t.materials||[])[e],o=e,l=async()=>{const t=await n.parser.getDependency("material",o),e=new Set;return r.set(s,e),e.add(t),{set:e,material:t}};this[Wf].push(new Cf(i,t,s,e,!1,this[ev],a,new rv(t,r,s,l)))}}const s=new Map,a=new Array;for(const e of n.scene.children)a.push(e);for(;0<a.length;){const i=a.pop();let t=null;i instanceof Ne?(t=new Nf(i,this.materials,this[ev],e),this[Yf].push(t)):t=new Uf(i.name);const n=s.get(i);(null!=n?n[Qf]:this[jf]).push(t),this[qf].push(t);for(const e of i.children)a.push(e),s.set(i,t)}}get materials(){return this[Wf]}[(kf=Wf,Of=qf,Gf=jf,Hf=Yf,zf=nv,Vf=ev,iv)](){const t=Array.from(this[ev].values());return t.sort((t,e)=>t.index-e.index),t.map(t=>t.name)}getMaterialByName(e){var t=this[Wf].filter(t=>t.name===e);return 0<t.length?t[0]:null}[Zf](t){return t.intersectObject(this[$f],!0).map(e=>{const t=this[qf].find(t=>t instanceof Nf&&t.mesh===e.object);return null!=t?t.getActiveMaterial():null})}[tv](t){t=this[Zf](t);return 0<t.length?t[0]:null}async[Kf](t){for(const e of this[Yf])await e.enableVariant(t);for(const t of this.materials)t[_f](!1);for(const t of this[Yf])this.materials[t.getActiveMaterial().index][_f](!0)}async[Xf](){const t=new Array;for(const e of this[Yf])t.push(e.instantiateVariants());await Promise.all(t)}[sv](t,e){const i=this.materials[t],n=(i.isLoaded||console.error("Cloning an unloaded material,\n           call 'material.ensureLoaded() before cloning the material."),i[Bm]),r=JSON.parse(JSON.stringify(i[Tm])),s=(r.name=e,this[Jf].gltf.materials.push(r),new Set);for(const[t,i]of n.entries()){const r=i.clone();r.name=e+(1<n.size?"_inst"+t:""),s.add(r)}t=new Cf(this[nv],this[Jf].gltf,r,this[Wf].length,!1,this[ev],s);return this[Wf].push(t),t}createMaterialInstanceForVariant(t,e,i,n=!0){let r=null;for(const n of this[Yf]){var s=this[ev].get(i);null!=s&&n.variantInfo.has(s.index)||null!=n.getMaterial(t)&&(this.hasVariant(i)||this.createVariant(i),null==r&&(r=this[sv](t,e)),n.addVariant(r,i))}if(n&&null!=r){r[_f](!0),this.materials[t][_f](!1);for(const t of this[Yf])t.enableVariant(i)}return r}createVariant(t){this[ev].has(t)?console.warn(`Variant '${t}'' already exists`):this[ev].set(t,{name:t,index:this[ev].size})}hasVariant(t){return this[ev].has(t)}setMaterialToVariant(t,e){if(null!=this[iv]().find(t=>t===e))if(t<0||t>=this.materials.length)console.error("setMaterialToVariant(): materialIndex is out of bounds.");else for(const n of this[Yf]){var i=n.getMaterial(t);null!=i&&n.addVariant(i,e)}else console.warn(`Can't add material to '${e}', the variant does not exist.'`)}updateVariantName(t,e){const i=this[ev].get(t);null!=i&&(i.name=e,this[ev].set(e,i),this[ev].delete(t))}deleteVariant(t){var e=this[ev].get(t);if(null!=e){for(const i of this.materials)i.hasVariant(t)&&i[bf].delete(e.index);for(const t of this[Yf])t.deleteVariant(e.index);this[ev].delete(t)}}}var ov=function(t,e,i,n){for(var r,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n,o=t.length-1;0<=o;o--)(r=t[o])&&(a=(s<3?r(a):3<s?r(e,i,a):r(e,i))||a);return 3<s&&a&&Object.defineProperty(e,i,a),a};const lv=Symbol("currentGLTF"),cv=Symbol("model"),hv=Symbol("getOnUpdateMethod"),uv=Symbol("textureLoader"),dv=Symbol("originalGltfJson");var Av=function(t,e,i,n){for(var r,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n,o=t.length-1;0<=o;o--)(r=t[o])&&(a=(s<3?r(a):3<s?r(e,i,a):r(e,i))||a);return 3<s&&a&&Object.defineProperty(e,i,a),a};const pv=Math.PI/32,gv={basis:[lh($c(pv,"rad"))],keywords:{auto:[null]}},mv=Symbol("autoRotateStartTime"),fv=Symbol("radiansPerSecond"),vv=Symbol("syncRotationRate"),yv=Symbol("onCameraChange"),xv=(t=>{var e,i,n;class r extends t{constructor(){super(...arguments),this[e]=new Map,this[i]=t=>{t.forEach(t=>{t instanceof MutationRecord&&"childList"!==t.type||(t.addedNodes.forEach(t=>{this[_d](t)}),t.removedNodes.forEach(t=>{this[Ed](t)}),this[id]())})},this[n]=new MutationObserver(this[yd])}connectedCallback(){super.connectedCallback();for(let t=0;t<this.children.length;++t)this[_d](this.children[t]);const t=self["ShadyDOM"];null==t?this[xd].observe(this,{childList:!0}):this[xd]=t.observeChildren(this,this[yd])}disconnectedCallback(){super.disconnectedCallback();const t=self["ShadyDOM"];null==t?this[xd].disconnect():t.unobserveChildren(this[xd])}[(e=vd,i=yd,n=xd,nd)](t,e){super[nd](t,e);const i=this[ed],n=i["annotationRenderer"],r=i.getCamera();i.shouldRender()&&(i.updateHotspots(r.position),n.domElement.style.display="",n.render(i,r))}updateHotspot(t){const e=this[vd].get(t.name);null!=e&&(e.updatePosition(t.position),e.updateNormal(t.normal),this[id]())}positionAndNormalFromPoint(t,e){const i=this[ed],n=i.getNDC(t,e),r=i.positionAndNormalFromPoint(n);if(null==r)return null;wd.copy(i.target.matrixWorld).invert();t=ud(r.position.applyMatrix4(wd)),bd.getNormalMatrix(wd),e=ud(r.normal.applyNormalMatrix(bd));let s=null;return{position:t,normal:e,uv:s=null!=r.uv?dd(r.uv):s}}[_d](e){if(e instanceof HTMLElement&&0===e.slot.indexOf("hotspot")){let t=this[vd].get(e.slot);null!=t?t.increment():(t=new dh({name:e.slot,position:e.dataset.position,normal:e.dataset.normal}),this[vd].set(e.slot,t),this[ed].addHotspot(t)),this[ed].queueRender()}}[Ed](t){if(t instanceof HTMLElement){const e=this[vd].get(t.slot);e&&(e.decrement()&&(this[ed].removeHotspot(e),this[vd].delete(t.slot)),this[ed].queueRender())}}}return r})((t=>{var i,n,r,s;class a extends t{constructor(){super(...arguments),this[i]=void 0,this[n]=null,this[r]=new qr,this[s]=null,this.variantName=null,this.orientation="0 0 0",this.scale="1 1 1"}get model(){return this[cv]}get availableVariants(){return this.model?this.model[iv]():[]}get originalGltfJson(){return this[dv]}[(i=cv,n=lv,r=uv,s=dv,hv)](){return()=>{this[id]()}}async createTexture(e,t="image/png"){const i=this[lv],n=await new Promise(t=>this[uv].load(e,t));return i&&n?(n.encoding=3001,n.wrapS=1e3,n.wrapT=1e3,n.flipY=!1,n.userData.mimeType=t,new Jm(this[hv](),n)):null}async updated(t){if(super.updated(t),t.has("variantName")){const t=this[lv],e=this["variantName"];null!=t&&(await this[cv][Kf](e),this[id](),this.dispatchEvent(new CustomEvent("variant-applied")))}if((t.has("orientation")||t.has("scale"))&&this.loaded){const t=this[ed];t.applyTransform(),t.updateBoundingBox(),t.updateShadow(),this[ad].arRenderer.onUpdateScene(),this[id]()}}[sd](){super[sd]();var t,e=this[ed]["currentGLTF"];null!=e&&(t=e["correlatedSceneGraph"],null!=t&&e!==this[lv]&&(this[cv]=new av(t,this[hv]()),this[dv]=JSON.parse(JSON.stringify(t.gltf))),"variants"in e.userData&&this.requestUpdate("variantName")),this[lv]=e}async exportScene(s){const a=this[ed];return new Promise(async(e,t)=>{const i={binary:!0,onlyVisible:!0,maxTextureSize:1/0,includeCustomExtensions:!1,forceIndices:!1},n=(Object.assign(i,s),i.animations=a.animations,i.truncateDrawRange=!0,a.shadow);let r=!1;null!=n&&(r=n.visible,n.visible=!1),await this[cv][Xf](),(new Vg).register(t=>new Mm(t)).parse(a.model,t=>e(new Blob([i.binary?t:JSON.stringify(t)],{type:i.binary?"application/octet-stream":"application/json"})),()=>t("glTF export failed"),i),null!=n&&(n.visible=r)})}materialFromPoint(t,e){const i=this[ed],n=i.getNDC(t,e);return i.raycaster.setFromCamera(n,i.getCamera()),this[cv][tv](i.raycaster)}}return ov([e({type:String,attribute:"variant-name"})],a.prototype,"variantName",void 0),ov([e({type:String,attribute:"orientation"})],a.prototype,"orientation",void 0),ov([e({type:String,attribute:"scale"})],a.prototype,"scale",void 0),a})((t=>{var i,n,r;class s extends t{constructor(){super(...arguments),this.autoRotate=!1,this.autoRotateDelay=3e3,this.rotationPerSecond="auto",this[i]=performance.now(),this[n]=0,this[r]=t=>{this.autoRotate&&"user-interaction"===t.detail.source&&(this[mv]=performance.now())}}connectedCallback(){super.connectedCallback(),this.addEventListener("camera-change",this[yv]),this[mv]=performance.now()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("camera-change",this[yv]),this[mv]=performance.now()}updated(t){super.updated(t),t.has("autoRotate")&&(this[mv]=performance.now())}[(i=mv,n=fv,vv)](t){this[fv]=t[0]}[nd](t,e){super[nd](t,e),this.autoRotate&&this[cd]()&&!this[ad].isPresenting&&0<(e=Math.min(e,t-this[mv]-this.autoRotateDelay))&&(this[ed].yaw=this.turntableRotation+this[fv]*e*.001)}get turntableRotation(){return this[ed].yaw}resetTurntableRotation(t=0){this[ed].yaw=t}}return r=yv,Av([e({type:Boolean,attribute:"auto-rotate"})],s.prototype,"autoRotate",void 0),Av([e({type:Number,attribute:"auto-rotate-delay"})],s.prototype,"autoRotateDelay",void 0),Av([Rp({intrinsics:gv,updateHandler:vv}),e({type:String,attribute:"rotation-per-second"})],s.prototype,"rotationPerSecond",void 0),s})((t=>{var i,n,r;class s extends t{constructor(){super(...arguments),this.environmentImage=null,this.skyboxImage=null,this.shadowIntensity=0,this.shadowSoftness=1,this.exposure=1,this[i]=null,this[n]=null,this[r]=null}updated(t){super.updated(t),t.has("shadowIntensity")&&(this[ed].setShadowIntensity(.5*this.shadowIntensity),this[id]()),t.has("shadowSoftness")&&(this[ed].setShadowSoftness(this.shadowSoftness),this[id]()),t.has("exposure")&&(this[ed].exposure=this.exposure,this[id]()),(t.has("environmentImage")||t.has("skyboxImage"))&&this[hd]()&&this[Xo]()}hasBakedShadow(){return 0<this[ed].bakedShadows.size}async[(i=Yo,n=Jo,r=Ko,Xo)](){var{skyboxImage:t,environmentImage:e}=this;null!=this[Ko]&&(this[Ko](),this[Ko]=null);const i=this[ad]["textureUtils"];if(null!=i){const s=this[od].beginActivity();try{var{environmentMap:n,skybox:r}=await i.generateEnvironmentMapAndSkybox(Oo(t),e,t=>s(Vo(t,0,1)));this[Yo]!==n&&(this[Yo]=n,this.dispatchEvent(new CustomEvent("environment-change"))),this[Jo]=null!=r?r.name===n.name?n:r:null,this[ed].setEnvironmentAndSkybox(this[Yo],this[Jo]),this[ed].dispatchEvent({type:"envmap-update"})}catch(t){if(t instanceof Error)throw this[ed].setEnvironmentAndSkybox(null,null),t}finally{s(1)}}}}return jo([e({type:String,attribute:"environment-image"})],s.prototype,"environmentImage",void 0),jo([e({type:String,attribute:"skybox-image"})],s.prototype,"skyboxImage",void 0),jo([e({type:Number,attribute:"shadow-intensity"})],s.prototype,"shadowIntensity",void 0),jo([e({type:Number,attribute:"shadow-softness"})],s.prototype,"shadowSoftness",void 0),jo([e({type:Number})],s.prototype,"exposure",void 0),s})((t=>{var i,n,r,s,a,o,l,h,c,u,d,p,f,m,g;class A extends t{constructor(){super(...arguments),this.cameraControls=!1,this.cameraOrbit="0deg 75deg 105%",this.cameraTarget="auto auto auto",this.fieldOfView="auto",this.minCameraOrbit="auto",this.maxCameraOrbit="auto",this.minFieldOfView="auto",this.maxFieldOfView="auto",this.interactionPromptThreshold=3e3,this.interactionPrompt=Yp,this.orbitSensitivity=1,this.touchAction=Jp,this.disableZoom=!1,this.disablePan=!1,this.disableTap=!1,this.interpolationDecay=50,this[i]=this.shadowRoot.querySelector(".interaction-prompt"),this[n]=this.shadowRoot.querySelector("#prompt"),this[r]=[this.shadowRoot.querySelector("#finger0"),this.shadowRoot.querySelector("#finger1")],this[s]=this.shadowRoot.querySelector(".pan-target"),this[a]=0,this[o]=1/0,this[l]=!1,this[h]=!1,this[c]=new kp(this[ed].camera,this[Zu],this[ed]),this[u]=new Ea,this[d]=!1,this[p]=!1,this[f]=!1,this[m]=({source:t})=>{this[dg](),this[id](),t===Fp&&(this[fg]=!0,this[ug]()),this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:t}}))},this[g]=t=>{"pointer-change-start"===t.type?this[$u].classList.add("pointer-tumbling"):this[$u].classList.remove("pointer-tumbling")}}get inputSensitivity(){return this[ag].inputSensitivity}set inputSensitivity(t){this[ag].inputSensitivity=t}getCameraOrbit(){var{theta:t,phi:e,radius:i}=this[xg];return{theta:t,phi:e,radius:i,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}}}getCameraTarget(){return ud(this[ad].isPresenting?this[ad].arRenderer.target:this[ed].getTarget())}getFieldOfView(){return this[ag].getFieldOfView()}getMinimumFieldOfView(){return this[ag].options.minimumFieldOfView}getMaximumFieldOfView(){return this[ag].options.maximumFieldOfView}getIdealAspect(){return this[ed].idealAspect}jumpCameraToGoal(){this[_g]=!0,this.requestUpdate(_g,!1)}resetInteractionPrompt(){this[yg]=0,this[vg]=1/0,this[fg]=!1,this[mg]=this.interactionPrompt===Yp&&this.cameraControls}zoom(t){t=new WheelEvent("wheel",{deltaY:-30*t});this[Zu].dispatchEvent(t)}connectedCallback(){super.connectedCallback(),this[ag].addEventListener("change",this[pg]),this[ag].addEventListener("pointer-change-start",this[gg]),this[ag].addEventListener("pointer-change-end",this[gg])}disconnectedCallback(){super.disconnectedCallback(),this[ag].removeEventListener("change",this[pg]),this[ag].removeEventListener("pointer-change-start",this[gg]),this[ag].removeEventListener("pointer-change-end",this[gg])}updated(t){super.updated(t);const e=this[ag],i=this[ed];if(t.has("cameraControls")&&(this.cameraControls?(e.enableInteraction(),this.interactionPrompt===Yp&&(this[mg]=!0)):(e.disableInteraction(),this[ug]()),this[Zu].setAttribute("aria-label",this[Wu])),t.has("disableZoom")&&(e.disableZoom=this.disableZoom),t.has("disablePan")&&(e.enablePan=!this.disablePan),t.has("disableTap")&&(e.enableTap=!this.disableTap),(t.has("interactionPrompt")||t.has("cameraControls")||t.has("src"))&&(this.interactionPrompt===Yp&&this.cameraControls&&!this[fg]?this[mg]=!0:this[ug]()),t.has("touchAction")){const t=this.touchAction;e.applyOptions({touchAction:t}),e.updateTouchActionStyle()}t.has("orbitSensitivity")&&(e.orbitSensitivity=this.orbitSensitivity),t.has("interpolationDecay")&&(e.setDamperDecayTime(this.interpolationDecay),i.setTargetDamperDecayTime(this.interpolationDecay)),!0===this[_g]&&Promise.resolve().then(()=>{e.jumpToGoal(),i.jumpToGoal(),this[_g]=!1})}async updateFraming(){const t=this[ed],e=t.adjustedFoV(t.framedFoVDeg);await t.updateFraming();var i=t.adjustedFoV(t.framedFoVDeg),n=this[ag].getFieldOfView()/e;this[ag].setFieldOfView(i*n),this[wg]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),this.requestUpdate("cameraOrbit"),await this.updateComplete}interact(i,t,e){const r=this[Zu],s=this[hg];if("1"===s[0].style.opacity)return void console.warn("interact() failed because an existing interaction is running.");const n=new Array,a=(n.push({x:Hp(t.x),y:Hp(t.y)}),[{x:n[0].x(0),y:n[0].y(0)}]);null!=e&&(n.push({x:Hp(e.x),y:Hp(e.y)}),a.push({x:n[1].x(0),y:n[1].y(0)}));let o=performance.now();const{width:l,height:h}=this[ed],c=t=>{for(var[e,i]of a.entries()){const n=s[e]["style"],a=(n.transform=`translateX(${l*i.x}px) translateY(${h*i.y}px)`,"pointerdown"===t?n.opacity="1":"pointerup"===t&&(n.opacity="0"),{pointerId:e-5678,pointerType:"touch",target:r,clientX:l*i.x,clientY:h*i.y,altKey:!0});r.dispatchEvent(new PointerEvent(t,a))}},u=()=>{const t=this[ag]["changeSource"];if(t!==Np){for(const i of this[hg])i.style.opacity="0";return c("pointercancel"),void this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:t}}))}var e=Math.min(1,(performance.now()-o)/i);for(const[i,t]of a.entries())t.x=n[i].x(e),t.y=n[i].y(e);c("pointermove"),e<1?requestAnimationFrame(u):(c("pointerup"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:t}})),document.removeEventListener("visibilitychange",d))},d=()=>{let t=0;"hidden"===document.visibilityState?t=performance.now()-o:o=performance.now()-t};document.addEventListener("visibilitychange",d),c("pointerdown"),requestAnimationFrame(u)}[(i=lg,n=cg,r=hg,s=og,a=yg,o=vg,l=fg,h=mg,c=ag,u=xg,d=_g,p=Eg,f=wg,Ig)](t){const e=this[ed];e.framedFoVDeg=180*t[0]/Math.PI,this[ag].setFieldOfView(e.adjustedFoV(e.framedFoVDeg))}[bg](t){const e=this[ag];if(this[wg]){const{theta:e,phi:i}=this.getCameraOrbit();t[0]=e,t[1]=i,this[wg]=!1}e.changeSource=Up,e.setOrbit(t[0],t[1],t[2])}[Sg](t){this[ag].applyOptions({minimumAzimuthalAngle:t[0],minimumPolarAngle:t[1],minimumRadius:t[2]}),this.jumpCameraToGoal()}[Mg](t){this[ag].applyOptions({maximumAzimuthalAngle:t[0],maximumPolarAngle:t[1],maximumRadius:t[2]}),this[Ag](t[2]),this.jumpCameraToGoal()}[Bg](t){this[ag].applyOptions({minimumFieldOfView:180*t[0]/Math.PI}),this.jumpCameraToGoal()}[Tg](t){t=this[ed].adjustedFoV(180*t[0]/Math.PI);this[ag].applyOptions({maximumFieldOfView:t}),this.jumpCameraToGoal()}[Cg](t){var[t,e,i]=t;this[ad].arRenderer.isPresenting||this[ed].setTarget(t,e,i),this[ag].changeSource=Up,this[ad].arRenderer.updateTarget()}[nd](t,e){if(super[nd](t,e),!this[ad].isPresenting&&this[cd]()){const i=this[ag],n=this[ed],r=performance.now();if(this[mg]&&this.loaded&&r>this[Ju]+this.interactionPromptThreshold&&(this[mg]=!1,this[vg]=r,this[lg].classList.add("visible")),isFinite(this[vg])){const t=(r-this[vg])/5e3%1,e=Vp(t),s=Wp(t);if(this[cg].style.opacity=""+s,e!==this[yg]){const t=e*n.width*.05,r=(e-this[yg])*Math.PI/16;this[cg].style.transform=`translateX(${t}px)`,i.changeSource=Np,i.adjustOrbit(r,0,0),this[yg]=e}}i.update(t,e),n.updateTarget(e)&&this[pg]({type:"change",source:i.changeSource})}}[ug](){this[mg]=!1,this[lg].classList.remove("visible"),this[vg]=1/0}[Ag](t){t=2*Math.max(this[ed].boundingSphere.radius,t);this[ag].updateNearFar(0,t)}[dg](){var{theta:t,phi:e}=this[ag].getCameraSpherical(this[xg]),t=(4+Math.floor((t%rg+sg)/ig))%4,e=Math.floor(e/ng),t=qp[t],e=jp[e];this[Yu]("View from stage "+e+t)}get[Wu](){return super[Wu]+(this.cameraControls?". Use mouse, touch or arrow keys to move.":"")}async[rd](t){const e=this[ag],i=this[ed],n=i.adjustedFoV(i.framedFoVDeg);super[rd](t);t=i.adjustedFoV(i.framedFoVDeg)/n,t=e.getFieldOfView()*(isFinite(t)?t:1);e.updateAspect(this[ed].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),await this.updateComplete,this[ag].setFieldOfView(t),this.jumpCameraToGoal()}[sd](){super[sd](),this[Eg]?this[wg]=!0:this[Eg]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}}return m=pg,g=gg,zp([e({type:Boolean,attribute:"camera-controls"})],A.prototype,"cameraControls",void 0),zp([Rp({intrinsics:$p,observeEffects:!0,updateHandler:bg}),e({type:String,attribute:"camera-orbit",hasChanged:()=>!0})],A.prototype,"cameraOrbit",void 0),zp([Rp({intrinsics:eg,observeEffects:!0,updateHandler:Cg}),e({type:String,attribute:"camera-target",hasChanged:()=>!0})],A.prototype,"cameraTarget",void 0),zp([Rp({intrinsics:Xp,observeEffects:!0,updateHandler:Ig}),e({type:String,attribute:"field-of-view",hasChanged:()=>!0})],A.prototype,"fieldOfView",void 0),zp([Rp({intrinsics:Zp,updateHandler:Sg}),e({type:String,attribute:"min-camera-orbit",hasChanged:()=>!0})],A.prototype,"minCameraOrbit",void 0),zp([Rp({intrinsics:tg,updateHandler:Mg}),e({type:String,attribute:"max-camera-orbit",hasChanged:()=>!0})],A.prototype,"maxCameraOrbit",void 0),zp([Rp({intrinsics:Kp,updateHandler:Bg}),e({type:String,attribute:"min-field-of-view",hasChanged:()=>!0})],A.prototype,"minFieldOfView",void 0),zp([Rp({intrinsics:Xp,updateHandler:Tg}),e({type:String,attribute:"max-field-of-view",hasChanged:()=>!0})],A.prototype,"maxFieldOfView",void 0),zp([e({type:Number,attribute:"interaction-prompt-threshold"})],A.prototype,"interactionPromptThreshold",void 0),zp([e({type:String,attribute:"interaction-prompt"})],A.prototype,"interactionPrompt",void 0),zp([e({type:Number,attribute:"orbit-sensitivity"})],A.prototype,"orbitSensitivity",void 0),zp([e({type:String,attribute:"touch-action"})],A.prototype,"touchAction",void 0),zp([e({type:Boolean,attribute:"disable-zoom"})],A.prototype,"disableZoom",void 0),zp([e({type:Boolean,attribute:"disable-pan"})],A.prototype,"disablePan",void 0),zp([e({type:Boolean,attribute:"disable-tap"})],A.prototype,"disableTap",void 0),zp([e({type:Number,attribute:"interpolation-decay"})],A.prototype,"interpolationDecay",void 0),A})((t=>{var i,n,r,s,a,o,l,h,c,u;class d extends t{constructor(){super(...arguments),this.ar=!1,this.arScale="auto",this.arPlacement="floor",this.arModes="webxr scene-viewer quick-look",this.iosSrc=null,this.xrEnvironment=!1,this[i]=!1,this[n]=this.shadowRoot.querySelector(".ar-button"),this[r]=document.createElement("a"),this[s]=new Set,this[a]=DA,this[o]=!1,this[l]=t=>{t.preventDefault(),this.activateAR()},this[h]=({status:t})=>{t!==Rh&&this[ad].arRenderer.presentedScene!==this[ed]||(this.setAttribute("ar-status",t),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:t}})),t===Rh?this.removeAttribute("ar-tracking"):t===Dh&&this.setAttribute("ar-tracking",Ph))},this[c]=({status:t})=>{this.setAttribute("ar-tracking",t),this.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:t}}))},this[u]=t=>{"_apple_ar_quicklook_button_tapped"==t.data&&this.dispatchEvent(new CustomEvent("quick-look-button-tapped"))}}get canActivateAR(){return this[NA]!==DA}connectedCallback(){super.connectedCallback(),this[ad].arRenderer.addEventListener("status",this[zA]),this.setAttribute("ar-status",Rh),this[ad].arRenderer.addEventListener("tracking",this[VA]),this[OA].addEventListener("message",this[WA])}disconnectedCallback(){super.disconnectedCallback(),this[ad].arRenderer.removeEventListener("status",this[zA]),this[ad].arRenderer.removeEventListener("tracking",this[VA]),this[OA].removeEventListener("message",this[WA])}update(t){super.update(t),t.has("arScale")&&(this[ed].canScale="fixed"!==this.arScale),t.has("arPlacement")&&(this[ed].updateShadow(),this[id]()),t.has("arModes")&&(this[kA]=SA(this.arModes)),(t.has("ar")||t.has("arModes")||t.has("src")||t.has("iosSrc"))&&this[qA]()}async activateAR(){switch(this[NA]){case BA:this[FA]();break;case RA:await this[QA]();break;case TA:this[PA]();break;default:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities")}}async[(i=UA,n=LA,r=OA,s=kA,a=NA,o=GA,l=HA,h=zA,c=VA,u=WA,qA)](){let t=DA;if(this.ar){if(null!=this.src)for(const e of this[kA]){if("webxr"===e&&Do&&!IA&&await this[ad].arRenderer.supportsPresentation()){t=RA;break}if("scene-viewer"===e&&Uo&&!CA){t=TA;break}if("quick-look"===e&&ko){t=BA;break}}t===DA&&null!=this.iosSrc&&ko&&(t=BA)}if(t!==DA)this[LA].classList.add("enabled"),this[LA].addEventListener("click",this[HA]);else if(this[LA].classList.contains("enabled")){this[LA].removeEventListener("click",this[HA]),this[LA].classList.remove("enabled");const t=Qh;this.setAttribute("ar-status",t),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:t}}))}this[NA]=t}async[QA](){console.log("Attempting to present in AR with WebXR..."),await this[jA]();try{this[LA].removeEventListener("click",this[HA]);const t=this[ad]["arRenderer"];t.placeOnWall="wall"===this.arPlacement,await t.present(this[ed],this.xrEnvironment)}catch(t){console.warn("Error while trying to present in AR with WebXR"),console.error(t),await this[ad].arRenderer.stopPresenting(),IA=!0,console.warn("Falling back to next ar-mode"),await this[qA](),this.activateAR()}finally{this[qA]()}}async[jA](){var n;this.loaded||(this[GA]=!0,this[Xu](),n=this,await new Promise(i=>{n.addEventListener("load",function t(e){i(e),n.removeEventListener("load",t)})}),this[GA]=!1)}[hd](){return super[hd]()||this[GA]}[PA](){const t=self.location.toString(),e=new URL(t),i=new URL(this.src,t),n=new URLSearchParams(i.search);if(e.hash="#model-viewer-no-ar-fallback",n.set("mode","ar_preferred"),n.has("disable_occlusion")||n.set("disable_occlusion","true"),"fixed"===this.arScale&&n.set("resizable","false"),"wall"===this.arPlacement&&n.set("enable_vertical_placement","true"),n.has("sound")){const e=new URL(n.get("sound"),t);n.set("sound",e.toString())}if(n.has("link")){const e=new URL(n.get("link"),t);n.set("link",e.toString())}var r=`intent://arvr.google.com/scene-viewer/1.0?${n.toString()+"&file="+encodeURIComponent(i.toString())}#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(e.toString())};end;`;self.addEventListener("hashchange",()=>{"#model-viewer-no-ar-fallback"===self.location.hash&&(CA=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),this[qA]())},{once:!0}),this[OA].setAttribute("href",r),console.log("Attempting to present in AR with Scene Viewer..."),this[OA].click()}async[FA](){const t=!this.iosSrc,e=(this[LA].classList.remove("enabled"),t?await this.prepareUSDZ():this.iosSrc),i=new URL(e,self.location.toString());if(t){const t=self.location.toString(),e=new URL(t),n=new URL(this.src,e);n.hash&&(i.hash=n.hash)}"fixed"===this.arScale&&(i.hash&&(i.hash+="&"),i.hash+="allowsContentScaling=0");const n=this[OA];n.setAttribute("rel","ar");var r=document.createElement("img");n.appendChild(r),n.setAttribute("href",i.toString()),t&&n.setAttribute("download","model.usdz"),console.log("Attempting to present in AR with Quick Look..."),n.click(),n.removeChild(r),t&&URL.revokeObjectURL(e),this[LA].classList.add("enabled")}async prepareUSDZ(){const t=this[od].beginActivity(),{model:e,shadow:i}=(await this[jA](),this[ed]);if(null==e)return"";let n=!1;null!=i&&(n=i.visible,i.visible=!1),t(.2);const r=new mA,s=await r.parse(e),a=new Blob([s],{type:"model/vnd.usdz+zip"}),o=URL.createObjectURL(a);return t(1),null!=i&&(i.visible=n),o}}return bA([e({type:Boolean,attribute:"ar"})],d.prototype,"ar",void 0),bA([e({type:String,attribute:"ar-scale"})],d.prototype,"arScale",void 0),bA([e({type:String,attribute:"ar-placement"})],d.prototype,"arPlacement",void 0),bA([e({type:String,attribute:"ar-modes"})],d.prototype,"arModes",void 0),bA([e({type:String,attribute:"ios-src"})],d.prototype,"iosSrc",void 0),bA([e({type:Boolean,attribute:"xr-environment"})],d.prototype,"xrEnvironment",void 0),d})((t=>{var i,n,r,s,a,o,l,h;class c extends t{constructor(...t){super(...t),this.poster=null,this.reveal=Dg,this.loading=Lg,this[i]=!1,this[n]=!1,this[r]=this.shadowRoot.querySelector(".slot.poster"),this[s]=this.shadowRoot.querySelector("#default-poster"),this[a]=this.shadowRoot.querySelector("#default-progress-bar > .bar"),this[o]=this[Ug].getAttribute("aria-label"),this[l]=(e=>{let i=null;var t=(...t)=>{null==i&&(e(...t),i=self.setTimeout(()=>i=null,100))};return t.flush=()=>{null!=i&&(self.clearTimeout(i),i=null)},t})(t=>{const e=this[Pg].parentNode;requestAnimationFrame(()=>{this[Pg].style.transform=`scaleX(${t})`,0===t&&(e.removeChild(this[Pg]),e.appendChild(this[Pg])),1===t?this[Pg].classList.add("hide"):this[Pg].classList.remove("hide")})}),this[h]=t=>{t=t.detail.totalProgress;1===t&&(this[Gg].flush(),this.loaded&&(this[Ng]||this.reveal===Dg)&&this[kg]()),this[Gg](t),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:t}}))};var t=self.ModelViewerElement||{},e=t.dracoDecoderLocation||"https://www.gstatic.com/draco/versioned/decoders/1.4.1/",e=(Vc.setDRACODecoderLocation(e),t.ktx2TranscoderLocation||"https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/");Vc.setKTX2TranscoderLocation(e),t.meshoptDecoderLocation&&Vc.setMeshoptDecoderLocation(t.meshoptDecoderLocation)}static set dracoDecoderLocation(t){Vc.setDRACODecoderLocation(t)}static get dracoDecoderLocation(){return Vc.getDRACODecoderLocation()}static set ktx2TranscoderLocation(t){Vc.setKTX2TranscoderLocation(t)}static get ktx2TranscoderLocation(){return Vc.getKTX2TranscoderLocation()}static set meshoptDecoderLocation(t){Vc.setMeshoptDecoderLocation(t)}static get meshoptDecoderLocation(){return Vc.getMeshoptDecoderLocation()}static mapURLs(t){gu.singleton.loader[Gc].manager.setURLModifier(t)}dismissPoster(){this.loaded?this[kg]():(this[Ng]=!0,this[Xu]())}showPoster(){const t=this[Fg];if(!t.classList.contains("show")){t.classList.add("show"),this[Zu].classList.remove("show");const i=this[Ug];i.removeAttribute("tabindex"),i.removeAttribute("aria-hidden");var e=this.modelIsVisible;this[Og]=!1,this[Vu](e)}}getDimensions(){return ud(this[ed].size)}getBoundingBoxCenter(){return ud(this[ed].boundingBox.getCenter(new V))}connectedCallback(){super.connectedCallback(),this.showPoster(),this[od].addEventListener("progress",this[zg])}disconnectedCallback(){super.disconnectedCallback(),this[od].removeEventListener("progress",this[zg])}async updated(t){super.updated(t),t.has("poster")&&null!=this.poster&&(this[Ug].style.backgroundImage=`url(${this.poster})`),t.has("alt")&&this[Ug].setAttribute("aria-label",this[qu]),(t.has("reveal")||t.has("loading"))&&this[Xu]()}[(i=Og,n=Ng,r=Fg,s=Ug,a=Pg,o=Hg,l=Gg,h=zg,hd)](){return!!this.src&&(this[Ng]||this.loading===Qg||this.reveal===Dg&&this[zu])}[kg](){this[Ng]=!1;const t=this[Fg];if(t.classList.contains("show")){t.classList.remove("show"),this[Zu].classList.add("show");var e=this.modelIsVisible,e=(this[Og]=!0,this[Vu](e),this.getRootNode());e&&e.activeElement===this&&this[Zu].focus();const i=this[Ug];i.setAttribute("aria-hidden","true"),i.tabIndex=-1,this.dispatchEvent(new CustomEvent("poster-dismissed"))}}[cd](){return super[cd]()&&this[Og]}}return Rg([e({type:String})],c.prototype,"poster",void 0),Rg([e({type:String})],c.prototype,"reveal",void 0),Rg([e({type:String})],c.prototype,"loading",void 0),c})((t=>{var i;class n extends t{constructor(...t){super(t),this.autoplay=!1,this.animationName=void 0,this.animationCrossfadeDuration=300,this[i]=!0,this[ed].subscribeMixerEvent("loop",t=>{t=t.action._loopCount;this.dispatchEvent(new CustomEvent("loop",{detail:{count:t}}))}),this[ed].subscribeMixerEvent("finished",()=>{this[md]=!0,this.dispatchEvent(new CustomEvent("finished"))})}get availableAnimations(){return this.loaded?this[ed].animationNames:[]}get duration(){return this[ed].duration}get paused(){return this[md]}get currentTime(){return this[ed].animationTime}set currentTime(t){this[ed].animationTime=t,this[id]()}get timeScale(){return this[ed].animationTimeScale}set timeScale(t){this[ed].animationTimeScale=t}pause(){this[md]||(this[md]=!0,this.dispatchEvent(new CustomEvent("pause")))}play(t){0<this.availableAnimations.length&&(this[md]=!1,this[gd](t),this.dispatchEvent(new CustomEvent("play")))}[(i=md,sd)](){super[sd](),this[md]=!0,this.autoplay&&this.play()}[nd](t,e){super[nd](t,e),this[md]||!this[cd]()&&!this[ad].isPresenting||(this[ed].updateAnimation(e/1e3),this[id]())}updated(t){super.updated(t),t.has("autoplay")&&this.autoplay&&this.play(),t.has("animationName")&&this[gd]()}[gd](t=fd){var e=null!=(e=t.repetitions)?e:1/0,t=t.pingpong?2202:1===e?2200:2201;this[ed].playAnimation(this.animationName,this.animationCrossfadeDuration/1e3,t,e),this[md]&&(this[ed].updateAnimation(0),this[id]())}}return pd([e({type:Boolean})],n.prototype,"autoplay",void 0),pd([e({type:String,attribute:"animation-name"})],n.prototype,"animationName",void 0),pd([e({type:Number,attribute:"animation-crossfade-duration"})],n.prototype,"animationCrossfadeDuration",void 0),n})((t=>{var e;const i=Symbol("endPolyfillCoordination");return e=i,class extends t{constructor(){super(...arguments),this[e]=null}connectedCallback(){super.connectedCallback&&super.connectedCallback(),null==this[i]&&(this[i]=(t=>{if(null==t.shadowRoot||t.hasAttribute("data-js-focus-visible"))return()=>{};if(self.applyFocusVisiblePolyfill)return self.applyFocusVisiblePolyfill(t.shadowRoot),()=>{};{const e=()=>{self.applyFocusVisiblePolyfill(t.shadowRoot)};return self.addEventListener("focus-visible-polyfill-ready",e,{once:!0}),()=>{self.removeEventListener("focus-visible-polyfill-ready",e)}}})(this))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),null!=this[i]&&(this[i](),this[i]=null)}}})(Ad)))))))));function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}customElements.define("model-viewer",xv),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Splide=e()}(this,function(){"use strict";var p="(prefers-reduced-motion: reduce)",O=4,rt=5,e={CREATED:1,MOUNTED:2,IDLE:3,MOVING:O,SCROLLING:rt,DRAGGING:6,DESTROYED:7};function B(t){t.length=0}function r(t,e,i){return Array.prototype.slice.call(t,e,i)}function R(t){return t.bind.apply(t,[null].concat(r(arguments,1)))}function st(){}var m=setTimeout;function f(t){return requestAnimationFrame(t)}function i(t,e){return typeof e===t}function at(t){return!a(t)&&i("object",t)}var s=Array.isArray,b=R(i,"function"),k=R(i,"string"),ot=R(i,"undefined");function a(t){return null===t}function A(t){try{return t instanceof(t.ownerDocument.defaultView||window).HTMLElement}catch(t){return!1}}function v(t){return s(t)?t:[t]}function g(t,e){v(t).forEach(e)}function y(t,e){return-1<t.indexOf(e)}function x(t,e){return t.push.apply(t,v(e)),t}function T(e,t,i){e&&g(t,function(t){t&&e.classList[i?"add":"remove"](t)})}function D(t,e){T(t,k(e)?e.split(" "):e,!0)}function E(t,e){g(e,t.appendChild.bind(t))}function C(t,i){g(t,function(t){var e=(i||t).parentNode;e&&e.insertBefore(t,i)})}function lt(t,e){return A(t)&&(t.msMatchesSelector||t.matches).call(t,e)}function S(t,e){t=t?r(t.children):[];return e?t.filter(function(t){return lt(t,e)}):t}function ht(t,e){return e?S(t,e)[0]:t.firstElementChild}var w=Object.keys;function _(e,i,t){e&&(t?w(e).reverse():w(e)).forEach(function(t){"__proto__"!==t&&i(e[t],t)})}function ct(n){return r(arguments,1).forEach(function(i){_(i,function(t,e){n[e]=i[e]})}),n}function d(i){return r(arguments,1).forEach(function(t){_(t,function(t,e){s(t)?i[e]=t.slice():at(t)?i[e]=d({},at(i[e])?i[e]:{},t):i[e]=t})}),i}function ut(e,t){g(t||w(e),function(t){delete e[t]})}function P(t,i){g(t,function(e){g(i,function(t){e&&e.removeAttribute(t)})})}function L(i,e,n){at(e)?_(e,function(t,e){L(i,e,t)}):g(i,function(t){a(n)||""===n?P(t,e):t.setAttribute(e,String(n))})}function N(t,e,i){t=document.createElement(t);return e&&(k(e)?D:L)(t,e),i&&E(i,t),t}function M(t,e,i){if(ot(i))return getComputedStyle(t)[e];a(i)||(t.style[e]=""+i)}function dt(t,e){M(t,"display",e)}function pt(t){t.setActive&&t.setActive()||t.focus({preventScroll:!0})}function I(t,e){return t.getAttribute(e)}function ft(t,e){return t&&t.classList.contains(e)}function Q(t){return t.getBoundingClientRect()}function F(t){g(t,function(t){t&&t.parentNode&&t.parentNode.removeChild(t)})}function mt(t){return ht((new DOMParser).parseFromString(t,"text/html").body)}function G(t,e){t.preventDefault(),e&&(t.stopPropagation(),t.stopImmediatePropagation())}function gt(t,e){return t&&t.querySelector(e)}function At(t,e){return e?r(t.querySelectorAll(e)):[]}function U(t,e){T(t,e,!1)}function vt(t){return t.timeStamp}function H(t){return k(t)?t:t?t+"px":""}var yt="splide",n="data-"+yt;function _t(t,e){if(!t)throw new Error("["+yt+"] "+(e||""))}var V=Math.min,bt=Math.max,xt=Math.floor,St=Math.ceil,z=Math.abs;function wt(t,e,i){return z(t-e)<i}function Et(t,e,i,n){var r=V(e,i),e=bt(e,i);return n?r<t&&t<e:r<=t&&t<=e}function W(t,e,i){var n=V(e,i),e=bt(e,i);return V(bt(n,t),e)}function Ct(t){return(0<t)-(t<0)}function Tt(e,t){return g(t,function(t){e=e.replace("%s",""+t)}),e}function Mt(t){return t<10?"0"+t:""+t}var It={};function Bt(){var o=[];function i(t,i,n){g(t,function(e){e&&g(i,function(t){t.split(" ").forEach(function(t){t=t.split(".");n(e,t[0],t[1])})})})}return{bind:function(t,e,s,a){i(t,e,function(t,e,i){var n="addEventListener"in t,r=n?t.removeEventListener.bind(t,e,s,a):t.removeListener.bind(t,s);n?t.addEventListener(e,s,a):t.addListener(s),o.push([t,e,i,s,r])})},unbind:function(t,e,r){i(t,e,function(e,i,n){o=o.filter(function(t){return!!(t[0]!==e||t[1]!==i||t[2]!==n||r&&t[3]!==r)||(t[4](),!1)})})},dispatch:function(t,e,i){var n;return"function"==typeof CustomEvent?n=new CustomEvent(e,{bubbles:!0,detail:i}):(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!1,i),t.dispatchEvent(n),n},destroy:function(){o.forEach(function(t){t[4]()}),B(o)}}}var q="mounted",j="move",Dt="moved",Pt="click",Lt="active",Rt="inactive",kt="visible",Nt="hidden",X="refresh",Y="updated",Qt="resize",Ft="resized",Ot="scroll",K="scrolled",o="destroy",Gt="navigation:mounted",Ut="autoplay:play",Ht="autoplay:pause",Vt="lazyload:loaded",zt="sk",Wt="sh";function J(t){var i=t?t.event.bus:document.createDocumentFragment(),n=Bt();return t&&t.event.on(o,n.destroy),ct(n,{bus:i,on:function(t,e){n.bind(i,v(t).join(" "),function(t){e.apply(e,s(t.detail)?t.detail:[])})},off:R(n.unbind,i),emit:function(t){n.dispatch(i,t,r(arguments,1))}})}function qt(e,t,i,n){var r,s,a=Date.now,o=0,l=!0,h=0;function c(){if(!l){if(o=e?V((a()-r)/e,1):1,i&&i(o),1<=o&&(t(),r=a(),n&&++h>=n))return u();s=f(c)}}function u(){l=!0}function d(){s&&cancelAnimationFrame(s),l=!(s=o=0)}return{start:function(t){t||d(),r=a()-(t?o*e:0),l=!1,s=f(c)},rewind:function(){r=a(),o=0,i&&i(o)},pause:u,cancel:d,set:function(t){e=t},isPaused:function(){return l}}}function l(t){var e=t;return{set:function(t){e=t},is:function(t){return y(v(t),e)}}}var t="Arrow",jt=t+"Left",Xt=t+"Right",h={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:["ArrowUp",Xt],ArrowRight:["ArrowDown",jt]};var $="role",Z="tabindex",t="aria-",Yt=t+"controls",Kt=t+"current",c=t+"selected",tt=t+"label",Jt=t+"labelledby",$t=t+"hidden",Zt=t+"orientation",te=t+"roledescription",u=t+"atomic",ee=[$,Z,"disabled",Yt,Kt,tt,Jt,$t,Zt,te],t=yt+"__",ie=yt,ne=t+"track",re=t+"list",se=t+"slide",ae=se+"--clone",oe=se+"__container",le=t+"arrows",he=t+"arrow",ce=he+"--prev",ue=he+"--next",de=t+"pagination",pe=de+"__page",fe=t+"progress"+"__bar",me=t+"toggle",ge=t+"sr",et="is-active",Ae="is-prev",ve="is-next",ye="is-visible",_e="is-loading",be="is-focus-in",xe="is-overflow",Se=[et,ye,Ae,ve,_e,be,xe];var we="touchstart mousedown",Ee="touchmove mousemove",Ce="touchend touchcancel mouseup click";var it="slide",nt="loop",Te="fade";function Me(r,n,e,s){var a,t=J(r),i=t.on,o=t.emit,l=t.bind,h=r.Components,c=r.root,u=r.options,d=u.isNavigation,p=u.updateOnMove,f=u.i18n,m=u.pagination,g=u.slideFocus,A=h.Direction.resolve,v=I(s,"style"),y=I(s,tt),_=-1<e,b=ht(s,"."+oe);function x(){var t=r.splides.map(function(t){t=t.splide.Components.Slides.getAt(n);return t?t.slide.id:""}).join(" ");L(s,tt,Tt(f.slideX,(_?e:n)+1)),L(s,Yt,t),L(s,$,g?"button":""),g&&P(s,te)}function S(){a||w()}function w(){var t,e,i;a||(t=r.index,(i=E())!==ft(s,et)&&(T(s,et,i),L(s,Kt,d&&i||""),o(i?Lt:Rt,C)),i=function(){if(r.is(Te))return E();var t=Q(h.Elements.track),e=Q(s),i=A("left",!0),n=A("right",!0);return xt(t[i])<=St(e[i])&&xt(e[n])<=St(t[n])}(),e=!i&&(!E()||_),r.state.is([O,rt])||L(s,$t,e||""),L(At(s,u.focusableNodes||""),Z,e?-1:""),g&&L(s,Z,e?-1:0),i!==ft(s,ye)&&(T(s,ye,i),o(i?kt:Nt,C)),i||document.activeElement!==s||(e=h.Slides.getAt(r.index))&&pt(e.slide),T(s,Ae,n===t-1),T(s,ve,n===t+1))}function E(){var t=r.index;return t===n||u.cloneStatus&&t===e}var C={index:n,slideIndex:e,slide:s,container:b,isClone:_,mount:function(){_||(s.id=c.id+"-slide"+Mt(n+1),L(s,$,m?"tabpanel":"group"),L(s,te,f.slide),L(s,tt,y||Tt(f.slideLabel,[n+1,r.length]))),l(s,"click",R(o,Pt,C)),l(s,"keydown",R(o,zt,C)),i([Dt,Wt,K],w),i(Gt,x),p&&i(j,S)},destroy:function(){a=!0,t.destroy(),U(s,Se),P(s,ee),L(s,"style",v),L(s,tt,y||"")},update:w,style:function(t,e,i){M(i&&b||s,t,e)},isWithin:function(t,e){return t=z(t-n),(t=_||!u.rewind&&!r.is(nt)?t:V(t,r.length-t))<=e}};return C}var Ie=n+"-interval";var Be={passive:!1,capture:!0};var De={Spacebar:" ",Right:Xt,Left:jt,Up:"ArrowUp",Down:"ArrowDown"};function Pe(t){return t=k(t)?t:t.key,De[t]||t}var Le=n+"-lazy",Re=Le+"-srcset",ke="["+Le+"], ["+Re+"]";var Ne=[" ","Enter"];var Qe=Object.freeze({__proto__:null,Media:function(n,t,r){var s=n.state,e=r.breakpoints||{},a=r.reducedMotion||{},i=Bt(),o=[];function l(t){t&&i.destroy()}function h(t,e){e=matchMedia(e);i.bind(e,"change",c),o.push([t,e])}function c(){var t=s.is(7),e=r.direction,i=o.reduce(function(t,e){return d(t,e[1].matches?e[0]:{})},{});ut(r),u(i),r.destroy?n.destroy("completely"===r.destroy):t?(l(!0),n.mount()):e!==r.direction&&n.refresh()}function u(t,e,i){d(r,t),e&&d(Object.getPrototypeOf(r),t),!i&&s.is(1)||n.emit(Y,r)}return{setup:function(){var i="min"===r.mediaQuery;w(e).sort(function(t,e){return i?+t-+e:+e-+t}).forEach(function(t){h(e[t],"("+(i?"min":"max")+"-width:"+t+"px)")}),h(a,p),c()},destroy:l,reduce:function(t){matchMedia(p).matches&&(t?d(r,a):ut(r,w(a)))},set:u}},Direction:function(t,e,r){return{resolve:function(t,e,i){var n="rtl"!==(i=i||r.direction)||e?"ttb"===i?0:-1:1;return h[t]&&h[t][n]||t.replace(/width|left|right/i,function(t,e){t=h[t.toLowerCase()][n]||t;return 0<e?t.charAt(0).toUpperCase()+t.slice(1):t})},orient:function(t){return t*("rtl"===r.direction?1:-1)}}},Elements:function(t,e,i){var n,r,s,a=J(t),o=a.on,l=a.bind,h=t.root,c=i.i18n,u={},d=[],p=[],f=[];function m(){n=v("."+ne),r=ht(n,"."+re),_t(n&&r,"A track/list element is missing."),x(d,S(r,"."+se+":not(."+ae+")")),_({arrows:le,pagination:de,prev:ce,next:ue,bar:fe,toggle:me},function(t,e){u[e]=v("."+t)}),ct(u,{root:h,track:n,list:r,slides:d});var t=h.id||function(t){return""+t+Mt(It[t]=(It[t]||0)+1)}(yt),e=i.role;h.id=t,n.id=n.id||t+"-track",r.id=r.id||t+"-list",!I(h,$)&&"SECTION"!==h.tagName&&e&&L(h,$,e),L(h,te,c.carousel),L(r,$,"presentation"),A()}function g(t){var e=ee.concat("style");B(d),U(h,p),U(n,f),P([n,r],e),P(h,t?e:["style",te])}function A(){U(h,p),U(n,f),p=y(ie),f=y(ne),D(h,p),D(n,f),L(h,tt,i.label),L(h,Jt,i.labelledby)}function v(t){t=gt(h,t);return t&&function(t,e){if(b(t.closest))return t.closest(e);for(var i=t;i&&1===i.nodeType&&!lt(i,e);)i=i.parentElement;return i}(t,"."+ie)===h?t:void 0}function y(t){return[t+"--"+i.type,t+"--"+i.direction,i.drag&&t+"--draggable",i.isNavigation&&t+"--nav",t===ie&&et]}return ct(u,{setup:m,mount:function(){o(X,g),o(X,m),o(Y,A),l(document,we+" keydown",function(t){s="keydown"===t.type},{capture:!0}),l(h,"focusin",function(){T(h,be,!!s)})},destroy:g})},Slides:function(n,r,s){var t=J(n),e=t.on,a=t.emit,o=t.bind,l=(t=r.Elements).slides,h=t.list,c=[];function i(){l.forEach(function(t,e){d(t,e,-1)})}function u(){f(function(t){t.destroy()}),B(c)}function d(t,e,i){e=Me(n,e,i,t);e.mount(),c.push(e),c.sort(function(t,e){return t.index-e.index})}function p(t){return t?m(function(t){return!t.isClone}):c}function f(t,e){p(e).forEach(t)}function m(e){return c.filter(b(e)?e:function(t){return k(e)?lt(t.slide,e):y(v(e),t.index)})}return{mount:function(){i(),e(X,u),e(X,i)},destroy:u,update:function(){f(function(t){t.update()})},register:d,get:p,getIn:function(t){var e=r.Controller,i=e.toIndex(t),n=e.hasFocus()?1:s.perPage;return m(function(t){return Et(t.index,i,i+n-1)})},getAt:function(t){return m(t)[0]},add:function(t,r){g(t,function(t){var e,i,n;A(t=k(t)?mt(t):t)&&((e=l[r])?C(t,e):E(h,t),D(t,s.classes.slide),e=t,i=R(a,Qt),e=At(e,"img"),(n=e.length)?e.forEach(function(t){o(t,"load error",function(){--n||i()})}):i())}),a(X)},remove:function(t){F(m(t).map(function(t){return t.slide})),a(X)},forEach:f,filter:m,style:function(e,i,n){f(function(t){t.style(e,i,n)})},getLength:function(t){return(t?l:c).length},isEnough:function(){return c.length>s.perPage}}},Layout:function(e,t,i){var n,r,s,a=(h=J(e)).on,o=h.bind,l=h.emit,h=t.Slides,c=t.Direction.resolve,u=(t=t.Elements).root,d=t.track,p=t.list,f=h.getAt,m=h.style;function g(){n="ttb"===i.direction,M(u,"maxWidth",H(i.width)),M(d,c("paddingLeft"),v(!1)),M(d,c("paddingRight"),v(!0)),A(!0)}function A(t){var e=Q(u);!t&&r.width===e.width&&r.height===e.height||(M(d,"height",function(){var t="";n&&(_t(t=y(),"height or heightRatio is missing."),t="calc("+t+" - "+v(!1)+" - "+v(!0)+")");return t}()),m(c("marginRight"),H(i.gap)),m("width",i.autoWidth?null:H(i.fixedWidth)||(n?"":_())),m("height",H(i.fixedHeight)||(n?i.autoHeight?null:_():y()),!0),r=e,l(Ft),s!==(s=C())&&(T(u,xe,s),l("overflow",s)))}function v(t){var e=i.padding,t=c(t?"right":"left");return e&&H(e[t]||(at(e)?0:e))||"0px"}function y(){return H(i.height||Q(p).width*i.heightRatio)}function _(){var t=H(i.gap);return"calc((100%"+(t&&" + "+t)+")/"+(i.perPage||1)+(t&&" - "+t)+")"}function b(){return Q(p)[c("width")]}function x(t,e){t=f(t||0);return t?Q(t.slide)[c("width")]+(e?0:E()):0}function S(t,e){var i,t=f(t);return t?(t=Q(t.slide)[c("right")],i=Q(p)[c("left")],z(t-i)+(e?0:E())):0}function w(t){return S(e.length-1)-S(0)+x(0,t)}function E(){var t=f(0);return t&&parseFloat(M(t.slide,c("marginRight")))||0}function C(){return e.is(Te)||w(!0)>b()}return{mount:function(){var t,e,i;g(),o(window,"resize load",(t=R(l,Qt),i=qt(e||0,t,null,1),function(){i.isPaused()&&i.start()})),a([Y,X],g),a(Qt,A)},resize:A,listSize:b,slideSize:x,sliderSize:w,totalSize:S,getPadding:function(t){return parseFloat(M(d,c("padding"+(t?"Right":"Left"))))||0},isOverflow:C}},Clones:function(o,i,l){var e,n=J(o),t=n.on,h=i.Elements,c=i.Slides,r=i.Direction.resolve,u=[];function s(){if(t(X,d),t([Y,Qt],p),e=f()){var r=e,s=c.get().slice(),a=s.length;if(a){for(;s.length<r;)x(s,s);x(s.slice(-r),s.slice(0,r)).forEach(function(t,e){var i=e<r,n=function(t,e){t=t.cloneNode(!0);return D(t,l.classes.clone),t.id=o.root.id+"-clone"+Mt(e+1),t}(t.slide,e);i?C(n,s[0].slide):E(h.list,n),x(u,n),c.register(n,e-r+(i?0:a),t.index)})}i.Layout.resize(!0)}}function d(){a(),s()}function a(){F(u),B(u),n.destroy()}function p(){var t=f();e!==t&&(e<t||!t)&&n.emit(X)}function f(){var t,e=l.clones;return o.is(nt)?ot(e)&&(e=(t=l[r("fixedWidth")]&&i.Layout.slideSize(0))&&St(Q(h.track)[r("width")]/t)||l[r("autoWidth")]&&o.length||2*l.perPage):e=0,e}return{mount:s,destroy:a}},Move:function(n,o,r){var a,t=J(n),e=t.on,l=t.emit,h=n.state.set,s=(t=o.Layout).slideSize,i=t.getPadding,c=t.totalSize,u=t.listSize,d=t.sliderSize,p=(t=o.Direction).resolve,f=t.orient,m=(t=o.Elements).list,g=t.track;function A(){o.Controller.isBusy()||(o.Scroll.cancel(),v(n.index),o.Slides.update())}function v(t){y(S(t,!0))}function y(t,e){n.is(Te)||(e=e?t:function(t){{var e,i;n.is(nt)&&(e=x(t),i=e>o.Controller.getEnd(),(e<0||i)&&(t=_(t,i)))}return t}(t),M(m,"transform","translate"+p("X")+"("+e+"px)"),t!==e&&l(Wt))}function _(t,e){var i=t-E(e),n=d();return t-=f(n*(St(z(i)/n)||1))*(e?1:-1)}function b(){y(w(),!0),a.cancel()}function x(t){for(var e=o.Slides.get(),i=0,n=1/0,r=0;r<e.length;r++){var s=e[r].index,a=z(S(s,!0)-t);if(!(a<=n))break;n=a,i=s}return i}function S(t,e){var i=f(c(t-1)-(t=t,"center"===(i=r.focus)?(u()-s(t,!0))/2:+i*s(t)||0));return e?(t=i,r.trimSpace&&n.is(it)?W(t,0,f(d(!0)-u())):t):i}function w(){var t=p("left");return Q(m)[t]-Q(g)[t]+f(i(!1))}function E(t){return S(t?o.Controller.getEnd():0,!!r.trimSpace)}return{mount:function(){a=o.Transition,e([q,Ft,Y,X],A)},move:function(t,e,i,n){var r,s;t!==e&&(r=i<t,s=f(_(w(),r)),r?0<=s:s<=m[p("scrollWidth")]-Q(g)[p("width")])&&(b(),y(_(w(),i<t),!0)),h(O),l(j,e,i,t),a.start(e,function(){h(3),l(Dt,e,i,t),n&&n()})},jump:v,translate:y,shift:_,cancel:b,toIndex:x,toPosition:S,getPosition:w,getLimit:E,exceededLimit:function(t,e){e=ot(e)?w():e;var i=!0!==t&&f(e)<f(E(!1)),t=!1!==t&&f(e)>f(E(!0));return i||t},reposition:A}},Controller:function(r,s,a){var o,l,h,c,t=J(r),e=t.on,i=t.emit,u=s.Move,d=u.getPosition,n=u.getLimit,p=u.toPosition,f=(t=s.Slides).isEnough,m=t.getLength,g=a.omitEnd,A=r.is(nt),v=r.is(it),y=R(E,!1),_=R(E,!0),b=a.start||0,x=b;function S(){l=m(!0),h=a.perMove,c=a.perPage,o=M();var t=W(b,0,g?o:l-1);t!==b&&(b=t,u.reposition())}function w(){o!==M()&&i("ei")}function E(t,e){var i=h||(P()?1:c),i=C(b+i*(t?-1:1),b,!(h||P()));return-1===i&&v&&!wt(d(),n(!t),1)?t?0:o:e?i:T(i)}function C(t,e,i){var n;return f()||P()?((n=function(t){if(v&&"move"===a.trimSpace&&t!==b)for(var e=d();e===p(t,!0)&&Et(t,0,r.length-1,!a.rewind);)t<b?--t:++t;return t}(t))!==t&&(e=t,t=n,i=!1),t<0||o<t?t=h||!Et(0,t,e,!0)&&!Et(o,e,t,!0)?A?i?t<0?-(l%c||c):l:t:a.rewind?t<0?o:0:-1:I(B(t)):i&&t!==e&&(t=I(B(e)+(t<e?-1:1)))):t=-1,t}function T(t){return A?(t+l)%l||0:t}function M(){for(var t=l-(P()||A&&h?1:c);g&&0<t--;)if(p(l-1,!0)!==p(t,!0)){t++;break}return W(t,0,l-1)}function I(t){return W(P()?t:c*t,0,o)}function B(t){return P()?V(t,o):xt((o<=t?l-1:t)/c)}function D(t){t!==b&&(x=b,b=t)}function P(){return!ot(a.focus)||a.isNavigation}function L(){return r.state.is([O,rt])&&!!a.waitForTransition}return{mount:function(){S(),e([Y,X,"ei"],S),e(Ft,w)},go:function(t,e,i){var n;L()||-1<(n=T(t=function(t){var e=b;{var i,n;k(t)?(n=t.match(/([+\-<>])(\d+)?/)||[],i=n[1],n=n[2],"+"===i||"-"===i?e=C(b+ +(""+i+(+n||1)),b):">"===i?e=n?I(+n):y(!0):"<"===i&&(e=_(!0))):e=A?t:W(t,0,o)}return e}(t)))&&(e||n!==b)&&(D(n),u.move(t,n,x,i))},scroll:function(t,e,i,n){s.Scroll.scroll(t,e,i,function(){var t=T(u.toIndex(d()));D(g?V(t,o):t),n&&n()})},getNext:y,getPrev:_,getAdjacent:E,getEnd:M,setIndex:D,getIndex:function(t){return t?x:b},toIndex:I,toPage:B,toDest:function(t){return t=u.toIndex(t),v?W(t,0,o):t},hasFocus:P,isBusy:L}},Arrows:function(r,t,e){var i,n,s=J(r),a=s.on,o=s.bind,l=s.emit,h=e.classes,c=e.i18n,u=t.Elements,d=t.Controller,p=u.arrows,f=u.track,m=p,g=u.prev,A=u.next,v={};function y(){var t=e.arrows;!t||g&&A||(m=p||N("div",h.arrows),g=S(!0),A=S(!1),i=!0,E(m,[g,A]),p||C(m,f)),g&&A&&(ct(v,{prev:g,next:A}),dt(m,t?"":"none"),D(m,n=le+"--"+e.direction),t&&(a([q,Dt,X,K,"ei"],w),o(A,"click",R(x,">")),o(g,"click",R(x,"<")),w(),L([g,A],Yt,f.id),l("arrows:mounted",g,A))),a(Y,_)}function _(){b(),y()}function b(){s.destroy(),U(m,n),i?(F(p?[g,A]:m),g=A=null):P([g,A],ee)}function x(t){d.go(t,!0)}function S(t){return mt('<button class="'+h.arrow+" "+(t?h.prev:h.next)+'" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" width="40" height="40" focusable="false"><path d="'+(e.arrowPath||"m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z")+'" />')}function w(){var t,e,i,n;g&&A&&(n=r.index,t=d.getPrev(),e=d.getNext(),i=-1<t&&n<t?c.last:c.prev,n=-1<e&&e<n?c.first:c.next,g.disabled=t<0,A.disabled=e<0,L(g,tt,i),L(A,tt,n),l("arrows:updated",g,A,t,e))}return{arrows:v,mount:y,destroy:b,update:w}},Autoplay:function(t,e,i){var n,r,s=J(t),a=s.on,o=s.bind,l=s.emit,h=qt(i.interval,t.go.bind(t,">"),function(t){var e=u.bar;e&&M(e,"width",100*t+"%"),l("autoplay:playing",t)}),c=h.isPaused,u=e.Elements,d=(s=e.Elements).root,p=s.toggle,f=i.autoplay,m="pause"===f;function g(){c()&&e.Slides.isEnough()&&(h.start(!i.resetProgress),r=n=m=!1,y(),l(Ut))}function A(t){m=!!(t=void 0===t?!0:t),y(),c()||(h.pause(),l(Ht))}function v(){m||(n||r?A(!1):g())}function y(){p&&(T(p,et,!m),L(p,tt,i.i18n[m?"play":"pause"]))}function _(t){t=e.Slides.getAt(t);h.set(t&&+I(t.slide,Ie)||i.interval)}return{mount:function(){f&&(i.pauseOnHover&&o(d,"mouseenter mouseleave",function(t){n="mouseenter"===t.type,v()}),i.pauseOnFocus&&o(d,"focusin focusout",function(t){r="focusin"===t.type,v()}),p&&o(p,"click",function(){m?g():A(!0)}),a([j,Ot,X],h.rewind),a(j,_),p&&L(p,Yt,u.track.id),m||g(),y())},destroy:h.cancel,play:g,pause:A,isPaused:c}},Cover:function(t,e,i){var n=J(t).on;function r(i){e.Slides.forEach(function(t){var e=ht(t.container||t.slide,"img");e&&e.src&&s(i,e,t)})}function s(t,e,i){i.style("background",t?'center/cover no-repeat url("'+e.src+'")':"",!0),dt(e,t?"none":"")}return{mount:function(){i.cover&&(n(Vt,R(s,!0)),n([q,Y,X],R(r,!0)))},destroy:R(r,!1)}},Scroll:function(t,o,s){var l,h,e=J(t),i=e.on,c=e.emit,u=t.state.set,d=o.Move,p=d.getPosition,a=d.getLimit,f=d.exceededLimit,m=d.translate,g=t.is(it),A=1;function v(t,e,i,n,r){var s,a=p(),i=(b(),!i||g&&f()||(i=o.Layout.sliderSize(),s=Ct(t)*i*xt(z(t)/i)||0,t=d.toPosition(o.Controller.toDest(t%i))+s),wt(a,t,1));A=1,e=i?0:e||bt(z(t-a)/1.5,800),h=n,l=qt(e,y,R(_,a,t,r),1),u(rt),c(Ot),l.start()}function y(){u(3),h&&h(),c(K)}function _(t,e,i,n){var r=p(),n=(t+(e-t)*(e=n,(t=s.easingFunc)?t(e):1-Math.pow(1-e,4))-r)*A;m(r+n),g&&!i&&f()&&(A*=.6,z(n)<10&&v(a(f(!0)),600,!1,h,!0))}function b(){l&&l.cancel()}function n(){l&&!l.isPaused()&&(b(),y())}return{mount:function(){i(j,b),i([Y,X],n)},destroy:b,scroll:v,cancel:n}},Drag:function(a,r,o){var l,e,s,h,c,u,d,p,t=J(a),i=t.on,f=t.emit,m=t.bind,g=t.unbind,A=a.state,v=r.Move,y=r.Scroll,_=r.Controller,b=r.Elements.track,x=r.Media.reduce,n=(t=r.Direction).resolve,S=t.orient,w=v.getPosition,E=v.exceededLimit,C=!1;function N(){var t=o.drag;k(!t),h="free"===t}function Q(t){var e,i,n;u=!1,d||(e=R(t),i=t.target,n=o.noDrag,lt(i,"."+pe+", ."+he)||n&&lt(i,n)||!e&&t.button||(_.isBusy()?G(t,!0):(p=e?b:window,c=A.is([O,rt]),s=null,m(p,Ee,T,Be),m(p,Ce,M,Be),v.cancel(),y.cancel(),I(t))))}function T(t){var e,i,n,r,s;A.is(6)||(A.set(6),f("drag")),t.cancelable&&(c?(v.translate(l+B(t)/(C&&a.is(it)?5:1)),s=200<D(t),e=C!==(C=E()),(s||e)&&I(t),u=!0,f("dragging"),G(t)):z(B(s=t))>z(B(s,!0))&&(e=t,i=o.dragMinThreshold,n=at(i),r=n&&i.mouse||0,n=(n?i.touch:+i)||10,c=z(B(e))>(R(e)?n:r),G(t)))}function M(t){var e,i,n;A.is(6)&&(A.set(3),f("dragged")),c&&(i=function(t){return w()+Ct(t)*V(z(t)*(o.flickPower||600),h?1/0:r.Layout.listSize()*(o.flickMaxPages||1))}(e=function(t){if(a.is(nt)||!C){var e=D(t);if(e&&e<200)return B(t)/e}return 0}(e=t)),n=o.rewind&&o.rewindByDrag,x(!1),h?_.scroll(i,0,o.snap):a.is(Te)?_.go(S(Ct(e))<0?n?"<":"-":n?">":"+"):a.is(it)&&C&&n?_.go(E(!0)?">":"<"):_.go(_.toDest(i),!0),x(!0),G(t)),g(p,Ee,T),g(p,Ce,M),c=!1}function F(t){!d&&u&&G(t,!0)}function I(t){s=e,e=t,l=w()}function B(t,e){return L(t,e)-L(P(t),e)}function D(t){return vt(t)-vt(P(t))}function P(t){return e===t&&s||e}function L(t,e){return(R(t)?t.changedTouches[0]:t)["page"+n(e?"Y":"X")]}function R(t){return"undefined"!=typeof TouchEvent&&t instanceof TouchEvent}function k(t){d=t}return{mount:function(){m(b,Ee,st,Be),m(b,Ce,st,Be),m(b,we,Q,Be),m(b,"click",F,{capture:!0}),m(b,"dragstart",G),i([q,Y],N)},disable:k,isDragging:function(){return c}}},Keyboard:function(e,t,i){var n,r,s=J(e),a=s.on,o=s.bind,l=s.unbind,h=e.root,c=t.Direction.resolve;function u(){var t=i.keyboard;t&&(n="global"===t?window:h,o(n,"keydown",f))}function d(){l(n,"keydown")}function p(){var t=r;r=!0,m(function(){r=t})}function f(t){r||((t=Pe(t))===c(jt)?e.go("<"):t===c(Xt)&&e.go(">"))}return{mount:function(){u(),a(Y,d),a(Y,u),a(j,p)},destroy:d,disable:function(t){r=t}}},LazyLoad:function(i,t,r){var e=J(i),n=e.on,s=e.off,a=e.bind,o=e.emit,l="sequential"===r.lazyLoad,h=[Dt,K],c=[];function u(){B(c),t.Slides.forEach(function(n){At(n.slide,ke).forEach(function(t){var e=I(t,Le),i=I(t,Re);e===t.src&&i===t.srcset||(e=r.classes.spinner,e=ht(i=t.parentElement,"."+e)||N("span",e,i),c.push([t,n,e]),t.src||dt(t,"none"))})}),l?m():(s(h),n(h,d),d())}function d(){(c=c.filter(function(t){var e=r.perPage*((r.preloadPages||1)+1)-1;return!t[1].isWithin(i.index,e)||p(t)})).length||s(h)}function p(t){var e=t[0];D(t[1].slide,_e),a(e,"load error",R(f,t)),L(e,"src",I(e,Le)),L(e,"srcset",I(e,Re)),P(e,Le),P(e,Re)}function f(t,e){var i=t[0],n=t[1];U(n.slide,_e),"error"!==e.type&&(F(t[2]),dt(i,""),o(Vt,i,n),o(Qt)),l&&m()}function m(){c.length&&p(c.shift())}return{mount:function(){r.lazyLoad&&(u(),n(X,u))},destroy:R(B,c),check:d}},Pagination:function(u,t,d){var p,f,e=J(u),m=e.on,g=e.emit,A=e.bind,v=t.Slides,y=t.Elements,_=t.Controller,b=_.hasFocus,n=_.getIndex,a=_.go,o=t.Direction.resolve,x=y.pagination,S=[];function w(){p&&(F(x?r(p.children):p),U(p,f),B(S),p=null),e.destroy()}function E(t){a(">"+t,!0)}function C(t,e){var i=S.length,n=Pe(e),r=T(),s=-1,r=(n===o(Xt,!1,r)?s=++t%i:n===o(jt,!1,r)?s=(--t+i)%i:"Home"===n?s=0:"End"===n&&(s=i-1),S[s]);r&&(pt(r.button),a(">"+s),G(e,!0))}function T(){return d.paginationDirection||d.direction}function M(t){return S[_.toPage(t)]}function I(){var t,e=M(n(!0)),i=M(n());e&&(U(t=e.button,et),P(t,c),L(t,Z,-1)),i&&(D(t=i.button,et),L(t,c,!0),L(t,Z,"")),g("pagination:updated",{list:p,items:S},e,i)}return{items:S,mount:function t(){w(),m([Y,X,"ei"],t);var e=d.pagination;if(x&&dt(x,e?"":"none"),e){m([j,Ot,K],I);var e=u.length,i=d.classes,n=d.i18n,r=d.perPage,s=b()?_.getEnd()+1:St(e/r);D(p=x||N("ul",i.pagination,y.track.parentElement),f=de+"--"+T()),L(p,$,"tablist"),L(p,tt,n.select),L(p,Zt,"ttb"===T()?"vertical":"");for(var a=0;a<s;a++){var o=N("li",null,p),l=N("button",{class:i.page,type:"button"},o),h=v.getIn(a).map(function(t){return t.slide.id}),c=!b()&&1<r?n.pageX:n.slideX;A(l,"click",R(E,a)),d.paginationKeyboard&&A(l,"keydown",R(C,a)),L(o,$,"presentation"),L(l,$,"tab"),L(l,Yt,h.join(" ")),L(l,tt,Tt(c,a+1)),L(l,Z,-1),S.push({li:o,button:l,page:a})}I(),g("pagination:mounted",{list:p,items:S},M(u.index))}},destroy:w,getAt:M,update:I}},Sync:function(i,t,e){var n=e.isNavigation,r=e.slideFocus,s=[];function a(){var t,e;i.splides.forEach(function(t){t.isParent||(l(i,t.splide),l(t.splide,i))}),n&&(t=J(i),(e=t.on)(Pt,c),e(zt,u),e([q,Y],h),s.push(t),t.emit(Gt,i.splides))}function o(){s.forEach(function(t){t.destroy()}),B(s)}function l(t,n){t=J(t);t.on(j,function(t,e,i){n.go(n.is(nt)?i:t)}),s.push(t)}function h(){L(t.Elements.list,Zt,"ttb"===e.direction?"vertical":"")}function c(t){i.go(t.index)}function u(t,e){y(Ne,Pe(e))&&(c(t),G(e))}return{setup:R(t.Media.set,{slideFocus:ot(r)?n:r},!0),mount:a,destroy:o,remount:function(){o(),a()}}},Wheel:function(a,o,l){var t=J(a).bind,h=0;function e(t){var e,i,n,r,s;t.cancelable&&(e=(s=t.deltaY)<0,i=vt(t),n=l.wheelMinThreshold||0,r=l.wheelSleep||0,z(s)>n&&r<i-h&&(a.go(e?"<":">"),h=i),s=e,l.releaseWheel&&!a.state.is(O)&&-1===o.Controller.getAdjacent(s)||G(t))}return{mount:function(){l.wheel&&t(o.Elements.track,"wheel",e,Be)}}},Live:function(t,e,i){var n=J(t).on,r=e.Elements.track,s=i.live&&!i.isNavigation,a=N("span",ge),o=qt(90,R(l,!1));function l(t){L(r,"aria-busy",t),t?(E(r,a),o.start()):(F(a),o.cancel())}function h(t){s&&L(r,"aria-live",t?"off":"polite")}return{mount:function(){s&&(h(!e.Autoplay.isPaused()),L(r,u,!0),a.textContent="…",n(Ut,R(h,!0)),n(Ht,R(h,!1)),n([Dt,K],R(l,!0)))},disable:h,destroy:function(){P(r,["aria-live",u,"aria-busy"]),F(a)}}}}),Fe={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:{slide:se,clone:ae,arrows:le,arrow:he,prev:ce,next:ue,pagination:de,page:pe,spinner:t+"spinner"},i18n:{prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function Oe(t,e,i){var n=e.Slides;function r(){n.forEach(function(t){t.style("transform","translateX(-"+100*t.index+"%)")})}return{mount:function(){J(t).on([q,X],r)},start:function(t,e){n.style("transition","opacity "+i.speed+"ms "+i.easing),m(e)},cancel:st}}function Ge(s,t,a){var o,l=t.Move,h=t.Controller,c=t.Scroll,e=t.Elements.list,u=R(M,e,"transition");function i(){u(""),c.cancel()}return{mount:function(){J(s).bind(e,"transitionend",function(t){t.target===e&&o&&(i(),o())})},start:function(t,e){var i=l.toPosition(t,!0),n=l.getPosition(),r=function(t){var e=a.rewindSpeed;if(s.is(it)&&e){var i=h.getIndex(!0),n=h.getEnd();if(0===i&&n<=t||n<=i&&0===t)return e}return a.speed}(t);1<=z(i-n)&&1<=r?a.useScroll?c.scroll(i,r,!1,e):(u("transform "+r+"ms "+a.easing),l.translate(i,!0),o=e):(l.jump(t),e())},cancel:i}}t=function(){function i(t,e){this.event=J(),this.Components={},this.state=l(1),this.splides=[],this._o={},this._E={};t=k(t)?gt(document,t):t;_t(t,t+" is invalid."),e=d({label:I(this.root=t,tt)||"",labelledby:I(t,Jt)||""},Fe,i.defaults,e||{});try{d(e,JSON.parse(I(t,n)))}catch(t){_t(!1,"Invalid JSON")}this._o=Object.create(d({},e))}var t=i.prototype;return t.mount=function(t,e){var i=this,n=this.state,r=this.Components;return _t(n.is([1,7]),"Already mounted!"),n.set(1),this._C=r,this._T=e||this._T||(this.is(Te)?Oe:Ge),this._E=t||this._E,_(ct({},Qe,this._E,{Transition:this._T}),function(t,e){t=t(i,r,i._o);(r[e]=t).setup&&t.setup()}),_(r,function(t){t.mount&&t.mount()}),this.emit(q),D(this.root,"is-initialized"),n.set(3),this.emit("ready"),this},t.sync=function(t){return this.splides.push({splide:t}),t.splides.push({splide:this,isParent:!0}),this.state.is(3)&&(this._C.Sync.remount(),t.Components.Sync.remount()),this},t.go=function(t){return this._C.Controller.go(t),this},t.on=function(t,e){return this.event.on(t,e),this},t.off=function(t){return this.event.off(t),this},t.emit=function(t){var e;return(e=this.event).emit.apply(e,[t].concat(r(arguments,1))),this},t.add=function(t,e){return this._C.Slides.add(t,e),this},t.remove=function(t){return this._C.Slides.remove(t),this},t.is=function(t){return this._o.type===t},t.refresh=function(){return this.emit(X),this},t.destroy=function(e){void 0===e&&(e=!0);var t=this.event,i=this.state;return i.is(1)?J(this).on("ready",this.destroy.bind(this,e)):(_(this._C,function(t){t.destroy&&t.destroy(e)},!0),t.emit(o),t.destroy(),e&&B(this.splides),i.set(7)),this},_createClass(i,[{key:"options",get:function(){return this._o},set:function(t){this._C.Media.set(t,!0,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}]),i}();return t.defaults={},t.STATES=e,t}),function(){function e(t,e){return function(){return t.apply(e,arguments)}}var n,t,i,l,r,a=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};function s(){}function o(){this.keys=[],this.values=[]}function h(){"undefined"!=typeof console&&null!==console&&console.warn("MutationObserver is not supported by your browser."),"undefined"!=typeof console&&null!==console&&console.warn("WOW.js cannot detect dom mutations, please call .sync() after loading new content.")}function c(t){null==t&&(t={}),this.scrollCallback=e(this.scrollCallback,this),this.scrollHandler=e(this.scrollHandler,this),this.resetAnimation=e(this.resetAnimation,this),this.start=e(this.start,this),this.scrolled=!0,this.config=this.util().extend(t,this.defaults),this.animationNameCache=new i,this.wowEvent=this.util().createEvent(this.config.boxClass)}s.prototype.extend=function(t,e){var i,n;for(i in e)n=e[i],null==t[i]&&(t[i]=n);return t},s.prototype.isMobile=function(t){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)},s.prototype.createEvent=function(t,e,i,n){var r;return null==e&&(e=!1),null==i&&(i=!1),null==n&&(n=null),null!=document.createEvent?(r=document.createEvent("CustomEvent")).initCustomEvent(t,e,i,n):null!=document.createEventObject?(r=document.createEventObject()).eventType=t:r.eventName=t,r},s.prototype.emitEvent=function(t,e){return null!=t.dispatchEvent?t.dispatchEvent(e):e in(null!=t)?t[e]():"on"+e in(null!=t)?t["on"+e]():void 0},s.prototype.addEvent=function(t,e,i){return null!=t.addEventListener?t.addEventListener(e,i,!1):null!=t.attachEvent?t.attachEvent("on"+e,i):t[e]=i},s.prototype.removeEvent=function(t,e,i){return null!=t.removeEventListener?t.removeEventListener(e,i,!1):null!=t.detachEvent?t.detachEvent("on"+e,i):delete t[e]},s.prototype.innerHeight=function(){return"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight},t=s,i=this.WeakMap||this.MozWeakMap||(o.prototype.get=function(t){for(var e,i=this.keys,n=e=0,r=i.length;e<r;n=++e)if(i[n]===t)return this.values[n]},o.prototype.set=function(t,e){for(var i,n=this.keys,r=i=0,s=n.length;i<s;r=++i)if(n[r]===t)return void(this.values[r]=e);return this.keys.push(t),this.values.push(e)},o),n=this.MutationObserver||this.WebkitMutationObserver||this.MozMutationObserver||(h.notSupported=!0,h.prototype.observe=function(){},h),l=this.getComputedStyle||function(i,t){return this.getPropertyValue=function(t){var e;return r.test(t="float"===t?"styleFloat":t)&&t.replace(r,function(t,e){return e.toUpperCase()}),(null!=(e=i.currentStyle)?e[t]:void 0)||null},this},r=/(\-([a-z]){1})/g,this.WOW=(c.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0,callback:null},c.prototype.init=function(){var t;return this.element=window.document.documentElement,"interactive"===(t=document.readyState)||"complete"===t?this.start():this.util().addEvent(document,"DOMContentLoaded",this.start),this.finished=[]},c.prototype.start=function(){var r,t,e,i,a;if(this.stopped=!1,this.boxes=function(){for(var t=this.element.querySelectorAll("."+this.config.boxClass),e=[],i=0,n=t.length;i<n;i++)r=t[i],e.push(r);return e}.call(this),this.all=function(){for(var t=this.boxes,e=[],i=0,n=t.length;i<n;i++)r=t[i],e.push(r);return e}.call(this),this.boxes.length)if(this.disabled())this.resetStyle();else for(t=0,e=(i=this.boxes).length;t<e;t++)r=i[t],this.applyStyle(r,!0);if(this.disabled()||(this.util().addEvent(window,"scroll",this.scrollHandler),this.util().addEvent(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live)return new n((a=this,function(t){for(var r,s,e=[],i=0,n=t.length;i<n;i++)s=t[i],e.push(function(){for(var t=s.addedNodes||[],e=[],i=0,n=t.length;i<n;i++)r=t[i],e.push(this.doSync(r));return e}.call(a));return e})).observe(document.body,{childList:!0,subtree:!0})},c.prototype.stop=function(){if(this.stopped=!0,this.util().removeEvent(window,"scroll",this.scrollHandler),this.util().removeEvent(window,"resize",this.scrollHandler),null!=this.interval)return clearInterval(this.interval)},c.prototype.sync=function(t){if(n.notSupported)return this.doSync(this.element)},c.prototype.doSync=function(t){var e,i,n,r,s;if(1===(t=null==t?this.element:t).nodeType){for(s=[],i=0,n=(r=(t=t.parentNode||t).querySelectorAll("."+this.config.boxClass)).length;i<n;i++)e=r[i],a.call(this.all,e)<0?(this.boxes.push(e),this.all.push(e),this.stopped||this.disabled()?this.resetStyle():this.applyStyle(e,!0),s.push(this.scrolled=!0)):s.push(void 0);return s}},c.prototype.show=function(t){return this.applyStyle(t),t.className=t.className+" "+this.config.animateClass,null!=this.config.callback&&this.config.callback(t),this.util().emitEvent(t,this.wowEvent),this.util().addEvent(t,"animationend",this.resetAnimation),this.util().addEvent(t,"oanimationend",this.resetAnimation),this.util().addEvent(t,"webkitAnimationEnd",this.resetAnimation),this.util().addEvent(t,"MSAnimationEnd",this.resetAnimation),t},c.prototype.applyStyle=function(t,e){var i,n=t.getAttribute("data-wow-duration"),r=t.getAttribute("data-wow-delay"),s=t.getAttribute("data-wow-iteration");return this.animate((i=this,function(){return i.customStyle(t,e,n,r,s)}))},c.prototype.animate="requestAnimationFrame"in window?function(t){return window.requestAnimationFrame(t)}:function(t){return t()},c.prototype.resetStyle=function(){for(var t,e=this.boxes,i=[],n=0,r=e.length;n<r;n++)t=e[n],i.push(t.style.visibility="visible");return i},c.prototype.resetAnimation=function(t){if(0<=t.type.toLowerCase().indexOf("animationend"))return(t=t.target||t.srcElement)instanceof SVGElement?t.setAttribute("class",t.getAttribute("class").replace(this.config.animateClass,"").trim()):t.className=t.className.replace(this.config.animateClass,"").trim()},c.prototype.customStyle=function(t,e,i,n,r){return e&&this.cacheAnimationName(t),t.style.visibility=e?"hidden":"visible",i&&this.vendorSet(t.style,{animationDuration:i}),n&&this.vendorSet(t.style,{animationDelay:n}),r&&this.vendorSet(t.style,{animationIterationCount:r}),this.vendorSet(t.style,{animationName:e?"none":this.cachedAnimationName(t)}),t},c.prototype.vendors=["moz","webkit"],c.prototype.vendorSet=function(r,t){var s,a,o,e=[];for(s in t)a=t[s],r[""+s]=a,e.push(function(){for(var t=this.vendors,e=[],i=0,n=t.length;i<n;i++)o=t[i],e.push(r[""+o+s.charAt(0).toUpperCase()+s.substr(1)]=a);return e}.call(this));return e},c.prototype.vendorCSS=function(t,e){for(var i,n=l(t),r=n.getPropertyCSSValue(e),s=this.vendors,a=0,o=s.length;a<o;a++)i=s[a],r=r||n.getPropertyCSSValue("-"+i+"-"+e);return r},c.prototype.animationName=function(e){var i;try{i=this.vendorCSS(e,"animation-name").cssText}catch(t){i=l(e).getPropertyValue("animation-name")}return"none"===i?"":i},c.prototype.cacheAnimationName=function(t){return this.animationNameCache.set(t,this.animationName(t))},c.prototype.cachedAnimationName=function(t){return this.animationNameCache.get(t)},c.prototype.scrollHandler=function(){return this.scrolled=!0},c.prototype.scrollCallback=function(){var r;if(this.scrolled&&(this.scrolled=!1,this.boxes=function(){for(var t=this.boxes,e=[],i=0,n=t.length;i<n;i++)(r=t[i])&&(this.isVisible(r)?this.show(r):e.push(r));return e}.call(this),!this.boxes.length&&!this.config.live))return this.stop()},c.prototype.offsetTop=function(t){for(var e;void 0===t.offsetTop;)t=t.parentNode;for(e=t.offsetTop;t=t.offsetParent;)e+=t.offsetTop;return e},c.prototype.isVisible=function(t){var e=t.getAttribute("data-wow-offset")||this.config.offset,i=window.pageYOffset,e=i+Math.min(this.element.clientHeight,this.util().innerHeight())-e,n=this.offsetTop(t),t=n+t.clientHeight;return n<=e&&i<=t},c.prototype.util=function(){return null!=this._util?this._util:this._util=new t},c.prototype.disabled=function(){return!this.config.mobile&&this.util().isMobile(navigator.userAgent)},c)}.call(this);export{xv as ModelViewerElement};